/*
 RequireJS order 1.0.5 Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/jrburke/requirejs for details
*/
/**
 * @license
 * Video.js 6.12.1 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/master/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/master/LICENSE>
 */
/**
 * Copyright 2013 vtt.js Contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/*! @name videojs-contrib-quality-levels @version 2.0.9 @license Apache-2.0 */
/**
 * @videojs/http-streaming
 * @version 1.4.1
 * @copyright 2018 Brightcove, Inc
 * @license Apache-2.0
 */
/*
 * pkcs7.pad
 * https://github.com/brightcove/pkcs7
 *
 * Copyright (c) 2014 Brightcove
 * Licensed under the apache2 license.
 */
/**
 * @file aes.js
 *
 * This file contains an adaptation of the AES decryption algorithm
 * from the Standford Javascript Cryptography Library. That work is
 * covered by the following copyright and permissions notice:
 *
 * Copyright 2009-2010 Emily Stark, Mike Hamburg, Dan Boneh.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above
 *    copyright notice, this list of conditions and the following
 *    disclaimer in the documentation and/or other materials provided
 *    with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE AUTHORS ``AS IS'' AND ANY EXPRESS OR
 * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR
 * BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
 * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE
 * OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN
 * IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * The views and conclusions contained in the software and documentation
 * are those of the authors and should not be interpreted as representing
 * official policies, either expressed or implied, of the authors.
 */
/**
 * mux.js
 *
 * Copyright (c) 2015 Brightcove
 * All rights reserved.
 *
 * Functions that generate fragmented MP4s suitable for use with Media
 * Source Extensions.
 */
/**
 * mux.js
 *
 * Copyright (c) 2014 Brightcove
 * All rights reserved.
 *
 * A lightweight readable stream implemention that handles event dispatching.
 * Objects that inherit from streams should call init in their constructors.
 */
/**
 * mux.js
 *
 * Copyright (c) 2015 Brightcove
 * All rights reserved.
 *
 * Reads in-band caption information from a video elementary
 * stream. Captions must follow the CEA-708 standard for injection
 * into an MPEG-2 transport streams.
 * @see https://en.wikipedia.org/wiki/CEA-708
 * @see https://www.gpo.gov/fdsys/pkg/CFR-2007-title47-vol1/pdf/CFR-2007-title47-vol1-sec15-119.pdf
 */
/*! @name mpd-parser @version 0.7.0 @license Apache-2.0 */
/**
 * mux.js
 *
 * Copyright (c) 2015 Brightcove
 * All rights reserved.
 *
 * Functions that generate fragmented MP4s suitable for use with Media
 * Source Extensions.
 */
/**
 * mux.js
 *
 * Copyright (c) 2014 Brightcove
 * All rights reserved.
 *
 * A lightweight readable stream implemention that handles event dispatching.
 * Objects that inherit from streams should call init in their constructors.
 */
/**
 * mux.js
 *
 * Copyright (c) 2015 Brightcove
 * All rights reserved.
 *
 * Reads in-band caption information from a video elementary
 * stream. Captions must follow the CEA-708 standard for injection
 * into an MPEG-2 transport streams.
 * @see https://en.wikipedia.org/wiki/CEA-708
 * @see https://www.gpo.gov/fdsys/pkg/CFR-2007-title47-vol1/pdf/CFR-2007-title47-vol1-sec15-119.pdf
 */
/**
 * mux.js
 *
 * Copyright (c) 2016 Brightcove
 * All rights reserved.
 *
 * Utilities to detect basic properties and metadata about Aac data.
 */
/*
 * pkcs7.pad
 * https://github.com/brightcove/pkcs7
 *
 * Copyright (c) 2014 Brightcove
 * Licensed under the apache2 license.
 */
/**
 * @file aes.js
 *
 * This file contains an adaptation of the AES decryption algorithm
 * from the Standford Javascript Cryptography Library. That work is
 * covered by the following copyright and permissions notice:
 *
 * Copyright 2009-2010 Emily Stark, Mike Hamburg, Dan Boneh.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 * 1. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above
 *    copyright notice, this list of conditions and the following
 *    disclaimer in the documentation and/or other materials provided
 *    with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE AUTHORS ``AS IS'' AND ANY EXPRESS OR
 * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR
 * BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
 * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE
 * OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN
 * IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * The views and conclusions contained in the software and documentation
 * are those of the authors and should not be interpreted as representing
 * official policies, either expressed or implied, of the authors.
 */
/*!    SWFObject v2.3.20130521 <http://github.com/swfobject/swfobject>
    is released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
*/
! function() {
    function e(e) {
        var t, n = e.currentTarget || e.srcElement;
        if ("load" === e.type || a.test(n.readyState)) {
            for (e = n.getAttribute("data-requiremodule"), o[e] = !0, e = 0;
                (t = s[e]) && o[t.name]; e++) t.req([t.name], t.onLoad);
            e > 0 && s.splice(0, e), setTimeout(function() {
                n.parentNode.removeChild(n)
            }, 15)
        }
    }

    function t(e) {
        var t, n;
        for (e.setAttribute("data-orderloaded", "loaded"), e = 0;
            (n = l[e]) && ((t = u[n]) && "loaded" === t.getAttribute("data-orderloaded")); e++) delete u[n], require.addScriptToDom(t);
        e > 0 && l.splice(0, e)
    }
    var n = "undefined" != typeof document && "undefined" != typeof window && document.createElement("script"),
        i = n && (n.async || window.opera && "[object Opera]" === Object.prototype.toString.call(window.opera) || "MozAppearance" in document.documentElement.style),
        r = n && "uninitialized" === n.readyState,
        a = /^(complete|loaded)$/,
        s = [],
        o = {},
        u = {},
        l = [],
        n = null;
    define("order", {
        version: "1.0.5",
        load: function(n, a, o, c) {
            var d;
            a.nameToUrl ? (d = a.nameToUrl(n, null), require.s.skipAsync[d] = !0, i || c.isBuild ? a([n], o) : r ? (c = require.s.contexts._, !c.urlFetched[d] && !c.loaded[n] && (c.urlFetched[d] = !0, require.resourcesReady(!1), c.scriptCount += 1, d = require.attach(d, c, n, null, null, t), u[n] = d, l.push(n)), a([n], o)) : a.specified(n) ? a([n], o) : (s.push({
                name: n,
                req: a,
                onLoad: o
            }), require.attach(d, null, n, e, "script/cache"))) : a([n], o)
        }
    })
}(),
function(e, t) {
    "object" == typeof exports && "undefined" != typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define("videojs", t) : e.videojs = t()
}(this, function() {
    function e(e, t) {
        return t = {
            exports: {}
        }, e(t, t.exports), t.exports
    }

    function t(e, t) {
        Qt(e).forEach(function(n) {
            return t(e[n], n)
        })
    }

    function n(e, t) {
        var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0;
        return Qt(e).reduce(function(n, i) {
            return t(n, e[i], i)
        }, n)
    }

    function i(e) {
        for (var n = arguments.length, i = Array(n > 1 ? n - 1 : 0), r = 1; n > r; r++) i[r - 1] = arguments[r];
        return Object.assign ? Object.assign.apply(Object, [e].concat(i)) : (i.forEach(function(n) {
            n && t(n, function(t, n) {
                e[n] = t
            })
        }), e)
    }

    function r(e) {
        return !!e && "object" === ("undefined" == typeof e ? "undefined" : zt(e))
    }

    function a(e) {
        return r(e) && "[object Object]" === $t.call(e) && e.constructor === Object
    }

    function s(e) {
        return e.replace(/\n\r?\s*/g, "")
    }

    function o(e, t) {
        if (!e || !t) return "";
        if ("function" == typeof mt.getComputedStyle) {
            var n = mt.getComputedStyle(e);
            return n ? n[t] : ""
        }
        return e.currentStyle[t] || ""
    }

    function u(e) {
        return "string" == typeof e && /\S/.test(e)
    }

    function l(e) {
        if (/\s/.test(e)) throw new Error("class has illegal whitespace characters")
    }

    function c(e) {
        return new RegExp("(^|\\s)" + e + "($|\\s)")
    }

    function d() {
        return bt === mt.document && "undefined" != typeof bt.createElement
    }

    function h(e) {
        return r(e) && 1 === e.nodeType
    }

    function p() {
        try {
            return mt.parent !== mt.self
        } catch (e) {
            return !0
        }
    }

    function f(e) {
        return function(t, n) {
            if (!u(t)) return bt[e](null);
            u(n) && (n = bt.querySelector(n));
            var i = h(n) ? n : bt;
            return i[e] && i[e](t)
        }
    }

    function m() {
        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "div",
            t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
            n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {},
            i = arguments[3],
            r = bt.createElement(e);
        return Object.getOwnPropertyNames(t).forEach(function(e) {
            var n = t[e]; - 1 !== e.indexOf("aria-") || "role" === e || "type" === e ? (tn.warn(nn(rn, e, n)), r.setAttribute(e, n)) : "textContent" === e ? g(r, n) : r[e] = n
        }), Object.getOwnPropertyNames(n).forEach(function(e) {
            r.setAttribute(e, n[e])
        }), i && M(r, i), r
    }

    function g(e, t) {
        return "undefined" == typeof e.textContent ? e.innerText = t : e.textContent = t, e
    }

    function v(e, t) {
        t.firstChild ? t.insertBefore(e, t.firstChild) : t.appendChild(e)
    }

    function y(e, t) {
        return l(t), e.classList ? e.classList.contains(t) : c(t).test(e.className)
    }

    function _(e, t) {
        return e.classList ? e.classList.add(t) : y(e, t) || (e.className = (e.className + " " + t).trim()), e
    }

    function b(e, t) {
        return e.classList ? e.classList.remove(t) : (l(t), e.className = e.className.split(/\s+/).filter(function(e) {
            return e !== t
        }).join(" ")), e
    }

    function T(e, t, n) {
        var i = y(e, t);
        return "function" == typeof n && (n = n(e, t)), "boolean" != typeof n && (n = !i), n !== i ? (n ? _(e, t) : b(e, t), e) : void 0
    }

    function S(e, t) {
        Object.getOwnPropertyNames(t).forEach(function(n) {
            var i = t[n];
            null === i || "undefined" == typeof i || i === !1 ? e.removeAttribute(n) : e.setAttribute(n, i === !0 ? "" : i)
        })
    }

    function k(e) {
        var t = {},
            n = ",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";
        if (e && e.attributes && e.attributes.length > 0)
            for (var i = e.attributes, r = i.length - 1; r >= 0; r--) {
                var a = i[r].name,
                    s = i[r].value;
                ("boolean" == typeof e[a] || -1 !== n.indexOf("," + a + ",")) && (s = null !== s ? !0 : !1), t[a] = s
            }
        return t
    }

    function w(e, t) {
        return e.getAttribute(t)
    }

    function C(e, t, n) {
        e.setAttribute(t, n)
    }

    function E(e, t) {
        e.removeAttribute(t)
    }

    function A() {
        bt.body.focus(), bt.onselectstart = function() {
            return !1
        }
    }

    function L() {
        bt.onselectstart = function() {
            return !0
        }
    }

    function I(e) {
        if (e && e.getBoundingClientRect && e.parentNode) {
            var t = e.getBoundingClientRect(),
                n = {};
            return ["bottom", "height", "left", "right", "top", "width"].forEach(function(e) {
                void 0 !== t[e] && (n[e] = t[e])
            }), n.height || (n.height = parseFloat(o(e, "height"))), n.width || (n.width = parseFloat(o(e, "width"))), n
        }
    }

    function P(e) {
        var t = void 0;
        if (e.getBoundingClientRect && e.parentNode && (t = e.getBoundingClientRect()), !t) return {
            left: 0,
            top: 0
        };
        var n = bt.documentElement,
            i = bt.body,
            r = n.clientLeft || i.clientLeft || 0,
            a = mt.pageXOffset || i.scrollLeft,
            s = t.left + a - r,
            o = n.clientTop || i.clientTop || 0,
            u = mt.pageYOffset || i.scrollTop,
            l = t.top + u - o;
        return {
            left: Math.round(s),
            top: Math.round(l)
        }
    }

    function x(e, t) {
        var n = {},
            i = P(e),
            r = e.offsetWidth,
            a = e.offsetHeight,
            s = i.top,
            o = i.left,
            u = t.pageY,
            l = t.pageX;
        return t.changedTouches && (l = t.changedTouches[0].pageX, u = t.changedTouches[0].pageY), n.y = Math.max(0, Math.min(1, (s - u + a) / a)), n.x = Math.max(0, Math.min(1, (l - o) / r)), n
    }

    function D(e) {
        return r(e) && 3 === e.nodeType
    }

    function U(e) {
        for (; e.firstChild;) e.removeChild(e.firstChild);
        return e
    }

    function O(e) {
        return "function" == typeof e && (e = e()), (Array.isArray(e) ? e : [e]).map(function(e) {
            return "function" == typeof e && (e = e()), h(e) || D(e) ? e : "string" == typeof e && /\S/.test(e) ? bt.createTextNode(e) : void 0
        }).filter(function(e) {
            return e
        })
    }

    function M(e, t) {
        return O(t).forEach(function(t) {
            return e.appendChild(t)
        }), e
    }

    function R(e, t) {
        return M(U(e), t)
    }

    function j(e) {
        return void 0 === e.button && void 0 === e.buttons ? !0 : 0 === e.button && void 0 === e.buttons ? !0 : 9 === Nt ? !0 : 0 !== e.button || 1 !== e.buttons ? !1 : !0
    }

    function N() {
        return un++
    }

    function B(e) {
        var t = e[cn];
        return t || (t = e[cn] = N()), ln[t] || (ln[t] = {}), ln[t]
    }

    function F(e) {
        var t = e[cn];
        return t ? !!Object.getOwnPropertyNames(ln[t]).length : !1
    }

    function V(e) {
        var t = e[cn];
        if (t) {
            delete ln[t];
            try {
                delete e[cn]
            } catch (n) {
                e.removeAttribute ? e.removeAttribute(cn) : e[cn] = null
            }
        }
    }

    function H(e, t) {
        var n = B(e);
        0 === n.handlers[t].length && (delete n.handlers[t], e.removeEventListener ? e.removeEventListener(t, n.dispatcher, !1) : e.detachEvent && e.detachEvent("on" + t, n.dispatcher)), Object.getOwnPropertyNames(n.handlers).length <= 0 && (delete n.handlers, delete n.dispatcher, delete n.disabled), 0 === Object.getOwnPropertyNames(n).length && V(e)
    }

    function q(e, t, n, i) {
        n.forEach(function(n) {
            e(t, n, i)
        })
    }

    function z(e) {
        function t() {
            return !0
        }

        function n() {
            return !1
        }
        if (!e || !e.isPropagationStopped) {
            var i = e || mt.event;
            e = {};
            for (var r in i) "layerX" !== r && "layerY" !== r && "keyLocation" !== r && "webkitMovementX" !== r && "webkitMovementY" !== r && ("returnValue" === r && i.preventDefault || (e[r] = i[r]));
            if (e.target || (e.target = e.srcElement || bt), e.relatedTarget || (e.relatedTarget = e.fromElement === e.target ? e.toElement : e.fromElement), e.preventDefault = function() {
                i.preventDefault && i.preventDefault(), e.returnValue = !1, i.returnValue = !1, e.defaultPrevented = !0
            }, e.defaultPrevented = !1, e.stopPropagation = function() {
                i.stopPropagation && i.stopPropagation(), e.cancelBubble = !0, i.cancelBubble = !0, e.isPropagationStopped = t
            }, e.isPropagationStopped = n, e.stopImmediatePropagation = function() {
                i.stopImmediatePropagation && i.stopImmediatePropagation(), e.isImmediatePropagationStopped = t, e.stopPropagation()
            }, e.isImmediatePropagationStopped = n, null !== e.clientX && void 0 !== e.clientX) {
                var a = bt.documentElement,
                    s = bt.body;
                e.pageX = e.clientX + (a && a.scrollLeft || s && s.scrollLeft || 0) - (a && a.clientLeft || s && s.clientLeft || 0), e.pageY = e.clientY + (a && a.scrollTop || s && s.scrollTop || 0) - (a && a.clientTop || s && s.clientTop || 0)
            }
            e.which = e.charCode || e.keyCode, null !== e.button && void 0 !== e.button && (e.button = 1 & e.button ? 0 : 4 & e.button ? 1 : 2 & e.button ? 2 : 0)
        }
        return e
    }

    function W(e, t, n) {
        if (Array.isArray(t)) return q(W, e, t, n);
        var i = B(e);
        if (i.handlers || (i.handlers = {}), i.handlers[t] || (i.handlers[t] = []), n.guid || (n.guid = N()), i.handlers[t].push(n), i.dispatcher || (i.disabled = !1, i.dispatcher = function(t, n) {
            if (!i.disabled) {
                t = z(t);
                var r = i.handlers[t.type];
                if (r)
                    for (var a = r.slice(0), s = 0, o = a.length; o > s && !t.isImmediatePropagationStopped(); s++) try {
                        a[s].call(e, t, n)
                    } catch (u) {
                        tn.error(u)
                    }
            }
        }), 1 === i.handlers[t].length)
            if (e.addEventListener) {
                var r = !1;
                dn && hn.indexOf(t) > -1 && (r = {
                    passive: !0
                }), e.addEventListener(t, i.dispatcher, r)
            } else e.attachEvent && e.attachEvent("on" + t, i.dispatcher)
    }

    function G(e, t, n) {
        if (F(e)) {
            var i = B(e);
            if (i.handlers) {
                if (Array.isArray(t)) return q(G, e, t, n);
                var r = function(e, t) {
                    i.handlers[t] = [], H(e, t)
                };
                if (void 0 !== t) {
                    var a = i.handlers[t];
                    if (a) {
                        if (!n) return void r(e, t);
                        if (n.guid)
                            for (var s = 0; s < a.length; s++) a[s].guid === n.guid && a.splice(s--, 1);
                        H(e, t)
                    }
                } else
                    for (var o in i.handlers) Object.prototype.hasOwnProperty.call(i.handlers || {}, o) && r(e, o)
            }
        }
    }

    function X(e, t, n) {
        var i = F(e) ? B(e) : {},
            r = e.parentNode || e.ownerDocument;
        if ("string" == typeof t ? t = {
            type: t,
            target: e
        } : t.target || (t.target = e), t = z(t), i.dispatcher && i.dispatcher.call(e, t, n), r && !t.isPropagationStopped() && t.bubbles === !0) X.call(null, r, t, n);
        else if (!r && !t.defaultPrevented) {
            var a = B(t.target);
            t.target[t.type] && (a.disabled = !0, "function" == typeof t.target[t.type] && t.target[t.type](), a.disabled = !1)
        }
        return !t.defaultPrevented
    }

    function Y(e, t, n) {
        if (Array.isArray(t)) return q(Y, e, t, n);
        var i = function r() {
            G(e, t, r), n.apply(this, arguments)
        };
        i.guid = n.guid = n.guid || N(), W(e, t, i)
    }

    function $(e, t) {
        t && (mn = t), mt.setTimeout(gn, e)
    }

    function Q(e) {
        var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
            n = t.eventBusKey;
        if (n) {
            if (!e[n].nodeName) throw new Error('The eventBusKey "' + n + '" does not refer to an element.');
            e.eventBusEl_ = e[n]
        } else e.eventBusEl_ = m("span", {
            className: "vjs-event-bus"
        });
        return i(e, Pn), e.on("dispose", function() {
            e.off(), mt.setTimeout(function() {
                e.eventBusEl_ = null
            }, 0)
        }), e
    }

    function K(e, t) {
        return i(e, xn), e.state = i({}, e.state, t), "function" == typeof e.handleStateChanged && kn(e) && e.on("statechanged", e.handleStateChanged), e
    }

    function J(e) {
        return "string" != typeof e ? e : e.charAt(0).toUpperCase() + e.slice(1)
    }

    function Z(e, t) {
        return J(e) === J(t)
    }

    function ee() {
        for (var e = {}, n = arguments.length, i = Array(n), r = 0; n > r; r++) i[r] = arguments[r];
        return i.forEach(function(n) {
            n && t(n, function(t, n) {
                return a(t) ? (a(e[n]) || (e[n] = {}), void(e[n] = ee(e[n], t))) : void(e[n] = t)
            })
        }), e
    }

    function te(e, t, n) {
        if ("number" != typeof t || 0 > t || t > n) throw new Error("Failed to execute '" + e + "' on 'TimeRanges': The index provided (" + t + ") is non-numeric or out of bounds (0-" + n + ").")
    }

    function ne(e, t, n, i) {
        return te(e, i, n.length - 1), n[i][t]
    }

    function ie(e) {
        return void 0 === e || 0 === e.length ? {
            length: 0,
            start: function() {
                throw new Error("This TimeRanges object is empty")
            },
            end: function() {
                throw new Error("This TimeRanges object is empty")
            }
        } : {
            length: e.length,
            start: ne.bind(null, "start", 0, e),
            end: ne.bind(null, "end", 1, e)
        }
    }

    function re(e, t) {
        return Array.isArray(e) ? ie(e) : void 0 === e || void 0 === t ? ie() : ie([
            [e, t]
        ])
    }

    function ae(e, t) {
        var n = 0,
            i = void 0,
            r = void 0;
        if (!t) return 0;
        e && e.length || (e = re(0, 0));
        for (var a = 0; a < e.length; a++) i = e.start(a), r = e.end(a), r > t && (r = t), n += r - i;
        return n / t
    }

    function se(e) {
        return e instanceof se ? e : ("number" == typeof e ? this.code = e : "string" == typeof e ? this.message = e : r(e) && ("number" == typeof e.code && (this.code = e.code), i(this, e)), void(this.message || (this.message = se.defaultMessages[this.code] || "")))
    }

    function oe(e, t) {
        var n, i = null;
        try {
            n = JSON.parse(e, t)
        } catch (r) {
            i = r
        }
        return [i, n]
    }

    function ue(e) {
        return void 0 !== e && null !== e && "function" == typeof e.then
    }

    function le(e) {
        ue(e) && e.then(null, function(e) {})
    }

    function ce(e) {
        var t = fi.call(e);
        return "[object Function]" === t || "function" == typeof e && "[object RegExp]" !== t || "undefined" != typeof window && (e === window.setTimeout || e === window.alert || e === window.confirm || e === window.prompt)
    }

    function de(e, t, n) {
        if (!pi(t)) throw new TypeError("iterator must be a function");
        arguments.length < 3 && (n = this), "[object Array]" === vi.call(e) ? he(e, t, n) : "string" == typeof e ? pe(e, t, n) : fe(e, t, n)
    }

    function he(e, t, n) {
        for (var i = 0, r = e.length; r > i; i++) yi.call(e, i) && t.call(n, e[i], i, e)
    }

    function pe(e, t, n) {
        for (var i = 0, r = e.length; r > i; i++) t.call(n, e.charAt(i), i, e)
    }

    function fe(e, t, n) {
        for (var i in e) yi.call(e, i) && t.call(n, e[i], i, e)
    }

    function me() {
        for (var e = {}, t = 0; t < arguments.length; t++) {
            var n = arguments[t];
            for (var i in n) Si.call(n, i) && (e[i] = n[i])
        }
        return e
    }

    function ge(e, t) {
        for (var n = 0; n < e.length; n++) t(e[n])
    }

    function ve(e) {
        for (var t in e)
            if (e.hasOwnProperty(t)) return !1;
        return !0
    }

    function ye(e, t, n) {
        var i = e;
        return pi(t) ? (n = t, "string" == typeof e && (i = {
            uri: e
        })) : i = Ti(t, {
            uri: e
        }), i.callback = n, i
    }

    function _e(e, t, n) {
        return t = ye(e, t, n), be(t)
    }

    function be(e) {
        function t() {
            4 === o.readyState && setTimeout(r, 0)
        }

        function n() {
            var e = void 0;
            if (e = o.response ? o.response : o.responseText || Te(o), g) try {
                e = JSON.parse(e)
            } catch (t) {}
            return e
        }

        function i(e) {
            return clearTimeout(c), e instanceof Error || (e = new Error("" + (e || "Unknown XMLHttpRequest Error"))), e.statusCode = 0, s(e, v)
        }

        function r() {
            if (!l) {
                var t;
                clearTimeout(c), t = e.useXDR && void 0 === o.status ? 200 : 1223 === o.status ? 204 : o.status;
                var i = v,
                    r = null;
                return 0 !== t ? (i = {
                    body: n(),
                    statusCode: t,
                    method: h,
                    headers: {},
                    url: d,
                    rawRequest: o
                }, o.getAllResponseHeaders && (i.headers = bi(o.getAllResponseHeaders()))) : r = new Error("Internal XMLHttpRequest Error"), s(r, i, i.body)
            }
        }
        if ("undefined" == typeof e.callback) throw new Error("callback argument missing");
        var a = !1,
            s = function(t, n, i) {
                a || (a = !0, e.callback(t, n, i))
            },
            o = e.xhr || null;
        o || (o = e.cors || e.useXDR ? new _e.XDomainRequest : new _e.XMLHttpRequest);
        var u, l, c, d = o.url = e.uri || e.url,
            h = o.method = e.method || "GET",
            p = e.body || e.data,
            f = o.headers = e.headers || {},
            m = !!e.sync,
            g = !1,
            v = {
                body: void 0,
                headers: {},
                statusCode: 0,
                method: h,
                url: d,
                rawRequest: o
            };
        if ("json" in e && e.json !== !1 && (g = !0, f.accept || f.Accept || (f.Accept = "application/json"), "GET" !== h && "HEAD" !== h && (f["content-type"] || f["Content-Type"] || (f["Content-Type"] = "application/json"), p = JSON.stringify(e.json === !0 ? p : e.json))), o.onreadystatechange = t, o.onload = r, o.onerror = i, o.onprogress = function() {}, o.onabort = function() {
            l = !0
        }, o.ontimeout = i, o.open(h, d, !m, e.username, e.password), m || (o.withCredentials = !!e.withCredentials), !m && e.timeout > 0 && (c = setTimeout(function() {
            if (!l) {
                l = !0, o.abort("timeout");
                var e = new Error("XMLHttpRequest timeout");
                e.code = "ETIMEDOUT", i(e)
            }
        }, e.timeout)), o.setRequestHeader)
            for (u in f) f.hasOwnProperty(u) && o.setRequestHeader(u, f[u]);
        else if (e.headers && !ve(e.headers)) throw new Error("Headers cannot be set on an XDomainRequest object");
        return "responseType" in e && (o.responseType = e.responseType), "beforeSend" in e && "function" == typeof e.beforeSend && e.beforeSend(o), o.send(p || null), o
    }

    function Te(e) {
        if ("document" === e.responseType) return e.responseXML;
        var t = e.responseXML && "parsererror" === e.responseXML.documentElement.nodeName;
        return "" !== e.responseType || t ? null : e.responseXML
    }

    function Se() {}

    function ke(e, t) {
        this.name = "ParsingError", this.code = e.code, this.message = t || e.message
    }

    function we(e) {
        function t(e, t, n, i) {
            return 3600 * (0 | e) + 60 * (0 | t) + (0 | n) + (0 | i) / 1e3
        }
        var n = e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);
        return n ? n[3] ? t(n[1], n[2], n[3].replace(":", ""), n[4]) : n[1] > 59 ? t(n[1], n[2], 0, n[4]) : t(0, n[1], n[2], n[4]) : null
    }

    function Ce() {
        this.values = ji(null)
    }

    function Ee(e, t, n, i) {
        var r = i ? e.split(i) : [e];
        for (var a in r)
            if ("string" == typeof r[a]) {
                var s = r[a].split(n);
                if (2 === s.length) {
                    var o = s[0],
                        u = s[1];
                    t(o, u)
                }
            }
    }

    function Ae(e, t, n) {
        function i() {
            var t = we(e);
            if (null === t) throw new ke(ke.Errors.BadTimeStamp, "Malformed timestamp: " + s);
            return e = e.replace(/^[^\sa-zA-Z-]+/, ""), t
        }

        function r(e, t) {
            var i = new Ce;
            Ee(e, function(e, t) {
                switch (e) {
                    case "region":
                        for (var r = n.length - 1; r >= 0; r--)
                            if (n[r].id === t) {
                                i.set(e, n[r].region);
                                break
                            }
                        break;
                    case "vertical":
                        i.alt(e, t, ["rl", "lr"]);
                        break;
                    case "line":
                        var a = t.split(","),
                            s = a[0];
                        i.integer(e, s), i.percent(e, s) ? i.set("snapToLines", !1) : null, i.alt(e, s, ["auto"]), 2 === a.length && i.alt("lineAlign", a[1], ["start", "middle", "end"]);
                        break;
                    case "position":
                        a = t.split(","), i.percent(e, a[0]), 2 === a.length && i.alt("positionAlign", a[1], ["start", "middle", "end"]);
                        break;
                    case "size":
                        i.percent(e, t);
                        break;
                    case "align":
                        i.alt(e, t, ["start", "middle", "end", "left", "right"])
                }
            }, /:/, /\s/), t.region = i.get("region", null), t.vertical = i.get("vertical", ""), t.line = i.get("line", "auto"), t.lineAlign = i.get("lineAlign", "start"), t.snapToLines = i.get("snapToLines", !0), t.size = i.get("size", 100), t.align = i.get("align", "middle"), t.position = i.get("position", {
                start: 0,
                left: 0,
                middle: 50,
                end: 100,
                right: 100
            }, t.align), t.positionAlign = i.get("positionAlign", {
                start: "start",
                left: "start",
                middle: "middle",
                end: "end",
                right: "end"
            }, t.align)
        }

        function a() {
            e = e.replace(/^\s+/, "")
        }
        var s = e;
        if (a(), t.startTime = i(), a(), "-->" !== e.substr(0, 3)) throw new ke(ke.Errors.BadTimeStamp, "Malformed time stamp (time stamps must be separated by '-->'): " + s);
        e = e.substr(3), a(), t.endTime = i(), a(), r(e, t)
    }

    function Le(e, t) {
        function n() {
            function e(e) {
                return t = t.substr(e.length), e
            }
            if (!t) return null;
            var n = t.match(/^([^<]*)(<[^>]*>?)?/);
            return e(n[1] ? n[1] : n[2])
        }

        function i(e) {
            return Ni[e]
        }

        function r(e) {
            for (; p = e.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);) e = e.replace(p[0], i);
            return e
        }

        function a(e, t) {
            return !Vi[t.localName] || Vi[t.localName] === e.localName
        }

        function s(t, n) {
            var i = Bi[t];
            if (!i) return null;
            var r = e.document.createElement(i);
            r.localName = i;
            var a = Fi[t];
            return a && n && (r[a] = n.trim()), r
        }
        for (var o, u = e.document.createElement("div"), l = u, c = []; null !== (o = n());)
            if ("<" !== o[0]) l.appendChild(e.document.createTextNode(r(o)));
            else {
                if ("/" === o[1]) {
                    c.length && c[c.length - 1] === o.substr(2).replace(">", "") && (c.pop(), l = l.parentNode);
                    continue
                }
                var d, h = we(o.substr(1, o.length - 2));
                if (h) {
                    d = e.document.createProcessingInstruction("timestamp", h), l.appendChild(d);
                    continue
                }
                var p = o.match(/^<([^.\s\/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);
                if (!p) continue;
                if (d = s(p[1], p[3]), !d) continue;
                if (!a(l, d)) continue;
                p[2] && (d.className = p[2].substr(1).replace(".", " ")), c.push(p[1]), l.appendChild(d), l = d
            }
        return u
    }

    function Ie(e) {
        for (var t = 0; t < Hi.length; t++) {
            var n = Hi[t];
            if (e >= n[0] && e <= n[1]) return !0
        }
        return !1
    }

    function Pe(e) {
        function t(e, t) {
            for (var n = t.childNodes.length - 1; n >= 0; n--) e.push(t.childNodes[n])
        }

        function n(e) {
            if (!e || !e.length) return null;
            var i = e.pop(),
                r = i.textContent || i.innerText;
            if (r) {
                var a = r.match(/^.*(\n|\r)/);
                return a ? (e.length = 0, a[0]) : r
            }
            return "ruby" === i.tagName ? n(e) : i.childNodes ? (t(e, i), n(e)) : void 0
        }
        var i, r = [],
            a = "";
        if (!e || !e.childNodes) return "ltr";
        for (t(r, e); a = n(r);)
            for (var s = 0; s < a.length; s++)
                if (i = a.charCodeAt(s), Ie(i)) return "rtl";
        return "ltr"
    }

    function xe(e) {
        if ("number" == typeof e.line && (e.snapToLines || e.line >= 0 && e.line <= 100)) return e.line;
        if (!e.track || !e.track.textTrackList || !e.track.textTrackList.mediaElement) return -1;
        for (var t = e.track, n = t.textTrackList, i = 0, r = 0; r < n.length && n[r] !== t; r++) "showing" === n[r].mode && i++;
        return -1 * ++i
    }

    function De() {}

    function Ue(e, t, n) {
        var i = /MSIE\s8\.0/.test(navigator.userAgent),
            r = "rgba(255, 255, 255, 1)",
            a = "rgba(0, 0, 0, 0.8)";
        i && (r = "rgb(255, 255, 255)", a = "rgb(0, 0, 0)"), De.call(this), this.cue = t, this.cueDiv = Le(e, t.text);
        var s = {
            color: r,
            backgroundColor: a,
            position: "relative",
            left: 0,
            right: 0,
            top: 0,
            bottom: 0,
            display: "inline"
        };
        i || (s.writingMode = "" === t.vertical ? "horizontal-tb" : "lr" === t.vertical ? "vertical-lr" : "vertical-rl", s.unicodeBidi = "plaintext"), this.applyStyles(s, this.cueDiv), this.div = e.document.createElement("div"), s = {
            textAlign: "middle" === t.align ? "center" : t.align,
            font: n.font,
            whiteSpace: "pre-line",
            position: "absolute"
        }, i || (s.direction = Pe(this.cueDiv), s.writingMode = "" === t.vertical ? "horizontal-tb" : "lr" === t.vertical ? "vertical-lr" : "vertical-rl".stylesunicodeBidi = "plaintext"), this.applyStyles(s), this.div.appendChild(this.cueDiv);
        var o = 0;
        switch (t.positionAlign) {
            case "start":
                o = t.position;
                break;
            case "middle":
                o = t.position - t.size / 2;
                break;
            case "end":
                o = t.position - t.size
        }
        "" === t.vertical ? this.applyStyles({
            left: this.formatStyle(o, "%"),
            width: this.formatStyle(t.size, "%")
        }) : this.applyStyles({
            top: this.formatStyle(o, "%"),
            height: this.formatStyle(t.size, "%")
        }), this.move = function(e) {
            this.applyStyles({
                top: this.formatStyle(e.top, "px"),
                bottom: this.formatStyle(e.bottom, "px"),
                left: this.formatStyle(e.left, "px"),
                right: this.formatStyle(e.right, "px"),
                height: this.formatStyle(e.height, "px"),
                width: this.formatStyle(e.width, "px")
            })
        }
    }

    function Oe(e) {
        var t, n, i, r, a = /MSIE\s8\.0/.test(navigator.userAgent);
        if (e.div) {
            n = e.div.offsetHeight, i = e.div.offsetWidth, r = e.div.offsetTop;
            var s = (s = e.div.childNodes) && (s = s[0]) && s.getClientRects && s.getClientRects();
            e = e.div.getBoundingClientRect(), t = s ? Math.max(s[0] && s[0].height || 0, e.height / s.length) : 0
        }
        this.left = e.left, this.right = e.right, this.top = e.top || r, this.height = e.height || n, this.bottom = e.bottom || r + (e.height || n), this.width = e.width || i, this.lineHeight = void 0 !== t ? t : e.lineHeight, a && !this.lineHeight && (this.lineHeight = 13)
    }

    function Me(e, t, n, i) {
        function r(e, t) {
            for (var r, a = new Oe(e), s = 1, o = 0; o < t.length; o++) {
                for (; e.overlapsOppositeAxis(n, t[o]) || e.within(n) && e.overlapsAny(i);) e.move(t[o]);
                if (e.within(n)) return e;
                var u = e.intersectPercentage(n);
                s > u && (r = new Oe(e), s = u), e = new Oe(a)
            }
            return r || a
        }
        var a = new Oe(t),
            s = t.cue,
            o = xe(s),
            u = [];
        if (s.snapToLines) {
            var l;
            switch (s.vertical) {
                case "":
                    u = ["+y", "-y"], l = "height";
                    break;
                case "rl":
                    u = ["+x", "-x"], l = "width";
                    break;
                case "lr":
                    u = ["-x", "+x"], l = "width"
            }
            var c = a.lineHeight,
                d = c * Math.round(o),
                h = n[l] + c,
                p = u[0];
            Math.abs(d) > h && (d = 0 > d ? -1 : 1, d *= Math.ceil(h / c) * c), 0 > o && (d += "" === s.vertical ? n.height : n.width, u = u.reverse()), a.move(p, d)
        } else {
            var f = a.lineHeight / n.height * 100;
            switch (s.lineAlign) {
                case "middle":
                    o -= f / 2;
                    break;
                case "end":
                    o -= f
            }
            switch (s.vertical) {
                case "":
                    t.applyStyles({
                        top: t.formatStyle(o, "%")
                    });
                    break;
                case "rl":
                    t.applyStyles({
                        left: t.formatStyle(o, "%")
                    });
                    break;
                case "lr":
                    t.applyStyles({
                        right: t.formatStyle(o, "%")
                    })
            }
            u = ["+y", "-x", "+x", "-y"], a = new Oe(t)
        }
        var m = r(a, u);
        t.move(m.toCSSCompatValues(n))
    }

    function Re() {}

    function je(e) {
        if ("string" != typeof e) return !1;
        var t = Yi[e.toLowerCase()];
        return t ? e.toLowerCase() : !1
    }

    function Ne(e) {
        if ("string" != typeof e) return !1;
        var t = $i[e.toLowerCase()];
        return t ? e.toLowerCase() : !1
    }

    function Be(e) {
        for (var t = 1; t < arguments.length; t++) {
            var n = arguments[t];
            for (var i in n) e[i] = n[i]
        }
        return e
    }

    function Fe(e, t, n) {
        var i = this,
            r = /MSIE\s8\.0/.test(navigator.userAgent),
            a = {};
        r ? i = document.createElement("custom") : a.enumerable = !0, i.hasBeenReset = !1;
        var s = "",
            o = !1,
            u = e,
            l = t,
            c = n,
            d = null,
            h = "",
            p = !0,
            f = "auto",
            m = "start",
            g = 50,
            v = "middle",
            y = 50,
            _ = "middle";
        return Object.defineProperty(i, "id", Be({}, a, {
            get: function() {
                return s
            },
            set: function(e) {
                s = "" + e
            }
        })), Object.defineProperty(i, "pauseOnExit", Be({}, a, {
            get: function() {
                return o
            },
            set: function(e) {
                o = !!e
            }
        })), Object.defineProperty(i, "startTime", Be({}, a, {
            get: function() {
                return u
            },
            set: function(e) {
                if ("number" != typeof e) throw new TypeError("Start time must be set to a number.");
                u = e, this.hasBeenReset = !0
            }
        })), Object.defineProperty(i, "endTime", Be({}, a, {
            get: function() {
                return l
            },
            set: function(e) {
                if ("number" != typeof e) throw new TypeError("End time must be set to a number.");
                l = e, this.hasBeenReset = !0
            }
        })), Object.defineProperty(i, "text", Be({}, a, {
            get: function() {
                return c
            },
            set: function(e) {
                c = "" + e, this.hasBeenReset = !0
            }
        })), Object.defineProperty(i, "region", Be({}, a, {
            get: function() {
                return d
            },
            set: function(e) {
                d = e, this.hasBeenReset = !0
            }
        })), Object.defineProperty(i, "vertical", Be({}, a, {
            get: function() {
                return h
            },
            set: function(e) {
                var t = je(e);
                if (t === !1) throw new SyntaxError("An invalid or illegal string was specified.");
                h = t, this.hasBeenReset = !0
            }
        })), Object.defineProperty(i, "snapToLines", Be({}, a, {
            get: function() {
                return p
            },
            set: function(e) {
                p = !!e, this.hasBeenReset = !0
            }
        })), Object.defineProperty(i, "line", Be({}, a, {
            get: function() {
                return f
            },
            set: function(e) {
                if ("number" != typeof e && e !== Xi) throw new SyntaxError("An invalid number or illegal string was specified.");
                f = e, this.hasBeenReset = !0
            }
        })), Object.defineProperty(i, "lineAlign", Be({}, a, {
            get: function() {
                return m
            },
            set: function(e) {
                var t = Ne(e);
                if (!t) throw new SyntaxError("An invalid or illegal string was specified.");
                m = t, this.hasBeenReset = !0
            }
        })), Object.defineProperty(i, "position", Be({}, a, {
            get: function() {
                return g
            },
            set: function(e) {
                if (0 > e || e > 100) throw new Error("Position must be between 0 and 100.");
                g = e, this.hasBeenReset = !0
            }
        })), Object.defineProperty(i, "positionAlign", Be({}, a, {
            get: function() {
                return v
            },
            set: function(e) {
                var t = Ne(e);
                if (!t) throw new SyntaxError("An invalid or illegal string was specified.");
                v = t, this.hasBeenReset = !0
            }
        })), Object.defineProperty(i, "size", Be({}, a, {
            get: function() {
                return y
            },
            set: function(e) {
                if (0 > e || e > 100) throw new Error("Size must be between 0 and 100.");
                y = e, this.hasBeenReset = !0
            }
        })), Object.defineProperty(i, "align", Be({}, a, {
            get: function() {
                return _
            },
            set: function(e) {
                var t = Ne(e);
                if (!t) throw new SyntaxError("An invalid or illegal string was specified.");
                _ = t, this.hasBeenReset = !0
            }
        })), i.displayState = void 0, r ? i : void 0
    }

    function Ve(e) {
        if ("string" != typeof e) return !1;
        var t = Ki[e.toLowerCase()];
        return t ? e.toLowerCase() : !1
    }

    function He(e) {
        return "number" == typeof e && e >= 0 && 100 >= e
    }

    function qe() {
        var e = 100,
            t = 3,
            n = 0,
            i = 100,
            r = 0,
            a = 100,
            s = "";
        Object.defineProperties(this, {
            width: {
                enumerable: !0,
                get: function() {
                    return e
                },
                set: function(t) {
                    if (!He(t)) throw new Error("Width must be between 0 and 100.");
                    e = t
                }
            },
            lines: {
                enumerable: !0,
                get: function() {
                    return t
                },
                set: function(e) {
                    if ("number" != typeof e) throw new TypeError("Lines must be set to a number.");
                    t = e
                }
            },
            regionAnchorY: {
                enumerable: !0,
                get: function() {
                    return i
                },
                set: function(e) {
                    if (!He(e)) throw new Error("RegionAnchorX must be between 0 and 100.");
                    i = e
                }
            },
            regionAnchorX: {
                enumerable: !0,
                get: function() {
                    return n
                },
                set: function(e) {
                    if (!He(e)) throw new Error("RegionAnchorY must be between 0 and 100.");
                    n = e
                }
            },
            viewportAnchorY: {
                enumerable: !0,
                get: function() {
                    return a
                },
                set: function(e) {
                    if (!He(e)) throw new Error("ViewportAnchorY must be between 0 and 100.");
                    a = e
                }
            },
            viewportAnchorX: {
                enumerable: !0,
                get: function() {
                    return r
                },
                set: function(e) {
                    if (!He(e)) throw new Error("ViewportAnchorX must be between 0 and 100.");
                    r = e
                }
            },
            scroll: {
                enumerable: !0,
                get: function() {
                    return s
                },
                set: function(e) {
                    var t = Ve(e);
                    if (t === !1) throw new SyntaxError("An invalid or illegal string was specified.");
                    s = t
                }
            }
        })
    }

    function ze(e, t, n, i) {
        var r = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : {},
            a = e.textTracks();
        r.kind = t, n && (r.label = n), i && (r.language = i), r.tech = e;
        var s = new Ri.text.TrackClass(r);
        return a.addTrack(s), s
    }

    function We(e, t) {
        tr[e] = tr[e] || [], tr[e].push(t)
    }

    function Ge(e, t, n) {
        e.setTimeout(function() {
            return tt(t, tr[t.type], n, e)
        }, 1)
    }

    function Xe(e, t) {
        e.forEach(function(e) {
            return e.setTech && e.setTech(t)
        })
    }

    function Ye(e, t, n) {
        return e.reduceRight(Ke(n), t[n]())
    }

    function $e(e, t, n, i) {
        return t[n](e.reduce(Ke(n), i))
    }

    function Qe(e, t, n) {
        var i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : null,
            r = "call" + J(n),
            a = e.reduce(Ke(r), i),
            s = a === ir,
            o = s ? null : t[n](a);
        return Je(e, n, o, s), o
    }

    function Ke(e) {
        return function(t, n) {
            return t === ir ? ir : n[e] ? n[e](t) : t
        }
    }

    function Je(e, t, n, i) {
        for (var r = e.length - 1; r >= 0; r--) {
            var a = e[r];
            a[t] && a[t](i, n)
        }
    }

    function Ze(e) {
        nr[e.id()] = null
    }

    function et(e, t) {
        var n = nr[e.id()],
            i = null;
        if (void 0 === n || null === n) return i = t(e), nr[e.id()] = [
            [t, i]
        ], i;
        for (var r = 0; r < n.length; r++) {
            var a = n[r],
                s = a[0],
                o = a[1];
            s === t && (i = o)
        }
        return null === i && (i = t(e), n.push([t, i])), i
    }

    function tt() {
        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
            t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : [],
            n = arguments[2],
            r = arguments[3],
            a = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : [],
            s = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : !1,
            o = t[0],
            u = t.slice(1);
        if ("string" == typeof o) tt(e, tr[o], n, r, a, s);
        else if (o) {
            var l = et(r, o);
            if (!l.setSource) return a.push(l), tt(e, u, n, r, a, s);
            l.setSource(i({}, e), function(t, i) {
                return t ? tt(e, u, n, r, a, s) : (a.push(l), void tt(i, e.type === i.type ? u : tr[i.type], n, r, a, s))
            })
        } else u.length ? tt(e, u, n, r, a, s) : s ? n(e, a) : tt(e, tr["*"], n, r, a, !0)
    }

    function nt(e) {
        var t = ur(e.src);
        return !e.type && t && (e.type = t), e
    }

    function it(e, t) {
        var n = void 0;
        if (4 === e.length) n = e[1] + e[1] + e[2] + e[2] + e[3] + e[3];
        else {
            if (7 !== e.length) throw new Error("Invalid color code provided, " + e + "; must be formatted as e.g. #f0e or #f604e2.");
            n = e.slice(1)
        }
        return "rgba(" + parseInt(n.slice(0, 2), 16) + "," + parseInt(n.slice(2, 4), 16) + "," + parseInt(n.slice(4, 6), 16) + "," + t + ")"
    }

    function rt(e, t, n) {
        try {
            e.style[t] = n
        } catch (i) {
            return
        }
    }

    function at(e) {
        wr = e
    }

    function st() {
        wr = kr
    }

    function ot(e, t) {
        return t && (e = t(e)), e && "none" !== e ? e : void 0
    }

    function ut(e, t) {
        var n = e.options[e.options.selectedIndex].value;
        return ot(n, t)
    }

    function lt(e, t, n) {
        if (t)
            for (var i = 0; i < e.options.length; i++)
                if (ot(e.options[i].value, n) === t) {
                    e.selectedIndex = i;
                    break
                }
    }

    function ct(e, t, n) {
        var i = ct.getPlayer(e);
        if (i) return t && tn.warn('Player "' + e + '" is already initialised. Options will not be applied.'), n && i.ready(n), i;
        var a = "string" == typeof e ? an("#" + cs(e)) : e;
        if (!h(a)) throw new TypeError("The element or ID supplied is not valid. (videojs)");
        bt.body.contains(a) || tn.warn("The element supplied is not included in the DOM"), t = t || {}, ct.hooks("beforesetup").forEach(function(e) {
            var n = e(a, ee(t));
            return !r(n) || Array.isArray(n) ? void tn.error("please return an object in beforesetup hooks") : void(t = ee(t, n))
        });
        var s = Dn.getComponent("Player");
        return i = new s(a, t, n), ct.hooks("setup").forEach(function(e) {
            return e(i)
        }), i
    }
    var dt, ht = "6.12.1",
        pt = "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : {};
    dt = "undefined" != typeof window ? window : "undefined" != typeof pt ? pt : "undefined" != typeof self ? self : {};
    var ft, mt = dt,
        gt = {},
        vt = (Object.freeze || Object)({
            "default": gt
        }),
        yt = vt && gt || vt,
        _t = "undefined" != typeof pt ? pt : "undefined" != typeof window ? window : {};
    "undefined" != typeof document ? ft = document : (ft = _t["__GLOBAL_DOCUMENT_CACHE@4"], ft || (ft = _t["__GLOBAL_DOCUMENT_CACHE@4"] = yt));
    var bt = ft,
        Tt = mt.navigator && mt.navigator.userAgent || "",
        St = /AppleWebKit\/([\d.]+)/i.exec(Tt),
        kt = St ? parseFloat(St.pop()) : null,
        wt = /iPad/i.test(Tt),
        Ct = /iPhone/i.test(Tt) && !wt,
        Et = /iPod/i.test(Tt),
        At = Ct || wt || Et,
        Lt = function() {
            var e = Tt.match(/OS (\d+)_/i);
            return e && e[1] ? e[1] : null
        }(),
        It = /Android/i.test(Tt),
        Pt = function() {
            var e = Tt.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);
            if (!e) return null;
            var t = e[1] && parseFloat(e[1]),
                n = e[2] && parseFloat(e[2]);
            return t && n ? parseFloat(e[1] + "." + e[2]) : t ? t : null
        }(),
        xt = It && /webkit/i.test(Tt) && 2.3 > Pt,
        Dt = It && 5 > Pt && 537 > kt,
        Ut = /Firefox/i.test(Tt),
        Ot = /Edge/i.test(Tt),
        Mt = !Ot && (/Chrome/i.test(Tt) || /CriOS/i.test(Tt)),
        Rt = function() {
            var e = Tt.match(/(Chrome|CriOS)\/(\d+)/);
            return e && e[2] ? parseFloat(e[2]) : null
        }(),
        jt = /MSIE\s8\.0/.test(Tt),
        Nt = function() {
            var e = /MSIE\s(\d+)\.\d/.exec(Tt),
                t = e && parseFloat(e[1]);
            return !t && /Trident\/7.0/i.test(Tt) && /rv:11.0/.test(Tt) && (t = 11), t
        }(),
        Bt = /Safari/i.test(Tt) && !Mt && !It && !Ot,
        Ft = (Bt || At) && !Mt,
        Vt = d() && ("ontouchstart" in mt || mt.navigator.maxTouchPoints || mt.DocumentTouch && mt.document instanceof mt.DocumentTouch),
        Ht = d() && "backgroundSize" in mt.document.createElement("video").style,
        qt = (Object.freeze || Object)({
            IS_IPAD: wt,
            IS_IPHONE: Ct,
            IS_IPOD: Et,
            IS_IOS: At,
            IOS_VERSION: Lt,
            IS_ANDROID: It,
            ANDROID_VERSION: Pt,
            IS_OLD_ANDROID: xt,
            IS_NATIVE_ANDROID: Dt,
            IS_FIREFOX: Ut,
            IS_EDGE: Ot,
            IS_CHROME: Mt,
            CHROME_VERSION: Rt,
            IS_IE8: jt,
            IE_VERSION: Nt,
            IS_SAFARI: Bt,
            IS_ANY_SAFARI: Ft,
            TOUCH_ENABLED: Vt,
            BACKGROUND_SIZE_SUPPORTED: Ht
        }),
        zt = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
            return typeof e
        } : function(e) {
            return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
        },
        Wt = function(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        },
        Gt = function(e, t) {
            if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, {
                constructor: {
                    value: e,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
        },
        Xt = function(e, t) {
            if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !t || "object" != typeof t && "function" != typeof t ? e : t
        },
        Yt = function(e, t) {
            return e.raw = t, e
        },
        $t = Object.prototype.toString,
        Qt = function(e) {
            return r(e) ? Object.keys(e) : []
        },
        Kt = void 0,
        Jt = "info",
        Zt = [],
        en = function(e, t) {
            var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : !!Nt && 11 > Nt,
                i = Kt.levels[Jt],
                a = new RegExp("^(" + i + ")$");
            if ("log" !== e && t.unshift(e.toUpperCase() + ":"), Zt && Zt.push([].concat(t)), t.unshift("VIDEOJS:"), mt.console) {
                var s = mt.console[e];
                s || "debug" !== e || (s = mt.console.info || mt.console.log),
                    s && i && a.test(e) && (n && (t = t.map(function(e) {
                        if (r(e) || Array.isArray(e)) try {
                            return JSON.stringify(e)
                        } catch (t) {
                            return String(e)
                        }
                        return String(e)
                    }).join(" ")), s.apply ? s[Array.isArray(t) ? "apply" : "call"](mt.console, t) : s(t))
            }
        };
    Kt = function() {
        for (var e = arguments.length, t = Array(e), n = 0; e > n; n++) t[n] = arguments[n];
        en("log", t)
    }, Kt.levels = {
        all: "debug|log|warn|error",
        off: "",
        debug: "debug|log|warn|error",
        info: "log|warn|error",
        warn: "warn|error",
        error: "error",
        DEFAULT: Jt
    }, Kt.level = function(e) {
        if ("string" == typeof e) {
            if (!Kt.levels.hasOwnProperty(e)) throw new Error('"' + e + '" in not a valid log level');
            Jt = e
        }
        return Jt
    }, Kt.history = function() {
        return Zt ? [].concat(Zt) : []
    }, Kt.history.clear = function() {
        Zt && (Zt.length = 0)
    }, Kt.history.disable = function() {
        null !== Zt && (Zt.length = 0, Zt = null)
    }, Kt.history.enable = function() {
        null === Zt && (Zt = [])
    }, Kt.error = function() {
        for (var e = arguments.length, t = Array(e), n = 0; e > n; n++) t[n] = arguments[n];
        return en("error", t)
    }, Kt.warn = function() {
        for (var e = arguments.length, t = Array(e), n = 0; e > n; n++) t[n] = arguments[n];
        return en("warn", t)
    }, Kt.debug = function() {
        for (var e = arguments.length, t = Array(e), n = 0; e > n; n++) t[n] = arguments[n];
        return en("debug", t)
    };
    var tn = Kt,
        nn = function(e) {
            for (var t = "", n = 0; n < arguments.length; n++) t += s(e[n]) + (arguments[n + 1] || "");
            return t
        },
        rn = Yt(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set ", " to ", "."], ["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set ", " to ", "."]),
        an = f("querySelector"),
        sn = f("querySelectorAll"),
        on = (Object.freeze || Object)({
            isReal: d,
            isEl: h,
            isInFrame: p,
            createEl: m,
            textContent: g,
            prependTo: v,
            hasClass: y,
            addClass: _,
            removeClass: b,
            toggleClass: T,
            setAttributes: S,
            getAttributes: k,
            getAttribute: w,
            setAttribute: C,
            removeAttribute: E,
            blockTextSelection: A,
            unblockTextSelection: L,
            getBoundingClientRect: I,
            findPosition: P,
            getPointerPosition: x,
            isTextNode: D,
            emptyEl: U,
            normalizeContent: O,
            appendContent: M,
            insertContent: R,
            isSingleLeftClick: j,
            $: an,
            $$: sn
        }),
        un = 1,
        ln = {},
        cn = "vdata" + (new Date).getTime(),
        dn = !1;
    ! function() {
        try {
            var e = Object.defineProperty({}, "passive", {
                get: function() {
                    dn = !0
                }
            });
            mt.addEventListener("test", null, e), mt.removeEventListener("test", null, e)
        } catch (t) {}
    }();
    var hn = ["touchstart", "touchmove"],
        pn = (Object.freeze || Object)({
            fixEvent: z,
            on: W,
            off: G,
            trigger: X,
            one: Y
        }),
        fn = !1,
        mn = void 0,
        gn = function() {
            if (d() && mn.options.autoSetup !== !1) {
                var e = bt.getElementsByTagName("video"),
                    t = bt.getElementsByTagName("audio"),
                    n = bt.getElementsByTagName("video-js"),
                    i = [];
                if (e && e.length > 0)
                    for (var r = 0, a = e.length; a > r; r++) i.push(e[r]);
                if (t && t.length > 0)
                    for (var s = 0, o = t.length; o > s; s++) i.push(t[s]);
                if (n && n.length > 0)
                    for (var u = 0, l = n.length; l > u; u++) i.push(n[u]);
                if (i && i.length > 0)
                    for (var c = 0, h = i.length; h > c; c++) {
                        var p = i[c];
                        if (!p || !p.getAttribute) {
                            $(1);
                            break
                        }
                        if (void 0 === p.player) {
                            var f = p.getAttribute("data-setup");
                            null !== f && mn(p)
                        }
                    } else fn || $(1)
            }
        };
    d() && "complete" === bt.readyState ? fn = !0 : Y(mt, "load", function() {
        fn = !0
    });
    var vn = function(e) {
            var t = bt.createElement("style");
            return t.className = e, t
        },
        yn = function(e, t) {
            e.styleSheet ? e.styleSheet.cssText = t : e.textContent = t
        },
        _n = function(e, t, n) {
            t.guid || (t.guid = N());
            var i = function() {
                return t.apply(e, arguments)
            };
            return i.guid = n ? n + "_" + t.guid : t.guid, i
        },
        bn = function(e, t) {
            var n = Date.now(),
                i = function() {
                    var i = Date.now();
                    i - n >= t && (e.apply(void 0, arguments), n = i)
                };
            return i
        },
        Tn = function(e, t, n) {
            var i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : mt,
                r = void 0;
            return function() {
                var a = this,
                    s = arguments,
                    o = function() {
                        r = null, o = null, n || e.apply(a, s)
                    };
                !r && n && e.apply(a, s), i.clearTimeout(r), r = i.setTimeout(o, t)
            }
        },
        Sn = function() {};
    Sn.prototype.allowedEvents_ = {}, Sn.prototype.on = function(e, t) {
        var n = this.addEventListener;
        this.addEventListener = function() {}, W(this, e, t), this.addEventListener = n
    }, Sn.prototype.addEventListener = Sn.prototype.on, Sn.prototype.off = function(e, t) {
        G(this, e, t)
    }, Sn.prototype.removeEventListener = Sn.prototype.off, Sn.prototype.one = function(e, t) {
        var n = this.addEventListener;
        this.addEventListener = function() {}, Y(this, e, t), this.addEventListener = n
    }, Sn.prototype.trigger = function(e) {
        var t = e.type || e;
        "string" == typeof e && (e = {
            type: t
        }), e = z(e), this.allowedEvents_[t] && this["on" + t] && this["on" + t](e), X(this, e)
    }, Sn.prototype.dispatchEvent = Sn.prototype.trigger;
    var kn = function(e) {
            return e instanceof Sn || !!e.eventBusEl_ && ["on", "one", "off", "trigger"].every(function(t) {
                return "function" == typeof e[t]
            })
        },
        wn = function(e) {
            return "string" == typeof e && /\S/.test(e) || Array.isArray(e) && !!e.length
        },
        Cn = function(e) {
            if (!e.nodeName && !kn(e)) throw new Error("Invalid target; must be a DOM node or evented object.")
        },
        En = function(e) {
            if (!wn(e)) throw new Error("Invalid event type; must be a non-empty string or array.")
        },
        An = function(e) {
            if ("function" != typeof e) throw new Error("Invalid listener; must be a function.")
        },
        Ln = function(e, t) {
            var n = t.length < 3 || t[0] === e || t[0] === e.eventBusEl_,
                i = void 0,
                r = void 0,
                a = void 0;
            return n ? (i = e.eventBusEl_, t.length >= 3 && t.shift(), r = t[0], a = t[1]) : (i = t[0], r = t[1], a = t[2]), Cn(i), En(r), An(a), a = _n(e, a), {
                isTargetingSelf: n,
                target: i,
                type: r,
                listener: a
            }
        },
        In = function(e, t, n, i) {
            Cn(e), e.nodeName ? pn[t](e, n, i) : e[t](n, i)
        },
        Pn = {
            on: function() {
                for (var e = this, t = arguments.length, n = Array(t), i = 0; t > i; i++) n[i] = arguments[i];
                var r = Ln(this, n),
                    a = r.isTargetingSelf,
                    s = r.target,
                    o = r.type,
                    u = r.listener;
                if (In(s, "on", o, u), !a) {
                    var l = function() {
                        return e.off(s, o, u)
                    };
                    l.guid = u.guid;
                    var c = function() {
                        return e.off("dispose", l)
                    };
                    c.guid = u.guid, In(this, "on", "dispose", l), In(s, "on", "dispose", c)
                }
            },
            one: function() {
                for (var e = this, t = arguments.length, n = Array(t), i = 0; t > i; i++) n[i] = arguments[i];
                var r = Ln(this, n),
                    a = r.isTargetingSelf,
                    s = r.target,
                    o = r.type,
                    u = r.listener;
                if (a) In(s, "one", o, u);
                else {
                    var l = function c() {
                        for (var t = arguments.length, n = Array(t), i = 0; t > i; i++) n[i] = arguments[i];
                        e.off(s, o, c), u.apply(null, n)
                    };
                    l.guid = u.guid, In(s, "one", o, l)
                }
            },
            off: function(e, t, n) {
                if (!e || wn(e)) G(this.eventBusEl_, e, t);
                else {
                    var i = e,
                        r = t;
                    Cn(i), En(r), An(n), n = _n(this, n), this.off("dispose", n), i.nodeName ? (G(i, r, n), G(i, "dispose", n)) : kn(i) && (i.off(r, n), i.off("dispose", n))
                }
            },
            trigger: function(e, t) {
                return X(this.eventBusEl_, e, t)
            }
        },
        xn = {
            state: {},
            setState: function(e) {
                var n = this;
                "function" == typeof e && (e = e());
                var i = void 0;
                return t(e, function(e, t) {
                    n.state[t] !== e && (i = i || {}, i[t] = {
                        from: n.state[t],
                        to: e
                    }), n.state[t] = e
                }), i && kn(this) && this.trigger({
                    changes: i,
                    type: "statechanged"
                }), i
            }
        },
        Dn = function() {
            function e(t, n, i) {
                if (Wt(this, e), !t && this.play ? this.player_ = t = this : this.player_ = t, this.options_ = ee({}, this.options_), n = this.options_ = ee(this.options_, n), this.id_ = n.id || n.el && n.el.id, !this.id_) {
                    var r = t && t.id && t.id() || "no_player";
                    this.id_ = r + "_component_" + N()
                }
                this.name_ = n.name || null, n.el ? this.el_ = n.el : n.createEl !== !1 && (this.el_ = this.createEl()), n.evented !== !1 && Q(this, {
                    eventBusKey: this.el_ ? "el_" : null
                }), K(this, this.constructor.defaultState), this.children_ = [], this.childIndex_ = {}, this.childNameIndex_ = {}, n.initChildren !== !1 && this.initChildren(), this.ready(i), n.reportTouchActivity !== !1 && this.enableTouchActivity()
            }
            return e.prototype.dispose = function() {
                if (this.trigger({
                    type: "dispose",
                    bubbles: !1
                }), this.children_)
                    for (var e = this.children_.length - 1; e >= 0; e--) this.children_[e].dispose && this.children_[e].dispose();
                this.children_ = null, this.childIndex_ = null, this.childNameIndex_ = null, this.el_ && (this.el_.parentNode && this.el_.parentNode.removeChild(this.el_), V(this.el_), this.el_ = null), this.player_ = null
            }, e.prototype.player = function() {
                return this.player_
            }, e.prototype.options = function(e) {
                return tn.warn("this.options() has been deprecated and will be moved to the constructor in 6.0"), e ? (this.options_ = ee(this.options_, e), this.options_) : this.options_
            }, e.prototype.el = function() {
                return this.el_
            }, e.prototype.createEl = function(e, t, n) {
                return m(e, t, n)
            }, e.prototype.localize = function(e, t) {
                var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : e,
                    i = this.player_.language && this.player_.language(),
                    r = this.player_.languages && this.player_.languages(),
                    a = r && r[i],
                    s = i && i.split("-")[0],
                    o = r && r[s],
                    u = n;
                return a && a[e] ? u = a[e] : o && o[e] && (u = o[e]), t && (u = u.replace(/\{(\d+)\}/g, function(e, n) {
                    var i = t[n - 1],
                        r = i;
                    return "undefined" == typeof i && (r = e), r
                })), u
            }, e.prototype.contentEl = function() {
                return this.contentEl_ || this.el_
            }, e.prototype.id = function() {
                return this.id_
            }, e.prototype.name = function() {
                return this.name_
            }, e.prototype.children = function() {
                return this.children_
            }, e.prototype.getChildById = function(e) {
                return this.childIndex_[e]
            }, e.prototype.getChild = function(e) {
                return e ? (e = J(e), this.childNameIndex_[e]) : void 0
            }, e.prototype.addChild = function(t) {
                var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
                    i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : this.children_.length,
                    r = void 0,
                    a = void 0;
                if ("string" == typeof t) {
                    a = J(t);
                    var s = n.componentClass || a;
                    n.name = a;
                    var o = e.getComponent(s);
                    if (!o) throw new Error("Component " + s + " does not exist");
                    if ("function" != typeof o) return null;
                    r = new o(this.player_ || this, n)
                } else r = t; if (this.children_.splice(i, 0, r), "function" == typeof r.id && (this.childIndex_[r.id()] = r), a = a || r.name && J(r.name()), a && (this.childNameIndex_[a] = r), "function" == typeof r.el && r.el()) {
                    var u = this.contentEl().children,
                        l = u[i] || null;
                    this.contentEl().insertBefore(r.el(), l)
                }
                return r
            }, e.prototype.removeChild = function(e) {
                if ("string" == typeof e && (e = this.getChild(e)), e && this.children_) {
                    for (var t = !1, n = this.children_.length - 1; n >= 0; n--)
                        if (this.children_[n] === e) {
                            t = !0, this.children_.splice(n, 1);
                            break
                        }
                    if (t) {
                        this.childIndex_[e.id()] = null, this.childNameIndex_[e.name()] = null;
                        var i = e.el();
                        i && i.parentNode === this.contentEl() && this.contentEl().removeChild(e.el())
                    }
                }
            }, e.prototype.initChildren = function() {
                var t = this,
                    n = this.options_.children;
                if (n) {
                    var i = this.options_,
                        r = function(e) {
                            var n = e.name,
                                r = e.opts;
                            if (void 0 !== i[n] && (r = i[n]), r !== !1) {
                                r === !0 && (r = {}), r.playerOptions = t.options_.playerOptions;
                                var a = t.addChild(n, r);
                                a && (t[n] = a)
                            }
                        },
                        a = void 0,
                        s = e.getComponent("Tech");
                    a = Array.isArray(n) ? n : Object.keys(n), a.concat(Object.keys(this.options_).filter(function(e) {
                        return !a.some(function(t) {
                            return "string" == typeof t ? e === t : e === t.name
                        })
                    })).map(function(e) {
                        var i = void 0,
                            r = void 0;
                        return "string" == typeof e ? (i = e, r = n[i] || t.options_[i] || {}) : (i = e.name, r = e), {
                            name: i,
                            opts: r
                        }
                    }).filter(function(t) {
                        var n = e.getComponent(t.opts.componentClass || J(t.name));
                        return n && !s.isTech(n)
                    }).forEach(r)
                }
            }, e.prototype.buildCSSClass = function() {
                return ""
            }, e.prototype.ready = function(e) {
                var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : !1;
                if (e) return this.isReady_ ? void(t ? e.call(this) : this.setTimeout(e, 1)) : (this.readyQueue_ = this.readyQueue_ || [], void this.readyQueue_.push(e))
            }, e.prototype.triggerReady = function() {
                this.isReady_ = !0, this.setTimeout(function() {
                    var e = this.readyQueue_;
                    this.readyQueue_ = [], e && e.length > 0 && e.forEach(function(e) {
                        e.call(this)
                    }, this), this.trigger("ready")
                }, 1)
            }, e.prototype.$ = function(e, t) {
                return an(e, t || this.contentEl())
            }, e.prototype.$$ = function(e, t) {
                return sn(e, t || this.contentEl())
            }, e.prototype.hasClass = function(e) {
                return y(this.el_, e)
            }, e.prototype.addClass = function(e) {
                _(this.el_, e)
            }, e.prototype.removeClass = function(e) {
                b(this.el_, e)
            }, e.prototype.toggleClass = function(e, t) {
                T(this.el_, e, t)
            }, e.prototype.show = function() {
                this.removeClass("vjs-hidden")
            }, e.prototype.hide = function() {
                this.addClass("vjs-hidden")
            }, e.prototype.lockShowing = function() {
                this.addClass("vjs-lock-showing")
            }, e.prototype.unlockShowing = function() {
                this.removeClass("vjs-lock-showing")
            }, e.prototype.getAttribute = function(e) {
                return w(this.el_, e)
            }, e.prototype.setAttribute = function(e, t) {
                C(this.el_, e, t)
            }, e.prototype.removeAttribute = function(e) {
                E(this.el_, e)
            }, e.prototype.width = function(e, t) {
                return this.dimension("width", e, t)
            }, e.prototype.height = function(e, t) {
                return this.dimension("height", e, t)
            }, e.prototype.dimensions = function(e, t) {
                this.width(e, !0), this.height(t)
            }, e.prototype.dimension = function(e, t, n) {
                if (void 0 !== t) return (null === t || t !== t) && (t = 0), -1 !== ("" + t).indexOf("%") || -1 !== ("" + t).indexOf("px") ? this.el_.style[e] = t : "auto" === t ? this.el_.style[e] = "" : this.el_.style[e] = t + "px", void(n || this.trigger("componentresize"));
                if (!this.el_) return 0;
                var i = this.el_.style[e],
                    r = i.indexOf("px");
                return -1 !== r ? parseInt(i.slice(0, r), 10) : parseInt(this.el_["offset" + J(e)], 10)
            }, e.prototype.currentDimension = function(e) {
                var t = 0;
                if ("width" !== e && "height" !== e) throw new Error("currentDimension only accepts width or height value");
                if ("function" == typeof mt.getComputedStyle) {
                    var n = mt.getComputedStyle(this.el_);
                    t = n.getPropertyValue(e) || n[e]
                }
                if (t = parseFloat(t), 0 === t) {
                    var i = "offset" + J(e);
                    t = this.el_[i]
                }
                return t
            }, e.prototype.currentDimensions = function() {
                return {
                    width: this.currentDimension("width"),
                    height: this.currentDimension("height")
                }
            }, e.prototype.currentWidth = function() {
                return this.currentDimension("width")
            }, e.prototype.currentHeight = function() {
                return this.currentDimension("height")
            }, e.prototype.focus = function() {
                this.el_.focus()
            }, e.prototype.blur = function() {
                this.el_.blur()
            }, e.prototype.emitTapEvents = function() {
                var e = 0,
                    t = null,
                    n = 10,
                    i = 200,
                    r = void 0;
                this.on("touchstart", function(n) {
                    1 === n.touches.length && (t = {
                        pageX: n.touches[0].pageX,
                        pageY: n.touches[0].pageY
                    }, e = (new Date).getTime(), r = !0)
                }), this.on("touchmove", function(e) {
                    if (e.touches.length > 1) r = !1;
                    else if (t) {
                        var i = e.touches[0].pageX - t.pageX,
                            a = e.touches[0].pageY - t.pageY,
                            s = Math.sqrt(i * i + a * a);
                        s > n && (r = !1)
                    }
                });
                var a = function() {
                    r = !1
                };
                this.on("touchleave", a), this.on("touchcancel", a), this.on("touchend", function(n) {
                    if (t = null, r === !0) {
                        var a = (new Date).getTime() - e;
                        i > a && (n.preventDefault(), this.trigger("tap"))
                    }
                })
            }, e.prototype.enableTouchActivity = function() {
                if (this.player() && this.player().reportUserActivity) {
                    var e = _n(this.player(), this.player().reportUserActivity),
                        t = void 0;
                    this.on("touchstart", function() {
                        e(), this.clearInterval(t), t = this.setInterval(e, 250)
                    });
                    var n = function(n) {
                        e(), this.clearInterval(t)
                    };
                    this.on("touchmove", e), this.on("touchend", n), this.on("touchcancel", n)
                }
            }, e.prototype.setTimeout = function(e, t) {
                var n, i, r = this;
                return e = _n(this, e), n = mt.setTimeout(function() {
                    r.off("dispose", i), e()
                }, t), i = function() {
                    return r.clearTimeout(n)
                }, i.guid = "vjs-timeout-" + n, this.on("dispose", i), n
            }, e.prototype.clearTimeout = function(e) {
                mt.clearTimeout(e);
                var t = function() {};
                return t.guid = "vjs-timeout-" + e, this.off("dispose", t), e
            }, e.prototype.setInterval = function(e, t) {
                var n = this;
                e = _n(this, e);
                var i = mt.setInterval(e, t),
                    r = function() {
                        return n.clearInterval(i)
                    };
                return r.guid = "vjs-interval-" + i, this.on("dispose", r), i
            }, e.prototype.clearInterval = function(e) {
                mt.clearInterval(e);
                var t = function() {};
                return t.guid = "vjs-interval-" + e, this.off("dispose", t), e
            }, e.prototype.requestAnimationFrame = function(e) {
                var t, n, i = this;
                return this.supportsRaf_ ? (e = _n(this, e), t = mt.requestAnimationFrame(function() {
                    i.off("dispose", n), e()
                }), n = function() {
                    return i.cancelAnimationFrame(t)
                }, n.guid = "vjs-raf-" + t, this.on("dispose", n), t) : this.setTimeout(e, 1e3 / 60)
            }, e.prototype.cancelAnimationFrame = function(e) {
                if (this.supportsRaf_) {
                    mt.cancelAnimationFrame(e);
                    var t = function() {};
                    return t.guid = "vjs-raf-" + e, this.off("dispose", t), e
                }
                return this.clearTimeout(e)
            }, e.registerComponent = function(t, n) {
                if ("string" != typeof t || !t) throw new Error('Illegal component name, "' + t + '"; must be a non-empty string.');
                var i = e.getComponent("Tech"),
                    r = i && i.isTech(n),
                    a = e === n || e.prototype.isPrototypeOf(n.prototype);
                if (r || !a) {
                    var s = void 0;
                    throw s = r ? "techs must be registered using Tech.registerTech()" : "must be a Component subclass", new Error('Illegal component, "' + t + '"; ' + s + ".")
                }
                t = J(t), e.components_ || (e.components_ = {});
                var o = e.getComponent("Player");
                if ("Player" === t && o && o.players) {
                    var u = o.players,
                        l = Object.keys(u);
                    if (u && l.length > 0 && l.map(function(e) {
                        return u[e]
                    }).every(Boolean)) throw new Error("Can not register Player component after player has been created.")
                }
                return e.components_[t] = n, n
            }, e.getComponent = function(t) {
                return t ? (t = J(t), e.components_ && e.components_[t] ? e.components_[t] : void 0) : void 0
            }, e
        }();
    Dn.prototype.supportsRaf_ = "function" == typeof mt.requestAnimationFrame && "function" == typeof mt.cancelAnimationFrame, Dn.registerComponent("Component", Dn);
    for (var Un = {}, On = [
        ["requestFullscreen", "exitFullscreen", "fullscreenElement", "fullscreenEnabled", "fullscreenchange", "fullscreenerror"],
        ["webkitRequestFullscreen", "webkitExitFullscreen", "webkitFullscreenElement", "webkitFullscreenEnabled", "webkitfullscreenchange", "webkitfullscreenerror"],
        ["webkitRequestFullScreen", "webkitCancelFullScreen", "webkitCurrentFullScreenElement", "webkitCancelFullScreen", "webkitfullscreenchange", "webkitfullscreenerror"],
        ["mozRequestFullScreen", "mozCancelFullScreen", "mozFullScreenElement", "mozFullScreenEnabled", "mozfullscreenchange", "mozfullscreenerror"],
        ["msRequestFullscreen", "msExitFullscreen", "msFullscreenElement", "msFullscreenEnabled", "MSFullscreenChange", "MSFullscreenError"]
    ], Mn = On[0], Rn = void 0, jn = 0; jn < On.length; jn++)
        if (On[jn][1] in bt) {
            Rn = On[jn];
            break
        }
    if (Rn)
        for (var Nn = 0; Nn < Rn.length; Nn++) Un[Mn[Nn]] = Rn[Nn];
    se.prototype.code = 0, se.prototype.message = "", se.prototype.status = null, se.errorTypes = ["MEDIA_ERR_CUSTOM", "MEDIA_ERR_ABORTED", "MEDIA_ERR_NETWORK", "MEDIA_ERR_DECODE", "MEDIA_ERR_SRC_NOT_SUPPORTED", "MEDIA_ERR_ENCRYPTED"], se.defaultMessages = {
        1: "You aborted the media playback",
        2: "A network error caused the media download to fail part-way.",
        3: "The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",
        4: "The media could not be loaded, either because the server or network failed or because the format is not supported.",
        5: "The media is encrypted and we do not have the keys to decrypt it."
    };
    for (var Bn = 0; Bn < se.errorTypes.length; Bn++) se[se.errorTypes[Bn]] = Bn, se.prototype[se.errorTypes[Bn]] = Bn;
    var Fn = oe,
        Vn = function(e) {
            var t = ["kind", "label", "language", "id", "inBandMetadataTrackDispatchType", "mode", "src"].reduce(function(t, n, i) {
                return e[n] && (t[n] = e[n]), t
            }, {
                cues: e.cues && Array.prototype.map.call(e.cues, function(e) {
                    return {
                        startTime: e.startTime,
                        endTime: e.endTime,
                        text: e.text,
                        id: e.id
                    }
                })
            });
            return t
        },
        Hn = function(e) {
            var t = e.$$("track"),
                n = Array.prototype.map.call(t, function(e) {
                    return e.track
                }),
                i = Array.prototype.map.call(t, function(e) {
                    var t = Vn(e.track);
                    return e.src && (t.src = e.src), t
                });
            return i.concat(Array.prototype.filter.call(e.textTracks(), function(e) {
                return -1 === n.indexOf(e)
            }).map(Vn))
        },
        qn = function(e, t) {
            return e.forEach(function(e) {
                var n = t.addRemoteTextTrack(e).track;
                !e.src && e.cues && e.cues.forEach(function(e) {
                    return n.addCue(e)
                })
            }), t.textTracks()
        },
        zn = {
            textTracksToJson: Hn,
            jsonToTextTracks: qn,
            trackToJson_: Vn
        },
        Wn = "vjs-modal-dialog",
        Gn = 27,
        Xn = function(e) {
            function t(n, i) {
                Wt(this, t);
                var r = Xt(this, e.call(this, n, i));
                return r.opened_ = r.hasBeenOpened_ = r.hasBeenFilled_ = !1, r.closeable(!r.options_.uncloseable), r.content(r.options_.content), r.contentEl_ = m("div", {
                    className: Wn + "-content"
                }, {
                    role: "document"
                }), r.descEl_ = m("p", {
                    className: Wn + "-description vjs-control-text",
                    id: r.el().getAttribute("aria-describedby")
                }), g(r.descEl_, r.description()), r.el_.appendChild(r.descEl_), r.el_.appendChild(r.contentEl_), r
            }
            return Gt(t, e), t.prototype.createEl = function() {
                return e.prototype.createEl.call(this, "div", {
                    className: this.buildCSSClass(),
                    tabIndex: -1
                }, {
                    "aria-describedby": this.id() + "_description",
                    "aria-hidden": "true",
                    "aria-label": this.label(),
                    role: "dialog"
                })
            }, t.prototype.dispose = function() {
                this.contentEl_ = null, this.descEl_ = null, this.previouslyActiveEl_ = null, e.prototype.dispose.call(this)
            }, t.prototype.buildCSSClass = function() {
                return Wn + " vjs-hidden " + e.prototype.buildCSSClass.call(this)
            }, t.prototype.handleKeyPress = function(e) {
                e.which === Gn && this.closeable() && this.close()
            }, t.prototype.label = function() {
                return this.localize(this.options_.label || "Modal Window")
            }, t.prototype.description = function() {
                var e = this.options_.description || this.localize("This is a modal window.");
                return this.closeable() && (e += " " + this.localize("This modal can be closed by pressing the Escape key or activating the close button.")), e
            }, t.prototype.open = function() {
                if (!this.opened_) {
                    var e = this.player();
                    this.trigger("beforemodalopen"), this.opened_ = !0, (this.options_.fillAlways || !this.hasBeenOpened_ && !this.hasBeenFilled_) && this.fill(), this.wasPlaying_ = !e.paused(), this.options_.pauseOnOpen && this.wasPlaying_ && e.pause(), this.closeable() && this.on(this.el_.ownerDocument, "keydown", _n(this, this.handleKeyPress)), this.hadControls_ = e.controls(), e.controls(!1), this.show(), this.conditionalFocus_(), this.el().setAttribute("aria-hidden", "false"), this.trigger("modalopen"), this.hasBeenOpened_ = !0
                }
            }, t.prototype.opened = function(e) {
                return "boolean" == typeof e && this[e ? "open" : "close"](), this.opened_
            }, t.prototype.close = function() {
                if (this.opened_) {
                    var e = this.player();
                    this.trigger("beforemodalclose"), this.opened_ = !1, this.wasPlaying_ && this.options_.pauseOnOpen && e.play(), this.closeable() && this.off(this.el_.ownerDocument, "keydown", _n(this, this.handleKeyPress)), this.hadControls_ && e.controls(!0), this.hide(), this.el().setAttribute("aria-hidden", "true"), this.trigger("modalclose"), this.conditionalBlur_(), this.options_.temporary && this.dispose()
                }
            }, t.prototype.closeable = function n(e) {
                if ("boolean" == typeof e) {
                    var n = this.closeable_ = !!e,
                        t = this.getChild("closeButton");
                    if (n && !t) {
                        var i = this.contentEl_;
                        this.contentEl_ = this.el_, t = this.addChild("closeButton", {
                            controlText: "Close Modal Dialog"
                        }), this.contentEl_ = i, this.on(t, "close", this.close)
                    }!n && t && (this.off(t, "close", this.close), this.removeChild(t), t.dispose())
                }
                return this.closeable_
            }, t.prototype.fill = function() {
                this.fillWith(this.content())
            }, t.prototype.fillWith = function(e) {
                var t = this.contentEl(),
                    n = t.parentNode,
                    i = t.nextSibling;
                this.trigger("beforemodalfill"), this.hasBeenFilled_ = !0, n.removeChild(t), this.empty(), R(t, e), this.trigger("modalfill"), i ? n.insertBefore(t, i) : n.appendChild(t);
                var r = this.getChild("closeButton");
                r && n.appendChild(r.el_)
            }, t.prototype.empty = function() {
                this.trigger("beforemodalempty"), U(this.contentEl()), this.trigger("modalempty")
            }, t.prototype.content = function(e) {
                return "undefined" != typeof e && (this.content_ = e), this.content_
            }, t.prototype.conditionalFocus_ = function() {
                var e = bt.activeElement,
                    t = this.player_.el_;
                this.previouslyActiveEl_ = null, (t.contains(e) || t === e) && (this.previouslyActiveEl_ = e, this.focus(), this.on(bt, "keydown", this.handleKeyDown))
            }, t.prototype.conditionalBlur_ = function() {
                this.previouslyActiveEl_ && (this.previouslyActiveEl_.focus(), this.previouslyActiveEl_ = null), this.off(bt, "keydown", this.handleKeyDown)
            }, t.prototype.handleKeyDown = function(e) {
                if (9 === e.which) {
                    for (var t = this.focusableEls_(), n = this.el_.querySelector(":focus"), i = void 0, r = 0; r < t.length; r++)
                        if (n === t[r]) {
                            i = r;
                            break
                        }
                    bt.activeElement === this.el_ && (i = 0), e.shiftKey && 0 === i ? (t[t.length - 1].focus(), e.preventDefault()) : e.shiftKey || i !== t.length - 1 || (t[0].focus(), e.preventDefault())
                }
            }, t.prototype.focusableEls_ = function() {
                var e = this.el_.querySelectorAll("*");
                return Array.prototype.filter.call(e, function(e) {
                    return (e instanceof mt.HTMLAnchorElement || e instanceof mt.HTMLAreaElement) && e.hasAttribute("href") || (e instanceof mt.HTMLInputElement || e instanceof mt.HTMLSelectElement || e instanceof mt.HTMLTextAreaElement || e instanceof mt.HTMLButtonElement) && !e.hasAttribute("disabled") || e instanceof mt.HTMLIFrameElement || e instanceof mt.HTMLObjectElement || e instanceof mt.HTMLEmbedElement || e.hasAttribute("tabindex") && -1 !== e.getAttribute("tabindex") || e.hasAttribute("contenteditable")
                })
            }, t
        }(Dn);
    Xn.prototype.options_ = {
        pauseOnOpen: !0,
        temporary: !0
    }, Dn.registerComponent("ModalDialog", Xn);
    var Yn = function(e) {
        function t() {
            var n, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [],
                r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null;
            Wt(this, t);
            var a = Xt(this, e.call(this));
            if (!r && (r = a, jt)) {
                r = bt.createElement("custom");
                for (var s in t.prototype) "constructor" !== s && (r[s] = t.prototype[s])
            }
            r.tracks_ = [], Object.defineProperty(r, "length", {
                get: function() {
                    return this.tracks_.length
                }
            });
            for (var o = 0; o < i.length; o++) r.addTrack(i[o]);
            return n = r, Xt(a, n)
        }
        return Gt(t, e), t.prototype.addTrack = function(e) {
            var t = this.tracks_.length;
            "" + t in this || Object.defineProperty(this, t, {
                get: function() {
                    return this.tracks_[t]
                }
            }), -1 === this.tracks_.indexOf(e) && (this.tracks_.push(e), this.trigger({
                track: e,
                type: "addtrack"
            }))
        }, t.prototype.removeTrack = function(e) {
            for (var t = void 0, n = 0, i = this.length; i > n; n++)
                if (this[n] === e) {
                    t = this[n], t.off && t.off(), this.tracks_.splice(n, 1);
                    break
                }
            t && this.trigger({
                track: t,
                type: "removetrack"
            })
        }, t.prototype.getTrackById = function(e) {
            for (var t = null, n = 0, i = this.length; i > n; n++) {
                var r = this[n];
                if (r.id === e) {
                    t = r;
                    break
                }
            }
            return t
        }, t
    }(Sn);
    Yn.prototype.allowedEvents_ = {
        change: "change",
        addtrack: "addtrack",
        removetrack: "removetrack"
    };
    for (var $n in Yn.prototype.allowedEvents_) Yn.prototype["on" + $n] = null;
    var Qn = function(e, t) {
            for (var n = 0; n < e.length; n++) Object.keys(e[n]).length && t.id !== e[n].id && (e[n].enabled = !1)
        },
        Kn = function(e) {
            function t() {
                var n, i, r = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [];
                Wt(this, t);
                for (var a = void 0, s = r.length - 1; s >= 0; s--)
                    if (r[s].enabled) {
                        Qn(r, r[s]);
                        break
                    }
                if (jt) {
                    a = bt.createElement("custom");
                    for (var o in Yn.prototype) "constructor" !== o && (a[o] = Yn.prototype[o]);
                    for (var u in t.prototype) "constructor" !== u && (a[u] = t.prototype[u])
                }
                return a = n = Xt(this, e.call(this, r, a)), a.changing_ = !1, i = a, Xt(n, i)
            }
            return Gt(t, e), t.prototype.addTrack = function(t) {
                var n = this;
                t.enabled && Qn(this, t), e.prototype.addTrack.call(this, t), t.addEventListener && t.addEventListener("enabledchange", function() {
                    n.changing_ || (n.changing_ = !0, Qn(n, t), n.changing_ = !1, n.trigger("change"))
                })
            }, t
        }(Yn),
        Jn = function(e, t) {
            for (var n = 0; n < e.length; n++) Object.keys(e[n]).length && t.id !== e[n].id && (e[n].selected = !1)
        },
        Zn = function(e) {
            function t() {
                var n, i, r = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [];
                Wt(this, t);
                for (var a = void 0, s = r.length - 1; s >= 0; s--)
                    if (r[s].selected) {
                        Jn(r, r[s]);
                        break
                    }
                if (jt) {
                    a = bt.createElement("custom");
                    for (var o in Yn.prototype) "constructor" !== o && (a[o] = Yn.prototype[o]);
                    for (var u in t.prototype) "constructor" !== u && (a[u] = t.prototype[u])
                }
                return a = n = Xt(this, e.call(this, r, a)), a.changing_ = !1, Object.defineProperty(a, "selectedIndex", {
                    get: function() {
                        for (var e = 0; e < this.length; e++)
                            if (this[e].selected) return e;
                        return -1
                    },
                    set: function() {}
                }), i = a, Xt(n, i)
            }
            return Gt(t, e), t.prototype.addTrack = function(t) {
                var n = this;
                t.selected && Jn(this, t), e.prototype.addTrack.call(this, t), t.addEventListener && t.addEventListener("selectedchange", function() {
                    n.changing_ || (n.changing_ = !0, Jn(n, t), n.changing_ = !1, n.trigger("change"))
                })
            }, t
        }(Yn),
        ei = function(e) {
            function t() {
                var n, i, r = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [];
                Wt(this, t);
                var a = void 0;
                if (jt) {
                    a = bt.createElement("custom");
                    for (var s in Yn.prototype) "constructor" !== s && (a[s] = Yn.prototype[s]);
                    for (var o in t.prototype) "constructor" !== o && (a[o] = t.prototype[o])
                }
                return a = n = Xt(this, e.call(this, r, a)), i = a, Xt(n, i)
            }
            return Gt(t, e), t.prototype.addTrack = function(t) {
                e.prototype.addTrack.call(this, t), t.addEventListener("modechange", _n(this, function() {
                    this.trigger("change")
                }));
                var n = ["metadata", "chapters"]; - 1 === n.indexOf(t.kind) && t.addEventListener("modechange", _n(this, function() {
                    this.trigger("selectedlanguagechange")
                }))
            }, t
        }(Yn),
        ti = function() {
            function e() {
                var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [];
                Wt(this, e);
                var n = this;
                if (jt) {
                    n = bt.createElement("custom");
                    for (var i in e.prototype) "constructor" !== i && (n[i] = e.prototype[i])
                }
                n.trackElements_ = [], Object.defineProperty(n, "length", {
                    get: function() {
                        return this.trackElements_.length
                    }
                });
                for (var r = 0, a = t.length; a > r; r++) n.addTrackElement_(t[r]);
                return jt ? n : void 0
            }
            return e.prototype.addTrackElement_ = function(e) {
                var t = this.trackElements_.length;
                "" + t in this || Object.defineProperty(this, t, {
                    get: function() {
                        return this.trackElements_[t]
                    }
                }), -1 === this.trackElements_.indexOf(e) && this.trackElements_.push(e)
            }, e.prototype.getTrackElementByTrack_ = function(e) {
                for (var t = void 0, n = 0, i = this.trackElements_.length; i > n; n++)
                    if (e === this.trackElements_[n].track) {
                        t = this.trackElements_[n];
                        break
                    }
                return t
            }, e.prototype.removeTrackElement_ = function(e) {
                for (var t = 0, n = this.trackElements_.length; n > t; t++)
                    if (e === this.trackElements_[t]) {
                        this.trackElements_.splice(t, 1);
                        break
                    }
            }, e
        }(),
        ni = function() {
            function e(t) {
                Wt(this, e);
                var n = this;
                if (jt) {
                    n = bt.createElement("custom");
                    for (var i in e.prototype) "constructor" !== i && (n[i] = e.prototype[i])
                }
                return e.prototype.setCues_.call(n, t), Object.defineProperty(n, "length", {
                    get: function() {
                        return this.length_
                    }
                }), jt ? n : void 0
            }
            return e.prototype.setCues_ = function(e) {
                var t = this.length || 0,
                    n = 0,
                    i = e.length;
                this.cues_ = e, this.length_ = e.length;
                var r = function(e) {
                    "" + e in this || Object.defineProperty(this, "" + e, {
                        get: function() {
                            return this.cues_[e]
                        }
                    })
                };
                if (i > t)
                    for (n = t; i > n; n++) r.call(this, n)
            }, e.prototype.getCueById = function(e) {
                for (var t = null, n = 0, i = this.length; i > n; n++) {
                    var r = this[n];
                    if (r.id === e) {
                        t = r;
                        break
                    }
                }
                return t
            }, e
        }(),
        ii = {
            alternative: "alternative",
            captions: "captions",
            main: "main",
            sign: "sign",
            subtitles: "subtitles",
            commentary: "commentary"
        },
        ri = {
            alternative: "alternative",
            descriptions: "descriptions",
            main: "main",
            "main-desc": "main-desc",
            translation: "translation",
            commentary: "commentary"
        },
        ai = {
            subtitles: "subtitles",
            captions: "captions",
            descriptions: "descriptions",
            chapters: "chapters",
            metadata: "metadata"
        },
        si = {
            disabled: "disabled",
            hidden: "hidden",
            showing: "showing"
        },
        oi = function(e) {
            function t() {
                var n, i = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
                Wt(this, t);
                var r = Xt(this, e.call(this)),
                    a = r;
                if (jt) {
                    a = bt.createElement("custom");
                    for (var s in t.prototype) "constructor" !== s && (a[s] = t.prototype[s])
                }
                var o = {
                        id: i.id || "vjs_track_" + N(),
                        kind: i.kind || "",
                        label: i.label || "",
                        language: i.language || ""
                    },
                    u = function(e) {
                        Object.defineProperty(a, e, {
                            get: function() {
                                return o[e]
                            },
                            set: function() {}
                        })
                    };
                for (var l in o) u(l);
                return n = a, Xt(r, n)
            }
            return Gt(t, e), t
        }(Sn),
        ui = function(e) {
            var t = ["protocol", "hostname", "port", "pathname", "search", "hash", "host"],
                n = bt.createElement("a");
            n.href = e;
            var i = "" === n.host && "file:" !== n.protocol,
                r = void 0;
            i && (r = bt.createElement("div"), r.innerHTML = '<a href="' + e + '"></a>', n = r.firstChild, r.setAttribute("style", "display:none; position:absolute;"), bt.body.appendChild(r));
            for (var a = {}, s = 0; s < t.length; s++) a[t[s]] = n[t[s]];
            return "http:" === a.protocol && (a.host = a.host.replace(/:80$/, "")), "https:" === a.protocol && (a.host = a.host.replace(/:443$/, "")), a.protocol || (a.protocol = mt.location.protocol), i && bt.body.removeChild(r), a
        },
        li = function(e) {
            if (!e.match(/^https?:\/\//)) {
                var t = bt.createElement("div");
                t.innerHTML = '<a href="' + e + '">x</a>', e = t.firstChild.href
            }
            return e
        },
        ci = function(e) {
            if ("string" == typeof e) {
                var t = /^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i,
                    n = t.exec(e);
                if (n) return n.pop().toLowerCase()
            }
            return ""
        },
        di = function(e) {
            var t = mt.location,
                n = ui(e),
                i = ":" === n.protocol ? t.protocol : n.protocol,
                r = i + n.host !== t.protocol + t.host;
            return r
        },
        hi = (Object.freeze || Object)({
            parseUrl: ui,
            getAbsoluteURL: li,
            getFileExtension: ci,
            isCrossOrigin: di
        }),
        pi = ce,
        fi = Object.prototype.toString,
        mi = e(function(e, t) {
            function n(e) {
                return e.replace(/^\s*|\s*$/g, "")
            }
            t = e.exports = n, t.left = function(e) {
                return e.replace(/^\s*/, "")
            }, t.right = function(e) {
                return e.replace(/\s*$/, "")
            }
        }),
        gi = de,
        vi = Object.prototype.toString,
        yi = Object.prototype.hasOwnProperty,
        _i = function(e) {
            return "[object Array]" === Object.prototype.toString.call(e)
        },
        bi = function(e) {
            if (!e) return {};
            var t = {};
            return gi(mi(e).split("\n"), function(e) {
                var n = e.indexOf(":"),
                    i = mi(e.slice(0, n)).toLowerCase(),
                    r = mi(e.slice(n + 1));
                "undefined" == typeof t[i] ? t[i] = r : _i(t[i]) ? t[i].push(r) : t[i] = [t[i], r]
            }), t
        },
        Ti = me,
        Si = Object.prototype.hasOwnProperty,
        ki = _e;
    _e.XMLHttpRequest = mt.XMLHttpRequest || Se, _e.XDomainRequest = "withCredentials" in new _e.XMLHttpRequest ? _e.XMLHttpRequest : mt.XDomainRequest, ge(["get", "put", "post", "patch", "head", "delete"], function(e) {
        _e["delete" === e ? "del" : e] = function(t, n, i) {
            return n = ye(t, n, i), n.method = e.toUpperCase(), be(n)
        }
    });
    var wi = function(e, t) {
            var n = new mt.WebVTT.Parser(mt, mt.vttjs, mt.WebVTT.StringDecoder()),
                i = [];
            n.oncue = function(e) {
                t.addCue(e)
            }, n.onparsingerror = function(e) {
                i.push(e)
            }, n.onflush = function() {
                t.trigger({
                    type: "loadeddata",
                    target: t
                })
            }, n.parse(e), i.length > 0 && (mt.console && mt.console.groupCollapsed && mt.console.groupCollapsed("Text Track parsing errors for " + t.src), i.forEach(function(e) {
                return tn.error(e)
            }), mt.console && mt.console.groupEnd && mt.console.groupEnd()), n.flush()
        },
        Ci = function(e, t) {
            var n = {
                    uri: e
                },
                i = di(e);
            i && (n.cors = i), ki(n, _n(this, function(e, n, i) {
                if (e) return tn.error(e, n);
                if (t.loaded_ = !0, "function" != typeof mt.WebVTT) {
                    if (t.tech_) {
                        var r = function() {
                            return wi(i, t)
                        };
                        t.tech_.on("vttjsloaded", r),
                            t.tech_.on("vttjserror", function() {
                                tn.error("vttjs failed to load, stopping trying to process " + t.src), t.tech_.off("vttjsloaded", r)
                            })
                    }
                } else wi(i, t)
            }))
        },
        Ei = function(e) {
            function t() {
                var n, i, r = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
                if (Wt(this, t), !r.tech) throw new Error("A tech was not provided.");
                var a = ee(r, {
                        kind: ai[r.kind] || "subtitles",
                        language: r.language || r.srclang || ""
                    }),
                    s = si[a.mode] || "disabled",
                    o = a["default"];
                ("metadata" === a.kind || "chapters" === a.kind) && (s = "hidden");
                var u = n = Xt(this, e.call(this, a));
                if (u.tech_ = a.tech, jt)
                    for (var l in t.prototype) "constructor" !== l && (u[l] = t.prototype[l]);
                u.cues_ = [], u.activeCues_ = [];
                var c = new ni(u.cues_),
                    d = new ni(u.activeCues_),
                    h = !1,
                    p = _n(u, function() {
                        this.activeCues = this.activeCues, h && (this.trigger("cuechange"), h = !1)
                    });
                return "disabled" !== s && u.tech_.ready(function() {
                    u.tech_.on("timeupdate", p)
                }, !0), Object.defineProperty(u, "default", {
                    get: function() {
                        return o
                    },
                    set: function() {}
                }), Object.defineProperty(u, "mode", {
                    get: function() {
                        return s
                    },
                    set: function(e) {
                        var t = this;
                        si[e] && (s = e, "showing" === s && this.tech_.ready(function() {
                            t.tech_.on("timeupdate", p)
                        }, !0), this.trigger("modechange"))
                    }
                }), Object.defineProperty(u, "cues", {
                    get: function() {
                        return this.loaded_ ? c : null
                    },
                    set: function() {}
                }), Object.defineProperty(u, "activeCues", {
                    get: function() {
                        if (!this.loaded_) return null;
                        if (0 === this.cues.length) return d;
                        for (var e = this.tech_.currentTime(), t = [], n = 0, i = this.cues.length; i > n; n++) {
                            var r = this.cues[n];
                            r.startTime <= e && r.endTime >= e ? t.push(r) : r.startTime === r.endTime && r.startTime <= e && r.startTime + .5 >= e && t.push(r)
                        }
                        if (h = !1, t.length !== this.activeCues_.length) h = !0;
                        else
                            for (var a = 0; a < t.length; a++) - 1 === this.activeCues_.indexOf(t[a]) && (h = !0);
                        return this.activeCues_ = t, d.setCues_(this.activeCues_), d
                    },
                    set: function() {}
                }), a.src ? (u.src = a.src, Ci(a.src, u)) : u.loaded_ = !0, i = u, Xt(n, i)
            }
            return Gt(t, e), t.prototype.addCue = function(e) {
                var t = e;
                if (mt.vttjs && !(e instanceof mt.vttjs.VTTCue)) {
                    t = new mt.vttjs.VTTCue(e.startTime, e.endTime, e.text);
                    for (var n in e) n in t || (t[n] = e[n]);
                    t.id = e.id, t.originalCue_ = e
                }
                for (var i = this.tech_.textTracks(), r = 0; r < i.length; r++) i[r] !== this && i[r].removeCue(t);
                this.cues_.push(t), this.cues.setCues_(this.cues_)
            }, t.prototype.removeCue = function(e) {
                for (var t = this.cues_.length; t--;) {
                    var n = this.cues_[t];
                    if (n === e || n.originalCue_ && n.originalCue_ === e) {
                        this.cues_.splice(t, 1), this.cues.setCues_(this.cues_);
                        break
                    }
                }
            }, t
        }(oi);
    Ei.prototype.allowedEvents_ = {
        cuechange: "cuechange"
    };
    var Ai = function(e) {
            function t() {
                var n, i, r = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
                Wt(this, t);
                var a = ee(r, {
                        kind: ri[r.kind] || ""
                    }),
                    s = n = Xt(this, e.call(this, a)),
                    o = !1;
                if (jt)
                    for (var u in t.prototype) "constructor" !== u && (s[u] = t.prototype[u]);
                return Object.defineProperty(s, "enabled", {
                    get: function() {
                        return o
                    },
                    set: function(e) {
                        "boolean" == typeof e && e !== o && (o = e, this.trigger("enabledchange"))
                    }
                }), a.enabled && (s.enabled = a.enabled), s.loaded_ = !0, i = s, Xt(n, i)
            }
            return Gt(t, e), t
        }(oi),
        Li = function(e) {
            function t() {
                var n, i, r = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
                Wt(this, t);
                var a = ee(r, {
                        kind: ii[r.kind] || ""
                    }),
                    s = n = Xt(this, e.call(this, a)),
                    o = !1;
                if (jt)
                    for (var u in t.prototype) "constructor" !== u && (s[u] = t.prototype[u]);
                return Object.defineProperty(s, "selected", {
                    get: function() {
                        return o
                    },
                    set: function(e) {
                        "boolean" == typeof e && e !== o && (o = e, this.trigger("selectedchange"))
                    }
                }), a.selected && (s.selected = a.selected), i = s, Xt(n, i)
            }
            return Gt(t, e), t
        }(oi),
        Ii = 0,
        Pi = 1,
        xi = 2,
        Di = 3,
        Ui = function(e) {
            function t() {
                var n = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
                Wt(this, t);
                var i = Xt(this, e.call(this)),
                    r = void 0,
                    a = i;
                if (jt) {
                    a = bt.createElement("custom");
                    for (var s in t.prototype) "constructor" !== s && (a[s] = t.prototype[s])
                }
                var o = new Ei(n);
                if (a.kind = o.kind, a.src = o.src, a.srclang = o.language, a.label = o.label, a["default"] = o["default"], Object.defineProperty(a, "readyState", {
                    get: function() {
                        return r
                    }
                }), Object.defineProperty(a, "track", {
                    get: function() {
                        return o
                    }
                }), r = Ii, o.addEventListener("loadeddata", function() {
                    r = xi, a.trigger({
                        type: "load",
                        target: a
                    })
                }), jt) {
                    var u;
                    return u = a, Xt(i, u)
                }
                return i
            }
            return Gt(t, e), t
        }(Sn);
    Ui.prototype.allowedEvents_ = {
        load: "load"
    }, Ui.NONE = Ii, Ui.LOADING = Pi, Ui.LOADED = xi, Ui.ERROR = Di;
    var Oi = {
        audio: {
            ListClass: Kn,
            TrackClass: Ai,
            capitalName: "Audio"
        },
        video: {
            ListClass: Zn,
            TrackClass: Li,
            capitalName: "Video"
        },
        text: {
            ListClass: ei,
            TrackClass: Ei,
            capitalName: "Text"
        }
    };
    Object.keys(Oi).forEach(function(e) {
        Oi[e].getterName = e + "Tracks", Oi[e].privateName = e + "Tracks_"
    });
    var Mi = {
            remoteText: {
                ListClass: ei,
                TrackClass: Ei,
                capitalName: "RemoteText",
                getterName: "remoteTextTracks",
                privateName: "remoteTextTracks_"
            },
            remoteTextEl: {
                ListClass: ti,
                TrackClass: Ui,
                capitalName: "RemoteTextTrackEls",
                getterName: "remoteTextTrackEls",
                privateName: "remoteTextTrackEls_"
            }
        },
        Ri = ee(Oi, Mi);
    Mi.names = Object.keys(Mi), Oi.names = Object.keys(Oi), Ri.names = [].concat(Mi.names).concat(Oi.names);
    var ji = Object.create || function() {
        function e() {}
        return function(t) {
            if (1 !== arguments.length) throw new Error("Object.create shim only accepts one parameter.");
            return e.prototype = t, new e
        }
    }();
    ke.prototype = ji(Error.prototype), ke.prototype.constructor = ke, ke.Errors = {
        BadSignature: {
            code: 0,
            message: "Malformed WebVTT signature."
        },
        BadTimeStamp: {
            code: 1,
            message: "Malformed time stamp."
        }
    }, Ce.prototype = {
        set: function(e, t) {
            this.get(e) || "" === t || (this.values[e] = t)
        },
        get: function(e, t, n) {
            return n ? this.has(e) ? this.values[e] : t[n] : this.has(e) ? this.values[e] : t
        },
        has: function(e) {
            return e in this.values
        },
        alt: function(e, t, n) {
            for (var i = 0; i < n.length; ++i)
                if (t === n[i]) {
                    this.set(e, t);
                    break
                }
        },
        integer: function(e, t) {
            /^-?\d+$/.test(t) && this.set(e, parseInt(t, 10))
        },
        percent: function(e, t) {
            var n;
            return (n = t.match(/^([\d]{1,3})(\.[\d]*)?%$/)) && (t = parseFloat(t), t >= 0 && 100 >= t) ? (this.set(e, t), !0) : !1
        }
    };
    var Ni = {
            "&amp;": "&",
            "&lt;": "<",
            "&gt;": ">",
            "&lrm;": "‎",
            "&rlm;": "‏",
            "&nbsp;": " "
        },
        Bi = {
            c: "span",
            i: "i",
            b: "b",
            u: "u",
            ruby: "ruby",
            rt: "rt",
            v: "span",
            lang: "span"
        },
        Fi = {
            v: "title",
            lang: "lang"
        },
        Vi = {
            rt: "ruby"
        },
        Hi = [
            [1470, 1470],
            [1472, 1472],
            [1475, 1475],
            [1478, 1478],
            [1488, 1514],
            [1520, 1524],
            [1544, 1544],
            [1547, 1547],
            [1549, 1549],
            [1563, 1563],
            [1566, 1610],
            [1645, 1647],
            [1649, 1749],
            [1765, 1766],
            [1774, 1775],
            [1786, 1805],
            [1807, 1808],
            [1810, 1839],
            [1869, 1957],
            [1969, 1969],
            [1984, 2026],
            [2036, 2037],
            [2042, 2042],
            [2048, 2069],
            [2074, 2074],
            [2084, 2084],
            [2088, 2088],
            [2096, 2110],
            [2112, 2136],
            [2142, 2142],
            [2208, 2208],
            [2210, 2220],
            [8207, 8207],
            [64285, 64285],
            [64287, 64296],
            [64298, 64310],
            [64312, 64316],
            [64318, 64318],
            [64320, 64321],
            [64323, 64324],
            [64326, 64449],
            [64467, 64829],
            [64848, 64911],
            [64914, 64967],
            [65008, 65020],
            [65136, 65140],
            [65142, 65276],
            [67584, 67589],
            [67592, 67592],
            [67594, 67637],
            [67639, 67640],
            [67644, 67644],
            [67647, 67669],
            [67671, 67679],
            [67840, 67867],
            [67872, 67897],
            [67903, 67903],
            [67968, 68023],
            [68030, 68031],
            [68096, 68096],
            [68112, 68115],
            [68117, 68119],
            [68121, 68147],
            [68160, 68167],
            [68176, 68184],
            [68192, 68223],
            [68352, 68405],
            [68416, 68437],
            [68440, 68466],
            [68472, 68479],
            [68608, 68680],
            [126464, 126467],
            [126469, 126495],
            [126497, 126498],
            [126500, 126500],
            [126503, 126503],
            [126505, 126514],
            [126516, 126519],
            [126521, 126521],
            [126523, 126523],
            [126530, 126530],
            [126535, 126535],
            [126537, 126537],
            [126539, 126539],
            [126541, 126543],
            [126545, 126546],
            [126548, 126548],
            [126551, 126551],
            [126553, 126553],
            [126555, 126555],
            [126557, 126557],
            [126559, 126559],
            [126561, 126562],
            [126564, 126564],
            [126567, 126570],
            [126572, 126578],
            [126580, 126583],
            [126585, 126588],
            [126590, 126590],
            [126592, 126601],
            [126603, 126619],
            [126625, 126627],
            [126629, 126633],
            [126635, 126651],
            [1114109, 1114109]
        ];
    De.prototype.applyStyles = function(e, t) {
        t = t || this.div;
        for (var n in e) e.hasOwnProperty(n) && (t.style[n] = e[n])
    }, De.prototype.formatStyle = function(e, t) {
        return 0 === e ? 0 : e + t
    }, Ue.prototype = ji(De.prototype), Ue.prototype.constructor = Ue, Oe.prototype.move = function(e, t) {
        switch (t = void 0 !== t ? t : this.lineHeight, e) {
            case "+x":
                this.left += t, this.right += t;
                break;
            case "-x":
                this.left -= t, this.right -= t;
                break;
            case "+y":
                this.top += t, this.bottom += t;
                break;
            case "-y":
                this.top -= t, this.bottom -= t
        }
    }, Oe.prototype.overlaps = function(e) {
        return this.left < e.right && this.right > e.left && this.top < e.bottom && this.bottom > e.top
    }, Oe.prototype.overlapsAny = function(e) {
        for (var t = 0; t < e.length; t++)
            if (this.overlaps(e[t])) return !0;
        return !1
    }, Oe.prototype.within = function(e) {
        return this.top >= e.top && this.bottom <= e.bottom && this.left >= e.left && this.right <= e.right
    }, Oe.prototype.overlapsOppositeAxis = function(e, t) {
        switch (t) {
            case "+x":
                return this.left < e.left;
            case "-x":
                return this.right > e.right;
            case "+y":
                return this.top < e.top;
            case "-y":
                return this.bottom > e.bottom
        }
    }, Oe.prototype.intersectPercentage = function(e) {
        var t = Math.max(0, Math.min(this.right, e.right) - Math.max(this.left, e.left)),
            n = Math.max(0, Math.min(this.bottom, e.bottom) - Math.max(this.top, e.top)),
            i = t * n;
        return i / (this.height * this.width)
    }, Oe.prototype.toCSSCompatValues = function(e) {
        return {
            top: this.top - e.top,
            bottom: e.bottom - this.bottom,
            left: this.left - e.left,
            right: e.right - this.right,
            height: this.height,
            width: this.width
        }
    }, Oe.getSimpleBoxPosition = function(e) {
        var t = e.div ? e.div.offsetHeight : e.tagName ? e.offsetHeight : 0,
            n = e.div ? e.div.offsetWidth : e.tagName ? e.offsetWidth : 0,
            i = e.div ? e.div.offsetTop : e.tagName ? e.offsetTop : 0;
        e = e.div ? e.div.getBoundingClientRect() : e.tagName ? e.getBoundingClientRect() : e;
        var r = {
            left: e.left,
            right: e.right,
            top: e.top || i,
            height: e.height || t,
            bottom: e.bottom || i + (e.height || t),
            width: e.width || n
        };
        return r
    }, Re.StringDecoder = function() {
        return {
            decode: function(e) {
                if (!e) return "";
                if ("string" != typeof e) throw new Error("Error - expected string data.");
                return decodeURIComponent(encodeURIComponent(e))
            }
        }
    }, Re.convertCueToDOMTree = function(e, t) {
        return e && t ? Le(e, t) : null
    };
    var qi = .05,
        zi = "sans-serif",
        Wi = "1.5%";
    Re.processCues = function(e, t, n) {
        function i(e) {
            for (var t = 0; t < e.length; t++)
                if (e[t].hasBeenReset || !e[t].displayState) return !0;
            return !1
        }
        if (!e || !t || !n) return null;
        for (; n.firstChild;) n.removeChild(n.firstChild);
        var r = e.document.createElement("div");
        if (r.style.position = "absolute", r.style.left = "0", r.style.right = "0", r.style.top = "0", r.style.bottom = "0", r.style.margin = Wi, n.appendChild(r), i(t)) {
            var a = [],
                s = Oe.getSimpleBoxPosition(r),
                o = Math.round(s.height * qi * 100) / 100,
                u = {
                    font: o + "px " + zi
                };
            ! function() {
                for (var n, i, o = 0; o < t.length; o++) i = t[o], n = new Ue(e, i, u), r.appendChild(n.div), Me(e, n, s, a), i.displayState = n.div, a.push(Oe.getSimpleBoxPosition(n))
            }()
        } else
            for (var l = 0; l < t.length; l++) r.appendChild(t[l].displayState)
    }, Re.Parser = function(e, t, n) {
        n || (n = t, t = {}), t || (t = {}), this.window = e, this.vttjs = t, this.state = "INITIAL", this.buffer = "", this.decoder = n || new TextDecoder("utf8"), this.regionList = []
    }, Re.Parser.prototype = {
        reportOrThrowError: function(e) {
            if (!(e instanceof ke)) throw e;
            this.onparsingerror && this.onparsingerror(e)
        },
        parse: function(e) {
            function t() {
                for (var e = a.buffer, t = 0; t < e.length && "\r" !== e[t] && "\n" !== e[t];)++t;
                var n = e.substr(0, t);
                return "\r" === e[t] && ++t, "\n" === e[t] && ++t, a.buffer = e.substr(t), n
            }

            function n(e) {
                var t = new Ce;
                if (Ee(e, function(e, n) {
                    switch (e) {
                        case "id":
                            t.set(e, n);
                            break;
                        case "width":
                            t.percent(e, n);
                            break;
                        case "lines":
                            t.integer(e, n);
                            break;
                        case "regionanchor":
                        case "viewportanchor":
                            var i = n.split(",");
                            if (2 !== i.length) break;
                            var r = new Ce;
                            if (r.percent("x", i[0]), r.percent("y", i[1]), !r.has("x") || !r.has("y")) break;
                            t.set(e + "X", r.get("x")), t.set(e + "Y", r.get("y"));
                            break;
                        case "scroll":
                            t.alt(e, n, ["up"])
                    }
                }, /=/, /\s/), t.has("id")) {
                    var n = new(a.vttjs.VTTRegion || a.window.VTTRegion);
                    n.width = t.get("width", 100), n.lines = t.get("lines", 3), n.regionAnchorX = t.get("regionanchorX", 0), n.regionAnchorY = t.get("regionanchorY", 100), n.viewportAnchorX = t.get("viewportanchorX", 0), n.viewportAnchorY = t.get("viewportanchorY", 100), n.scroll = t.get("scroll", ""), a.onregion && a.onregion(n), a.regionList.push({
                        id: t.get("id"),
                        region: n
                    })
                }
            }

            function i(e) {
                var t = new Ce;
                Ee(e, function(e, n) {
                    switch (e) {
                        case "MPEGT":
                            t.integer(e + "S", n);
                            break;
                        case "LOCA":
                            t.set(e + "L", we(n))
                    }
                }, /[^\d]:/, /,/), a.ontimestampmap && a.ontimestampmap({
                    MPEGTS: t.get("MPEGTS"),
                    LOCAL: t.get("LOCAL")
                })
            }

            function r(e) {
                e.match(/X-TIMESTAMP-MAP/) ? Ee(e, function(e, t) {
                    switch (e) {
                        case "X-TIMESTAMP-MAP":
                            i(t)
                    }
                }, /=/) : Ee(e, function(e, t) {
                    switch (e) {
                        case "Region":
                            n(t)
                    }
                }, /:/)
            }
            var a = this;
            e && (a.buffer += a.decoder.decode(e, {
                stream: !0
            }));
            try {
                var s;
                if ("INITIAL" === a.state) {
                    if (!/\r\n|\n/.test(a.buffer)) return this;
                    s = t();
                    var o = s.match(/^WEBVTT([ \t].*)?$/);
                    if (!o || !o[0]) throw new ke(ke.Errors.BadSignature);
                    a.state = "HEADER"
                }
                for (var u = !1; a.buffer;) {
                    if (!/\r\n|\n/.test(a.buffer)) return this;
                    switch (u ? u = !1 : s = t(), a.state) {
                        case "HEADER":
                            /:/.test(s) ? r(s) : s || (a.state = "ID");
                            continue;
                        case "NOTE":
                            s || (a.state = "ID");
                            continue;
                        case "ID":
                            if (/^NOTE($|[ \t])/.test(s)) {
                                a.state = "NOTE";
                                break
                            }
                            if (!s) continue;
                            if (a.cue = new(a.vttjs.VTTCue || a.window.VTTCue)(0, 0, ""), a.state = "CUE", -1 === s.indexOf("-->")) {
                                a.cue.id = s;
                                continue
                            }
                        case "CUE":
                            try {
                                Ae(s, a.cue, a.regionList)
                            } catch (l) {
                                a.reportOrThrowError(l), a.cue = null, a.state = "BADCUE";
                                continue
                            }
                            a.state = "CUETEXT";
                            continue;
                        case "CUETEXT":
                            var c = -1 !== s.indexOf("-->");
                            if (!s || c && (u = !0)) {
                                a.oncue && a.oncue(a.cue), a.cue = null, a.state = "ID";
                                continue
                            }
                            a.cue.text && (a.cue.text += "\n"), a.cue.text += s;
                            continue;
                        case "BADCUE":
                            s || (a.state = "ID");
                            continue
                    }
                }
            } catch (l) {
                a.reportOrThrowError(l), "CUETEXT" === a.state && a.cue && a.oncue && a.oncue(a.cue), a.cue = null, a.state = "INITIAL" === a.state ? "BADWEBVTT" : "BADCUE"
            }
            return this
        },
        flush: function() {
            var e = this;
            try {
                if (e.buffer += e.decoder.decode(), (e.cue || "HEADER" === e.state) && (e.buffer += "\n\n", e.parse()), "INITIAL" === e.state) throw new ke(ke.Errors.BadSignature)
            } catch (t) {
                e.reportOrThrowError(t)
            }
            return e.onflush && e.onflush(), this
        }
    };
    var Gi = Re,
        Xi = "auto",
        Yi = {
            "": !0,
            lr: !0,
            rl: !0
        },
        $i = {
            start: !0,
            middle: !0,
            end: !0,
            left: !0,
            right: !0
        };
    Fe.prototype.getCueAsHTML = function() {
        return WebVTT.convertCueToDOMTree(window, this.text)
    };
    var Qi = Fe,
        Ki = {
            "": !0,
            up: !0
        },
        Ji = qe,
        Zi = e(function(e) {
            var t = e.exports = {
                WebVTT: Gi,
                VTTCue: Qi,
                VTTRegion: Ji
            };
            mt.vttjs = t, mt.WebVTT = t.WebVTT;
            var n = t.VTTCue,
                i = t.VTTRegion,
                r = mt.VTTCue,
                a = mt.VTTRegion;
            t.shim = function() {
                mt.VTTCue = n, mt.VTTRegion = i
            }, t.restore = function() {
                mt.VTTCue = r, mt.VTTRegion = a
            }, mt.VTTCue || t.shim()
        }),
        er = function(e) {
            function t() {
                var n = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                    i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : function() {};
                Wt(this, t), n.reportTouchActivity = !1;
                var r = Xt(this, e.call(this, null, n, i));
                return r.hasStarted_ = !1, r.on("playing", function() {
                    this.hasStarted_ = !0
                }), r.on("loadstart", function() {
                    this.hasStarted_ = !1
                }), Ri.names.forEach(function(e) {
                    var t = Ri[e];
                    n && n[t.getterName] && (r[t.privateName] = n[t.getterName])
                }), r.featuresProgressEvents || r.manualProgressOn(), r.featuresTimeupdateEvents || r.manualTimeUpdatesOn(), ["Text", "Audio", "Video"].forEach(function(e) {
                    n["native" + e + "Tracks"] === !1 && (r["featuresNative" + e + "Tracks"] = !1)
                }), n.nativeCaptions === !1 || n.nativeTextTracks === !1 ? r.featuresNativeTextTracks = !1 : (n.nativeCaptions === !0 || n.nativeTextTracks === !0) && (r.featuresNativeTextTracks = !0), r.featuresNativeTextTracks || r.emulateTextTracks(), r.autoRemoteTextTracks_ = new Ri.text.ListClass, r.initTrackListeners(), n.nativeControlsForTouch || r.emitTapEvents(), r.constructor && (r.name_ = r.constructor.name || "Unknown Tech"), r
            }
            return Gt(t, e), t.prototype.triggerSourceset = function(e) {
                var t = this;
                this.isReady_ || this.one("ready", function() {
                    return t.setTimeout(function() {
                        return t.triggerSourceset(e)
                    }, 1)
                }), this.trigger({
                    src: e,
                    type: "sourceset"
                })
            }, t.prototype.manualProgressOn = function() {
                this.on("durationchange", this.onDurationChange), this.manualProgress = !0, this.one("ready", this.trackProgress)
            }, t.prototype.manualProgressOff = function() {
                this.manualProgress = !1, this.stopTrackingProgress(), this.off("durationchange", this.onDurationChange)
            }, t.prototype.trackProgress = function(e) {
                this.stopTrackingProgress(), this.progressInterval = this.setInterval(_n(this, function() {
                    var e = this.bufferedPercent();
                    this.bufferedPercent_ !== e && this.trigger("progress"), this.bufferedPercent_ = e, 1 === e && this.stopTrackingProgress()
                }), 500)
            }, t.prototype.onDurationChange = function(e) {
                this.duration_ = this.duration()
            }, t.prototype.buffered = function() {
                return re(0, 0)
            }, t.prototype.bufferedPercent = function() {
                return ae(this.buffered(), this.duration_)
            }, t.prototype.stopTrackingProgress = function() {
                this.clearInterval(this.progressInterval)
            }, t.prototype.manualTimeUpdatesOn = function() {
                this.manualTimeUpdates = !0, this.on("play", this.trackCurrentTime), this.on("pause", this.stopTrackingCurrentTime)
            }, t.prototype.manualTimeUpdatesOff = function() {
                this.manualTimeUpdates = !1, this.stopTrackingCurrentTime(), this.off("play", this.trackCurrentTime), this.off("pause", this.stopTrackingCurrentTime)
            }, t.prototype.trackCurrentTime = function() {
                this.currentTimeInterval && this.stopTrackingCurrentTime(), this.currentTimeInterval = this.setInterval(function() {
                    this.trigger({
                        type: "timeupdate",
                        target: this,
                        manuallyTriggered: !0
                    })
                }, 250)
            }, t.prototype.stopTrackingCurrentTime = function() {
                this.clearInterval(this.currentTimeInterval), this.trigger({
                    type: "timeupdate",
                    target: this,
                    manuallyTriggered: !0
                })
            }, t.prototype.dispose = function() {
                this.clearTracks(Oi.names), this.manualProgress && this.manualProgressOff(), this.manualTimeUpdates && this.manualTimeUpdatesOff(), e.prototype.dispose.call(this)
            }, t.prototype.clearTracks = function(e) {
                var t = this;
                e = [].concat(e), e.forEach(function(e) {
                    for (var n = t[e + "Tracks"]() || [], i = n.length; i--;) {
                        var r = n[i];
                        "text" === e && t.removeRemoteTextTrack(r), n.removeTrack(r)
                    }
                })
            }, t.prototype.cleanupAutoTextTracks = function() {
                for (var e = this.autoRemoteTextTracks_ || [], t = e.length; t--;) {
                    var n = e[t];
                    this.removeRemoteTextTrack(n)
                }
            }, t.prototype.reset = function() {}, t.prototype.error = function(e) {
                return void 0 !== e && (this.error_ = new se(e), this.trigger("error")), this.error_
            }, t.prototype.played = function() {
                return this.hasStarted_ ? re(0, 0) : re()
            }, t.prototype.setCurrentTime = function() {
                this.manualTimeUpdates && this.trigger({
                    type: "timeupdate",
                    target: this,
                    manuallyTriggered: !0
                })
            }, t.prototype.initTrackListeners = function() {
                var e = this;
                Oi.names.forEach(function(t) {
                    var n = Oi[t],
                        i = function() {
                            e.trigger(t + "trackchange")
                        },
                        r = e[n.getterName]();
                    r.addEventListener("removetrack", i), r.addEventListener("addtrack", i), e.on("dispose", function() {
                        r.removeEventListener("removetrack", i), r.removeEventListener("addtrack", i)
                    })
                })
            }, t.prototype.addWebVttScript_ = function() {
                var e = this;
                if (!mt.WebVTT)
                    if (bt.body.contains(this.el())) {
                        if (!this.options_["vtt.js"] && a(Zi) && Object.keys(Zi).length > 0) return void this.trigger("vttjsloaded");
                        var t = bt.createElement("script");
                        t.src = this.options_["vtt.js"] || "https://vjs.zencdn.net/vttjs/0.12.4/vtt.min.js", t.onload = function() {
                            e.trigger("vttjsloaded")
                        }, t.onerror = function() {
                            e.trigger("vttjserror")
                        }, this.on("dispose", function() {
                            t.onload = null, t.onerror = null
                        }), mt.WebVTT = !0, this.el().parentNode.appendChild(t)
                    } else this.ready(this.addWebVttScript_)
            }, t.prototype.emulateTextTracks = function() {
                var e = this,
                    t = this.textTracks(),
                    n = this.remoteTextTracks(),
                    i = function(e) {
                        return t.addTrack(e.track)
                    },
                    r = function(e) {
                        return t.removeTrack(e.track)
                    };
                n.on("addtrack", i), n.on("removetrack", r), this.addWebVttScript_();
                var a = function() {
                        return e.trigger("texttrackchange")
                    },
                    s = function() {
                        a();
                        for (var e = 0; e < t.length; e++) {
                            var n = t[e];
                            n.removeEventListener("cuechange", a), "showing" === n.mode && n.addEventListener("cuechange", a)
                        }
                    };
                s(), t.addEventListener("change", s), t.addEventListener("addtrack", s), t.addEventListener("removetrack", s), this.on("dispose", function() {
                    n.off("addtrack", i), n.off("removetrack", r), t.removeEventListener("change", s), t.removeEventListener("addtrack", s), t.removeEventListener("removetrack", s);
                    for (var e = 0; e < t.length; e++) {
                        var o = t[e];
                        o.removeEventListener("cuechange", a)
                    }
                })
            }, t.prototype.addTextTrack = function(e, t, n) {
                if (!e) throw new Error("TextTrack kind is required but was not provided");
                return ze(this, e, t, n)
            }, t.prototype.createRemoteTextTrack = function(e) {
                var t = ee(e, {
                    tech: this
                });
                return new Mi.remoteTextEl.TrackClass(t)
            }, t.prototype.addRemoteTextTrack = function() {
                var e = this,
                    t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                    n = arguments[1],
                    i = this.createRemoteTextTrack(t);
                return n !== !0 && n !== !1 && (tn.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'), n = !0), this.remoteTextTrackEls().addTrackElement_(i), this.remoteTextTracks().addTrack(i.track), n !== !0 && this.ready(function() {
                    return e.autoRemoteTextTracks_.addTrack(i.track)
                }), i
            }, t.prototype.removeRemoteTextTrack = function(e) {
                var t = this.remoteTextTrackEls().getTrackElementByTrack_(e);
                this.remoteTextTrackEls().removeTrackElement_(t), this.remoteTextTracks().removeTrack(e), this.autoRemoteTextTracks_.removeTrack(e)
            }, t.prototype.getVideoPlaybackQuality = function() {
                return {}
            }, t.prototype.setPoster = function() {}, t.prototype.playsinline = function() {}, t.prototype.setPlaysinline = function() {}, t.prototype.canPlayType = function() {
                return ""
            }, t.canPlayType = function() {
                return ""
            }, t.canPlaySource = function(e, n) {
                return t.canPlayType(e.type)
            }, t.isTech = function(e) {
                return e.prototype instanceof t || e instanceof t || e === t
            }, t.registerTech = function(e, n) {
                if (t.techs_ || (t.techs_ = {}), !t.isTech(n)) throw new Error("Tech " + e + " must be a Tech");
                if (!t.canPlayType) throw new Error("Techs must have a static canPlayType method on them");
                if (!t.canPlaySource) throw new Error("Techs must have a static canPlaySource method on them");
                return e = J(e), t.techs_[e] = n, "Tech" !== e && t.defaultTechOrder_.push(e), n
            }, t.getTech = function(e) {
                return e ? (e = J(e), t.techs_ && t.techs_[e] ? t.techs_[e] : mt && mt.videojs && mt.videojs[e] ? (tn.warn("The " + e + " tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"), mt.videojs[e]) : void 0) : void 0
            }, t
        }(Dn);
    Ri.names.forEach(function(e) {
        var t = Ri[e];
        er.prototype[t.getterName] = function() {
            return this[t.privateName] = this[t.privateName] || new t.ListClass, this[t.privateName]
        }
    }), er.prototype.featuresVolumeControl = !0, er.prototype.featuresMuteControl = !0, er.prototype.featuresFullscreenResize = !1, er.prototype.featuresPlaybackRate = !1, er.prototype.featuresProgressEvents = !1, er.prototype.featuresSourceset = !1, er.prototype.featuresTimeupdateEvents = !1, er.prototype.featuresNativeTextTracks = !1, er.withSourceHandlers = function(e) {
        e.registerSourceHandler = function(t, n) {
            var i = e.sourceHandlers;
            i || (i = e.sourceHandlers = []), void 0 === n && (n = i.length), i.splice(n, 0, t)
        }, e.canPlayType = function(t) {
            for (var n = e.sourceHandlers || [], i = void 0, r = 0; r < n.length; r++)
                if (i = n[r].canPlayType(t)) return i;
            return ""
        }, e.selectSourceHandler = function(t, n) {
            for (var i = e.sourceHandlers || [], r = void 0, a = 0; a < i.length; a++)
                if (r = i[a].canHandleSource(t, n)) return i[a];
            return null
        }, e.canPlaySource = function(t, n) {
            var i = e.selectSourceHandler(t, n);
            return i ? i.canHandleSource(t, n) : ""
        };
        var t = ["seekable", "seeking", "duration"];
        t.forEach(function(e) {
            var t = this[e];
            "function" == typeof t && (this[e] = function() {
                return this.sourceHandler_ && this.sourceHandler_[e] ? this.sourceHandler_[e].apply(this.sourceHandler_, arguments) : t.apply(this, arguments)
            })
        }, e.prototype), e.prototype.setSource = function(t) {
            var n = e.selectSourceHandler(t, this.options_);
            n || (e.nativeSourceHandler ? n = e.nativeSourceHandler : tn.error("No source hander found for the current source.")), this.disposeSourceHandler(), this.off("dispose", this.disposeSourceHandler), n !== e.nativeSourceHandler && (this.currentSource_ = t), this.sourceHandler_ = n.handleSource(t, this, this.options_), this.on("dispose", this.disposeSourceHandler)
        }, e.prototype.disposeSourceHandler = function() {
            this.currentSource_ && (this.clearTracks(["audio", "video"]), this.currentSource_ = null), this.cleanupAutoTextTracks(), this.sourceHandler_ && (this.sourceHandler_.dispose && this.sourceHandler_.dispose(), this.sourceHandler_ = null)
        }
    }, Dn.registerComponent("Tech", er), er.registerTech("Tech", er), er.defaultTechOrder_ = [];
    var tr = {},
        nr = {},
        ir = {},
        rr = {
            buffered: 1,
            currentTime: 1,
            duration: 1,
            seekable: 1,
            played: 1,
            paused: 1
        },
        ar = {
            setCurrentTime: 1
        },
        sr = {
            play: 1,
            pause: 1
        },
        or = {
            opus: "video/ogg",
            ogv: "video/ogg",
            mp4: "video/mp4",
            mov: "video/mp4",
            m4v: "video/mp4",
            mkv: "video/x-matroska",
            mp3: "audio/mpeg",
            aac: "audio/aac",
            oga: "audio/ogg",
            m3u8: "application/x-mpegURL"
        },
        ur = function() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "",
                t = ci(e),
                n = or[t.toLowerCase()];
            return n || ""
        },
        lr = function(e, t) {
            if (!t) return "";
            if (e.cache_.source.src === t && e.cache_.source.type) return e.cache_.source.type;
            var n = e.cache_.sources.filter(function(e) {
                return e.src === t
            });
            if (n.length) return n[0].type;
            for (var i = e.$$("source"), r = 0; r < i.length; r++) {
                var a = i[r];
                if (a.type && a.src && a.src === t) return a.type
            }
            return ur(t)
        },
        cr = function ps(e) {
            if (Array.isArray(e)) {
                var t = [];
                e.forEach(function(e) {
                    e = ps(e), Array.isArray(e) ? t = t.concat(e) : r(e) && t.push(e)
                }), e = t
            } else e = "string" == typeof e && e.trim() ? [nt({
                src: e
            })] : r(e) && "string" == typeof e.src && e.src && e.src.trim() ? [nt(e)] : [];
            return e
        },
        dr = function(e) {
            function t(n, i, r) {
                Wt(this, t);
                var a = ee({
                        createEl: !1
                    }, i),
                    s = Xt(this, e.call(this, n, a, r));
                if (i.playerOptions.sources && 0 !== i.playerOptions.sources.length) n.src(i.playerOptions.sources);
                else
                    for (var o = 0, u = i.playerOptions.techOrder; o < u.length; o++) {
                        var l = J(u[o]),
                            c = er.getTech(l);
                        if (l || (c = Dn.getComponent(l)), c && c.isSupported()) {
                            n.loadTech_(l);
                            break
                        }
                    }
                return s
            }
            return Gt(t, e), t
        }(Dn);
    Dn.registerComponent("MediaLoader", dr);
    var hr = function(e) {
        function t(n, i) {
            Wt(this, t);
            var r = Xt(this, e.call(this, n, i));
            return r.emitTapEvents(), r.enable(), r
        }
        return Gt(t, e), t.prototype.createEl = function() {
            var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "div",
                n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
                r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};
            n = i({
                innerHTML: '<span aria-hidden="true" class="vjs-icon-placeholder"></span>',
                className: this.buildCSSClass(),
                tabIndex: 0
            }, n), "button" === t && tn.error("Creating a ClickableComponent with an HTML element of " + t + " is not supported; use a Button instead."), r = i({
                role: "button"
            }, r), this.tabIndex_ = n.tabIndex;
            var a = e.prototype.createEl.call(this, t, n, r);
            return this.createControlTextEl(a), a
        }, t.prototype.dispose = function() {
            this.controlTextEl_ = null, e.prototype.dispose.call(this)
        }, t.prototype.createControlTextEl = function(e) {
            return this.controlTextEl_ = m("span", {
                className: "vjs-control-text"
            }, {
                "aria-live": "polite"
            }), e && e.appendChild(this.controlTextEl_), this.controlText(this.controlText_, e), this.controlTextEl_
        }, t.prototype.controlText = function(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : this.el();
            if (void 0 === e) return this.controlText_ || "Need Text";
            var n = this.localize(e);
            this.controlText_ = e, g(this.controlTextEl_, n), this.nonIconControl || t.setAttribute("title", n)
        }, t.prototype.buildCSSClass = function() {
            return "vjs-control vjs-button " + e.prototype.buildCSSClass.call(this)
        }, t.prototype.enable = function() {
            this.enabled_ || (this.enabled_ = !0, this.removeClass("vjs-disabled"), this.el_.setAttribute("aria-disabled", "false"), "undefined" != typeof this.tabIndex_ && this.el_.setAttribute("tabIndex", this.tabIndex_), this.on(["tap", "click"], this.handleClick), this.on("focus", this.handleFocus), this.on("blur", this.handleBlur))
        }, t.prototype.disable = function() {
            this.enabled_ = !1, this.addClass("vjs-disabled"), this.el_.setAttribute("aria-disabled", "true"), "undefined" != typeof this.tabIndex_ && this.el_.removeAttribute("tabIndex"), this.off(["tap", "click"], this.handleClick), this.off("focus", this.handleFocus), this.off("blur", this.handleBlur)
        }, t.prototype.handleClick = function(e) {}, t.prototype.handleFocus = function(e) {
            W(bt, "keydown", _n(this, this.handleKeyPress))
        }, t.prototype.handleKeyPress = function(t) {
            32 === t.which || 13 === t.which ? (t.preventDefault(), this.trigger("click")) : e.prototype.handleKeyPress && e.prototype.handleKeyPress.call(this, t)
        }, t.prototype.handleBlur = function(e) {
            G(bt, "keydown", _n(this, this.handleKeyPress))
        }, t
    }(Dn);
    Dn.registerComponent("ClickableComponent", hr);
    var pr = function(e) {
        function t(n, i) {
            Wt(this, t);
            var r = Xt(this, e.call(this, n, i));
            return r.update(), n.on("posterchange", _n(r, r.update)), r
        }
        return Gt(t, e), t.prototype.dispose = function() {
            this.player().off("posterchange", this.update), e.prototype.dispose.call(this)
        }, t.prototype.createEl = function() {
            var e = m("div", {
                className: "vjs-poster",
                tabIndex: -1
            });
            return Ht || (this.fallbackImg_ = m("img"), e.appendChild(this.fallbackImg_)), e
        }, t.prototype.update = function(e) {
            var t = this.player().poster();
            this.setSrc(t), t ? this.show() : this.hide()
        }, t.prototype.setSrc = function(e) {
            if (this.fallbackImg_) this.fallbackImg_.src = e;
            else {
                var t = "";
                e && (t = 'url("' + e + '")'), this.el_.style.backgroundImage = t
            }
        }, t.prototype.handleClick = function(e) {
            this.player_.controls() && (this.player_.paused() ? le(this.player_.play()) : this.player_.pause())
        }, t
    }(hr);
    Dn.registerComponent("PosterImage", pr);
    var fr = "#222",
        mr = "#ccc",
        gr = {
            monospace: "monospace",
            sansSerif: "sans-serif",
            serif: "serif",
            monospaceSansSerif: '"Andale Mono", "Lucida Console", monospace',
            monospaceSerif: '"Courier New", monospace',
            proportionalSansSerif: "sans-serif",
            proportionalSerif: "serif",
            casual: '"Comic Sans MS", Impact, fantasy',
            script: '"Monotype Corsiva", cursive',
            smallcaps: '"Andale Mono", "Lucida Console", monospace, sans-serif'
        },
        vr = function(e) {
            function t(n, i, r) {
                Wt(this, t);
                var a = Xt(this, e.call(this, n, i, r));
                return n.on("loadstart", _n(a, a.toggleDisplay)), n.on("texttrackchange", _n(a, a.updateDisplay)), n.on("loadstart", _n(a, a.preselectTrack)), n.ready(_n(a, function() {
                    if (n.tech_ && n.tech_.featuresNativeTextTracks) return void this.hide();
                    n.on("fullscreenchange", _n(this, this.updateDisplay));
                    for (var e = this.options_.playerOptions.tracks || [], t = 0; t < e.length; t++) this.player_.addRemoteTextTrack(e[t], !0);
                    this.preselectTrack()
                })), a
            }
            return Gt(t, e), t.prototype.preselectTrack = function() {
                for (var e = {
                    captions: 1,
                    subtitles: 1
                }, t = this.player_.textTracks(), n = this.player_.cache_.selectedLanguage, i = void 0, r = void 0, a = void 0, s = 0; s < t.length; s++) {
                    var o = t[s];
                    n && n.enabled && n.language === o.language ? o.kind === n.kind ? a = o : a || (a = o) : n && !n.enabled ? (a = null, i = null, r = null) : o["default"] && ("descriptions" !== o.kind || i ? o.kind in e && !r && (r = o) : i = o)
                }
                a ? a.mode = "showing" : r ? r.mode = "showing" : i && (i.mode = "showing")
            }, t.prototype.toggleDisplay = function() {
                this.player_.tech_ && this.player_.tech_.featuresNativeTextTracks ? this.hide() : this.show()
            }, t.prototype.createEl = function() {
                return e.prototype.createEl.call(this, "div", {
                    className: "vjs-text-track-display"
                }, {
                    "aria-live": "off",
                    "aria-atomic": "true"
                })
            }, t.prototype.clearDisplay = function() {
                "function" == typeof mt.WebVTT && mt.WebVTT.processCues(mt, [], this.el_)
            }, t.prototype.updateDisplay = function() {
                var e = this.player_.textTracks();
                this.clearDisplay();
                for (var t = null, n = null, i = e.length; i--;) {
                    var r = e[i];
                    "showing" === r.mode && ("descriptions" === r.kind ? t = r : n = r)
                }
                n ? ("off" !== this.getAttribute("aria-live") && this.setAttribute("aria-live", "off"), this.updateForTrack(n)) : t && ("assertive" !== this.getAttribute("aria-live") && this.setAttribute("aria-live", "assertive"), this.updateForTrack(t))
            }, t.prototype.updateForTrack = function(e) {
                if ("function" == typeof mt.WebVTT && e.activeCues) {
                    for (var t = [], n = 0; n < e.activeCues.length; n++) t.push(e.activeCues[n]);
                    if (mt.WebVTT.processCues(mt, t, this.el_), this.player_.textTrackSettings)
                        for (var i = this.player_.textTrackSettings.getValues(), r = t.length; r--;) {
                            var a = t[r];
                            if (a) {
                                var s = a.displayState;
                                if (i.color && (s.firstChild.style.color = i.color), i.textOpacity && rt(s.firstChild, "color", it(i.color || "#fff", i.textOpacity)), i.backgroundColor && (s.firstChild.style.backgroundColor = i.backgroundColor), i.backgroundOpacity && rt(s.firstChild, "backgroundColor", it(i.backgroundColor || "#000", i.backgroundOpacity)), i.windowColor && (i.windowOpacity ? rt(s, "backgroundColor", it(i.windowColor, i.windowOpacity)) : s.style.backgroundColor = i.windowColor), i.edgeStyle && ("dropshadow" === i.edgeStyle ? s.firstChild.style.textShadow = "2px 2px 3px " + fr + ", 2px 2px 4px " + fr + ", 2px 2px 5px " + fr : "raised" === i.edgeStyle ? s.firstChild.style.textShadow = "1px 1px " + fr + ", 2px 2px " + fr + ", 3px 3px " + fr : "depressed" === i.edgeStyle ? s.firstChild.style.textShadow = "1px 1px " + mr + ", 0 1px " + mr + ", -1px -1px " + fr + ", 0 -1px " + fr : "uniform" === i.edgeStyle && (s.firstChild.style.textShadow = "0 0 4px " + fr + ", 0 0 4px " + fr + ", 0 0 4px " + fr + ", 0 0 4px " + fr)), i.fontPercent && 1 !== i.fontPercent) {
                                    var o = mt.parseFloat(s.style.fontSize);
                                    s.style.fontSize = o * i.fontPercent + "px", s.style.height = "auto", s.style.top = "auto", s.style.bottom = "2px"
                                }
                                i.fontFamily && "default" !== i.fontFamily && ("small-caps" === i.fontFamily ? s.firstChild.style.fontVariant = "small-caps" : s.firstChild.style.fontFamily = gr[i.fontFamily])
                            }
                        }
                }
            }, t
        }(Dn);
    Dn.registerComponent("TextTrackDisplay", vr);
    var yr = function(e) {
        function t() {
            return Wt(this, t), Xt(this, e.apply(this, arguments))
        }
        return Gt(t, e), t.prototype.createEl = function() {
            var t = this.player_.isAudio(),
                n = this.localize(t ? "Audio Player" : "Video Player"),
                i = m("span", {
                    className: "vjs-control-text",
                    innerHTML: this.localize("{1} is loading.", [n])
                }),
                r = e.prototype.createEl.call(this, "div", {
                    className: "vjs-loading-spinner",
                    dir: "ltr"
                });
            return r.appendChild(i), r
        }, t
    }(Dn);
    Dn.registerComponent("LoadingSpinner", yr);
    var _r = function(e) {
        function t() {
            return Wt(this, t), Xt(this, e.apply(this, arguments))
        }
        return Gt(t, e), t.prototype.createEl = function(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
                n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};
            e = "button", t = i({
                innerHTML: '<span aria-hidden="true" class="vjs-icon-placeholder"></span>',
                className: this.buildCSSClass()
            }, t), n = i({
                type: "button"
            }, n);
            var r = Dn.prototype.createEl.call(this, e, t, n);
            return this.createControlTextEl(r), r
        }, t.prototype.addChild = function(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
                n = this.constructor.name;
            return tn.warn("Adding an actionable (user controllable) child to a Button (" + n + ") is not supported; use a ClickableComponent instead."), Dn.prototype.addChild.call(this, e, t)
        }, t.prototype.enable = function() {
            e.prototype.enable.call(this), this.el_.removeAttribute("disabled")
        }, t.prototype.disable = function() {
            e.prototype.disable.call(this), this.el_.setAttribute("disabled", "disabled")
        }, t.prototype.handleKeyPress = function(t) {
            32 !== t.which && 13 !== t.which && e.prototype.handleKeyPress.call(this, t)
        }, t
    }(hr);
    Dn.registerComponent("Button", _r);
    var br = function(e) {
        function t(n, i) {
            Wt(this, t);
            var r = Xt(this, e.call(this, n, i));
            return r.mouseused_ = !1, r.on("mousedown", r.handleMouseDown), r
        }
        return Gt(t, e), t.prototype.buildCSSClass = function() {
            return "vjs-big-play-button"
        }, t.prototype.handleClick = function(e) {
            var t = this.player_.play();
            if (this.mouseused_ && e.clientX && e.clientY) return void le(t);
            var n = this.player_.getChild("controlBar"),
                i = n && n.getChild("playToggle");
            if (!i) return void this.player_.focus();
            var r = function() {
                return i.focus()
            };
            ue(t) ? t.then(r, function() {}) : this.setTimeout(r, 1)
        }, t.prototype.handleKeyPress = function(t) {
            this.mouseused_ = !1, e.prototype.handleKeyPress.call(this, t)
        }, t.prototype.handleMouseDown = function(e) {
            this.mouseused_ = !0
        }, t
    }(_r);
    br.prototype.controlText_ = "Play Video", Dn.registerComponent("BigPlayButton", br);
    var Tr = function(e) {
        function t(n, i) {
            Wt(this, t);
            var r = Xt(this, e.call(this, n, i));
            return r.controlText(i && i.controlText || r.localize("Close")), r
        }
        return Gt(t, e), t.prototype.buildCSSClass = function() {
            return "vjs-close-button " + e.prototype.buildCSSClass.call(this)
        }, t.prototype.handleClick = function(e) {
            this.trigger({
                type: "close",
                bubbles: !1
            })
        }, t
    }(_r);
    Dn.registerComponent("CloseButton", Tr);
    var Sr = function(e) {
        function t(n, i) {
            Wt(this, t);
            var r = Xt(this, e.call(this, n, i));
            return r.on(n, "play", r.handlePlay), r.on(n, "pause", r.handlePause), r.on(n, "ended", r.handleEnded), r
        }
        return Gt(t, e), t.prototype.buildCSSClass = function() {
            return "vjs-play-control " + e.prototype.buildCSSClass.call(this)
        }, t.prototype.handleClick = function(e) {
            this.player_.paused() ? this.player_.play() : this.player_.pause()
        }, t.prototype.handleSeeked = function(e) {
            this.removeClass("vjs-ended"), this.player_.paused() ? this.handlePause(e) : this.handlePlay(e)
        }, t.prototype.handlePlay = function(e) {
            this.removeClass("vjs-ended"), this.removeClass("vjs-paused"), this.addClass("vjs-playing"), this.controlText("Pause")
        }, t.prototype.handlePause = function(e) {
            this.removeClass("vjs-playing"), this.addClass("vjs-paused"), this.controlText("Play")
        }, t.prototype.handleEnded = function(e) {
            this.removeClass("vjs-playing"), this.addClass("vjs-ended"), this.controlText("Replay"), this.one(this.player_, "seeked", this.handleSeeked)
        }, t
    }(_r);
    Sr.prototype.controlText_ = "Play", Dn.registerComponent("PlayToggle", Sr);
    var kr = function(e, t) {
            e = 0 > e ? 0 : e;
            var n = Math.floor(e % 60),
                i = Math.floor(e / 60 % 60),
                r = Math.floor(e / 3600),
                a = Math.floor(t / 60 % 60),
                s = Math.floor(t / 3600);
            return (isNaN(e) || e === 1 / 0) && (r = i = n = "-"), r = r > 0 || s > 0 ? r + ":" : "", i = ((r || a >= 10) && 10 > i ? "0" + i : i) + ":", n = 10 > n ? "0" + n : n, r + i + n
        },
        wr = kr,
        Cr = function(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : e;
            return wr(e, t)
        },
        Er = function(e) {
            function t(n, i) {
                Wt(this, t);
                var r = Xt(this, e.call(this, n, i));
                return r.throttledUpdateContent = bn(_n(r, r.updateContent), 25), r.on(n, "timeupdate", r.throttledUpdateContent), r
            }
            return Gt(t, e), t.prototype.createEl = function(t) {
                var n = this.buildCSSClass(),
                    i = e.prototype.createEl.call(this, "div", {
                        className: n + " vjs-time-control vjs-control",
                        innerHTML: '<span class="vjs-control-text">' + this.localize(this.labelText_) + " </span>"
                    });
                return this.contentEl_ = m("span", {
                    className: n + "-display"
                }, {
                    "aria-live": "off"
                }), this.updateTextNode_(), i.appendChild(this.contentEl_), i
            }, t.prototype.dispose = function() {
                this.contentEl_ = null, this.textNode_ = null, e.prototype.dispose.call(this)
            }, t.prototype.updateTextNode_ = function() {
                if (this.contentEl_) {
                    for (; this.contentEl_.firstChild;) this.contentEl_.removeChild(this.contentEl_.firstChild);
                    this.textNode_ = bt.createTextNode(this.formattedTime_ || this.formatTime_(0)), this.contentEl_.appendChild(this.textNode_)
                }
            }, t.prototype.formatTime_ = function(e) {
                return Cr(e)
            }, t.prototype.updateFormattedTime_ = function(e) {
                var t = this.formatTime_(e);
                t !== this.formattedTime_ && (this.formattedTime_ = t, this.requestAnimationFrame(this.updateTextNode_))
            }, t.prototype.updateContent = function(e) {}, t
        }(Dn);
    Er.prototype.labelText_ = "Time", Er.prototype.controlText_ = "Time", Dn.registerComponent("TimeDisplay", Er);
    var Ar = function(e) {
        function t(n, i) {
            Wt(this, t);
            var r = Xt(this, e.call(this, n, i));
            return r.on(n, "ended", r.handleEnded), r
        }
        return Gt(t, e), t.prototype.buildCSSClass = function() {
            return "vjs-current-time"
        }, t.prototype.updateContent = function(e) {
            var t = this.player_.scrubbing() ? this.player_.getCache().currentTime : this.player_.currentTime();
            this.updateFormattedTime_(t)
        }, t.prototype.handleEnded = function(e) {
            this.player_.duration() && this.updateFormattedTime_(this.player_.duration())
        }, t
    }(Er);
    Ar.prototype.labelText_ = "Current Time", Ar.prototype.controlText_ = "Current Time", Dn.registerComponent("CurrentTimeDisplay", Ar);
    var Lr = function(e) {
        function t(n, i) {
            Wt(this, t);
            var r = Xt(this, e.call(this, n, i));
            return r.on(n, "durationchange", r.updateContent), r.on(n, "loadedmetadata", r.throttledUpdateContent), r
        }
        return Gt(t, e), t.prototype.buildCSSClass = function() {
            return "vjs-duration"
        }, t.prototype.updateContent = function(e) {
            var t = this.player_.duration();
            t && this.duration_ !== t && (this.duration_ = t, this.updateFormattedTime_(t))
        }, t
    }(Er);
    Lr.prototype.labelText_ = "Duration", Lr.prototype.controlText_ = "Duration", Dn.registerComponent("DurationDisplay", Lr);
    var Ir = function(e) {
        function t() {
            return Wt(this, t), Xt(this, e.apply(this, arguments))
        }
        return Gt(t, e), t.prototype.createEl = function() {
            return e.prototype.createEl.call(this, "div", {
                className: "vjs-time-control vjs-time-divider",
                innerHTML: "<div><span>/</span></div>"
            })
        }, t
    }(Dn);
    Dn.registerComponent("TimeDivider", Ir);
    var Pr = function(e) {
        function t(n, i) {
            Wt(this, t);
            var r = Xt(this, e.call(this, n, i));
            return r.on(n, "durationchange", r.throttledUpdateContent), r.on(n, "ended", r.handleEnded), r
        }
        return Gt(t, e), t.prototype.buildCSSClass = function() {
            return "vjs-remaining-time"
        }, t.prototype.formatTime_ = function(t) {
            return "-" + e.prototype.formatTime_.call(this, t)
        }, t.prototype.updateContent = function(e) {
            this.player_.duration() && (this.player_.remainingTimeDisplay ? this.updateFormattedTime_(this.player_.remainingTimeDisplay()) : this.updateFormattedTime_(this.player_.remainingTime()))
        }, t.prototype.handleEnded = function(e) {
            this.player_.duration() && this.updateFormattedTime_(0)
        }, t
    }(Er);
    Pr.prototype.labelText_ = "Remaining Time", Pr.prototype.controlText_ = "Remaining Time", Dn.registerComponent("RemainingTimeDisplay", Pr);
    var xr = function(e) {
        function t(n, i) {
            Wt(this, t);
            var r = Xt(this, e.call(this, n, i));
            return r.updateShowing(), r.on(r.player(), "durationchange", r.updateShowing), r
        }
        return Gt(t, e), t.prototype.createEl = function() {
            var t = e.prototype.createEl.call(this, "div", {
                className: "vjs-live-control vjs-control"
            });
            return this.contentEl_ = m("div", {
                className: "vjs-live-display",
                innerHTML: '<span class="vjs-control-text">' + this.localize("Stream Type") + " </span>" + this.localize("LIVE")
            }, {
                "aria-live": "off"
            }), t.appendChild(this.contentEl_), t
        }, t.prototype.dispose = function() {
            this.contentEl_ = null, e.prototype.dispose.call(this)
        }, t.prototype.updateShowing = function(e) {
            this.player().duration() === 1 / 0 ? this.show() : this.hide()
        }, t
    }(Dn);
    Dn.registerComponent("LiveDisplay", xr);
    var Dr = function(e) {
        function t(n, i) {
            Wt(this, t);
            var r = Xt(this, e.call(this, n, i));
            return r.bar = r.getChild(r.options_.barName), r.vertical(!!r.options_.vertical), r.enable(), r
        }
        return Gt(t, e), t.prototype.enabled = function() {
            return this.enabled_
        }, t.prototype.enable = function() {
            this.enabled() || (this.on("mousedown", this.handleMouseDown), this.on("touchstart", this.handleMouseDown), this.on("focus", this.handleFocus), this.on("blur", this.handleBlur), this.on("click", this.handleClick), this.on(this.player_, "controlsvisible", this.update), this.playerEvent && this.on(this.player_, this.playerEvent, this.update), this.removeClass("disabled"), this.setAttribute("tabindex", 0), this.enabled_ = !0)
        }, t.prototype.disable = function() {
            if (this.enabled()) {
                var e = this.bar.el_.ownerDocument;
                this.off("mousedown", this.handleMouseDown), this.off("touchstart", this.handleMouseDown), this.off("focus", this.handleFocus), this.off("blur", this.handleBlur), this.off("click", this.handleClick), this.off(this.player_, "controlsvisible", this.update), this.off(e, "mousemove", this.handleMouseMove), this.off(e, "mouseup", this.handleMouseUp), this.off(e, "touchmove", this.handleMouseMove), this.off(e, "touchend", this.handleMouseUp), this.removeAttribute("tabindex"), this.addClass("disabled"), this.playerEvent && this.off(this.player_, this.playerEvent, this.update), this.enabled_ = !1
            }
        }, t.prototype.createEl = function(t) {
            var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
                r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};
            return n.className = n.className + " vjs-slider", n = i({
                tabIndex: 0
            }, n), r = i({
                role: "slider",
                "aria-valuenow": 0,
                "aria-valuemin": 0,
                "aria-valuemax": 100,
                tabIndex: 0
            }, r), e.prototype.createEl.call(this, t, n, r)
        }, t.prototype.handleMouseDown = function(e) {
            var t = this.bar.el_.ownerDocument;
            "mousedown" === e.type && e.preventDefault(), "touchstart" !== e.type || Mt || e.preventDefault(), A(), this.addClass("vjs-sliding"), this.trigger("slideractive"), this.on(t, "mousemove", this.handleMouseMove), this.on(t, "mouseup", this.handleMouseUp), this.on(t, "touchmove", this.handleMouseMove), this.on(t, "touchend", this.handleMouseUp), this.handleMouseMove(e)
        }, t.prototype.handleMouseMove = function(e) {}, t.prototype.handleMouseUp = function() {
            var e = this.bar.el_.ownerDocument;
            L(), this.removeClass("vjs-sliding"), this.trigger("sliderinactive"), this.off(e, "mousemove", this.handleMouseMove), this.off(e, "mouseup", this.handleMouseUp), this.off(e, "touchmove", this.handleMouseMove), this.off(e, "touchend", this.handleMouseUp), this.update()
        }, t.prototype.update = function() {
            if (this.el_) {
                var e = this.getPercent(),
                    t = this.bar;
                if (t) {
                    ("number" != typeof e || e !== e || 0 > e || e === 1 / 0) && (e = 0);
                    var n = (100 * e).toFixed(2) + "%",
                        i = t.el().style;
                    return this.vertical() ? i.height = n : i.width = n, e
                }
            }
        }, t.prototype.calculateDistance = function(e) {
            var t = x(this.el_, e);
            return this.vertical() ? t.y : t.x
        }, t.prototype.handleFocus = function() {
            this.on(this.bar.el_.ownerDocument, "keydown", this.handleKeyPress)
        }, t.prototype.handleKeyPress = function(e) {
            37 === e.which || 40 === e.which ? (e.preventDefault(), this.stepBack()) : (38 === e.which || 39 === e.which) && (e.preventDefault(), this.stepForward())
        }, t.prototype.handleBlur = function() {
            this.off(this.bar.el_.ownerDocument, "keydown", this.handleKeyPress)
        }, t.prototype.handleClick = function(e) {
            e.stopImmediatePropagation(), e.preventDefault()
        }, t.prototype.vertical = function(e) {
            return void 0 === e ? this.vertical_ || !1 : (this.vertical_ = !!e, void(this.vertical_ ? this.addClass("vjs-slider-vertical") : this.addClass("vjs-slider-horizontal")))
        }, t
    }(Dn);
    Dn.registerComponent("Slider", Dr);
    var Ur = function(e) {
        function t(n, i) {
            Wt(this, t);
            var r = Xt(this, e.call(this, n, i));
            return r.partEls_ = [], r.on(n, "progress", r.update), r
        }
        return Gt(t, e), t.prototype.createEl = function() {
            return e.prototype.createEl.call(this, "div", {
                className: "vjs-load-progress",
                innerHTML: '<span class="vjs-control-text"><span>' + this.localize("Loaded") + "</span>: 0%</span>"
            })
        }, t.prototype.dispose = function() {
            this.partEls_ = null, e.prototype.dispose.call(this)
        }, t.prototype.update = function(e) {
            var t = this.player_.buffered(),
                n = this.player_.duration(),
                i = this.player_.bufferedEnd(),
                r = this.partEls_,
                a = function(e, t) {
                    var n = e / t || 0;
                    return 100 * (n >= 1 ? 1 : n) + "%"
                };
            this.el_.style.width = a(i, n);
            for (var s = 0; s < t.length; s++) {
                var o = t.start(s),
                    u = t.end(s),
                    l = r[s];
                l || (l = this.el_.appendChild(m()), r[s] = l), l.style.left = a(o, i), l.style.width = a(u - o, i)
            }
            for (var c = r.length; c > t.length; c--) this.el_.removeChild(r[c - 1]);
            r.length = t.length
        }, t
    }(Dn);
    Dn.registerComponent("LoadProgressBar", Ur);
    var Or = function(e) {
        function t() {
            return Wt(this, t), Xt(this, e.apply(this, arguments))
        }
        return Gt(t, e), t.prototype.createEl = function() {
            return e.prototype.createEl.call(this, "div", {
                className: "vjs-time-tooltip"
            })
        }, t.prototype.update = function(e, t, n) {
            var i = I(this.el_),
                r = I(this.player_.el()),
                a = e.width * t;
            if (r && i) {
                var s = e.left - r.left + a,
                    o = e.width - a + (r.right - e.right),
                    u = i.width / 2;
                u > s ? u += u - s : u > o && (u = o), 0 > u ? u = 0 : u > i.width && (u = i.width), this.el_.style.right = "-" + u + "px", g(this.el_, n)
            }
        }, t
    }(Dn);
    Dn.registerComponent("TimeTooltip", Or);
    var Mr = function(e) {
        function t() {
            return Wt(this, t), Xt(this, e.apply(this, arguments))
        }
        return Gt(t, e), t.prototype.createEl = function() {
            return e.prototype.createEl.call(this, "div", {
                className: "vjs-play-progress vjs-slider-bar",
                innerHTML: '<span class="vjs-control-text"><span>' + this.localize("Progress") + "</span>: 0%</span>"
            })
        }, t.prototype.update = function(e, t) {
            var n = this;
            this.rafId_ && this.cancelAnimationFrame(this.rafId_), this.rafId_ = this.requestAnimationFrame(function() {
                var i = n.player_.scrubbing() ? n.player_.getCache().currentTime : n.player_.currentTime(),
                    r = Cr(i, n.player_.duration()),
                    a = n.getChild("timeTooltip");
                a && a.update(e, t, r)
            })
        }, t
    }(Dn);
    Mr.prototype.options_ = {
        children: []
    }, Nt && !(Nt > 8) || At || It || Mr.prototype.options_.children.push("timeTooltip"), Dn.registerComponent("PlayProgressBar", Mr);
    var Rr = function(e) {
        function t(n, i) {
            Wt(this, t);
            var r = Xt(this, e.call(this, n, i));
            return r.update = bn(_n(r, r.update), 25), r
        }
        return Gt(t, e), t.prototype.createEl = function() {
            return e.prototype.createEl.call(this, "div", {
                className: "vjs-mouse-display"
            })
        }, t.prototype.update = function(e, t) {
            var n = this;
            this.rafId_ && this.cancelAnimationFrame(this.rafId_), this.rafId_ = this.requestAnimationFrame(function() {
                var i = n.player_.duration(),
                    r = Cr(t * i, i);
                n.el_.style.left = e.width * t + "px", n.getChild("timeTooltip").update(e, t, r)
            })
        }, t
    }(Dn);
    Rr.prototype.options_ = {
        children: ["timeTooltip"]
    }, Dn.registerComponent("MouseTimeDisplay", Rr);
    var jr = 5,
        Nr = 30,
        Br = function(e) {
            function t(n, i) {
                Wt(this, t);
                var r = Xt(this, e.call(this, n, i));
                return r.setEventHandlers_(), r
            }
            return Gt(t, e), t.prototype.setEventHandlers_ = function() {
                var e = this;
                this.update = bn(_n(this, this.update), Nr), this.on(this.player_, "timeupdate", this.update), this.on(this.player_, "ended", this.handleEnded), this.updateInterval = null, this.on(this.player_, ["playing"], function() {
                    e.clearInterval(e.updateInterval), e.updateInterval = e.setInterval(function() {
                        e.requestAnimationFrame(function() {
                            e.update()
                        })
                    }, Nr)
                }), this.on(this.player_, ["ended", "pause", "waiting"], function() {
                    e.clearInterval(e.updateInterval)
                }), this.on(this.player_, ["timeupdate", "ended"], this.update)
            }, t.prototype.createEl = function() {
                return e.prototype.createEl.call(this, "div", {
                    className: "vjs-progress-holder"
                }, {
                    "aria-label": this.localize("Progress Bar")
                })
            }, t.prototype.update_ = function(e, t) {
                var n = this.player_.duration();
                this.el_.setAttribute("aria-valuenow", (100 * t).toFixed(2)), this.el_.setAttribute("aria-valuetext", this.localize("progress bar timing: currentTime={1} duration={2}", [Cr(e, n), Cr(n, n)], "{1} of {2}")), this.bar.update(I(this.el_), t)
            }, t.prototype.update = function(t) {
                var n = e.prototype.update.call(this);
                return this.update_(this.getCurrentTime_(), n), n
            }, t.prototype.getCurrentTime_ = function() {
                return this.player_.scrubbing() ? this.player_.getCache().currentTime : this.player_.currentTime()
            }, t.prototype.handleEnded = function(e) {
                this.update_(this.player_.duration(), 1)
            }, t.prototype.getPercent = function() {
                var e = this.getCurrentTime_() / this.player_.duration();
                return e >= 1 ? 1 : e
            }, t.prototype.handleMouseDown = function(t) {
                j(t) && (t.stopPropagation(), this.player_.scrubbing(!0), this.videoWasPlaying = !this.player_.paused(), this.player_.pause(), e.prototype.handleMouseDown.call(this, t))
            }, t.prototype.handleMouseMove = function(e) {
                if (j(e)) {
                    var t = this.calculateDistance(e) * this.player_.duration();
                    t === this.player_.duration() && (t -= .1), this.player_.currentTime(t)
                }
            }, t.prototype.enable = function() {
                e.prototype.enable.call(this);
                var t = this.getChild("mouseTimeDisplay");
                t && t.show()
            }, t.prototype.disable = function() {
                e.prototype.disable.call(this);
                var t = this.getChild("mouseTimeDisplay");
                t && t.hide()
            }, t.prototype.handleMouseUp = function(t) {
                e.prototype.handleMouseUp.call(this, t), t && t.stopPropagation(), this.player_.scrubbing(!1), this.player_.trigger({
                    type: "timeupdate",
                    target: this,
                    manuallyTriggered: !0
                }), this.videoWasPlaying && le(this.player_.play())
            }, t.prototype.stepForward = function() {
                this.player_.currentTime(this.player_.currentTime() + jr)
            }, t.prototype.stepBack = function() {
                this.player_.currentTime(this.player_.currentTime() - jr)
            }, t.prototype.handleAction = function(e) {
                this.player_.paused() ? this.player_.play() : this.player_.pause()
            }, t.prototype.handleKeyPress = function(t) {
                32 === t.which || 13 === t.which ? (t.preventDefault(), this.handleAction(t)) : e.prototype.handleKeyPress && e.prototype.handleKeyPress.call(this, t)
            }, t
        }(Dr);
    Br.prototype.options_ = {
        children: ["loadProgressBar", "playProgressBar"],
        barName: "playProgressBar"
    }, Nt && !(Nt > 8) || At || It || Br.prototype.options_.children.splice(1, 0, "mouseTimeDisplay"), Br.prototype.playerEvent = "timeupdate", Dn.registerComponent("SeekBar", Br);
    var Fr = function(e) {
        function t(n, i) {
            Wt(this, t);
            var r = Xt(this, e.call(this, n, i));
            return r.handleMouseMove = bn(_n(r, r.handleMouseMove), 25), r.throttledHandleMouseSeek = bn(_n(r, r.handleMouseSeek), 25), r.enable(), r
        }
        return Gt(t, e), t.prototype.createEl = function() {
            return e.prototype.createEl.call(this, "div", {
                className: "vjs-progress-control vjs-control"
            })
        }, t.prototype.handleMouseMove = function(e) {
            var t = this.getChild("seekBar");
            if (t) {
                var n = t.getChild("mouseTimeDisplay"),
                    i = t.el(),
                    r = I(i),
                    a = x(i, e).x;
                a > 1 ? a = 1 : 0 > a && (a = 0), n && n.update(r, a)
            }
        }, t.prototype.handleMouseSeek = function(e) {
            var t = this.getChild("seekBar");
            t && t.handleMouseMove(e)
        }, t.prototype.enabled = function() {
            return this.enabled_
        }, t.prototype.disable = function() {
            this.children().forEach(function(e) {
                return e.disable && e.disable()
            }), this.enabled() && (this.off(["mousedown", "touchstart"], this.handleMouseDown), this.off(this.el_, "mousemove", this.handleMouseMove), this.handleMouseUp(), this.addClass("disabled"), this.enabled_ = !1)
        }, t.prototype.enable = function() {
            this.children().forEach(function(e) {
                return e.enable && e.enable()
            }), this.enabled() || (this.on(["mousedown", "touchstart"], this.handleMouseDown), this.on(this.el_, "mousemove", this.handleMouseMove), this.removeClass("disabled"), this.enabled_ = !0)
        }, t.prototype.handleMouseDown = function(e) {
            var t = this.el_.ownerDocument,
                n = this.getChild("seekBar");
            n && n.handleMouseDown(e), this.on(t, "mousemove", this.throttledHandleMouseSeek), this.on(t, "touchmove", this.throttledHandleMouseSeek), this.on(t, "mouseup", this.handleMouseUp), this.on(t, "touchend", this.handleMouseUp)
        }, t.prototype.handleMouseUp = function(e) {
            var t = this.el_.ownerDocument,
                n = this.getChild("seekBar");
            n && n.handleMouseUp(e), this.off(t, "mousemove", this.throttledHandleMouseSeek), this.off(t, "touchmove", this.throttledHandleMouseSeek), this.off(t, "mouseup", this.handleMouseUp), this.off(t, "touchend", this.handleMouseUp)
        }, t
    }(Dn);
    Fr.prototype.options_ = {
        children: ["seekBar"]
    }, Dn.registerComponent("ProgressControl", Fr);
    var Vr = function(e) {
        function t(n, i) {
            Wt(this, t);
            var r = Xt(this, e.call(this, n, i));
            return r.on(n, "fullscreenchange", r.handleFullscreenChange), bt[Un.fullscreenEnabled] === !1 && r.disable(), r
        }
        return Gt(t, e), t.prototype.buildCSSClass = function() {
            return "vjs-fullscreen-control " + e.prototype.buildCSSClass.call(this)
        }, t.prototype.handleFullscreenChange = function(e) {
            this.player_.isFullscreen() ? this.controlText("Non-Fullscreen") : this.controlText("Fullscreen")
        }, t.prototype.handleClick = function(e) {
            this.player_.isFullscreen() ? this.player_.exitFullscreen() : this.player_.requestFullscreen()
        }, t
    }(_r);
    Vr.prototype.controlText_ = "Fullscreen", Dn.registerComponent("FullscreenToggle", Vr);
    var Hr = function(e, t) {
            t.tech_ && !t.tech_.featuresVolumeControl && e.addClass("vjs-hidden"), e.on(t, "loadstart", function() {
                t.tech_.featuresVolumeControl ? e.removeClass("vjs-hidden") : e.addClass("vjs-hidden")
            })
        },
        qr = function(e) {
            function t() {
                return Wt(this, t), Xt(this, e.apply(this, arguments))
            }
            return Gt(t, e), t.prototype.createEl = function() {
                return e.prototype.createEl.call(this, "div", {
                    className: "vjs-volume-level",
                    innerHTML: '<span class="vjs-control-text"></span>'
                })
            }, t
        }(Dn);
    Dn.registerComponent("VolumeLevel", qr);
    var zr = function(e) {
        function t(n, i) {
            Wt(this, t);
            var r = Xt(this, e.call(this, n, i));
            return r.on("slideractive", r.updateLastVolume_), r.on(n, "volumechange", r.updateARIAAttributes), n.ready(function() {
                return r.updateARIAAttributes()
            }), r
        }
        return Gt(t, e), t.prototype.createEl = function() {
            return e.prototype.createEl.call(this, "div", {
                className: "vjs-volume-bar vjs-slider-bar"
            }, {
                "aria-label": this.localize("Volume Level"),
                "aria-live": "polite"
            })
        }, t.prototype.handleMouseDown = function(t) {
            j(t) && e.prototype.handleMouseDown.call(this, t)
        }, t.prototype.handleMouseMove = function(e) {
            j(e) && (this.checkMuted(), this.player_.volume(this.calculateDistance(e)))
        }, t.prototype.checkMuted = function() {
            this.player_.muted() && this.player_.muted(!1)
        }, t.prototype.getPercent = function() {
            return this.player_.muted() ? 0 : this.player_.volume()
        }, t.prototype.stepForward = function() {
            this.checkMuted(), this.player_.volume(this.player_.volume() + .1)
        }, t.prototype.stepBack = function() {
            this.checkMuted(), this.player_.volume(this.player_.volume() - .1)
        }, t.prototype.updateARIAAttributes = function(e) {
            var t = this.player_.muted() ? 0 : this.volumeAsPercentage_();
            this.el_.setAttribute("aria-valuenow", t), this.el_.setAttribute("aria-valuetext", t + "%")
        }, t.prototype.volumeAsPercentage_ = function() {
            return Math.round(100 * this.player_.volume())
        }, t.prototype.updateLastVolume_ = function() {
            var e = this,
                t = this.player_.volume();
            this.one("sliderinactive", function() {
                0 === e.player_.volume() && e.player_.lastVolume_(t)
            })
        }, t
    }(Dr);
    zr.prototype.options_ = {
        children: ["volumeLevel"],
        barName: "volumeLevel"
    }, zr.prototype.playerEvent = "volumechange", Dn.registerComponent("VolumeBar", zr);
    var Wr = function(e) {
        function t(n) {
            var i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
            Wt(this, t), i.vertical = i.vertical || !1, ("undefined" == typeof i.volumeBar || a(i.volumeBar)) && (i.volumeBar = i.volumeBar || {}, i.volumeBar.vertical = i.vertical);
            var r = Xt(this, e.call(this, n, i));
            return Hr(r, n), r.throttledHandleMouseMove = bn(_n(r, r.handleMouseMove), 25), r.on("mousedown", r.handleMouseDown), r.on("touchstart", r.handleMouseDown), r.on(r.volumeBar, ["focus", "slideractive"], function() {
                r.volumeBar.addClass("vjs-slider-active"), r.addClass("vjs-slider-active"), r.trigger("slideractive")
            }), r.on(r.volumeBar, ["blur", "sliderinactive"], function() {
                r.volumeBar.removeClass("vjs-slider-active"), r.removeClass("vjs-slider-active"), r.trigger("sliderinactive")
            }), r
        }
        return Gt(t, e), t.prototype.createEl = function() {
            var t = "vjs-volume-horizontal";
            return this.options_.vertical && (t = "vjs-volume-vertical"), e.prototype.createEl.call(this, "div", {
                className: "vjs-volume-control vjs-control " + t
            })
        }, t.prototype.handleMouseDown = function(e) {
            var t = this.el_.ownerDocument;
            this.on(t, "mousemove", this.throttledHandleMouseMove), this.on(t, "touchmove", this.throttledHandleMouseMove), this.on(t, "mouseup", this.handleMouseUp), this.on(t, "touchend", this.handleMouseUp)
        }, t.prototype.handleMouseUp = function(e) {
            var t = this.el_.ownerDocument;
            this.off(t, "mousemove", this.throttledHandleMouseMove), this.off(t, "touchmove", this.throttledHandleMouseMove), this.off(t, "mouseup", this.handleMouseUp), this.off(t, "touchend", this.handleMouseUp)
        }, t.prototype.handleMouseMove = function(e) {
            this.volumeBar.handleMouseMove(e)
        }, t
    }(Dn);
    Wr.prototype.options_ = {
        children: ["volumeBar"]
    }, Dn.registerComponent("VolumeControl", Wr);
    var Gr = function(e, t) {
            t.tech_ && !t.tech_.featuresMuteControl && e.addClass("vjs-hidden"), e.on(t, "loadstart", function() {
                t.tech_.featuresMuteControl ? e.removeClass("vjs-hidden") : e.addClass("vjs-hidden")
            })
        },
        Xr = function(e) {
            function t(n, i) {
                Wt(this, t);
                var r = Xt(this, e.call(this, n, i));
                return Gr(r, n), r.on(n, ["loadstart", "volumechange"], r.update), r
            }
            return Gt(t, e), t.prototype.buildCSSClass = function() {
                return "vjs-mute-control " + e.prototype.buildCSSClass.call(this)
            }, t.prototype.handleClick = function(e) {
                var t = this.player_.volume(),
                    n = this.player_.lastVolume_();
                if (0 === t) {
                    var i = .1 > n ? .1 : n;
                    this.player_.volume(i), this.player_.muted(!1)
                } else this.player_.muted(this.player_.muted() ? !1 : !0)
            }, t.prototype.update = function(e) {
                this.updateIcon_(), this.updateControlText_()
            }, t.prototype.updateIcon_ = function() {
                var e = this.player_.volume(),
                    t = 3;
                At && this.player_.muted(this.player_.tech_.el_.muted), 0 === e || this.player_.muted() ? t = 0 : .33 > e ? t = 1 : .67 > e && (t = 2);
                for (var n = 0; 4 > n; n++) b(this.el_, "vjs-vol-" + n);
                _(this.el_, "vjs-vol-" + t)
            }, t.prototype.updateControlText_ = function() {
                var e = this.player_.muted() || 0 === this.player_.volume(),
                    t = e ? "Unmute" : "Mute";
                this.controlText() !== t && this.controlText(t)
            }, t
        }(_r);
    Xr.prototype.controlText_ = "Mute", Dn.registerComponent("MuteToggle", Xr);
    var Yr = function(e) {
        function t(n) {
            var i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
            Wt(this, t), "undefined" != typeof i.inline ? i.inline = i.inline : i.inline = !0, ("undefined" == typeof i.volumeControl || a(i.volumeControl)) && (i.volumeControl = i.volumeControl || {}, i.volumeControl.vertical = !i.inline);
            var r = Xt(this, e.call(this, n, i));
            return r.on(n, ["loadstart"], r.volumePanelState_), r.on(r.volumeControl, ["slideractive"], r.sliderActive_), r.on(r.volumeControl, ["sliderinactive"], r.sliderInactive_), r
        }
        return Gt(t, e), t.prototype.sliderActive_ = function() {
            this.addClass("vjs-slider-active")
        }, t.prototype.sliderInactive_ = function() {
            this.removeClass("vjs-slider-active")
        }, t.prototype.volumePanelState_ = function() {
            this.volumeControl.hasClass("vjs-hidden") && this.muteToggle.hasClass("vjs-hidden") && this.addClass("vjs-hidden"), this.volumeControl.hasClass("vjs-hidden") && !this.muteToggle.hasClass("vjs-hidden") && this.addClass("vjs-mute-toggle-only")
        }, t.prototype.createEl = function() {
            var t = "vjs-volume-panel-horizontal";
            return this.options_.inline || (t = "vjs-volume-panel-vertical"), e.prototype.createEl.call(this, "div", {
                className: "vjs-volume-panel vjs-control " + t
            })
        }, t
    }(Dn);
    Yr.prototype.options_ = {
        children: ["muteToggle", "volumeControl"]
    }, Dn.registerComponent("VolumePanel", Yr);
    var $r = function(e) {
        function t(n, i) {
            Wt(this, t);
            var r = Xt(this, e.call(this, n, i));
            return i && (r.menuButton_ = i.menuButton), r.focusedChild_ = -1, r.on("keydown", r.handleKeyPress), r
        }
        return Gt(t, e), t.prototype.addItem = function(e) {
            this.addChild(e), e.on("click", _n(this, function(t) {
                this.menuButton_ && (this.menuButton_.unpressButton(), "CaptionSettingsMenuItem" !== e.name() && this.menuButton_.focus())
            }))
        }, t.prototype.createEl = function() {
            var t = this.options_.contentElType || "ul";
            this.contentEl_ = m(t, {
                className: "vjs-menu-content"
            }), this.contentEl_.setAttribute("role", "menu");
            var n = e.prototype.createEl.call(this, "div", {
                append: this.contentEl_,
                className: "vjs-menu"
            });
            return n.appendChild(this.contentEl_), W(n, "click", function(e) {
                e.preventDefault(), e.stopImmediatePropagation()
            }), n
        }, t.prototype.dispose = function() {
            this.contentEl_ = null, e.prototype.dispose.call(this)
        }, t.prototype.handleKeyPress = function(e) {
            37 === e.which || 40 === e.which ? (e.preventDefault(), this.stepForward()) : (38 === e.which || 39 === e.which) && (e.preventDefault(), this.stepBack())
        }, t.prototype.stepForward = function() {
            var e = 0;
            void 0 !== this.focusedChild_ && (e = this.focusedChild_ + 1), this.focus(e)
        }, t.prototype.stepBack = function() {
            var e = 0;
            void 0 !== this.focusedChild_ && (e = this.focusedChild_ - 1), this.focus(e)
        }, t.prototype.focus = function() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0,
                t = this.children().slice(),
                n = t.length && t[0].className && /vjs-menu-title/.test(t[0].className);
            n && t.shift(), t.length > 0 && (0 > e ? e = 0 : e >= t.length && (e = t.length - 1), this.focusedChild_ = e, t[e].el_.focus())
        }, t
    }(Dn);
    Dn.registerComponent("Menu", $r);
    var Qr = function(e) {
        function t(n) {
            var i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
            Wt(this, t);
            var r = Xt(this, e.call(this, n, i));
            r.menuButton_ = new _r(n, i), r.menuButton_.controlText(r.controlText_), r.menuButton_.el_.setAttribute("aria-haspopup", "true");
            var a = _r.prototype.buildCSSClass();
            return r.menuButton_.el_.className = r.buildCSSClass() + " " + a, r.menuButton_.removeClass("vjs-control"), r.addChild(r.menuButton_), r.update(), r.enabled_ = !0, r.on(r.menuButton_, "tap", r.handleClick), r.on(r.menuButton_, "click", r.handleClick), r.on(r.menuButton_, "focus", r.handleFocus), r.on(r.menuButton_, "blur", r.handleBlur), r.on("keydown", r.handleSubmenuKeyPress), r
        }
        return Gt(t, e), t.prototype.update = function() {
            var e = this.createMenu();
            this.menu && (this.menu.dispose(), this.removeChild(this.menu)), this.menu = e, this.addChild(e), this.buttonPressed_ = !1, this.menuButton_.el_.setAttribute("aria-expanded", "false"), this.items && this.items.length <= this.hideThreshold_ ? this.hide() : this.show()
        }, t.prototype.createMenu = function() {
            var e = new $r(this.player_, {
                menuButton: this
            });
            if (this.hideThreshold_ = 0, this.options_.title) {
                var t = m("li", {
                    className: "vjs-menu-title",
                    innerHTML: J(this.options_.title),
                    tabIndex: -1
                });
                this.hideThreshold_ += 1, e.children_.unshift(t), v(t, e.contentEl())
            }
            if (this.items = this.createItems(), this.items)
                for (var n = 0; n < this.items.length; n++) e.addItem(this.items[n]);
            return e
        }, t.prototype.createItems = function() {}, t.prototype.createEl = function() {
            return e.prototype.createEl.call(this, "div", {
                className: this.buildWrapperCSSClass()
            }, {})
        }, t.prototype.buildWrapperCSSClass = function() {
            var t = "vjs-menu-button";
            t += this.options_.inline === !0 ? "-inline" : "-popup";
            var n = _r.prototype.buildCSSClass();
            return "vjs-menu-button " + t + " " + n + " " + e.prototype.buildCSSClass.call(this)
        }, t.prototype.buildCSSClass = function() {
            var t = "vjs-menu-button";
            return t += this.options_.inline === !0 ? "-inline" : "-popup", "vjs-menu-button " + t + " " + e.prototype.buildCSSClass.call(this)
        }, t.prototype.controlText = function(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : this.menuButton_.el();
            return this.menuButton_.controlText(e, t)
        }, t.prototype.handleClick = function(e) {
            this.one(this.menu.contentEl(), "mouseleave", _n(this, function(e) {
                this.unpressButton(), this.el_.blur()
            })), this.buttonPressed_ ? this.unpressButton() : this.pressButton()
        }, t.prototype.focus = function() {
            this.menuButton_.focus()
        }, t.prototype.blur = function() {
            this.menuButton_.blur()
        }, t.prototype.handleFocus = function() {
            W(bt, "keydown", _n(this, this.handleKeyPress))
        }, t.prototype.handleBlur = function() {
            G(bt, "keydown", _n(this, this.handleKeyPress))
        }, t.prototype.handleKeyPress = function(e) {
            27 === e.which || 9 === e.which ? (this.buttonPressed_ && this.unpressButton(), 9 !== e.which && (e.preventDefault(), this.menuButton_.el_.focus())) : (38 === e.which || 40 === e.which) && (this.buttonPressed_ || (this.pressButton(), e.preventDefault()))
        }, t.prototype.handleSubmenuKeyPress = function(e) {
            (27 === e.which || 9 === e.which) && (this.buttonPressed_ && this.unpressButton(), 9 !== e.which && (e.preventDefault(), this.menuButton_.el_.focus()))
        }, t.prototype.pressButton = function() {
            if (this.enabled_) {
                if (this.buttonPressed_ = !0, this.menu.lockShowing(), this.menuButton_.el_.setAttribute("aria-expanded", "true"), At && p()) return;
                this.menu.focus()
            }
        }, t.prototype.unpressButton = function() {
            this.enabled_ && (this.buttonPressed_ = !1, this.menu.unlockShowing(), this.menuButton_.el_.setAttribute("aria-expanded", "false"))
        }, t.prototype.disable = function() {
            this.unpressButton(), this.enabled_ = !1, this.addClass("vjs-disabled"), this.menuButton_.disable()
        }, t.prototype.enable = function() {
            this.enabled_ = !0, this.removeClass("vjs-disabled"), this.menuButton_.enable()
        }, t
    }(Dn);
    Dn.registerComponent("MenuButton", Qr);
    var Kr = function(e) {
        function t(n, i) {
            Wt(this, t);
            var r = i.tracks,
                a = Xt(this, e.call(this, n, i));
            if (a.items.length <= 1 && a.hide(), !r) return Xt(a);
            var s = _n(a, a.update);
            return r.addEventListener("removetrack", s), r.addEventListener("addtrack", s), a.player_.on("ready", s), a.player_.on("dispose", function() {
                r.removeEventListener("removetrack", s), r.removeEventListener("addtrack", s)
            }), a
        }
        return Gt(t, e), t
    }(Qr);
    Dn.registerComponent("TrackButton", Kr);
    var Jr = function(e) {
        function t(n, i) {
            Wt(this, t);
            var r = Xt(this, e.call(this, n, i));
            return r.selectable = i.selectable, r.isSelected_ = i.selected || !1, r.multiSelectable = i.multiSelectable, r.selected(r.isSelected_), r.selectable ? r.multiSelectable ? r.el_.setAttribute("role", "menuitemcheckbox") : r.el_.setAttribute("role", "menuitemradio") : r.el_.setAttribute("role", "menuitem"), r
        }
        return Gt(t, e), t.prototype.createEl = function(t, n, r) {
            return this.nonIconControl = !0, e.prototype.createEl.call(this, "li", i({
                className: "vjs-menu-item",
                innerHTML: '<span class="vjs-menu-item-text">' + this.localize(this.options_.label) + "</span>",
                tabIndex: -1
            }, n), r)
        }, t.prototype.handleClick = function(e) {
            this.selected(!0)
        }, t.prototype.selected = function(e) {
            this.selectable && (e ? (this.addClass("vjs-selected"), this.el_.setAttribute("aria-checked", "true"), this.controlText(", selected"), this.isSelected_ = !0) : (this.removeClass("vjs-selected"), this.el_.setAttribute("aria-checked", "false"), this.controlText(""), this.isSelected_ = !1))
        }, t
    }(hr);
    Dn.registerComponent("MenuItem", Jr);
    var Zr = function(e) {
        function t(n, i) {
            Wt(this, t);
            var r = i.track,
                a = n.textTracks();
            i.label = r.label || r.language || "Unknown", i.selected = "showing" === r.mode;
            var s = Xt(this, e.call(this, n, i));
            s.track = r;
            var o = function() {
                    for (var e = arguments.length, t = Array(e), n = 0; e > n; n++) t[n] = arguments[n];
                    s.handleTracksChange.apply(s, t)
                },
                u = function() {
                    for (var e = arguments.length, t = Array(e), n = 0; e > n; n++) t[n] = arguments[n];
                    s.handleSelectedLanguageChange.apply(s, t)
                };
            if (n.on(["loadstart", "texttrackchange"], o), a.addEventListener("change", o), a.addEventListener("selectedlanguagechange", u), s.on("dispose", function() {
                n.off(["loadstart", "texttrackchange"], o), a.removeEventListener("change", o), a.removeEventListener("selectedlanguagechange", u)
            }), void 0 === a.onchange) {
                var l = void 0;
                s.on(["tap", "click"], function() {
                    if ("object" !== zt(mt.Event)) try {
                        l = new mt.Event("change")
                    } catch (e) {}
                    l || (l = bt.createEvent("Event"), l.initEvent("change", !0, !0)), a.dispatchEvent(l)
                })
            }
            return s.handleTracksChange(), s
        }
        return Gt(t, e), t.prototype.handleClick = function(t) {
            var n = this.track.kind,
                i = this.track.kinds,
                r = this.player_.textTracks();
            if (i || (i = [n]), e.prototype.handleClick.call(this, t), r)
                for (var a = 0; a < r.length; a++) {
                    var s = r[a];
                    s === this.track && i.indexOf(s.kind) > -1 ? "showing" !== s.mode && (s.mode = "showing") : "disabled" !== s.mode && (s.mode = "disabled")
                }
        }, t.prototype.handleTracksChange = function(e) {
            var t = "showing" === this.track.mode;
            t !== this.isSelected_ && this.selected(t)
        }, t.prototype.handleSelectedLanguageChange = function(e) {
            if ("showing" === this.track.mode) {
                var t = this.player_.cache_.selectedLanguage;
                if (t && t.enabled && t.language === this.track.language && t.kind !== this.track.kind) return;
                this.player_.cache_.selectedLanguage = {
                    enabled: !0,
                    language: this.track.language,
                    kind: this.track.kind
                }
            }
        }, t.prototype.dispose = function() {
            this.track = null, e.prototype.dispose.call(this)
        }, t
    }(Jr);
    Dn.registerComponent("TextTrackMenuItem", Zr);
    var ea = function(e) {
        function t(n, i) {
            return Wt(this, t), i.track = {
                player: n,
                kind: i.kind,
                kinds: i.kinds,
                "default": !1,
                mode: "disabled"
            }, i.kinds || (i.kinds = [i.kind]), i.label ? i.track.label = i.label : i.track.label = i.kinds.join(" and ") + " off", i.selectable = !0, i.multiSelectable = !1, Xt(this, e.call(this, n, i))
        }
        return Gt(t, e), t.prototype.handleTracksChange = function(e) {
            for (var t = this.player().textTracks(), n = !0, i = 0, r = t.length; r > i; i++) {
                var a = t[i];
                if (this.options_.kinds.indexOf(a.kind) > -1 && "showing" === a.mode) {
                    n = !1;
                    break
                }
            }
            n !== this.isSelected_ && this.selected(n)
        }, t.prototype.handleSelectedLanguageChange = function(e) {
            for (var t = this.player().textTracks(), n = !0, i = 0, r = t.length; r > i; i++) {
                var a = t[i];
                if (["captions", "descriptions", "subtitles"].indexOf(a.kind) > -1 && "showing" === a.mode) {
                    n = !1;
                    break
                }
            }
            n && (this.player_.cache_.selectedLanguage = {
                enabled: !1
            })
        }, t
    }(Zr);
    Dn.registerComponent("OffTextTrackMenuItem", ea);
    var ta = function(e) {
        function t(n) {
            var i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
            return Wt(this, t), i.tracks = n.textTracks(), Xt(this, e.call(this, n, i))
        }
        return Gt(t, e), t.prototype.createItems = function() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [],
                t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : Zr,
                n = void 0;
            this.label_ && (n = this.label_ + " off"), e.push(new ea(this.player_, {
                kinds: this.kinds_,
                kind: this.kind_,
                label: n
            })), this.hideThreshold_ += 1;
            var i = this.player_.textTracks();
            Array.isArray(this.kinds_) || (this.kinds_ = [this.kind_]);
            for (var r = 0; r < i.length; r++) {
                var a = i[r];
                if (this.kinds_.indexOf(a.kind) > -1) {
                    var s = new t(this.player_, {
                        track: a,
                        selectable: !0,
                        multiSelectable: !1
                    });
                    s.addClass("vjs-" + a.kind + "-menu-item"), e.push(s)
                }
            }
            return e
        }, t
    }(Kr);
    Dn.registerComponent("TextTrackButton", ta);
    var na = function(e) {
        function t(n, i) {
            Wt(this, t);
            var r = i.track,
                a = i.cue,
                s = n.currentTime();
            i.selectable = !0, i.multiSelectable = !1, i.label = a.text, i.selected = a.startTime <= s && s < a.endTime;
            var o = Xt(this, e.call(this, n, i));
            return o.track = r, o.cue = a, r.addEventListener("cuechange", _n(o, o.update)), o
        }
        return Gt(t, e), t.prototype.handleClick = function(t) {
            e.prototype.handleClick.call(this), this.player_.currentTime(this.cue.startTime), this.update(this.cue.startTime)
        }, t.prototype.update = function(e) {
            var t = this.cue,
                n = this.player_.currentTime();
            this.selected(t.startTime <= n && n < t.endTime)
        }, t
    }(Jr);
    Dn.registerComponent("ChaptersTrackMenuItem", na);
    var ia = function(e) {
        function t(n, i, r) {
            return Wt(this, t), Xt(this, e.call(this, n, i, r))
        }
        return Gt(t, e), t.prototype.buildCSSClass = function() {
            return "vjs-chapters-button " + e.prototype.buildCSSClass.call(this)
        }, t.prototype.buildWrapperCSSClass = function() {
            return "vjs-chapters-button " + e.prototype.buildWrapperCSSClass.call(this)
        }, t.prototype.update = function(t) {
            (!this.track_ || t && ("addtrack" === t.type || "removetrack" === t.type)) && this.setTrack(this.findChaptersTrack()), e.prototype.update.call(this)
        }, t.prototype.setTrack = function(e) {
            if (this.track_ !== e) {
                if (this.updateHandler_ || (this.updateHandler_ = this.update.bind(this)), this.track_) {
                    var t = this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);
                    t && t.removeEventListener("load", this.updateHandler_), this.track_ = null
                }
                if (this.track_ = e, this.track_) {
                    this.track_.mode = "hidden";
                    var n = this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);
                    n && n.addEventListener("load", this.updateHandler_)
                }
            }
        }, t.prototype.findChaptersTrack = function() {
            for (var e = this.player_.textTracks() || [], t = e.length - 1; t >= 0; t--) {
                var n = e[t];
                if (n.kind === this.kind_) return n
            }
        }, t.prototype.getMenuCaption = function() {
            return this.track_ && this.track_.label ? this.track_.label : this.localize(J(this.kind_))
        }, t.prototype.createMenu = function() {
            return this.options_.title = this.getMenuCaption(), e.prototype.createMenu.call(this)
        }, t.prototype.createItems = function() {
            var e = [];
            if (!this.track_) return e;
            var t = this.track_.cues;
            if (!t) return e;
            for (var n = 0, i = t.length; i > n; n++) {
                var r = t[n],
                    a = new na(this.player_, {
                        track: this.track_,
                        cue: r
                    });
                e.push(a)
            }
            return e
        }, t
    }(ta);
    ia.prototype.kind_ = "chapters", ia.prototype.controlText_ = "Chapters", Dn.registerComponent("ChaptersButton", ia);
    var ra = function(e) {
        function t(n, i, r) {
            Wt(this, t);
            var a = Xt(this, e.call(this, n, i, r)),
                s = n.textTracks(),
                o = _n(a, a.handleTracksChange);
            return s.addEventListener("change", o), a.on("dispose", function() {
                s.removeEventListener("change", o)
            }), a
        }
        return Gt(t, e), t.prototype.handleTracksChange = function(e) {
            for (var t = this.player().textTracks(), n = !1, i = 0, r = t.length; r > i; i++) {
                var a = t[i];
                if (a.kind !== this.kind_ && "showing" === a.mode) {
                    n = !0;
                    break
                }
            }
            n ? this.disable() : this.enable()
        }, t.prototype.buildCSSClass = function() {
            return "vjs-descriptions-button " + e.prototype.buildCSSClass.call(this)
        }, t.prototype.buildWrapperCSSClass = function() {
            return "vjs-descriptions-button " + e.prototype.buildWrapperCSSClass.call(this)
        }, t
    }(ta);
    ra.prototype.kind_ = "descriptions", ra.prototype.controlText_ = "Descriptions", Dn.registerComponent("DescriptionsButton", ra);
    var aa = function(e) {
        function t(n, i, r) {
            return Wt(this, t), Xt(this, e.call(this, n, i, r))
        }
        return Gt(t, e), t.prototype.buildCSSClass = function() {
            return "vjs-subtitles-button " + e.prototype.buildCSSClass.call(this)
        }, t.prototype.buildWrapperCSSClass = function() {
            return "vjs-subtitles-button " + e.prototype.buildWrapperCSSClass.call(this)
        }, t
    }(ta);
    aa.prototype.kind_ = "subtitles", aa.prototype.controlText_ = "Subtitles", Dn.registerComponent("SubtitlesButton", aa);
    var sa = function(e) {
        function t(n, i) {
            Wt(this, t), i.track = {
                player: n,
                kind: i.kind,
                label: i.kind + " settings",
                selectable: !1,
                "default": !1,
                mode: "disabled"
            }, i.selectable = !1, i.name = "CaptionSettingsMenuItem";
            var r = Xt(this, e.call(this, n, i));
            return r.addClass("vjs-texttrack-settings"), r.controlText(", opens " + i.kind + " settings dialog"), r
        }
        return Gt(t, e), t.prototype.handleClick = function(e) {
            this.player().getChild("textTrackSettings").open()
        }, t
    }(Zr);
    Dn.registerComponent("CaptionSettingsMenuItem", sa);
    var oa = function(e) {
        function t(n, i, r) {
            return Wt(this, t), Xt(this, e.call(this, n, i, r))
        }
        return Gt(t, e), t.prototype.buildCSSClass = function() {
            return "vjs-captions-button " + e.prototype.buildCSSClass.call(this)
        }, t.prototype.buildWrapperCSSClass = function() {
            return "vjs-captions-button " + e.prototype.buildWrapperCSSClass.call(this)
        }, t.prototype.createItems = function() {
            var t = [];
            return this.player().tech_ && this.player().tech_.featuresNativeTextTracks || !this.player().getChild("textTrackSettings") || (t.push(new sa(this.player_, {
                kind: this.kind_
            })), this.hideThreshold_ += 1), e.prototype.createItems.call(this, t)
        }, t
    }(ta);
    oa.prototype.kind_ = "captions", oa.prototype.controlText_ = "Captions", Dn.registerComponent("CaptionsButton", oa);
    var ua = function(e) {
        function t() {
            return Wt(this, t), Xt(this, e.apply(this, arguments))
        }
        return Gt(t, e), t.prototype.createEl = function(t, n, r) {
            var a = '<span class="vjs-menu-item-text">' + this.localize(this.options_.label);
            "captions" === this.options_.track.kind && (a += '\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> ' + this.localize("Captions") + "</span>\n      "), a += "</span>";
            var s = e.prototype.createEl.call(this, t, i({
                innerHTML: a
            }, n), r);
            return s
        }, t
    }(Zr);
    Dn.registerComponent("SubsCapsMenuItem", ua);
    var la = function(e) {
        function t(n) {
            var i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
            Wt(this, t);
            var r = Xt(this, e.call(this, n, i));
            return r.label_ = "subtitles", ["en", "en-us", "en-ca", "fr-ca"].indexOf(r.player_.language_) > -1 && (r.label_ = "captions"), r.menuButton_.controlText(J(r.label_)), r
        }
        return Gt(t, e), t.prototype.buildCSSClass = function() {
            return "vjs-subs-caps-button " + e.prototype.buildCSSClass.call(this)
        }, t.prototype.buildWrapperCSSClass = function() {
            return "vjs-subs-caps-button " + e.prototype.buildWrapperCSSClass.call(this)
        }, t.prototype.createItems = function() {
            var t = [];
            return this.player().tech_ && this.player().tech_.featuresNativeTextTracks || !this.player().getChild("textTrackSettings") || (t.push(new sa(this.player_, {
                kind: this.label_
            })), this.hideThreshold_ += 1), t = e.prototype.createItems.call(this, t, ua)
        }, t
    }(ta);
    la.prototype.kinds_ = ["captions", "subtitles"], la.prototype.controlText_ = "Subtitles", Dn.registerComponent("SubsCapsButton", la);
    var ca = function(e) {
        function t(n, i) {
            Wt(this, t);
            var r = i.track,
                a = n.audioTracks();
            i.label = r.label || r.language || "Unknown", i.selected = r.enabled;
            var s = Xt(this, e.call(this, n, i));
            s.track = r, s.addClass("vjs-" + r.kind + "-menu-item");
            var o = function() {
                for (var e = arguments.length, t = Array(e), n = 0; e > n; n++) t[n] = arguments[n];
                s.handleTracksChange.apply(s, t)
            };
            return a.addEventListener("change", o), s.on("dispose", function() {
                a.removeEventListener("change", o)
            }), s
        }
        return Gt(t, e), t.prototype.createEl = function(t, n, r) {
            var a = '<span class="vjs-menu-item-text">' + this.localize(this.options_.label);
            "main-desc" === this.options_.track.kind && (a += '\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> ' + this.localize("Descriptions") + "</span>\n      "), a += "</span>";
            var s = e.prototype.createEl.call(this, t, i({
                innerHTML: a
            }, n), r);
            return s
        }, t.prototype.handleClick = function(t) {
            var n = this.player_.audioTracks();
            e.prototype.handleClick.call(this, t);
            for (var i = 0; i < n.length; i++) {
                var r = n[i];
                r.enabled = r === this.track
            }
        }, t.prototype.handleTracksChange = function(e) {
            this.selected(this.track.enabled)
        }, t
    }(Jr);
    Dn.registerComponent("AudioTrackMenuItem", ca);
    var da = function(e) {
        function t(n) {
            var i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
            return Wt(this, t), i.tracks = n.audioTracks(), Xt(this, e.call(this, n, i))
        }
        return Gt(t, e), t.prototype.buildCSSClass = function() {
            return "vjs-audio-button " + e.prototype.buildCSSClass.call(this)
        }, t.prototype.buildWrapperCSSClass = function() {
            return "vjs-audio-button " + e.prototype.buildWrapperCSSClass.call(this)
        }, t.prototype.createItems = function() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [];
            this.hideThreshold_ = 1;
            for (var t = this.player_.audioTracks(), n = 0; n < t.length; n++) {
                var i = t[n];
                e.push(new ca(this.player_, {
                    track: i,
                    selectable: !0,
                    multiSelectable: !1
                }))
            }
            return e
        }, t
    }(Kr);
    da.prototype.controlText_ = "Audio Track", Dn.registerComponent("AudioTrackButton", da);
    var ha = function(e) {
        function t(n, i) {
            Wt(this, t);
            var r = i.rate,
                a = parseFloat(r, 10);
            i.label = r, i.selected = 1 === a, i.selectable = !0, i.multiSelectable = !1;
            var s = Xt(this, e.call(this, n, i));
            return s.label = r, s.rate = a, s.on(n, "ratechange", s.update), s
        }
        return Gt(t, e), t.prototype.handleClick = function(t) {
            e.prototype.handleClick.call(this), this.player().playbackRate(this.rate)
        }, t.prototype.update = function(e) {
            this.selected(this.player().playbackRate() === this.rate)
        }, t
    }(Jr);
    ha.prototype.contentElType = "button", Dn.registerComponent("PlaybackRateMenuItem", ha);
    var pa = function(e) {
        function t(n, i) {
            Wt(this, t);
            var r = Xt(this, e.call(this, n, i));
            return r.updateVisibility(), r.updateLabel(), r.on(n, "loadstart", r.updateVisibility), r.on(n, "ratechange", r.updateLabel), r
        }
        return Gt(t, e), t.prototype.createEl = function() {
            var t = e.prototype.createEl.call(this);
            return this.labelEl_ = m("div", {
                className: "vjs-playback-rate-value",
                innerHTML: "1x"
            }), t.appendChild(this.labelEl_), t
        }, t.prototype.dispose = function() {
            this.labelEl_ = null, e.prototype.dispose.call(this)
        }, t.prototype.buildCSSClass = function() {
            return "vjs-playback-rate " + e.prototype.buildCSSClass.call(this)
        }, t.prototype.buildWrapperCSSClass = function() {
            return "vjs-playback-rate " + e.prototype.buildWrapperCSSClass.call(this)
        }, t.prototype.createMenu = function() {
            var e = new $r(this.player()),
                t = this.playbackRates();
            if (t)
                for (var n = t.length - 1; n >= 0; n--) e.addChild(new ha(this.player(), {
                    rate: t[n] + "x"
                }));
            return e
        }, t.prototype.updateARIAAttributes = function() {
            this.el().setAttribute("aria-valuenow", this.player().playbackRate())
        }, t.prototype.handleClick = function(e) {
            for (var t = this.player().playbackRate(), n = this.playbackRates(), i = n[0], r = 0; r < n.length; r++)
                if (n[r] > t) {
                    i = n[r];
                    break
                }
            this.player().playbackRate(i)
        }, t.prototype.playbackRates = function() {
            return this.options_.playbackRates || this.options_.playerOptions && this.options_.playerOptions.playbackRates
        }, t.prototype.playbackRateSupported = function() {
            return this.player().tech_ && this.player().tech_.featuresPlaybackRate && this.playbackRates() && this.playbackRates().length > 0
        }, t.prototype.updateVisibility = function(e) {
            this.playbackRateSupported() ? this.removeClass("vjs-hidden") : this.addClass("vjs-hidden")
        }, t.prototype.updateLabel = function(e) {
            this.playbackRateSupported() && (this.labelEl_.innerHTML = this.player().playbackRate() + "x")
        }, t
    }(Qr);
    pa.prototype.controlText_ = "Playback Rate", Dn.registerComponent("PlaybackRateMenuButton", pa);
    var fa = function(e) {
        function t() {
            return Wt(this, t), Xt(this, e.apply(this, arguments))
        }
        return Gt(t, e), t.prototype.buildCSSClass = function() {
            return "vjs-spacer " + e.prototype.buildCSSClass.call(this)
        }, t.prototype.createEl = function() {
            return e.prototype.createEl.call(this, "div", {
                className: this.buildCSSClass()
            })
        }, t
    }(Dn);
    Dn.registerComponent("Spacer", fa);
    var ma = function(e) {
        function t() {
            return Wt(this, t), Xt(this, e.apply(this, arguments))
        }
        return Gt(t, e), t.prototype.buildCSSClass = function() {
            return "vjs-custom-control-spacer " + e.prototype.buildCSSClass.call(this)
        }, t.prototype.createEl = function() {
            var t = e.prototype.createEl.call(this, {
                className: this.buildCSSClass()
            });
            return t.innerHTML = " ", t
        }, t
    }(fa);
    Dn.registerComponent("CustomControlSpacer", ma);
    var ga = function(e) {
        function t() {
            return Wt(this, t), Xt(this, e.apply(this, arguments))
        }
        return Gt(t, e), t.prototype.createEl = function() {
            return e.prototype.createEl.call(this, "div", {
                className: "vjs-control-bar",
                dir: "ltr"
            })
        }, t
    }(Dn);
    ga.prototype.options_ = {
        children: ["playToggle", "volumePanel", "currentTimeDisplay", "timeDivider", "durationDisplay", "progressControl", "liveDisplay", "remainingTimeDisplay", "customControlSpacer", "playbackRateMenuButton", "chaptersButton", "descriptionsButton", "subsCapsButton", "audioTrackButton", "fullscreenToggle"]
    }, Dn.registerComponent("ControlBar", ga);
    var va = function(e) {
        function t(n, i) {
            Wt(this, t);
            var r = Xt(this, e.call(this, n, i));
            return r.on(n, "error", r.open), r
        }
        return Gt(t, e), t.prototype.buildCSSClass = function() {
            return "vjs-error-display " + e.prototype.buildCSSClass.call(this)
        }, t.prototype.content = function() {
            var e = this.player().error();
            return e ? this.localize(e.message) : ""
        }, t
    }(Xn);
    va.prototype.options_ = ee(Xn.prototype.options_, {
        pauseOnOpen: !1,
        fillAlways: !0,
        temporary: !1,
        uncloseable: !0
    }), Dn.registerComponent("ErrorDisplay", va);
    var ya = "vjs-text-track-settings",
        _a = ["#000", "Black"],
        ba = ["#00F", "Blue"],
        Ta = ["#0FF", "Cyan"],
        Sa = ["#0F0", "Green"],
        ka = ["#F0F", "Magenta"],
        wa = ["#F00", "Red"],
        Ca = ["#FFF", "White"],
        Ea = ["#FF0", "Yellow"],
        Aa = ["1", "Opaque"],
        La = ["0.5", "Semi-Transparent"],
        Ia = ["0", "Transparent"],
        Pa = {
            backgroundColor: {
                selector: ".vjs-bg-color > select",
                id: "captions-background-color-%s",
                label: "Color",
                options: [_a, Ca, wa, Sa, ba, Ea, ka, Ta]
            },
            backgroundOpacity: {
                selector: ".vjs-bg-opacity > select",
                id: "captions-background-opacity-%s",
                label: "Transparency",
                options: [Aa, La, Ia]
            },
            color: {
                selector: ".vjs-fg-color > select",
                id: "captions-foreground-color-%s",
                label: "Color",
                options: [Ca, _a, wa, Sa, ba, Ea, ka, Ta]
            },
            edgeStyle: {
                selector: ".vjs-edge-style > select",
                id: "%s",
                label: "Text Edge Style",
                options: [
                    ["none", "None"],
                    ["raised", "Raised"],
                    ["depressed", "Depressed"],
                    ["uniform", "Uniform"],
                    ["dropshadow", "Dropshadow"]
                ]
            },
            fontFamily: {
                selector: ".vjs-font-family > select",
                id: "captions-font-family-%s",
                label: "Font Family",
                options: [
                    ["proportionalSansSerif", "Proportional Sans-Serif"],
                    ["monospaceSansSerif", "Monospace Sans-Serif"],
                    ["proportionalSerif", "Proportional Serif"],
                    ["monospaceSerif", "Monospace Serif"],
                    ["casual", "Casual"],
                    ["script", "Script"],
                    ["small-caps", "Small Caps"]
                ]
            },
            fontPercent: {
                selector: ".vjs-font-percent > select",
                id: "captions-font-size-%s",
                label: "Font Size",
                options: [
                    ["0.50", "50%"],
                    ["0.75", "75%"],
                    ["1.00", "100%"],
                    ["1.25", "125%"],
                    ["1.50", "150%"],
                    ["1.75", "175%"],
                    ["2.00", "200%"],
                    ["3.00", "300%"],
                    ["4.00", "400%"]
                ],
                "default": 2,
                parser: function(e) {
                    return "1.00" === e ? null : Number(e)
                }
            },
            textOpacity: {
                selector: ".vjs-text-opacity > select",
                id: "captions-foreground-opacity-%s",
                label: "Transparency",
                options: [Aa, La]
            },
            windowColor: {
                selector: ".vjs-window-color > select",
                id: "captions-window-color-%s",
                label: "Color"
            },
            windowOpacity: {
                selector: ".vjs-window-opacity > select",
                id: "captions-window-opacity-%s",
                label: "Transparency",
                options: [Ia, La, Aa]
            }
        };
    Pa.windowColor.options = Pa.backgroundColor.options;
    var xa = function(e) {
        function i(n, r) {
            Wt(this, i), r.temporary = !1;
            var a = Xt(this, e.call(this, n, r));
            return a.updateDisplay = _n(a, a.updateDisplay), a.fill(), a.hasBeenOpened_ = a.hasBeenFilled_ = !0, a.endDialog = m("p", {
                className: "vjs-control-text",
                textContent: a.localize("End of dialog window.")
            }), a.el().appendChild(a.endDialog), a.setDefaults(), void 0 === r.persistTextTrackSettings && (a.options_.persistTextTrackSettings = a.options_.playerOptions.persistTextTrackSettings), a.on(a.$(".vjs-done-button"), "click", function() {
                a.saveSettings(), a.close()
            }), a.on(a.$(".vjs-default-button"), "click", function() {
                a.setDefaults(), a.updateDisplay()
            }), t(Pa, function(e) {
                a.on(a.$(e.selector), "change", a.updateDisplay)
            }), a.options_.persistTextTrackSettings && a.restoreSettings(), a
        }
        return Gt(i, e), i.prototype.dispose = function() {
            this.endDialog = null, e.prototype.dispose.call(this)
        }, i.prototype.createElSelect_ = function(e) {
            var t = this,
                n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "",
                i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : "label",
                r = Pa[e],
                a = r.id.replace("%s", this.id_),
                s = [n, a].join(" ").trim();
            return ["<" + i + ' id="' + a + '" class="' + ("label" === i ? "vjs-label" : "") + '">', this.localize(r.label), "</" + i + ">", '<select aria-labelledby="' + s + '">'].concat(r.options.map(function(e) {
                var n = a + "-" + e[1].replace(/\W+/g, "");
                return ['<option id="' + n + '" value="' + e[0] + '" ', 'aria-labelledby="' + s + " " + n + '">', t.localize(e[1]), "</option>"].join("")
            })).concat("</select>").join("")
        }, i.prototype.createElFgColor_ = function() {
            var e = "captions-text-legend-" + this.id_;
            return ['<fieldset class="vjs-fg-color vjs-track-setting">', '<legend id="' + e + '">', this.localize("Text"), "</legend>", this.createElSelect_("color", e), '<span class="vjs-text-opacity vjs-opacity">', this.createElSelect_("textOpacity", e), "</span>", "</fieldset>"].join("")
        }, i.prototype.createElBgColor_ = function() {
            var e = "captions-background-" + this.id_;
            return ['<fieldset class="vjs-bg-color vjs-track-setting">', '<legend id="' + e + '">', this.localize("Background"), "</legend>", this.createElSelect_("backgroundColor", e), '<span class="vjs-bg-opacity vjs-opacity">', this.createElSelect_("backgroundOpacity", e), "</span>", "</fieldset>"].join("")
        }, i.prototype.createElWinColor_ = function() {
            var e = "captions-window-" + this.id_;
            return ['<fieldset class="vjs-window-color vjs-track-setting">', '<legend id="' + e + '">', this.localize("Window"), "</legend>", this.createElSelect_("windowColor", e), '<span class="vjs-window-opacity vjs-opacity">', this.createElSelect_("windowOpacity", e), "</span>", "</fieldset>"].join("")
        }, i.prototype.createElColors_ = function() {
            return m("div", {
                className: "vjs-track-settings-colors",
                innerHTML: [this.createElFgColor_(), this.createElBgColor_(), this.createElWinColor_()].join("")
            })
        }, i.prototype.createElFont_ = function() {
            return m("div", {
                className: "vjs-track-settings-font",
                innerHTML: ['<fieldset class="vjs-font-percent vjs-track-setting">', this.createElSelect_("fontPercent", "", "legend"), "</fieldset>", '<fieldset class="vjs-edge-style vjs-track-setting">', this.createElSelect_("edgeStyle", "", "legend"), "</fieldset>", '<fieldset class="vjs-font-family vjs-track-setting">', this.createElSelect_("fontFamily", "", "legend"), "</fieldset>"].join("")
            })
        }, i.prototype.createElControls_ = function() {
            var e = this.localize("restore all settings to the default values");
            return m("div", {
                className: "vjs-track-settings-controls",
                innerHTML: ['<button class="vjs-default-button" title="' + e + '">', this.localize("Reset"), '<span class="vjs-control-text"> ' + e + "</span>", "</button>", '<button class="vjs-done-button">' + this.localize("Done") + "</button>"].join("")
            })
        }, i.prototype.content = function() {
            return [this.createElColors_(), this.createElFont_(), this.createElControls_()]
        }, i.prototype.label = function() {
            return this.localize("Caption Settings Dialog")
        }, i.prototype.description = function() {
            return this.localize("Beginning of dialog window. Escape will cancel and close the window.")
        }, i.prototype.buildCSSClass = function() {
            return e.prototype.buildCSSClass.call(this) + " vjs-text-track-settings"
        }, i.prototype.getValues = function() {
            var e = this;
            return n(Pa, function(t, n, i) {
                var r = ut(e.$(n.selector), n.parser);
                return void 0 !== r && (t[i] = r), t
            }, {})
        }, i.prototype.setValues = function(e) {
            var n = this;
            t(Pa, function(t, i) {
                lt(n.$(t.selector), e[i], t.parser)
            })
        }, i.prototype.setDefaults = function() {
            var e = this;
            t(Pa, function(t) {
                var n = t.hasOwnProperty("default") ? t["default"] : 0;
                e.$(t.selector).selectedIndex = n
            })
        }, i.prototype.restoreSettings = function() {
            var e = void 0;
            try {
                e = JSON.parse(mt.localStorage.getItem(ya))
            } catch (t) {
                tn.warn(t)
            }
            e && this.setValues(e)
        }, i.prototype.saveSettings = function() {
            if (this.options_.persistTextTrackSettings) {
                var e = this.getValues();
                try {
                    Object.keys(e).length ? mt.localStorage.setItem(ya, JSON.stringify(e)) : mt.localStorage.removeItem(ya)
                } catch (t) {
                    tn.warn(t)
                }
            }
        }, i.prototype.updateDisplay = function() {
            var e = this.player_.getChild("textTrackDisplay");
            e && e.updateDisplay()
        }, i.prototype.conditionalBlur_ = function() {
            this.previouslyActiveEl_ = null, this.off(bt, "keydown", this.handleKeyDown);
            var e = this.player_.controlBar,
                t = e && e.subsCapsButton,
                n = e && e.captionsButton;
            t ? t.focus() : n && n.focus()
        }, i
    }(Xn);
    Dn.registerComponent("TextTrackSettings", xa);
    var Da = function(e) {
        function t(n, i) {
            Wt(this, t);
            var r = i.ResizeObserver || mt.ResizeObserver;
            null === i.ResizeObserver && (r = !1);
            var a = ee({
                    createEl: !r
                }, i),
                s = Xt(this, e.call(this, n, a));
            return s.ResizeObserver = i.ResizeObserver || mt.ResizeObserver, s.loadListener_ = null, s.resizeObserver_ = null, s.debouncedHandler_ = Tn(function() {
                s.resizeHandler()
            }, 100, !1, n), r ? (s.resizeObserver_ = new s.ResizeObserver(s.debouncedHandler_), s.resizeObserver_.observe(n.el())) : (s.loadListener_ = function() {
                s.el_.contentWindow && W(s.el_.contentWindow, "resize", s.debouncedHandler_), s.off("load", s.loadListener_)
            }, s.on("load", s.loadListener_)), s
        }
        return Gt(t, e), t.prototype.createEl = function() {
            return e.prototype.createEl.call(this, "iframe", {
                className: "vjs-resize-manager"
            })
        }, t.prototype.resizeHandler = function() {
            this.player_.trigger("playerresize")
        }, t.prototype.dispose = function() {
            this.resizeObserver_ && (this.player_.el() && this.resizeObserver_.unobserve(this.player_.el()), this.resizeObserver_.disconnect()), this.el_ && this.el_.contentWindow && G(this.el_.contentWindow, "resize", this.debouncedHandler_), this.loadListener_ && this.off("load", this.loadListener_), this.ResizeObserver = null, this.resizeObserver = null, this.debouncedHandler_ = null, this.loadListener_ = null
        }, t
    }(Dn);
    Dn.registerComponent("ResizeManager", Da);
    var Ua = function(e) {
            var t = e.el();
            if (t.hasAttribute("src")) return e.triggerSourceset(t.src), !0;
            var n = e.$$("source"),
                i = [],
                r = "";
            if (!n.length) return !1;
            for (var a = 0; a < n.length; a++) {
                var s = n[a].src;
                s && -1 === i.indexOf(s) && i.push(s)
            }
            return i.length ? (1 === i.length && (r = i[0]), e.triggerSourceset(r), !0) : !1
        },
        Oa = {};
    jt || (Oa = Object.defineProperty({}, "innerHTML", {
        get: function() {
            return this.cloneNode(!0).innerHTML
        },
        set: function(e) {
            var t = bt.createElement(this.nodeName.toLowerCase());
            t.innerHTML = e;
            for (var n = bt.createDocumentFragment(); t.childNodes.length;) n.appendChild(t.childNodes[0]);
            return this.innerText = "", mt.Element.prototype.appendChild.call(this, n), this.innerHTML
        }
    }));
    var Ma = function(e, t) {
            for (var n = {}, i = 0; i < e.length && (n = Object.getOwnPropertyDescriptor(e[i], t), !(n && n.set && n.get)); i++);
            return n.enumerable = !0, n.configurable = !0, n
        },
        Ra = function(e) {
            return Ma([e.el(), mt.HTMLMediaElement.prototype, mt.Element.prototype, Oa], "innerHTML")
        },
        ja = function(e) {
            var t = e.el();
            if (!t.resetSourceWatch_) {
                var n = {},
                    i = Ra(e),
                    r = function(n) {
                        return function() {
                            for (var i = arguments.length, r = Array(i), a = 0; i > a; a++) r[a] = arguments[a];
                            var s = n.apply(t, r);
                            return Ua(e), s
                        }
                    };
                ["append", "appendChild", "insertAdjacentHTML"].forEach(function(e) {
                    t[e] && (n[e] = t[e], t[e] = r(n[e]))
                }), Object.defineProperty(t, "innerHTML", ee(i, {
                    set: r(i.set)
                })), t.resetSourceWatch_ = function() {
                    t.resetSourceWatch_ = null, Object.keys(n).forEach(function(e) {
                        t[e] = n[e]
                    }), Object.defineProperty(t, "innerHTML", i)
                }, e.one("sourceset", t.resetSourceWatch_)
            }
        },
        Na = {};
    jt || (Na = Object.defineProperty({}, "src", {
        get: function() {
            return this.hasAttribute("src") ? li(mt.Element.prototype.getAttribute.call(this, "src")) : ""
        },
        set: function(e) {
            return mt.Element.prototype.setAttribute.call(this, "src", e), e
        }
    }));
    var Ba = function(e) {
            return Ma([e.el(), mt.HTMLMediaElement.prototype, Na], "src")
        },
        Fa = function(e) {
            if (e.featuresSourceset) {
                var t = e.el();
                if (!t.resetSourceset_) {
                    var n = Ba(e),
                        i = t.setAttribute,
                        r = t.load;
                    Object.defineProperty(t, "src", ee(n, {
                        set: function(i) {
                            var r = n.set.call(t, i);
                            return e.triggerSourceset(t.src), r
                        }
                    })), t.setAttribute = function(n, r) {
                        var a = i.call(t, n, r);
                        return /src/i.test(n) && e.triggerSourceset(t.src), a
                    }, t.load = function() {
                        var n = r.call(t);
                        return Ua(e) || (e.triggerSourceset(""), ja(e)), n
                    }, t.currentSrc ? e.triggerSourceset(t.currentSrc) : Ua(e) || ja(e), t.resetSourceset_ = function() {
                        t.resetSourceset_ = null, t.load = r, t.setAttribute = i, Object.defineProperty(t, "src", n), t.resetSourceWatch_ && t.resetSourceWatch_()
                    }
                }
            }
        },
        Va = Yt(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."], ["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]),
        Ha = function(e) {
            function t(n, i) {
                Wt(this, t);
                var r = Xt(this, e.call(this, n, i)),
                    a = n.source,
                    s = !1;
                if (a && (r.el_.currentSrc !== a.src || n.tag && 3 === n.tag.initNetworkState_) ? r.setSource(a) : r.handleLateInit_(r.el_), n.enableSourceset && r.setupSourcesetHandling_(), r.el_.hasChildNodes()) {
                    for (var o = r.el_.childNodes, u = o.length, l = []; u--;) {
                        var c = o[u],
                            d = c.nodeName.toLowerCase();
                        "track" === d && (r.featuresNativeTextTracks ? (r.remoteTextTrackEls().addTrackElement_(c), r.remoteTextTracks().addTrack(c.track), r.textTracks().addTrack(c.track), s || r.el_.hasAttribute("crossorigin") || !di(c.src) || (s = !0)) : l.push(c))
                    }
                    for (var h = 0; h < l.length; h++) r.el_.removeChild(l[h])
                }
                return r.proxyNativeTracks_(), r.featuresNativeTextTracks && s && tn.warn(nn(Va)), r.restoreMetadataTracksInIOSNativePlayer_(), (Vt || Ct || Dt) && n.nativeControlsForTouch === !0 && r.setControls(!0), r.proxyWebkitFullscreen_(), r.triggerReady(), r
            }
            return Gt(t, e), t.prototype.dispose = function() {
                this.el_ && this.el_.resetSourceset_ && this.el_.resetSourceset_(), t.disposeMediaElement(this.el_), this.options_ = null, e.prototype.dispose.call(this)
            }, t.prototype.setupSourcesetHandling_ = function() {
                Fa(this)
            }, t.prototype.restoreMetadataTracksInIOSNativePlayer_ = function() {
                var e = this.textTracks(),
                    t = void 0,
                    n = function() {
                        t = [];
                        for (var n = 0; n < e.length; n++) {
                            var i = e[n];
                            "metadata" === i.kind && t.push({
                                track: i,
                                storedMode: i.mode
                            })
                        }
                    };
                n(), e.addEventListener("change", n), this.on("dispose", function() {
                    return e.removeEventListener("change", n)
                });
                var i = function r() {
                    for (var n = 0; n < t.length; n++) {
                        var i = t[n];
                        "disabled" === i.track.mode && i.track.mode !== i.storedMode && (i.track.mode = i.storedMode)
                    }
                    e.removeEventListener("change", r)
                };
                this.on("webkitbeginfullscreen", function() {
                    e.removeEventListener("change", n), e.removeEventListener("change", i), e.addEventListener("change", i)
                }), this.on("webkitendfullscreen", function() {
                    e.removeEventListener("change", n), e.addEventListener("change", n), e.removeEventListener("change", i)
                })
            }, t.prototype.proxyNativeTracks_ = function() {
                var e = this;
                Oi.names.forEach(function(t) {
                    var n = Oi[t],
                        i = e.el()[n.getterName],
                        r = e[n.getterName]();
                    if (e["featuresNative" + n.capitalName + "Tracks"] && i && i.addEventListener) {
                        var a = {
                                change: function(e) {
                                    r.trigger({
                                        type: "change",
                                        target: r,
                                        currentTarget: r,
                                        srcElement: r
                                    })
                                },
                                addtrack: function(e) {
                                    r.addTrack(e.track)
                                },
                                removetrack: function(e) {
                                    r.removeTrack(e.track)
                                }
                            },
                            s = function() {
                                for (var e = [], t = 0; t < r.length; t++) {
                                    for (var n = !1, a = 0; a < i.length; a++)
                                        if (i[a] === r[t]) {
                                            n = !0;
                                            break
                                        }
                                    n || e.push(r[t])
                                }
                                for (; e.length;) r.removeTrack(e.shift())
                            };
                        Object.keys(a).forEach(function(t) {
                            var n = a[t];
                            i.addEventListener(t, n), e.on("dispose", function(e) {
                                return i.removeEventListener(t, n)
                            })
                        }), e.on("loadstart", s), e.on("dispose", function(t) {
                            return e.off("loadstart", s)
                        })
                    }
                })
            }, t.prototype.createEl = function() {
                var e = this.options_.tag;
                if (!e || !this.options_.playerElIngest && !this.movingMediaElementInDOM) {
                    if (e) {
                        var n = e.cloneNode(!0);
                        e.parentNode && e.parentNode.insertBefore(n, e), t.disposeMediaElement(e), e = n
                    } else {
                        e = bt.createElement("video");
                        var r = this.options_.tag && k(this.options_.tag),
                            a = ee({}, r);
                        Vt && this.options_.nativeControlsForTouch === !0 || delete a.controls, S(e, i(a, {
                            id: this.options_.techId,
                            "class": "vjs-tech"
                        }))
                    }
                    e.playerId = this.options_.playerId
                }
                "undefined" != typeof this.options_.preload && C(e, "preload", this.options_.preload);
                for (var s = ["loop", "muted", "playsinline", "autoplay"], o = 0; o < s.length; o++) {
                    var u = s[o],
                        l = this.options_[u];
                    "undefined" != typeof l && (l ? C(e, u, u) : E(e, u), e[u] = l)
                }
                return e
            }, t.prototype.handleLateInit_ = function(e) {
                if (0 !== e.networkState && 3 !== e.networkState) {
                    if (0 === e.readyState) {
                        var t = !1,
                            n = function() {
                                t = !0
                            };
                        this.on("loadstart", n);
                        var i = function() {
                            t || this.trigger("loadstart")
                        };
                        return this.on("loadedmetadata", i), void this.ready(function() {
                            this.off("loadstart", n), this.off("loadedmetadata", i), t || this.trigger("loadstart")
                        })
                    }
                    var r = ["loadstart"];
                    r.push("loadedmetadata"), e.readyState >= 2 && r.push("loadeddata"), e.readyState >= 3 && r.push("canplay"), e.readyState >= 4 && r.push("canplaythrough"), this.ready(function() {
                        r.forEach(function(e) {
                            this.trigger(e)
                        }, this)
                    })
                }
            }, t.prototype.setCurrentTime = function(e) {
                try {
                    this.el_.currentTime = e
                } catch (t) {
                    tn(t, "Video is not ready. (Video.js)")
                }
            }, t.prototype.duration = function() {
                var e = this;
                if (this.el_.duration === 1 / 0 && It && Mt && 0 === this.el_.currentTime) {
                    var t = function n() {
                        e.el_.currentTime > 0 && (e.el_.duration === 1 / 0 && e.trigger("durationchange"), e.off("timeupdate", n))
                    };
                    return this.on("timeupdate", t), NaN
                }
                return this.el_.duration || NaN
            }, t.prototype.width = function() {
                return this.el_.offsetWidth
            }, t.prototype.height = function() {
                return this.el_.offsetHeight
            }, t.prototype.proxyWebkitFullscreen_ = function() {
                var e = this;
                if ("webkitDisplayingFullscreen" in this.el_) {
                    var t = function() {
                            this.trigger("fullscreenchange", {
                                isFullscreen: !1
                            })
                        },
                        n = function() {
                            "webkitPresentationMode" in this.el_ && "picture-in-picture" !== this.el_.webkitPresentationMode && (this.one("webkitendfullscreen", t), this.trigger("fullscreenchange", {
                                isFullscreen: !0
                            }))
                        };
                    this.on("webkitbeginfullscreen", n), this.on("dispose", function() {
                        e.off("webkitbeginfullscreen", n), e.off("webkitendfullscreen", t)
                    })
                }
            }, t.prototype.supportsFullScreen = function() {
                if ("function" == typeof this.el_.webkitEnterFullScreen) {
                    var e = mt.navigator && mt.navigator.userAgent || "";
                    if (/Android/.test(e) || !/Chrome|Mac OS X 10.5/.test(e)) return !0
                }
                return !1
            }, t.prototype.enterFullScreen = function() {
                var e = this.el_;
                e.paused && e.networkState <= e.HAVE_METADATA ? (this.el_.play(), this.setTimeout(function() {
                    e.pause(), e.webkitEnterFullScreen()
                }, 0)) : e.webkitEnterFullScreen()
            }, t.prototype.exitFullScreen = function() {
                this.el_.webkitExitFullScreen()
            }, t.prototype.src = function(e) {
                return void 0 === e ? this.el_.src : void this.setSrc(e)
            }, t.prototype.reset = function() {
                t.resetMediaElement(this.el_)
            }, t.prototype.currentSrc = function() {
                return this.currentSource_ ? this.currentSource_.src : this.el_.currentSrc
            }, t.prototype.setControls = function(e) {
                this.el_.controls = !!e
            }, t.prototype.addTextTrack = function(t, n, i) {
                return this.featuresNativeTextTracks ? this.el_.addTextTrack(t, n, i) : e.prototype.addTextTrack.call(this, t, n, i)
            }, t.prototype.createRemoteTextTrack = function(t) {
                if (!this.featuresNativeTextTracks) return e.prototype.createRemoteTextTrack.call(this, t);
                var n = bt.createElement("track");
                return t.kind && (n.kind = t.kind), t.label && (n.label = t.label), (t.language || t.srclang) && (n.srclang = t.language || t.srclang), t["default"] && (n["default"] = t["default"]), t.id && (n.id = t.id), t.src && (n.src = t.src), n
            }, t.prototype.addRemoteTextTrack = function(t, n) {
                var i = e.prototype.addRemoteTextTrack.call(this, t, n);
                return this.featuresNativeTextTracks && this.el().appendChild(i), i
            }, t.prototype.removeRemoteTextTrack = function(t) {
                if (e.prototype.removeRemoteTextTrack.call(this, t), this.featuresNativeTextTracks)
                    for (var n = this.$$("track"), i = n.length; i--;)(t === n[i] || t === n[i].track) && this.el().removeChild(n[i])
            }, t.prototype.getVideoPlaybackQuality = function() {
                if ("function" == typeof this.el().getVideoPlaybackQuality) return this.el().getVideoPlaybackQuality();
                var e = {};
                return "undefined" != typeof this.el().webkitDroppedFrameCount && "undefined" != typeof this.el().webkitDecodedFrameCount && (e.droppedVideoFrames = this.el().webkitDroppedFrameCount, e.totalVideoFrames = this.el().webkitDecodedFrameCount), mt.performance && "function" == typeof mt.performance.now ? e.creationTime = mt.performance.now() : mt.performance && mt.performance.timing && "number" == typeof mt.performance.timing.navigationStart && (e.creationTime = mt.Date.now() - mt.performance.timing.navigationStart), e
            }, t
        }(er);
    if (d()) {
        Ha.TEST_VID = bt.createElement("video");
        var qa = bt.createElement("track");
        qa.kind = "captions", qa.srclang = "en", qa.label = "English", Ha.TEST_VID.appendChild(qa)
    }
    Ha.isSupported = function() {
        try {
            Ha.TEST_VID.volume = .5
        } catch (e) {
            return !1
        }
        return !(!Ha.TEST_VID || !Ha.TEST_VID.canPlayType)
    }, Ha.canPlayType = function(e) {
        return Ha.TEST_VID.canPlayType(e)
    }, Ha.canPlaySource = function(e, t) {
        return Ha.canPlayType(e.type)
    }, Ha.canControlVolume = function() {
        try {
            var e = Ha.TEST_VID.volume;
            return Ha.TEST_VID.volume = e / 2 + .1, e !== Ha.TEST_VID.volume
        } catch (t) {
            return !1
        }
    }, Ha.canMuteVolume = function() {
        try {
            var e = Ha.TEST_VID.muted;
            return Ha.TEST_VID.muted = !e, Ha.TEST_VID.muted ? C(Ha.TEST_VID, "muted", "muted") : E(Ha.TEST_VID, "muted", "muted"), e !== Ha.TEST_VID.muted
        } catch (t) {
            return !1
        }
    }, Ha.canControlPlaybackRate = function() {
        if (It && Mt && 58 > Rt) return !1;
        try {
            var e = Ha.TEST_VID.playbackRate;
            return Ha.TEST_VID.playbackRate = e / 2 + .1, e !== Ha.TEST_VID.playbackRate
        } catch (t) {
            return !1
        }
    }, Ha.canOverrideAttributes = function() {
        if (jt) return !1;
        try {
            var e = function() {};
            Object.defineProperty(bt.createElement("video"), "src", {
                get: e,
                set: e
            }), Object.defineProperty(bt.createElement("audio"), "src", {
                get: e,
                set: e
            }), Object.defineProperty(bt.createElement("video"), "innerHTML", {
                get: e,
                set: e
            }), Object.defineProperty(bt.createElement("audio"), "innerHTML", {
                get: e,
                set: e
            })
        } catch (t) {
            return !1
        }
        return !0
    }, Ha.supportsNativeTextTracks = function() {
        return Ft || At && Mt
    }, Ha.supportsNativeVideoTracks = function() {
        return !(!Ha.TEST_VID || !Ha.TEST_VID.videoTracks)
    }, Ha.supportsNativeAudioTracks = function() {
        return !(!Ha.TEST_VID || !Ha.TEST_VID.audioTracks)
    }, Ha.Events = ["loadstart", "suspend", "abort", "error", "emptied", "stalled", "loadedmetadata", "loadeddata", "canplay", "canplaythrough", "playing", "waiting", "seeking", "seeked", "ended", "durationchange", "timeupdate", "progress", "play", "pause", "ratechange", "resize", "volumechange"], Ha.prototype.featuresVolumeControl = Ha.canControlVolume(), Ha.prototype.featuresMuteControl = Ha.canMuteVolume(), Ha.prototype.featuresPlaybackRate = Ha.canControlPlaybackRate(), Ha.prototype.featuresSourceset = Ha.canOverrideAttributes(), Ha.prototype.movingMediaElementInDOM = !At, Ha.prototype.featuresFullscreenResize = !0, Ha.prototype.featuresProgressEvents = !0, Ha.prototype.featuresTimeupdateEvents = !0, Ha.prototype.featuresNativeTextTracks = Ha.supportsNativeTextTracks(), Ha.prototype.featuresNativeVideoTracks = Ha.supportsNativeVideoTracks(), Ha.prototype.featuresNativeAudioTracks = Ha.supportsNativeAudioTracks();
    var za = Ha.TEST_VID && Ha.TEST_VID.constructor.prototype.canPlayType,
        Wa = /^application\/(?:x-|vnd\.apple\.)mpegurl/i,
        Ga = /^video\/mp4/i;
    Ha.patchCanPlayType = function() {
        Pt >= 4 && !Ut && !Mt ? Ha.TEST_VID.constructor.prototype.canPlayType = function(e) {
            return e && Wa.test(e) ? "maybe" : za.call(this, e)
        } : xt && (Ha.TEST_VID.constructor.prototype.canPlayType = function(e) {
            return e && Ga.test(e) ? "maybe" : za.call(this, e)
        })
    }, Ha.unpatchCanPlayType = function() {
        var e = Ha.TEST_VID.constructor.prototype.canPlayType;
        return Ha.TEST_VID.constructor.prototype.canPlayType = za, e
    }, Ha.patchCanPlayType(), Ha.disposeMediaElement = function(e) {
        if (e) {
            for (e.parentNode && e.parentNode.removeChild(e); e.hasChildNodes();) e.removeChild(e.firstChild);
            e.removeAttribute("src"), "function" == typeof e.load && ! function() {
                try {
                    e.load()
                } catch (t) {}
            }()
        }
    }, Ha.resetMediaElement = function(e) {
        if (e) {
            for (var t = e.querySelectorAll("source"), n = t.length; n--;) e.removeChild(t[n]);
            e.removeAttribute("src"), "function" == typeof e.load && ! function() {
                try {
                    e.load()
                } catch (t) {}
            }()
        }
    }, ["muted", "defaultMuted", "autoplay", "controls", "loop", "playsinline"].forEach(function(e) {
        Ha.prototype[e] = function() {
            return this.el_[e] || this.el_.hasAttribute(e)
        }
    }), ["muted", "defaultMuted", "autoplay", "loop", "playsinline"].forEach(function(e) {
        Ha.prototype["set" + J(e)] = function(t) {
            this.el_[e] = t, t ? this.el_.setAttribute(e, e) : this.el_.removeAttribute(e)
        }
    }), ["paused", "currentTime", "buffered", "volume", "poster", "preload", "error", "seeking", "seekable", "ended", "playbackRate", "defaultPlaybackRate", "played", "networkState", "readyState", "videoWidth", "videoHeight"].forEach(function(e) {
        Ha.prototype[e] = function() {
            return this.el_[e]
        }
    }), ["volume", "src", "poster", "preload", "playbackRate", "defaultPlaybackRate"].forEach(function(e) {
        Ha.prototype["set" + J(e)] = function(t) {
            this.el_[e] = t
        }
    }), ["pause", "load", "play"].forEach(function(e) {
        Ha.prototype[e] = function() {
            return this.el_[e]()
        }
    }), er.withSourceHandlers(Ha), Ha.nativeSourceHandler = {}, Ha.nativeSourceHandler.canPlayType = function(e) {
        try {
            return Ha.TEST_VID.canPlayType(e)
        } catch (t) {
            return ""
        }
    }, Ha.nativeSourceHandler.canHandleSource = function(e, t) {
        if (e.type) return Ha.nativeSourceHandler.canPlayType(e.type);
        if (e.src) {
            var n = ci(e.src);
            return Ha.nativeSourceHandler.canPlayType("video/" + n)
        }
        return ""
    }, Ha.nativeSourceHandler.handleSource = function(e, t, n) {
        t.setSrc(e.src)
    }, Ha.nativeSourceHandler.dispose = function() {}, Ha.registerSourceHandler(Ha.nativeSourceHandler), er.registerTech("Html5", Ha);
    var Xa = Yt(["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "], ["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "]),
        Ya = ["progress", "abort", "suspend", "emptied", "stalled", "loadedmetadata", "loadeddata", "timeupdate", "resize", "volumechange", "texttrackchange"],
        $a = {
            canplay: "CanPlay",
            canplaythrough: "CanPlayThrough",
            playing: "Playing",
            seeked: "Seeked"
        },
        Qa = function(e) {
            function t(n, r, a) {
                if (Wt(this, t), n.id = n.id || r.id || "vjs_video_" + N(), r = i(t.getTagSettings(n), r), r.initChildren = !1, r.createEl = !1, r.evented = !1, r.reportTouchActivity = !1, !r.language)
                    if ("function" == typeof n.closest) {
                        var s = n.closest("[lang]");
                        s && s.getAttribute && (r.language = s.getAttribute("lang"))
                    } else
                        for (var o = n; o && 1 === o.nodeType;) {
                            if (k(o).hasOwnProperty("lang")) {
                                r.language = o.getAttribute("lang");
                                break
                            }
                            o = o.parentNode
                        }
                    var u = Xt(this, e.call(this, null, r, a));
                if (u.isPosterFromTech_ = !1, u.queuedCallbacks_ = [], u.isReady_ = !1, u.hasStarted_ = !1, u.userActive_ = !1, !u.options_ || !u.options_.techOrder || !u.options_.techOrder.length) throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");
                if (u.tag = n, u.tagAttributes = n && k(n), u.language(u.options_.language), r.languages) {
                    var l = {};
                    Object.getOwnPropertyNames(r.languages).forEach(function(e) {
                        l[e.toLowerCase()] = r.languages[e]
                    }), u.languages_ = l
                } else u.languages_ = t.prototype.options_.languages;
                u.cache_ = {}, u.poster_ = r.poster || "", u.controls_ = !!r.controls, u.cache_.lastVolume = 1, n.controls = !1, n.removeAttribute("controls"), n.hasAttribute("autoplay") ? u.options_.autoplay = !0 : u.autoplay(u.options_.autoplay), u.scrubbing_ = !1, u.el_ = u.createEl(), u.cache_.lastPlaybackRate = u.defaultPlaybackRate(), Q(u, {
                    eventBusKey: "el_"
                });
                var c = ee(u.options_);
                if (r.plugins) {
                    var d = r.plugins;
                    Object.keys(d).forEach(function(e) {
                        if ("function" != typeof this[e]) throw new Error('plugin "' + e + '" does not exist');
                        this[e](d[e])
                    }, u)
                }
                u.options_.playerOptions = c, u.middleware_ = [], u.initChildren(), u.isAudio("audio" === n.nodeName.toLowerCase()), u.controls() ? u.addClass("vjs-controls-enabled") : u.addClass("vjs-controls-disabled"), u.el_.setAttribute("role", "region"), u.isAudio() ? u.el_.setAttribute("aria-label", u.localize("Audio Player")) : u.el_.setAttribute("aria-label", u.localize("Video Player")), u.isAudio() && u.addClass("vjs-audio"), u.flexNotSupported_() && u.addClass("vjs-no-flex"), At || u.addClass("vjs-workinghover"), t.players[u.id_] = u;
                var h = ht.split(".")[0];
                return u.addClass("vjs-v" + h), u.userActive(!0), u.reportUserActivity(), u.one("play", u.listenForUserActivity_), u.on("fullscreenchange", u.handleFullscreenChange_), u.on("stageclick", u.handleStageClick_), u.changingSrc_ = !1, u.playWaitingForReady_ = !1, u.playOnLoadstart_ = null, u
            }
            return Gt(t, e), t.prototype.dispose = function() {
                this.trigger("dispose"), this.off("dispose"), this.styleEl_ && this.styleEl_.parentNode && (this.styleEl_.parentNode.removeChild(this.styleEl_), this.styleEl_ = null), t.players[this.id_] = null, this.tag && this.tag.player && (this.tag.player = null), this.el_ && this.el_.player && (this.el_.player = null), this.tech_ && (this.tech_.dispose(), this.isPosterFromTech_ = !1, this.poster_ = ""), this.playerElIngest_ && (this.playerElIngest_ = null), this.tag && (this.tag = null), Ze(this), e.prototype.dispose.call(this)
            }, t.prototype.createEl = function() {
                var t = this.tag,
                    n = void 0,
                    i = this.playerElIngest_ = t.parentNode && t.parentNode.hasAttribute && t.parentNode.hasAttribute("data-vjs-player"),
                    r = "video-js" === this.tag.tagName.toLowerCase();
                i ? n = this.el_ = t.parentNode : r || (n = this.el_ = e.prototype.createEl.call(this, "div"));
                var a = k(t);
                if (r) {
                    for (n = this.el_ = t, t = this.tag = bt.createElement("video"); n.children.length;) t.appendChild(n.firstChild);
                    y(n, "video-js") || _(n, "video-js"), n.appendChild(t), i = this.playerElIngest_ = n, ["autoplay", "controls", "crossOrigin", "defaultMuted", "defaultPlaybackRate", "loop", "muted", "playbackRate", "src", "volume"].forEach(function(e) {
                        "undefined" != typeof n[e] && (t[e] = n[e])
                    })
                }
                if (t.setAttribute("tabindex", "-1"), Nt && t.setAttribute("role", "application"), t.removeAttribute("width"), t.removeAttribute("height"), Object.getOwnPropertyNames(a).forEach(function(e) {
                    "class" === e ? (n.className += " " + a[e], r && (t.className += " " + a[e])) : (n.setAttribute(e, a[e]), r && t.setAttribute(e, a[e]))
                }), t.playerId = t.id, t.id += "_html5_api", t.className = "vjs-tech", t.player = n.player = this, this.addClass("vjs-paused"), mt.VIDEOJS_NO_DYNAMIC_STYLE !== !0) {
                    this.styleEl_ = vn("vjs-styles-dimensions");
                    var s = an(".vjs-styles-defaults"),
                        o = an("head");
                    o.insertBefore(this.styleEl_, s ? s.nextSibling : o.firstChild)
                }
                this.width(this.options_.width), this.height(this.options_.height), this.fluid(this.options_.fluid), this.aspectRatio(this.options_.aspectRatio);
                for (var u = t.getElementsByTagName("a"), l = 0; l < u.length; l++) {
                    var c = u.item(l);
                    _(c, "vjs-hidden"), c.setAttribute("hidden", "hidden")
                }
                return t.initNetworkState_ = t.networkState, t.parentNode && !i && t.parentNode.insertBefore(n, t), v(t, n), this.children_.unshift(t), this.el_.setAttribute("lang", this.language_), this.el_ = n, n
            }, t.prototype.width = function(e) {
                return this.dimension("width", e)
            }, t.prototype.height = function(e) {
                return this.dimension("height", e)
            }, t.prototype.dimension = function(e, t) {
                var n = e + "_";
                if (void 0 === t) return this[n] || 0;
                if ("" === t) return this[n] = void 0, void this.updateStyleEl_();
                var i = parseFloat(t);
                return isNaN(i) ? void tn.error('Improper value "' + t + '" supplied for for ' + e) : (this[n] = i, void this.updateStyleEl_())
            }, t.prototype.fluid = function(e) {
                return void 0 === e ? !!this.fluid_ : (this.fluid_ = !!e, e ? this.addClass("vjs-fluid") : this.removeClass("vjs-fluid"), void this.updateStyleEl_())
            }, t.prototype.aspectRatio = function(e) {
                if (void 0 === e) return this.aspectRatio_;
                if (!/^\d+\:\d+$/.test(e)) throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");
                this.aspectRatio_ = e, this.fluid(!0), this.updateStyleEl_()
            }, t.prototype.updateStyleEl_ = function() {
                if (mt.VIDEOJS_NO_DYNAMIC_STYLE === !0) {
                    var e = "number" == typeof this.width_ ? this.width_ : this.options_.width,
                        t = "number" == typeof this.height_ ? this.height_ : this.options_.height,
                        n = this.tech_ && this.tech_.el();
                    return void(n && (e >= 0 && (n.width = e), t >= 0 && (n.height = t)))
                }
                var i = void 0,
                    r = void 0,
                    a = void 0,
                    s = void 0;
                a = void 0 !== this.aspectRatio_ && "auto" !== this.aspectRatio_ ? this.aspectRatio_ : this.videoWidth() > 0 ? this.videoWidth() + ":" + this.videoHeight() : "16:9";
                var o = a.split(":"),
                    u = o[1] / o[0];
                i = void 0 !== this.width_ ? this.width_ : void 0 !== this.height_ ? this.height_ / u : this.videoWidth() || 300, r = void 0 !== this.height_ ? this.height_ : i * u, s = /^[^a-zA-Z]/.test(this.id()) ? "dimensions-" + this.id() : this.id() + "-dimensions", this.addClass(s), yn(this.styleEl_, "\n      ." + s + " {\n        width: " + i + "px;\n        height: " + r + "px;\n      }\n\n      ." + s + ".vjs-fluid {\n        padding-top: " + 100 * u + "%;\n      }\n    ")
            }, t.prototype.loadTech_ = function(e, t) {
                var n = this;
                this.tech_ && this.unloadTech_();
                var r = J(e),
                    a = e.charAt(0).toLowerCase() + e.slice(1);
                "Html5" !== r && this.tag && (er.getTech("Html5").disposeMediaElement(this.tag), this.tag.player = null, this.tag = null), this.techName_ = r, this.isReady_ = !1;
                var s = "string" == typeof this.autoplay() ? !1 : this.autoplay(),
                    o = {
                        source: t,
                        autoplay: s,
                        nativeControlsForTouch: this.options_.nativeControlsForTouch,
                        playerId: this.id(),
                        techId: this.id() + "_" + r + "_api",
                        playsinline: this.options_.playsinline,
                        preload: this.options_.preload,
                        loop: this.options_.loop,
                        muted: this.options_.muted,
                        poster: this.poster(),
                        language: this.language(),
                        playerElIngest: this.playerElIngest_ || !1,
                        "vtt.js": this.options_["vtt.js"],
                        canOverridePoster: !!this.options_.techCanOverridePoster,
                        enableSourceset: this.options_.enableSourceset
                    };
                Ri.names.forEach(function(e) {
                    var t = Ri[e];
                    o[t.getterName] = n[t.privateName]
                }), i(o, this.options_[r]), i(o, this.options_[a]), i(o, this.options_[e.toLowerCase()]), this.tag && (o.tag = this.tag), t && t.src === this.cache_.src && this.cache_.currentTime > 0 && (o.startTime = this.cache_.currentTime);
                var u = er.getTech(e);
                if (!u) throw new Error("No Tech named '" + r + "' exists! '" + r + "' should be registered using videojs.registerTech()'");
                this.tech_ = new u(o), this.tech_.ready(_n(this, this.handleTechReady_), !0), zn.jsonToTextTracks(this.textTracksJson_ || [], this.tech_), Ya.forEach(function(e) {
                    n.on(n.tech_, e, n["handleTech" + J(e) + "_"])
                }), Object.keys($a).forEach(function(e) {
                    n.on(n.tech_, e, function(t) {
                        return 0 === n.tech_.playbackRate() && n.tech_.seeking() ? void n.queuedCallbacks_.push({
                            callback: n["handleTech" + $a[e] + "_"].bind(n),
                            event: t
                        }) : void n["handleTech" + $a[e] + "_"](t)
                    })
                }), this.on(this.tech_, "loadstart", this.handleTechLoadStart_), this.on(this.tech_, "sourceset", this.handleTechSourceset_), this.on(this.tech_, "waiting", this.handleTechWaiting_), this.on(this.tech_, "ended", this.handleTechEnded_), this.on(this.tech_, "seeking", this.handleTechSeeking_), this.on(this.tech_, "play", this.handleTechPlay_), this.on(this.tech_, "firstplay", this.handleTechFirstPlay_), this.on(this.tech_, "pause", this.handleTechPause_), this.on(this.tech_, "durationchange", this.handleTechDurationChange_), this.on(this.tech_, "fullscreenchange", this.handleTechFullscreenChange_), this.on(this.tech_, "error", this.handleTechError_), this.on(this.tech_, "loadedmetadata", this.updateStyleEl_), this.on(this.tech_, "posterchange", this.handleTechPosterChange_), this.on(this.tech_, "textdata", this.handleTechTextData_), this.on(this.tech_, "ratechange", this.handleTechRateChange_), this.usingNativeControls(this.techGet_("controls")), this.controls() && !this.usingNativeControls() && this.addTechControlsListeners_(), this.tech_.el().parentNode === this.el() || "Html5" === r && this.tag || v(this.tech_.el(), this.el()), this.tag && (this.tag.player = null, this.tag = null)
            }, t.prototype.unloadTech_ = function() {
                var e = this;
                Ri.names.forEach(function(t) {
                    var n = Ri[t];
                    e[n.privateName] = e[n.getterName]()
                }), this.textTracksJson_ = zn.textTracksToJson(this.tech_), this.isReady_ = !1, this.tech_.dispose(), this.tech_ = !1, this.isPosterFromTech_ && (this.poster_ = "", this.trigger("posterchange")), this.isPosterFromTech_ = !1
            }, t.prototype.tech = function(e) {
                return void 0 === e && tn.warn(nn(Xa)), this.tech_
            }, t.prototype.addTechControlsListeners_ = function() {
                this.removeTechControlsListeners_(), this.on(this.tech_, "mousedown", this.handleTechClick_), this.on(this.tech_, "touchstart", this.handleTechTouchStart_), this.on(this.tech_, "touchmove", this.handleTechTouchMove_), this.on(this.tech_, "touchend", this.handleTechTouchEnd_), this.on(this.tech_, "tap", this.handleTechTap_)
            }, t.prototype.removeTechControlsListeners_ = function() {
                this.off(this.tech_, "tap", this.handleTechTap_), this.off(this.tech_, "touchstart", this.handleTechTouchStart_), this.off(this.tech_, "touchmove", this.handleTechTouchMove_), this.off(this.tech_, "touchend", this.handleTechTouchEnd_), this.off(this.tech_, "mousedown", this.handleTechClick_)
            }, t.prototype.handleTechReady_ = function() {
                if (this.triggerReady(), this.cache_.volume && this.techCall_("setVolume", this.cache_.volume), this.handleTechPosterChange_(), this.handleTechDurationChange_(), (this.src() || this.currentSrc()) && this.tag && this.options_.autoplay && this.paused()) try {
                    delete this.tag.poster
                } catch (e) {
                    tn("deleting tag.poster throws in some browsers", e)
                }
            }, t.prototype.handleTechLoadStart_ = function() {
                this.removeClass("vjs-ended"), this.removeClass("vjs-seeking"), this.error(null), this.paused() ? (this.hasStarted(!1), this.trigger("loadstart")) : (this.trigger("loadstart"), this.trigger("firstplay")), this.manualAutoplay_(this.autoplay())
            }, t.prototype.manualAutoplay_ = function(e) {
                var t = this;
                if (this.tech_ && "string" == typeof e) {
                    var n = function() {
                            var e = t.muted();
                            t.muted(!0);
                            var n = t.play();
                            if (n && n.then && n["catch"]) return n["catch"](function(n) {
                                t.muted(e)
                            })
                        },
                        i = void 0;
                    if ("any" === e ? (i = this.play(), i && i.then && i["catch"] && i["catch"](function() {
                        return n()
                    })) : i = "muted" === e ? n() : this.play(), i && i.then && i["catch"]) return i.then(function() {
                        t.trigger({
                            type: "autoplay-success",
                            autoplay: e
                        })
                    })["catch"](function(n) {
                        t.trigger({
                            type: "autoplay-failure",
                            autoplay: e
                        })
                    })
                }
            }, t.prototype.updateSourceCaches_ = function() {
                var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "",
                    t = e,
                    n = "";
                if ("string" != typeof t && (t = e.src, n = e.type), !/^blob:/.test(t)) {
                    this.cache_.source = this.cache_.source || {}, this.cache_.sources = this.cache_.sources || [], t && !n && (n = lr(this, t)), this.cache_.source = ee({}, e, {
                        src: t,
                        type: n
                    });
                    for (var i = this.cache_.sources.filter(function(e) {
                        return e.src && e.src === t
                    }), r = [], a = this.$$("source"), s = [], o = 0; o < a.length; o++) {
                        var u = k(a[o]);
                        r.push(u), u.src && u.src === t && s.push(u.src)
                    }
                    s.length && !i.length ? this.cache_.sources = r : i.length || (this.cache_.sources = [this.cache_.source]), this.cache_.src = t
                }
            }, t.prototype.handleTechSourceset_ = function(e) {
                var t = this;
                if (!this.changingSrc_ && (this.updateSourceCaches_(e.src), !e.src)) {
                    var n = function i(e) {
                        "sourceset" !== e.type && t.updateSourceCaches_(t.techGet_("currentSrc")), t.tech_.off(["sourceset", "loadstart"], i)
                    };
                    this.tech_.one(["sourceset", "loadstart"], n)
                }
                this.trigger({
                    src: e.src,
                    type: "sourceset"
                })
            }, t.prototype.hasStarted = function(e) {
                return void 0 === e ? this.hasStarted_ : void(e !== this.hasStarted_ && (this.hasStarted_ = e, this.hasStarted_ ? (this.addClass("vjs-has-started"), this.trigger("firstplay")) : this.removeClass("vjs-has-started")))
            }, t.prototype.handleTechPlay_ = function() {
                this.removeClass("vjs-ended"), this.removeClass("vjs-paused"), this.addClass("vjs-playing"), this.hasStarted(!0), this.trigger("play")
            }, t.prototype.handleTechRateChange_ = function() {
                this.tech_.playbackRate() > 0 && 0 === this.cache_.lastPlaybackRate && (this.queuedCallbacks_.forEach(function(e) {
                    return e.callback(e.event)
                }), this.queuedCallbacks_ = []), this.cache_.lastPlaybackRate = this.tech_.playbackRate(), this.trigger("ratechange")
            }, t.prototype.handleTechWaiting_ = function() {
                var e = this;
                this.addClass("vjs-waiting"), this.trigger("waiting"), this.one("timeupdate", function() {
                    return e.removeClass("vjs-waiting")
                })
            }, t.prototype.handleTechCanPlay_ = function() {
                this.removeClass("vjs-waiting"), this.trigger("canplay")
            }, t.prototype.handleTechCanPlayThrough_ = function() {
                this.removeClass("vjs-waiting"), this.trigger("canplaythrough")
            }, t.prototype.handleTechPlaying_ = function() {
                this.removeClass("vjs-waiting"), this.trigger("playing")
            }, t.prototype.handleTechSeeking_ = function() {
                this.addClass("vjs-seeking"), this.trigger("seeking")
            }, t.prototype.handleTechSeeked_ = function() {
                this.removeClass("vjs-seeking"), this.trigger("seeked")
            }, t.prototype.handleTechFirstPlay_ = function() {
                this.options_.starttime && (tn.warn("Passing the `starttime` option to the player will be deprecated in 6.0"), this.currentTime(this.options_.starttime)), this.addClass("vjs-has-started"), this.trigger("firstplay")
            }, t.prototype.handleTechPause_ = function() {
                this.removeClass("vjs-playing"), this.addClass("vjs-paused"), this.trigger("pause")
            }, t.prototype.handleTechEnded_ = function() {
                this.addClass("vjs-ended"), this.options_.loop ? (this.currentTime(0), this.play()) : this.paused() || this.pause(), this.trigger("ended")
            }, t.prototype.handleTechDurationChange_ = function() {
                this.duration(this.techGet_("duration"))
            }, t.prototype.handleTechClick_ = function(e) {
                j(e) && this.controls_ && (this.paused() ? le(this.play()) : this.pause())
            }, t.prototype.handleTechTap_ = function() {
                this.userActive(!this.userActive())
            }, t.prototype.handleTechTouchStart_ = function() {
                this.userWasActive = this.userActive()
            }, t.prototype.handleTechTouchMove_ = function() {
                this.userWasActive && this.reportUserActivity()
            }, t.prototype.handleTechTouchEnd_ = function(e) {
                e.preventDefault()
            }, t.prototype.handleFullscreenChange_ = function() {
                this.isFullscreen() ? this.addClass("vjs-fullscreen") : this.removeClass("vjs-fullscreen")
            }, t.prototype.handleStageClick_ = function() {
                this.reportUserActivity()
            }, t.prototype.handleTechFullscreenChange_ = function(e, t) {
                t && this.isFullscreen(t.isFullscreen), this.trigger("fullscreenchange")
            }, t.prototype.handleTechError_ = function() {
                var e = this.tech_.error();
                this.error(e)
            }, t.prototype.handleTechTextData_ = function() {
                var e = null;
                arguments.length > 1 && (e = arguments[1]), this.trigger("textdata", e)
            }, t.prototype.getCache = function() {
                return this.cache_
            }, t.prototype.techCall_ = function(e, t) {
                this.ready(function() {
                    if (e in ar) return $e(this.middleware_, this.tech_, e, t);
                    if (e in sr) return Qe(this.middleware_, this.tech_, e, t);
                    try {
                        this.tech_ && this.tech_[e](t)
                    } catch (n) {
                        throw tn(n), n
                    }
                }, !0)
            }, t.prototype.techGet_ = function(e) {
                if (this.tech_ && this.tech_.isReady_) {
                    if (e in rr) return Ye(this.middleware_, this.tech_, e);
                    if (e in sr) return Qe(this.middleware_, this.tech_, e);
                    try {
                        return this.tech_[e]()
                    } catch (t) {
                        if (void 0 === this.tech_[e]) throw tn("Video.js: " + e + " method not defined for " + this.techName_ + " playback technology.", t), t;
                        if ("TypeError" === t.name) throw tn("Video.js: " + e + " unavailable on " + this.techName_ + " playback technology element.", t), this.tech_.isReady_ = !1, t;
                        throw tn(t), t
                    }
                }
            }, t.prototype.play = function() {
                var e = this,
                    t = this.options_.Promise || mt.Promise;
                return t ? new t(function(t) {
                    e.play_(t)
                }) : this.play_()
            }, t.prototype.play_ = function() {
                var e = this,
                    t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : le;
                if (this.playOnLoadstart_ && this.off("loadstart", this.playOnLoadstart_), this.isReady_) {
                    if (!this.changingSrc_ && (this.src() || this.currentSrc())) return void t(this.techGet_("play"));
                    this.playOnLoadstart_ = function() {
                        e.playOnLoadstart_ = null, t(e.play())
                    }, this.one("loadstart", this.playOnLoadstart_)
                } else {
                    if (this.playWaitingForReady_) return;
                    this.playWaitingForReady_ = !0, this.ready(function() {
                        e.playWaitingForReady_ = !1, t(e.play())
                    })
                }
            }, t.prototype.pause = function() {
                this.techCall_("pause")
            }, t.prototype.paused = function() {
                return this.techGet_("paused") === !1 ? !1 : !0
            }, t.prototype.played = function() {
                return this.techGet_("played") || re(0, 0)
            }, t.prototype.scrubbing = function(e) {
                return "undefined" == typeof e ? this.scrubbing_ : (this.scrubbing_ = !!e, void(e ? this.addClass("vjs-scrubbing") : this.removeClass("vjs-scrubbing")))
            }, t.prototype.currentTime = function(e) {
                return "undefined" != typeof e ? (0 > e && (e = 0), void this.techCall_("setCurrentTime", e)) : (this.cache_.currentTime = this.techGet_("currentTime") || 0, this.cache_.currentTime)
            }, t.prototype.duration = function(e) {
                return void 0 === e ? void 0 !== this.cache_.duration ? this.cache_.duration : NaN : (e = parseFloat(e), 0 > e && (e = 1 / 0), void(e !== this.cache_.duration && (this.cache_.duration = e, e === 1 / 0 ? this.addClass("vjs-live") : this.removeClass("vjs-live"), this.trigger("durationchange"))))
            }, t.prototype.remainingTime = function() {
                return this.duration() - this.currentTime()
            }, t.prototype.remainingTimeDisplay = function() {
                return Math.floor(this.duration()) - Math.floor(this.currentTime())
            }, t.prototype.buffered = function n() {
                var n = this.techGet_("buffered");
                return n && n.length || (n = re(0, 0)), n
            }, t.prototype.bufferedPercent = function() {
                return ae(this.buffered(), this.duration())
            }, t.prototype.bufferedEnd = function() {
                var e = this.buffered(),
                    t = this.duration(),
                    n = e.end(e.length - 1);
                return n > t && (n = t), n
            }, t.prototype.volume = function(e) {
                var t = void 0;
                return void 0 !== e ? (t = Math.max(0, Math.min(1, parseFloat(e))), this.cache_.volume = t, this.techCall_("setVolume", t), void(t > 0 && this.lastVolume_(t))) : (t = parseFloat(this.techGet_("volume")), isNaN(t) ? 1 : t)
            }, t.prototype.muted = function(e) {
                return void 0 !== e ? void this.techCall_("setMuted", e) : this.techGet_("muted") || !1
            }, t.prototype.defaultMuted = function(e) {
                return void 0 !== e ? this.techCall_("setDefaultMuted", e) : this.techGet_("defaultMuted") || !1
            }, t.prototype.lastVolume_ = function(e) {
                return void 0 !== e && 0 !== e ? void(this.cache_.lastVolume = e) : this.cache_.lastVolume
            }, t.prototype.supportsFullScreen = function() {
                return this.techGet_("supportsFullScreen") || !1
            }, t.prototype.isFullscreen = function(e) {
                return void 0 !== e ? void(this.isFullscreen_ = !!e) : !!this.isFullscreen_
            }, t.prototype.requestFullscreen = function() {
                var e = Un;
                this.isFullscreen(!0), e.requestFullscreen ? (W(bt, e.fullscreenchange, _n(this, function t(n) {
                    this.isFullscreen(bt[e.fullscreenElement]), this.isFullscreen() === !1 && G(bt, e.fullscreenchange, t), this.trigger("fullscreenchange")
                })), this.el_[e.requestFullscreen]()) : this.tech_.supportsFullScreen() ? this.techCall_("enterFullScreen") : (this.enterFullWindow(), this.trigger("fullscreenchange"))
            }, t.prototype.exitFullscreen = function() {
                var e = Un;
                this.isFullscreen(!1), e.requestFullscreen ? bt[e.exitFullscreen]() : this.tech_.supportsFullScreen() ? this.techCall_("exitFullScreen") : (this.exitFullWindow(), this.trigger("fullscreenchange"))
            }, t.prototype.enterFullWindow = function() {
                this.isFullWindow = !0, this.docOrigOverflow = bt.documentElement.style.overflow, W(bt, "keydown", _n(this, this.fullWindowOnEscKey)), bt.documentElement.style.overflow = "hidden", _(bt.body, "vjs-full-window"), this.trigger("enterFullWindow")
            }, t.prototype.fullWindowOnEscKey = function(e) {
                27 === e.keyCode && (this.isFullscreen() === !0 ? this.exitFullscreen() : this.exitFullWindow())
            }, t.prototype.exitFullWindow = function() {
                this.isFullWindow = !1, G(bt, "keydown", this.fullWindowOnEscKey), bt.documentElement.style.overflow = this.docOrigOverflow, b(bt.body, "vjs-full-window"), this.trigger("exitFullWindow")
            }, t.prototype.canPlayType = function(e) {
                for (var t = void 0, n = 0, i = this.options_.techOrder; n < i.length; n++) {
                    var r = i[n],
                        a = er.getTech(r);
                    if (a || (a = Dn.getComponent(r)), a) {
                        if (a.isSupported() && (t = a.canPlayType(e))) return t
                    } else tn.error('The "' + r + '" tech is undefined. Skipped browser support check for that tech.')
                }
                return ""
            }, t.prototype.selectSource = function(e) {
                var t = this,
                    n = this.options_.techOrder.map(function(e) {
                        return [e, er.getTech(e)]
                    }).filter(function(e) {
                        var t = e[0],
                            n = e[1];
                        return n ? n.isSupported() : (tn.error('The "' + t + '" tech is undefined. Skipped browser support check for that tech.'), !1)
                    }),
                    i = function(e, t, n) {
                        var i = void 0;
                        return e.some(function(e) {
                            return t.some(function(t) {
                                return i = n(e, t), i ? !0 : void 0
                            })
                        }), i
                    },
                    r = void 0,
                    a = function(e) {
                        return function(t, n) {
                            return e(n, t)
                        }
                    },
                    s = function(e, n) {
                        var i = e[0],
                            r = e[1];
                        return r.canPlaySource(n, t.options_[i.toLowerCase()]) ? {
                            source: n,
                            tech: i
                        } : void 0
                    };
                return r = this.options_.sourceOrder ? i(e, n, a(s)) : i(n, e, s), r || !1
            }, t.prototype.src = function(e) {
                var t = this;
                if ("undefined" == typeof e) return this.cache_.src || "";
                var n = cr(e);
                return n.length ? (this.changingSrc_ = !0, this.cache_.sources = n, this.updateSourceCaches_(n[0]), void Ge(this, n[0], function(e, i) {
                    t.middleware_ = i, t.cache_.sources = n, t.updateSourceCaches_(e);
                    var r = t.src_(e);
                    return r ? n.length > 1 ? t.src(n.slice(1)) : (t.changingSrc_ = !1, t.setTimeout(function() {
                        this.error({
                            code: 4,
                            message: this.localize(this.options_.notSupportedMessage)
                        })
                    }, 0), void t.triggerReady()) : void Xe(i, t.tech_)
                })) : void this.setTimeout(function() {
                    this.error({
                        code: 4,
                        message: this.localize(this.options_.notSupportedMessage)
                    })
                }, 0)
            }, t.prototype.src_ = function(e) {
                var t = this,
                    n = this.selectSource([e]);
                return n ? Z(n.tech, this.techName_) ? (this.ready(function() {
                    this.tech_.constructor.prototype.hasOwnProperty("setSource") ? this.techCall_("setSource", e) : this.techCall_("src", e.src), this.changingSrc_ = !1
                }, !0), !1) : (this.changingSrc_ = !0, this.loadTech_(n.tech, n.source), this.tech_.ready(function() {
                    t.changingSrc_ = !1
                }), !1) : !0
            }, t.prototype.load = function() {
                this.techCall_("load")
            }, t.prototype.reset = function() {
                this.tech_ && this.tech_.clearTracks("text"), this.loadTech_(this.options_.techOrder[0], null), this.techCall_("reset")
            }, t.prototype.currentSources = function() {
                var e = this.currentSource(),
                    t = [];
                return 0 !== Object.keys(e).length && t.push(e), this.cache_.sources || t
            }, t.prototype.currentSource = function() {
                return this.cache_.source || {}
            }, t.prototype.currentSrc = function() {
                return this.currentSource() && this.currentSource().src || ""
            }, t.prototype.currentType = function() {
                return this.currentSource() && this.currentSource().type || ""
            }, t.prototype.preload = function(e) {
                return void 0 !== e ? (this.techCall_("setPreload", e), void(this.options_.preload = e)) : this.techGet_("preload")
            }, t.prototype.autoplay = function(e) {
                if (void 0 === e) return this.options_.autoplay || !1;
                var t = void 0;
                "string" == typeof e && /(any|play|muted)/.test(e) ? (this.options_.autoplay = e, this.manualAutoplay_(e), t = !1) : e ? this.options_.autoplay = !0 : this.options_.autoplay = !1, t = t || this.options_.autoplay, this.tech_ && this.techCall_("setAutoplay", t)
            }, t.prototype.playsinline = function(e) {
                return void 0 !== e ? (this.techCall_("setPlaysinline", e), this.options_.playsinline = e, this) : this.techGet_("playsinline")
            }, t.prototype.loop = function(e) {
                return void 0 !== e ? (this.techCall_("setLoop", e), void(this.options_.loop = e)) : this.techGet_("loop")
            }, t.prototype.poster = function(e) {
                return void 0 === e ? this.poster_ : (e || (e = ""), void(e !== this.poster_ && (this.poster_ = e,
                    this.techCall_("setPoster", e), this.isPosterFromTech_ = !1, this.trigger("posterchange"))))
            }, t.prototype.handleTechPosterChange_ = function() {
                if ((!this.poster_ || this.options_.techCanOverridePoster) && this.tech_ && this.tech_.poster) {
                    var e = this.tech_.poster() || "";
                    e !== this.poster_ && (this.poster_ = e, this.isPosterFromTech_ = !0, this.trigger("posterchange"))
                }
            }, t.prototype.controls = function(e) {
                return void 0 === e ? !!this.controls_ : (e = !!e, void(this.controls_ !== e && (this.controls_ = e, this.usingNativeControls() && this.techCall_("setControls", e), this.controls_ ? (this.removeClass("vjs-controls-disabled"), this.addClass("vjs-controls-enabled"), this.trigger("controlsenabled"), this.usingNativeControls() || this.addTechControlsListeners_()) : (this.removeClass("vjs-controls-enabled"), this.addClass("vjs-controls-disabled"), this.trigger("controlsdisabled"), this.usingNativeControls() || this.removeTechControlsListeners_()))))
            }, t.prototype.usingNativeControls = function(e) {
                return void 0 === e ? !!this.usingNativeControls_ : (e = !!e, void(this.usingNativeControls_ !== e && (this.usingNativeControls_ = e, this.usingNativeControls_ ? (this.addClass("vjs-using-native-controls"), this.trigger("usingnativecontrols")) : (this.removeClass("vjs-using-native-controls"), this.trigger("usingcustomcontrols")))))
            }, t.prototype.error = function(e) {
                return void 0 === e ? this.error_ || null : null === e ? (this.error_ = e, this.removeClass("vjs-error"), void(this.errorDisplay && this.errorDisplay.close())) : (this.error_ = new se(e), this.addClass("vjs-error"), tn.error("(CODE:" + this.error_.code + " " + se.errorTypes[this.error_.code] + ")", this.error_.message, this.error_), void this.trigger("error"))
            }, t.prototype.reportUserActivity = function(e) {
                this.userActivity_ = !0
            }, t.prototype.userActive = function(e) {
                if (void 0 === e) return this.userActive_;
                if (e = !!e, e !== this.userActive_) {
                    if (this.userActive_ = e, this.userActive_) return this.userActivity_ = !0, this.removeClass("vjs-user-inactive"), this.addClass("vjs-user-active"), void this.trigger("useractive");
                    this.tech_ && this.tech_.one("mousemove", function(e) {
                        e.stopPropagation(), e.preventDefault()
                    }), this.userActivity_ = !1, this.removeClass("vjs-user-active"), this.addClass("vjs-user-inactive"), this.trigger("userinactive")
                }
            }, t.prototype.listenForUserActivity_ = function() {
                var e = void 0,
                    t = void 0,
                    n = void 0,
                    i = _n(this, this.reportUserActivity),
                    r = function(e) {
                        (e.screenX !== t || e.screenY !== n) && (t = e.screenX, n = e.screenY, i())
                    },
                    a = function() {
                        i(), this.clearInterval(e), e = this.setInterval(i, 250)
                    },
                    s = function(t) {
                        i(), this.clearInterval(e)
                    };
                this.on("mousedown", a), this.on("mousemove", r), this.on("mouseup", s), this.on("keydown", i), this.on("keyup", i);
                var o = void 0;
                this.setInterval(function() {
                    if (this.userActivity_) {
                        this.userActivity_ = !1, this.userActive(!0), this.clearTimeout(o);
                        var e = this.options_.inactivityTimeout;
                        0 >= e || (o = this.setTimeout(function() {
                            this.userActivity_ || this.userActive(!1)
                        }, e))
                    }
                }, 250)
            }, t.prototype.playbackRate = function(e) {
                return void 0 !== e ? void this.techCall_("setPlaybackRate", e) : this.tech_ && this.tech_.featuresPlaybackRate ? this.cache_.lastPlaybackRate || this.techGet_("playbackRate") : 1
            }, t.prototype.defaultPlaybackRate = function(e) {
                return void 0 !== e ? this.techCall_("setDefaultPlaybackRate", e) : this.tech_ && this.tech_.featuresPlaybackRate ? this.techGet_("defaultPlaybackRate") : 1
            }, t.prototype.isAudio = function(e) {
                return void 0 !== e ? void(this.isAudio_ = !!e) : !!this.isAudio_
            }, t.prototype.addTextTrack = function(e, t, n) {
                return this.tech_ ? this.tech_.addTextTrack(e, t, n) : void 0
            }, t.prototype.addRemoteTextTrack = function(e, t) {
                return this.tech_ ? this.tech_.addRemoteTextTrack(e, t) : void 0
            }, t.prototype.removeRemoteTextTrack = function() {
                var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                    t = e.track,
                    n = void 0 === t ? arguments[0] : t;
                return this.tech_ ? this.tech_.removeRemoteTextTrack(n) : void 0
            }, t.prototype.getVideoPlaybackQuality = function() {
                return this.techGet_("getVideoPlaybackQuality")
            }, t.prototype.videoWidth = function() {
                return this.tech_ && this.tech_.videoWidth && this.tech_.videoWidth() || 0
            }, t.prototype.videoHeight = function() {
                return this.tech_ && this.tech_.videoHeight && this.tech_.videoHeight() || 0
            }, t.prototype.language = function(e) {
                return void 0 === e ? this.language_ : void(this.language_ = String(e).toLowerCase())
            }, t.prototype.languages = function() {
                return ee(t.prototype.options_.languages, this.languages_)
            }, t.prototype.toJSON = function() {
                var e = ee(this.options_),
                    t = e.tracks;
                e.tracks = [];
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i = ee(i), i.player = void 0, e.tracks[n] = i
                }
                return e
            }, t.prototype.createModal = function(e, t) {
                var n = this;
                t = t || {}, t.content = e || "";
                var i = new Xn(this, t);
                return this.addChild(i), i.on("dispose", function() {
                    n.removeChild(i)
                }), i.open(), i
            }, t.getTagSettings = function(e) {
                var t = {
                        sources: [],
                        tracks: []
                    },
                    n = k(e),
                    r = n["data-setup"];
                if (y(e, "vjs-fluid") && (n.fluid = !0), null !== r) {
                    var a = Fn(r || "{}"),
                        s = a[0],
                        o = a[1];
                    s && tn.error(s), i(n, o)
                }
                if (i(t, n), e.hasChildNodes())
                    for (var u = e.childNodes, l = 0, c = u.length; c > l; l++) {
                        var d = u[l],
                            h = d.nodeName.toLowerCase();
                        "source" === h ? t.sources.push(k(d)) : "track" === h && t.tracks.push(k(d))
                    }
                return t
            }, t.prototype.flexNotSupported_ = function() {
                var e = bt.createElement("i");
                return !("flexBasis" in e.style || "webkitFlexBasis" in e.style || "mozFlexBasis" in e.style || "msFlexBasis" in e.style || "msFlexOrder" in e.style)
            }, t
        }(Dn);
    Ri.names.forEach(function(e) {
        var t = Ri[e];
        Qa.prototype[t.getterName] = function() {
            return this.tech_ ? this.tech_[t.getterName]() : (this[t.privateName] = this[t.privateName] || new t.ListClass, this[t.privateName])
        }
    }), Qa.players = {};
    var Ka = mt.navigator;
    Qa.prototype.options_ = {
        techOrder: er.defaultTechOrder_,
        html5: {},
        flash: {},
        inactivityTimeout: 2e3,
        playbackRates: [],
        children: ["mediaLoader", "posterImage", "textTrackDisplay", "loadingSpinner", "bigPlayButton", "controlBar", "errorDisplay", "textTrackSettings"],
        language: Ka && (Ka.languages && Ka.languages[0] || Ka.userLanguage || Ka.language) || "en",
        languages: {},
        notSupportedMessage: "No compatible source was found for this media."
    }, jt || Qa.prototype.options_.children.push("resizeManager"), ["ended", "seeking", "seekable", "networkState", "readyState"].forEach(function(e) {
        Qa.prototype[e] = function() {
            return this.techGet_(e)
        }
    }), Ya.forEach(function(e) {
        Qa.prototype["handleTech" + J(e) + "_"] = function() {
            return this.trigger(e)
        }
    }), Dn.registerComponent("Player", Qa);
    var Ja = "plugin",
        Za = "activePlugins_",
        es = {},
        ts = function(e) {
            return es.hasOwnProperty(e)
        },
        ns = function(e) {
            return ts(e) ? es[e] : void 0
        },
        is = function(e, t) {
            e[Za] = e[Za] || {}, e[Za][t] = !0
        },
        rs = function(e, t, n) {
            var i = (n ? "before" : "") + "pluginsetup";
            e.trigger(i, t), e.trigger(i + ":" + t.name, t)
        },
        as = function(e, t) {
            var n = function() {
                rs(this, {
                    name: e,
                    plugin: t,
                    instance: null
                }, !0);
                var n = t.apply(this, arguments);
                return is(this, e), rs(this, {
                    name: e,
                    plugin: t,
                    instance: n
                }), n
            };
            return Object.keys(t).forEach(function(e) {
                n[e] = t[e]
            }), n
        },
        ss = function(e, t) {
            return t.prototype.name = e,
                function() {
                    rs(this, {
                        name: e,
                        plugin: t,
                        instance: null
                    }, !0);
                    for (var n = arguments.length, i = Array(n), r = 0; n > r; r++) i[r] = arguments[r];
                    var a = new(Function.prototype.bind.apply(t, [null].concat([this].concat(i))));
                    return this[e] = function() {
                        return a
                    }, rs(this, a.getEventHash()), a
                }
        },
        os = function() {
            function e(t) {
                if (Wt(this, e), this.constructor === e) throw new Error("Plugin must be sub-classed; not directly instantiated.");
                this.player = t, Q(this), delete this.trigger, K(this, this.constructor.defaultState), is(t, this.name), this.dispose = _n(this, this.dispose), t.on("dispose", this.dispose)
            }
            return e.prototype.version = function() {
                return this.constructor.VERSION
            }, e.prototype.getEventHash = function() {
                var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
                return e.name = this.name, e.plugin = this.constructor, e.instance = this, e
            }, e.prototype.trigger = function(e) {
                var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
                return X(this.eventBusEl_, e, this.getEventHash(t))
            }, e.prototype.handleStateChanged = function(e) {}, e.prototype.dispose = function() {
                var e = this.name,
                    t = this.player;
                this.trigger("dispose"), this.off(), t.off("dispose", this.dispose), t[Za][e] = !1, this.player = this.state = null, t[e] = ss(e, es[e])
            }, e.isBasic = function(t) {
                var n = "string" == typeof t ? ns(t) : t;
                return "function" == typeof n && !e.prototype.isPrototypeOf(n.prototype)
            }, e.registerPlugin = function(t, n) {
                if ("string" != typeof t) throw new Error('Illegal plugin name, "' + t + '", must be a string, was ' + ("undefined" == typeof t ? "undefined" : zt(t)) + ".");
                if (ts(t)) tn.warn('A plugin named "' + t + '" already exists. You may want to avoid re-registering plugins!');
                else if (Qa.prototype.hasOwnProperty(t)) throw new Error('Illegal plugin name, "' + t + '", cannot share a name with an existing player method!');
                if ("function" != typeof n) throw new Error('Illegal plugin for "' + t + '", must be a function, was ' + ("undefined" == typeof n ? "undefined" : zt(n)) + ".");
                return es[t] = n, t !== Ja && (e.isBasic(n) ? Qa.prototype[t] = as(t, n) : Qa.prototype[t] = ss(t, n)), n
            }, e.deregisterPlugin = function(e) {
                if (e === Ja) throw new Error("Cannot de-register base plugin.");
                ts(e) && (delete es[e], delete Qa.prototype[e])
            }, e.getPlugins = function() {
                var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : Object.keys(es),
                    t = void 0;
                return e.forEach(function(e) {
                    var n = ns(e);
                    n && (t = t || {}, t[e] = n)
                }), t
            }, e.getPluginVersion = function(e) {
                var t = ns(e);
                return t && t.VERSION || ""
            }, e
        }();
    os.getPlugin = ns, os.BASE_PLUGIN_NAME = Ja, os.registerPlugin(Ja, os), Qa.prototype.usingPlugin = function(e) {
        return !!this[Za] && this[Za][e] === !0
    }, Qa.prototype.hasPlugin = function(e) {
        return !!ts(e)
    };
    var us = function(e, t) {
            if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + ("undefined" == typeof t ? "undefined" : zt(t)));
            e.prototype = Object.create(t && t.prototype, {
                constructor: {
                    value: e,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), t && (e.super_ = t)
        },
        ls = function(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
                n = function() {
                    e.apply(this, arguments)
                },
                i = {};
            "object" === ("undefined" == typeof t ? "undefined" : zt(t)) ? (t.constructor !== Object.prototype.constructor && (n = t.constructor), i = t) : "function" == typeof t && (n = t), us(n, e);
            for (var r in i) i.hasOwnProperty(r) && (n.prototype[r] = i[r]);
            return n
        };
    "undefined" == typeof HTMLVideoElement && d() && (bt.createElement("video"), bt.createElement("audio"), bt.createElement("track"), bt.createElement("video-js"));
    var cs = function(e) {
        return 0 === e.indexOf("#") ? e.slice(1) : e
    };
    if (ct.hooks_ = {}, ct.hooks = function(e, t) {
        return ct.hooks_[e] = ct.hooks_[e] || [], t && (ct.hooks_[e] = ct.hooks_[e].concat(t)), ct.hooks_[e]
    }, ct.hook = function(e, t) {
        ct.hooks(e, t)
    }, ct.hookOnce = function(e, t) {
        ct.hooks(e, [].concat(t).map(function(t) {
            var n = function i() {
                return ct.removeHook(e, i), t.apply(void 0, arguments)
            };
            return n
        }))
    }, ct.removeHook = function(e, t) {
        var n = ct.hooks(e).indexOf(t);
        return -1 >= n ? !1 : (ct.hooks_[e] = ct.hooks_[e].slice(), ct.hooks_[e].splice(n, 1), !0)
    }, mt.VIDEOJS_NO_DYNAMIC_STYLE !== !0 && d()) {
        var ds = an(".vjs-styles-defaults");
        if (!ds) {
            ds = vn("vjs-styles-defaults");
            var hs = an("head");
            hs && hs.insertBefore(ds, hs.firstChild), yn(ds, "\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")
        }
    }
    return $(1, ct), ct.VERSION = ht, ct.options = Qa.prototype.options_, ct.getPlayers = function() {
        return Qa.players
    }, ct.getPlayer = function(e) {
        var t = Qa.players,
            n = void 0;
        if ("string" == typeof e) {
            var i = cs(e),
                r = t[i];
            if (r) return r;
            n = an("#" + i)
        } else n = e; if (h(n)) {
            var a = n,
                s = a.player,
                o = a.playerId;
            if (s || t[o]) return s || t[o]
        }
    }, ct.getAllPlayers = function() {
        return Object.keys(Qa.players).map(function(e) {
            return Qa.players[e]
        }).filter(Boolean)
    }, ct.players = Qa.players, ct.getComponent = Dn.getComponent, ct.registerComponent = function(e, t) {
        er.isTech(t) && tn.warn("The " + e + " tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"), Dn.registerComponent.call(Dn, e, t)
    }, ct.getTech = er.getTech, ct.registerTech = er.registerTech, ct.use = We, !jt && Object.defineProperty ? (Object.defineProperty(ct, "middleware", {
        value: {},
        writeable: !1,
        enumerable: !0
    }), Object.defineProperty(ct.middleware, "TERMINATOR", {
        value: ir,
        writeable: !1,
        enumerable: !0
    })) : ct.middleware = {
        TERMINATOR: ir
    }, ct.browser = qt, ct.TOUCH_ENABLED = Vt, ct.extend = ls, ct.mergeOptions = ee, ct.bind = _n, ct.registerPlugin = os.registerPlugin, ct.deregisterPlugin = os.deregisterPlugin, ct.plugin = function(e, t) {
        return tn.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"), os.registerPlugin(e, t)
    }, ct.getPlugins = os.getPlugins, ct.getPlugin = os.getPlugin, ct.getPluginVersion = os.getPluginVersion, ct.addLanguage = function(e, t) {
        var n;
        return e = ("" + e).toLowerCase(), ct.options.languages = ee(ct.options.languages, (n = {}, n[e] = t, n)), ct.options.languages[e]
    }, ct.log = tn, ct.createTimeRange = ct.createTimeRanges = re, ct.formatTime = Cr, ct.setFormatTime = at, ct.resetFormatTime = st, ct.parseUrl = ui, ct.isCrossOrigin = di, ct.EventTarget = Sn, ct.on = W, ct.one = Y, ct.off = G, ct.trigger = X, ct.xhr = ki, ct.TextTrack = Ei, ct.AudioTrack = Ai, ct.VideoTrack = Li, ["isEl", "isTextNode", "createEl", "hasClass", "addClass", "removeClass", "toggleClass", "setAttributes", "getAttributes", "emptyEl", "appendContent", "insertContent"].forEach(function(e) {
        ct[e] = function() {
            return tn.warn("videojs." + e + "() is deprecated; use videojs.dom." + e + "() instead"), on[e].apply(null, arguments)
        }
    }), ct.computedStyle = o, ct.dom = on, ct.url = hi, window.videojs = ct, ct
}),
function(e, t) {
    "object" == typeof exports && "undefined" != typeof module ? module.exports = t(require("video.js")) : "function" == typeof define && define.amd ? define("qualitylevel", ["video.js"], t) : e.videojsContribQualityLevels = t(e.videojs)
}(this, function(e) {
    "use strict";

    function t(e, t) {
        e.prototype = Object.create(t.prototype), e.prototype.constructor = e, e.__proto__ = t
    }

    function n(e) {
        if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return e
    }
    e = e && e.hasOwnProperty("default") ? e["default"] : e;
    var i = function c(t) {
            var n = this;
            if (e.browser.IS_IE8) {
                n = document.createElement("custom");
                for (var i in c.prototype) "constructor" !== i && (n[i] = c.prototype[i])
            }
            return n.id = t.id, n.label = n.id, n.width = t.width, n.height = t.height, n.bitrate = t.bandwidth, n.enabled_ = t.enabled, Object.defineProperty(n, "enabled", {
                get: function() {
                    return n.enabled_()
                },
                set: function(e) {
                    n.enabled_(e)
                }
            }), n
        },
        r = function(r) {
            function a() {
                var t;
                t = r.call(this) || this;
                var i = n(n(t));
                if (e.browser.IS_IE8) {
                    i = document.createElement("custom");
                    for (var s in a.prototype) "constructor" !== s && (i[s] = a.prototype[s])
                }
                return i.levels_ = [], i.selectedIndex_ = -1, Object.defineProperty(i, "selectedIndex", {
                    get: function() {
                        return i.selectedIndex_
                    }
                }), Object.defineProperty(i, "length", {
                    get: function() {
                        return i.levels_.length
                    }
                }), i || n(t)
            }
            t(a, r);
            var s = a.prototype;
            return s.addQualityLevel = function(e) {
                var t = this.getQualityLevelById(e.id);
                if (t) return t;
                var n = this.levels_.length;
                return t = new i(e), "" + n in this || Object.defineProperty(this, n, {
                    get: function() {
                        return this.levels_[n]
                    }
                }), this.levels_.push(t), this.trigger({
                    qualityLevel: t,
                    type: "addqualitylevel"
                }), t
            }, s.removeQualityLevel = function(e) {
                for (var t = null, n = 0, i = this.length; i > n; n++)
                    if (this[n] === e) {
                        t = this.levels_.splice(n, 1)[0], this.selectedIndex_ === n ? this.selectedIndex_ = -1 : this.selectedIndex_ > n && this.selectedIndex_--;
                        break
                    }
                return t && this.trigger({
                    qualityLevel: e,
                    type: "removequalitylevel"
                }), t
            }, s.getQualityLevelById = function(e) {
                for (var t = 0, n = this.length; n > t; t++) {
                    var i = this[t];
                    if (i.id === e) return i
                }
                return null
            }, s.dispose = function() {
                this.selectedIndex_ = -1, this.levels_.length = 0
            }, a
        }(e.EventTarget);
    r.prototype.allowedEvents_ = {
        change: "change",
        addqualitylevel: "addqualitylevel",
        removequalitylevel: "removequalitylevel"
    };
    for (var a in r.prototype.allowedEvents_) r.prototype["on" + a] = null;
    var s = "2.0.9",
        o = e.registerPlugin || e.plugin,
        u = function(e, t) {
            var n = e.qualityLevels,
                i = new r,
                a = function o() {
                    i.dispose(), e.qualityLevels = n, e.off("dispose", o)
                };
            return e.on("dispose", a), e.qualityLevels = function() {
                return i
            }, e.qualityLevels.VERSION = s, i
        },
        l = function(t) {
            return u(this, e.mergeOptions({}, t))
        };
    return o("qualityLevels", l), l.VERSION = s, l
}),
function(e, t) {
    "object" == typeof exports && "undefined" != typeof module ? t(exports, require("video.js")) : "function" == typeof define && define.amd ? define("hls", ["exports", "video.js"], t) : t(e.videojsHttpStreaming = {}, e.videojs)
}(this, function(e, t) {
    "use strict";

    function n(e, t) {
        return t = {
            exports: {}
        }, e(t, t.exports), t.exports
    }

    function i(e) {
        return e.subarray(0, e.byteLength - e[e.byteLength - 1])
    }

    function r(e, t) {
        return function(n) {
            var i = this;
            if (!t) return new ot(e);
            if (ot && !n) {
                var r = t.toString().replace(/^function.+?{/, "").slice(0, -1),
                    o = a(r);
                return this[it] = new ot(o), s(this[it], o), this[it]
            }
            var u = {
                postMessage: function(e) {
                    i.onmessage && setTimeout(function() {
                        i.onmessage({
                            data: e,
                            target: u
                        })
                    })
                }
            };
            t.call(u), this.postMessage = function(e) {
                setTimeout(function() {
                    u.onmessage({
                        data: e,
                        target: i
                    })
                })
            }, this.isThisThread = !0
        }
    }

    function a(e) {
        try {
            return st.createObjectURL(new Blob([e], {
                type: rt
            }))
        } catch (t) {
            var n = new at;
            return n.append(e), st.createObjectURL(n.getBlob(type))
        }
    }

    function s(e, t) {
        if (e && t) {
            var n = e.terminate;
            e.objURL = t, e.terminate = function() {
                e.objURL && st.revokeObjectURL(e.objURL), n.call(e)
            }
        }
    }

    function o(e, t) {
        return t = {
            exports: {}
        }, e(t, t.exports), t.exports
    }

    function u(e) {
        for (var t = _.atob(e), n = new Uint8Array(t.length), i = 0; i < t.length; i++) n[i] = t.charCodeAt(i);
        return n
    }

    function l() {}
    t = t && t.hasOwnProperty("default") ? t["default"] : t;
    var c, d = "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : {},
        h = {},
        p = Object.freeze({
            "default": h
        }),
        f = p && h || p,
        m = "undefined" != typeof d ? d : "undefined" != typeof window ? window : {};
    "undefined" != typeof document ? c = document : (c = m["__GLOBAL_DOCUMENT_CACHE@4"], c || (c = m["__GLOBAL_DOCUMENT_CACHE@4"] = f));
    var g, v = c,
        y = n(function(e, t) {
            ! function(t) {
                var n = /^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,
                    i = /^([^\/;?#]*)(.*)$/,
                    r = /(?:\/|^)\.(?=\/)/g,
                    a = /(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,
                    s = {
                        buildAbsoluteURL: function(e, t, n) {
                            if (n = n || {}, e = e.trim(), t = t.trim(), !t) {
                                if (!n.alwaysNormalize) return e;
                                var r = this.parseURL(e);
                                if (!r) throw new Error("Error trying to parse base URL.");
                                return r.path = s.normalizePath(r.path), s.buildURLFromParts(r)
                            }
                            var a = this.parseURL(t);
                            if (!a) throw new Error("Error trying to parse relative URL.");
                            if (a.scheme) return n.alwaysNormalize ? (a.path = s.normalizePath(a.path), s.buildURLFromParts(a)) : t;
                            var o = this.parseURL(e);
                            if (!o) throw new Error("Error trying to parse base URL.");
                            if (!o.netLoc && o.path && "/" !== o.path[0]) {
                                var u = i.exec(o.path);
                                o.netLoc = u[1], o.path = u[2]
                            }
                            o.netLoc && !o.path && (o.path = "/");
                            var l = {
                                scheme: o.scheme,
                                netLoc: a.netLoc,
                                path: null,
                                params: a.params,
                                query: a.query,
                                fragment: a.fragment
                            };
                            if (!a.netLoc && (l.netLoc = o.netLoc, "/" !== a.path[0]))
                                if (a.path) {
                                    var c = o.path,
                                        d = c.substring(0, c.lastIndexOf("/") + 1) + a.path;
                                    l.path = s.normalizePath(d)
                                } else l.path = o.path, a.params || (l.params = o.params, a.query || (l.query = o.query));
                            return null === l.path && (l.path = n.alwaysNormalize ? s.normalizePath(a.path) : a.path), s.buildURLFromParts(l)
                        },
                        parseURL: function(e) {
                            var t = n.exec(e);
                            return t ? {
                                scheme: t[1] || "",
                                netLoc: t[2] || "",
                                path: t[3] || "",
                                params: t[4] || "",
                                query: t[5] || "",
                                fragment: t[6] || ""
                            } : null
                        },
                        normalizePath: function(e) {
                            for (e = e.split("").reverse().join("").replace(r, ""); e.length !== (e = e.replace(a, "")).length;);
                            return e.split("").reverse().join("")
                        },
                        buildURLFromParts: function(e) {
                            return e.scheme + e.netLoc + e.path + e.params + e.query + e.fragment
                        }
                    };
                e.exports = s
            }(d)
        });
    g = "undefined" != typeof window ? window : "undefined" != typeof d ? d : "undefined" != typeof self ? self : {};
    var _ = g,
        b = function(e, t) {
            return /^[a-z]+:/i.test(t) ? t : (/\/\//i.test(e) || (e = y.buildAbsoluteURL(_.location.href, e)), y.buildAbsoluteURL(e, t))
        },
        T = function(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        },
        S = Object.assign || function(e) {
            for (var t = 1; t < arguments.length; t++) {
                var n = arguments[t];
                for (var i in n) Object.prototype.hasOwnProperty.call(n, i) && (e[i] = n[i])
            }
            return e
        },
        k = function(e, t) {
            if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, {
                constructor: {
                    value: e,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
        },
        w = function(e, t) {
            if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !t || "object" != typeof t && "function" != typeof t ? e : t
        },
        C = function() {
            function e() {
                T(this, e), this.listeners = {}
            }
            return e.prototype.on = function(e, t) {
                this.listeners[e] || (this.listeners[e] = []), this.listeners[e].push(t)
            }, e.prototype.off = function(e, t) {
                if (!this.listeners[e]) return !1;
                var n = this.listeners[e].indexOf(t);
                return this.listeners[e].splice(n, 1), n > -1
            }, e.prototype.trigger = function(e) {
                var t = this.listeners[e],
                    n = void 0,
                    i = void 0,
                    r = void 0;
                if (t)
                    if (2 === arguments.length)
                        for (i = t.length, n = 0; i > n; ++n) t[n].call(this, arguments[1]);
                    else
                        for (r = Array.prototype.slice.call(arguments, 1), i = t.length, n = 0; i > n; ++n) t[n].apply(this, r)
            }, e.prototype.dispose = function() {
                this.listeners = {}
            }, e.prototype.pipe = function(e) {
                this.on("data", function(t) {
                    e.push(t)
                })
            }, e
        }(),
        E = function(e) {
            function t() {
                T(this, t);
                var n = w(this, e.call(this));
                return n.buffer = "", n
            }
            return k(t, e), t.prototype.push = function(e) {
                var t = void 0;
                for (this.buffer += e, t = this.buffer.indexOf("\n"); t > -1; t = this.buffer.indexOf("\n")) this.trigger("data", this.buffer.substring(0, t)), this.buffer = this.buffer.substring(t + 1)
            }, t
        }(C),
        A = function() {
            var e = "[^=]*",
                t = '"[^"]*"|[^,]*',
                n = "(?:" + e + ")=(?:" + t + ")";
            return new RegExp("(?:^|,)(" + n + ")")
        },
        L = function(e) {
            for (var t = e.split(A()), n = {}, i = t.length, r = void 0; i--;) "" !== t[i] && (r = /([^=]*)=(.*)/.exec(t[i]).slice(1), r[0] = r[0].replace(/^\s+|\s+$/g, ""), r[1] = r[1].replace(/^\s+|\s+$/g, ""), r[1] = r[1].replace(/^['"](.*)['"]$/g, "$1"), n[r[0]] = r[1]);
            return n
        },
        I = function(e) {
            function t() {
                T(this, t);
                var n = w(this, e.call(this));
                return n.customParsers = [], n
            }
            return k(t, e), t.prototype.push = function(e) {
                var t = void 0,
                    n = void 0;
                if (e = e.replace(/^[\u0000\s]+|[\u0000\s]+$/g, ""), 0 !== e.length) {
                    if ("#" !== e[0]) return void this.trigger("data", {
                        type: "uri",
                        uri: e
                    });
                    for (var i = 0; i < this.customParsers.length; i++)
                        if (this.customParsers[i].call(this, e)) return;
                    if (0 !== e.indexOf("#EXT")) return void this.trigger("data", {
                        type: "comment",
                        text: e.slice(1)
                    });
                    if (e = e.replace("\r", ""), t = /^#EXTM3U/.exec(e)) return void this.trigger("data", {
                        type: "tag",
                        tagType: "m3u"
                    });
                    if (t = /^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e)) return n = {
                        type: "tag",
                        tagType: "inf"
                    }, t[1] && (n.duration = parseFloat(t[1])), t[2] && (n.title = t[2]), void this.trigger("data", n);
                    if (t = /^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e)) return n = {
                        type: "tag",
                        tagType: "targetduration"
                    }, t[1] && (n.duration = parseInt(t[1], 10)), void this.trigger("data", n);
                    if (t = /^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(e)) return n = {
                        type: "tag",
                        tagType: "totalduration"
                    }, t[1] && (n.duration = parseInt(t[1], 10)), void this.trigger("data", n);
                    if (t = /^#EXT-X-VERSION:?([0-9.]*)?/.exec(e)) return n = {
                        type: "tag",
                        tagType: "version"
                    }, t[1] && (n.version = parseInt(t[1], 10)), void this.trigger("data", n);
                    if (t = /^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e)) return n = {
                        type: "tag",
                        tagType: "media-sequence"
                    }, t[1] && (n.number = parseInt(t[1], 10)), void this.trigger("data", n);
                    if (t = /^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e)) return n = {
                        type: "tag",
                        tagType: "discontinuity-sequence"
                    }, t[1] && (n.number = parseInt(t[1], 10)), void this.trigger("data", n);
                    if (t = /^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e)) return n = {
                        type: "tag",
                        tagType: "playlist-type"
                    }, t[1] && (n.playlistType = t[1]), void this.trigger("data", n);
                    if (t = /^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(e)) return n = {
                        type: "tag",
                        tagType: "byterange"
                    }, t[1] && (n.length = parseInt(t[1], 10)), t[2] && (n.offset = parseInt(t[2], 10)), void this.trigger("data", n);
                    if (t = /^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e)) return n = {
                        type: "tag",
                        tagType: "allow-cache"
                    }, t[1] && (n.allowed = !/NO/.test(t[1])), void this.trigger("data", n);
                    if (t = /^#EXT-X-MAP:?(.*)$/.exec(e)) {
                        if (n = {
                            type: "tag",
                            tagType: "map"
                        }, t[1]) {
                            var r = L(t[1]);
                            if (r.URI && (n.uri = r.URI), r.BYTERANGE) {
                                var a = r.BYTERANGE.split("@"),
                                    s = a[0],
                                    o = a[1];
                                n.byterange = {}, s && (n.byterange.length = parseInt(s, 10)), o && (n.byterange.offset = parseInt(o, 10))
                            }
                        }
                        return void this.trigger("data", n)
                    }
                    if (t = /^#EXT-X-STREAM-INF:?(.*)$/.exec(e)) {
                        if (n = {
                            type: "tag",
                            tagType: "stream-inf"
                        }, t[1]) {
                            if (n.attributes = L(t[1]), n.attributes.RESOLUTION) {
                                var u = n.attributes.RESOLUTION.split("x"),
                                    l = {};
                                u[0] && (l.width = parseInt(u[0], 10)), u[1] && (l.height = parseInt(u[1], 10)), n.attributes.RESOLUTION = l
                            }
                            n.attributes.BANDWIDTH && (n.attributes.BANDWIDTH = parseInt(n.attributes.BANDWIDTH, 10)), n.attributes["PROGRAM-ID"] && (n.attributes["PROGRAM-ID"] = parseInt(n.attributes["PROGRAM-ID"], 10))
                        }
                        return void this.trigger("data", n)
                    }
                    return (t = /^#EXT-X-MEDIA:?(.*)$/.exec(e)) ? (n = {
                        type: "tag",
                        tagType: "media"
                    }, t[1] && (n.attributes = L(t[1])), void this.trigger("data", n)) : (t = /^#EXT-X-ENDLIST/.exec(e)) ? void this.trigger("data", {
                        type: "tag",
                        tagType: "endlist"
                    }) : (t = /^#EXT-X-DISCONTINUITY/.exec(e)) ? void this.trigger("data", {
                        type: "tag",
                        tagType: "discontinuity"
                    }) : (t = /^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e)) ? (n = {
                        type: "tag",
                        tagType: "program-date-time"
                    }, t[1] && (n.dateTimeString = t[1], n.dateTimeObject = new Date(t[1])), void this.trigger("data", n)) : (t = /^#EXT-X-KEY:?(.*)$/.exec(e)) ? (n = {
                        type: "tag",
                        tagType: "key"
                    }, t[1] && (n.attributes = L(t[1]), n.attributes.IV && ("0x" === n.attributes.IV.substring(0, 2).toLowerCase() && (n.attributes.IV = n.attributes.IV.substring(2)), n.attributes.IV = n.attributes.IV.match(/.{8}/g), n.attributes.IV[0] = parseInt(n.attributes.IV[0], 16), n.attributes.IV[1] = parseInt(n.attributes.IV[1], 16), n.attributes.IV[2] = parseInt(n.attributes.IV[2], 16), n.attributes.IV[3] = parseInt(n.attributes.IV[3], 16), n.attributes.IV = new Uint32Array(n.attributes.IV))), void this.trigger("data", n)) : (t = /^#EXT-X-START:?(.*)$/.exec(e)) ? (n = {
                        type: "tag",
                        tagType: "start"
                    }, t[1] && (n.attributes = L(t[1]), n.attributes["TIME-OFFSET"] = parseFloat(n.attributes["TIME-OFFSET"]), n.attributes.PRECISE = /YES/.test(n.attributes.PRECISE)), void this.trigger("data", n)) : (t = /^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e)) ? (n = {
                        type: "tag",
                        tagType: "cue-out-cont"
                    }, t[1] ? n.data = t[1] : n.data = "", void this.trigger("data", n)) : (t = /^#EXT-X-CUE-OUT:?(.*)?$/.exec(e)) ? (n = {
                        type: "tag",
                        tagType: "cue-out"
                    }, t[1] ? n.data = t[1] : n.data = "", void this.trigger("data", n)) : (t = /^#EXT-X-CUE-IN:?(.*)?$/.exec(e)) ? (n = {
                        type: "tag",
                        tagType: "cue-in"
                    }, t[1] ? n.data = t[1] : n.data = "", void this.trigger("data", n)) : void this.trigger("data", {
                        type: "tag",
                        data: e.slice(4)
                    })
                }
            }, t.prototype.addParser = function(e) {
                var t = this,
                    n = e.expression,
                    i = e.customType,
                    r = e.dataParser,
                    a = e.segment;
                "function" != typeof r && (r = function(e) {
                    return e
                }), this.customParsers.push(function(e) {
                    var s = n.exec(e);
                    return s ? (t.trigger("data", {
                        type: "custom",
                        data: r(e),
                        customType: i,
                        segment: a
                    }), !0) : void 0
                })
            }, t
        }(C),
        P = function(e) {
            function t() {
                T(this, t);
                var n = w(this, e.call(this));
                n.lineStream = new E, n.parseStream = new I, n.lineStream.pipe(n.parseStream);
                var i = n,
                    r = [],
                    a = {},
                    s = void 0,
                    o = void 0,
                    u = function() {},
                    l = {
                        AUDIO: {},
                        VIDEO: {},
                        "CLOSED-CAPTIONS": {},
                        SUBTITLES: {}
                    },
                    c = 0;
                return n.manifest = {
                    allowCache: !0,
                    discontinuityStarts: [],
                    segments: []
                }, n.parseStream.on("data", function(e) {
                    var t = void 0,
                        n = void 0;
                    ({
                        tag: function() {
                            (({
                                "allow-cache": function() {
                                    this.manifest.allowCache = e.allowed, "allowed" in e || (this.trigger("info", {
                                        message: "defaulting allowCache to YES"
                                    }), this.manifest.allowCache = !0)
                                },
                                byterange: function d() {
                                    var d = {};
                                    "length" in e && (a.byterange = d, d.length = e.length, "offset" in e || (this.trigger("info", {
                                        message: "defaulting offset to zero"
                                    }), e.offset = 0)), "offset" in e && (a.byterange = d, d.offset = e.offset)
                                },
                                endlist: function() {
                                    this.manifest.endList = !0
                                },
                                inf: function() {
                                    "mediaSequence" in this.manifest || (this.manifest.mediaSequence = 0, this.trigger("info", {
                                        message: "defaulting media sequence to zero"
                                    })), "discontinuitySequence" in this.manifest || (this.manifest.discontinuitySequence = 0, this.trigger("info", {
                                        message: "defaulting discontinuity sequence to zero"
                                    })), e.duration > 0 && (a.duration = e.duration), 0 === e.duration && (a.duration = .01, this.trigger("info", {
                                        message: "updating zero segment duration to a small value"
                                    })), this.manifest.segments = r
                                },
                                key: function() {
                                    return e.attributes ? "NONE" === e.attributes.METHOD ? void(o = null) : e.attributes.URI ? (e.attributes.METHOD || this.trigger("warn", {
                                        message: "defaulting key method to AES-128"
                                    }), o = {
                                        method: e.attributes.METHOD || "AES-128",
                                        uri: e.attributes.URI
                                    }, void("undefined" != typeof e.attributes.IV && (o.iv = e.attributes.IV))) : void this.trigger("warn", {
                                        message: "ignoring key declaration without URI"
                                    }) : void this.trigger("warn", {
                                        message: "ignoring key declaration without attribute list"
                                    })
                                },
                                "media-sequence": function() {
                                    return isFinite(e.number) ? void(this.manifest.mediaSequence = e.number) : void this.trigger("warn", {
                                        message: "ignoring invalid media sequence: " + e.number
                                    })
                                },
                                "discontinuity-sequence": function() {
                                    return isFinite(e.number) ? (this.manifest.discontinuitySequence = e.number, void(c = e.number)) : void this.trigger("warn", {
                                        message: "ignoring invalid discontinuity sequence: " + e.number
                                    })
                                },
                                "playlist-type": function() {
                                    return /VOD|EVENT/.test(e.playlistType) ? void(this.manifest.playlistType = e.playlistType) : void this.trigger("warn", {
                                        message: "ignoring unknown playlist type: " + e.playlist
                                    })
                                },
                                map: function() {
                                    s = {}, e.uri && (s.uri = e.uri), e.byterange && (s.byterange = e.byterange)
                                },
                                "stream-inf": function() {
                                    return this.manifest.playlists = r, this.manifest.mediaGroups = this.manifest.mediaGroups || l, e.attributes ? (a.attributes || (a.attributes = {}), void S(a.attributes, e.attributes)) : void this.trigger("warn", {
                                        message: "ignoring empty stream-inf attributes"
                                    })
                                },
                                media: function() {
                                    if (this.manifest.mediaGroups = this.manifest.mediaGroups || l, !(e.attributes && e.attributes.TYPE && e.attributes["GROUP-ID"] && e.attributes.NAME)) return void this.trigger("warn", {
                                        message: "ignoring incomplete or missing media group"
                                    });
                                    var i = this.manifest.mediaGroups[e.attributes.TYPE];
                                    i[e.attributes["GROUP-ID"]] = i[e.attributes["GROUP-ID"]] || {}, t = i[e.attributes["GROUP-ID"]], n = {
                                        "default": /yes/i.test(e.attributes.DEFAULT)
                                    }, n["default"] ? n.autoselect = !0 : n.autoselect = /yes/i.test(e.attributes.AUTOSELECT), e.attributes.LANGUAGE && (n.language = e.attributes.LANGUAGE), e.attributes.URI && (n.uri = e.attributes.URI), e.attributes["INSTREAM-ID"] && (n.instreamId = e.attributes["INSTREAM-ID"]), e.attributes.CHARACTERISTICS && (n.characteristics = e.attributes.CHARACTERISTICS), e.attributes.FORCED && (n.forced = /yes/i.test(e.attributes.FORCED)), t[e.attributes.NAME] = n
                                },
                                discontinuity: function() {
                                    c += 1, a.discontinuity = !0, this.manifest.discontinuityStarts.push(r.length)
                                },
                                "program-date-time": function() {
                                    "undefined" == typeof this.manifest.dateTimeString && (this.manifest.dateTimeString = e.dateTimeString, this.manifest.dateTimeObject = e.dateTimeObject), a.dateTimeString = e.dateTimeString, a.dateTimeObject = e.dateTimeObject
                                },
                                targetduration: function() {
                                    return !isFinite(e.duration) || e.duration < 0 ? void this.trigger("warn", {
                                        message: "ignoring invalid target duration: " + e.duration
                                    }) : void(this.manifest.targetDuration = e.duration)
                                },
                                totalduration: function() {
                                    return !isFinite(e.duration) || e.duration < 0 ? void this.trigger("warn", {
                                        message: "ignoring invalid total duration: " + e.duration
                                    }) : void(this.manifest.totalDuration = e.duration)
                                },
                                start: function() {
                                    return !e.attributes || isNaN(e.attributes["TIME-OFFSET"]) ? void this.trigger("warn", {
                                        message: "ignoring start declaration without appropriate attribute list"
                                    }) : void(this.manifest.start = {
                                        timeOffset: e.attributes["TIME-OFFSET"],
                                        precise: e.attributes.PRECISE
                                    })
                                },
                                "cue-out": function() {
                                    a.cueOut = e.data
                                },
                                "cue-out-cont": function() {
                                    a.cueOutCont = e.data
                                },
                                "cue-in": function() {
                                    a.cueIn = e.data
                                }
                            })[e.tagType] || u).call(i)
                        },
                        uri: function() {
                            a.uri = e.uri, r.push(a), !this.manifest.targetDuration || "duration" in a || (this.trigger("warn", {
                                message: "defaulting segment duration to the target duration"
                            }), a.duration = this.manifest.targetDuration), o && (a.key = o), a.timeline = c, s && (a.map = s), a = {}
                        },
                        comment: function() {},
                        custom: function() {
                            e.segment ? (a.custom = a.custom || {}, a.custom[e.customType] = e.data) : (this.manifest.custom = this.manifest.custom || {}, this.manifest.custom[e.customType] = e.data)
                        }
                    })[e.type].call(i)
                }), n
            }
            return k(t, e), t.prototype.push = function(e) {
                this.lineStream.push(e)
            }, t.prototype.end = function() {
                this.lineStream.push("\n")
            }, t.prototype.addParser = function(e) {
                this.parseStream.addParser(e)
            }, t
        }(C),
        x = function(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        },
        D = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        U = function Ho(e, t, n) {
            null === e && (e = Function.prototype);
            var i = Object.getOwnPropertyDescriptor(e, t);
            if (void 0 === i) {
                var r = Object.getPrototypeOf(e);
                return null === r ? void 0 : Ho(r, t, n)
            }
            if ("value" in i) return i.value;
            var a = i.get;
            if (void 0 !== a) return a.call(n)
        },
        O = function(e, t) {
            if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, {
                constructor: {
                    value: e,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
        },
        M = function(e, t) {
            if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !t || "object" != typeof t && "function" != typeof t ? e : t
        },
        R = function() {
            function e(e, t) {
                var n = [],
                    i = !0,
                    r = !1,
                    a = void 0;
                try {
                    for (var s, o = e[Symbol.iterator](); !(i = (s = o.next()).done) && (n.push(s.value), !t || n.length !== t); i = !0);
                } catch (u) {
                    r = !0, a = u
                } finally {
                    try {
                        !i && o["return"] && o["return"]()
                    } finally {
                        if (r) throw a
                    }
                }
                return n
            }
            return function(t, n) {
                if (Array.isArray(t)) return t;
                if (Symbol.iterator in Object(t)) return e(t, n);
                throw new TypeError("Invalid attempt to destructure non-iterable instance")
            }
        }(),
        j = t.mergeOptions,
        N = t.EventTarget,
        B = t.log,
        F = function(e, t) {
            ["AUDIO", "SUBTITLES"].forEach(function(n) {
                for (var i in e.mediaGroups[n])
                    for (var r in e.mediaGroups[n][i]) {
                        var a = e.mediaGroups[n][i][r];
                        t(a, n, i, r)
                    }
            })
        },
        V = function(e, t, n) {
            var i = t.slice();
            n = n || 0;
            for (var r = Math.min(e.length, t.length + n), a = n; r > a; a++) i[a - n] = j(e[a], i[a - n]);
            return i
        },
        H = function(e, t) {
            e.resolvedUri || (e.resolvedUri = b(t, e.uri)), e.key && !e.key.resolvedUri && (e.key.resolvedUri = b(t, e.key.uri)), e.map && !e.map.resolvedUri && (e.map.resolvedUri = b(t, e.map.uri))
        },
        q = function(e, t) {
            var n = j(e, {}),
                i = n.playlists[t.uri];
            if (!i) return null;
            if (i.segments && t.segments && i.segments.length === t.segments.length && i.mediaSequence === t.mediaSequence) return null;
            var r = j(i, t);
            i.segments && (r.segments = V(i.segments, t.segments, t.mediaSequence - i.mediaSequence)), r.segments.forEach(function(e) {
                H(e, r.resolvedUri)
            });
            for (var a = 0; a < n.playlists.length; a++) n.playlists[a].uri === t.uri && (n.playlists[a] = r);
            return n.playlists[t.uri] = r, n
        },
        z = function(e) {
            for (var t = e.playlists.length; t--;) {
                var n = e.playlists[t];
                e.playlists[n.uri] = n, n.resolvedUri = b(e.uri, n.uri), n.id = t, n.attributes || (n.attributes = {}, B.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."))
            }
        },
        W = function(e) {
            F(e, function(t) {
                t.uri && (t.resolvedUri = b(e.uri, t.uri))
            })
        },
        G = function(e, t) {
            var n = e.segments[e.segments.length - 1],
                i = void 0;
            return i = t && n && n.duration ? 1e3 * n.duration : 500 * (e.targetDuration || 10)
        },
        X = function(e) {
            function t(e, n, i) {
                x(this, t);
                var r = M(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                if (r.srcUrl = e, r.hls_ = n, r.withCredentials = i, !r.srcUrl) throw new Error("A non-empty playlist URL is required");
                return r.state = "HAVE_NOTHING", r.on("mediaupdatetimeout", function() {
                    "HAVE_METADATA" === r.state && (r.state = "HAVE_CURRENT_METADATA", r.request = r.hls_.xhr({
                        uri: b(r.master.uri, r.media().uri),
                        withCredentials: r.withCredentials
                    }, function(e, t) {
                        return r.request ? e ? r.playlistRequestError(r.request, r.media().uri, "HAVE_METADATA") : void r.haveMetadata(r.request, r.media().uri) : void 0
                    }))
                }), r
            }
            return O(t, e), D(t, [{
                key: "playlistRequestError",
                value: function(e, t, n) {
                    this.request = null, n && (this.state = n), this.error = {
                        playlist: this.master.playlists[t],
                        status: e.status,
                        message: "HLS playlist request error at URL: " + t,
                        responseText: e.responseText,
                        code: e.status >= 500 ? 4 : 2
                    }, this.trigger("error")
                }
            }, {
                key: "haveMetadata",
                value: function(e, t) {
                    var n = this;
                    this.request = null, this.state = "HAVE_METADATA";
                    var i = new P;
                    i.push(e.responseText), i.end(), i.manifest.uri = t, i.manifest.attributes = i.manifest.attributes || {};
                    var r = q(this.master, i.manifest);
                    this.targetDuration = i.manifest.targetDuration, r ? (this.master = r, this.media_ = this.master.playlists[i.manifest.uri]) : this.trigger("playlistunchanged"), this.media().endList || (_.clearTimeout(this.mediaUpdateTimeout), this.mediaUpdateTimeout = _.setTimeout(function() {
                        n.trigger("mediaupdatetimeout")
                    }, G(this.media(), !!r))), this.trigger("loadedplaylist")
                }
            }, {
                key: "dispose",
                value: function() {
                    this.stopRequest(), _.clearTimeout(this.mediaUpdateTimeout)
                }
            }, {
                key: "stopRequest",
                value: function() {
                    if (this.request) {
                        var e = this.request;
                        this.request = null, e.onreadystatechange = null, e.abort()
                    }
                }
            }, {
                key: "media",
                value: function(e) {
                    var t = this;
                    if (!e) return this.media_;
                    if ("HAVE_NOTHING" === this.state) throw new Error("Cannot switch media playlist from " + this.state);
                    var n = this.state;
                    if ("string" == typeof e) {
                        if (!this.master.playlists[e]) throw new Error("Unknown playlist URI: " + e);
                        e = this.master.playlists[e]
                    }
                    var i = !this.media_ || e.uri !== this.media_.uri;
                    if (this.master.playlists[e.uri].endList) return this.request && (this.request.onreadystatechange = null, this.request.abort(), this.request = null), this.state = "HAVE_METADATA", this.media_ = e, void(i && (this.trigger("mediachanging"), this.trigger("mediachange")));
                    if (i) {
                        if (this.state = "SWITCHING_MEDIA", this.request) {
                            if (b(this.master.uri, e.uri) === this.request.url) return;
                            this.request.onreadystatechange = null, this.request.abort(), this.request = null
                        }
                        this.media_ && this.trigger("mediachanging"), this.request = this.hls_.xhr({
                            uri: b(this.master.uri, e.uri),
                            withCredentials: this.withCredentials
                        }, function(i, r) {
                            if (t.request) {
                                if (i) return t.playlistRequestError(t.request, e.uri, n);
                                t.haveMetadata(r, e.uri), "HAVE_MASTER" === n ? t.trigger("loadedmetadata") : t.trigger("mediachange")
                            }
                        })
                    }
                }
            }, {
                key: "pause",
                value: function() {
                    this.stopRequest(), _.clearTimeout(this.mediaUpdateTimeout), "HAVE_NOTHING" === this.state && (this.started = !1), "SWITCHING_MEDIA" === this.state ? this.media_ ? this.state = "HAVE_METADATA" : this.state = "HAVE_MASTER" : "HAVE_CURRENT_METADATA" === this.state && (this.state = "HAVE_METADATA")
                }
            }, {
                key: "load",
                value: function(e) {
                    var t = this;
                    _.clearTimeout(this.mediaUpdateTimeout);
                    var n = this.media();
                    if (e) {
                        var i = n ? n.targetDuration / 2 * 1e3 : 5e3;
                        return void(this.mediaUpdateTimeout = _.setTimeout(function() {
                            return t.load()
                        }, i))
                    }
                    return this.started ? void(n && !n.endList ? this.trigger("mediaupdatetimeout") : this.trigger("loadedplaylist")) : void this.start()
                }
            }, {
                key: "start",
                value: function() {
                    var e = this;
                    this.started = !0, this.request = this.hls_.xhr({
                        uri: this.srcUrl,
                        withCredentials: this.withCredentials
                    }, function(t, n) {
                        if (e.request) {
                            if (e.request = null, t) return e.error = {
                                status: n.status,
                                message: "HLS playlist request error at URL: " + e.srcUrl,
                                responseText: n.responseText,
                                code: 2
                            }, "HAVE_NOTHING" === e.state && (e.started = !1), e.trigger("error");
                            var i = new P;
                            return i.push(n.responseText), i.end(), e.state = "HAVE_MASTER", i.manifest.uri = e.srcUrl, i.manifest.playlists ? (e.master = i.manifest, z(e.master), W(e.master), e.trigger("loadedplaylist"), void(e.request || e.media(i.manifest.playlists[0]))) : (e.master = {
                                mediaGroups: {
                                    AUDIO: {},
                                    VIDEO: {},
                                    "CLOSED-CAPTIONS": {},
                                    SUBTITLES: {}
                                },
                                uri: _.location.href,
                                playlists: [{
                                    uri: e.srcUrl,
                                    id: 0
                                }]
                            }, e.master.playlists[e.srcUrl] = e.master.playlists[0], e.master.playlists[0].resolvedUri = e.srcUrl, e.master.playlists[0].attributes = e.master.playlists[0].attributes || {}, e.haveMetadata(n, e.srcUrl), e.trigger("loadedmetadata"))
                        }
                    })
                }
            }]), t
        }(N),
        Y = t.createTimeRange,
        $ = function(e, t) {
            var n = 0,
                i = t - e.mediaSequence,
                r = e.segments[i];
            if (r) {
                if ("undefined" != typeof r.start) return {
                    result: r.start,
                    precise: !0
                };
                if ("undefined" != typeof r.end) return {
                    result: r.end - r.duration,
                    precise: !0
                }
            }
            for (; i--;) {
                if (r = e.segments[i], "undefined" != typeof r.end) return {
                    result: n + r.end,
                    precise: !0
                };
                if (n += r.duration, "undefined" != typeof r.start) return {
                    result: n + r.start,
                    precise: !0
                }
            }
            return {
                result: n,
                precise: !1
            }
        },
        Q = function(e, t) {
            for (var n = 0, i = void 0, r = t - e.mediaSequence; r < e.segments.length; r++) {
                if (i = e.segments[r], "undefined" != typeof i.start) return {
                    result: i.start - n,
                    precise: !0
                };
                if (n += i.duration, "undefined" != typeof i.end) return {
                    result: i.end - n,
                    precise: !0
                }
            }
            return {
                result: -1,
                precise: !1
            }
        },
        K = function(e, t, n) {
            var i = void 0,
                r = void 0;
            return "undefined" == typeof t && (t = e.mediaSequence + e.segments.length), t < e.mediaSequence ? 0 : (i = $(e, t), i.precise ? i.result : (r = Q(e, t), r.precise ? r.result : i.result + n))
        },
        J = function(e, t, n) {
            if (!e) return 0;
            if ("number" != typeof n && (n = 0), "undefined" == typeof t) {
                if (e.totalDuration) return e.totalDuration;
                if (!e.endList) return _.Infinity
            }
            return K(e, t, n)
        },
        Z = function(e, t, n) {
            var i = 0;
            if (t > n) {
                var r = [n, t];
                t = r[0], n = r[1]
            }
            if (0 > t) {
                for (var a = t; a < Math.min(0, n); a++) i += e.targetDuration;
                t = 0
            }
            for (var s = t; n > s; s++) i += e.segments[s].duration;
            return i
        },
        ee = function(e) {
            if (!e.segments.length) return 0;
            for (var t = e.segments.length - 1, n = e.segments[t].duration || e.targetDuration, i = n + 2 * e.targetDuration; t-- && (n += e.segments[t].duration, !(n >= i)););
            return Math.max(0, t)
        },
        te = function(e, t, n) {
            if (!e || !e.segments) return null;
            if (e.endList) return J(e);
            if (null === t) return null;
            t = t || 0;
            var i = n ? ee(e) : e.segments.length;
            return K(e, e.mediaSequence + i, t)
        },
        ne = function(e, t) {
            var n = !0,
                i = t || 0,
                r = te(e, t, n);
            return null === r ? Y() : Y(i, r)
        },
        ie = function(e) {
            return e - Math.floor(e) === 0
        },
        re = function(e, t) {
            if (ie(t)) return t + .1 * e;
            for (var n = t.toString().split(".")[1].length, i = 1; n >= i; i++) {
                var r = Math.pow(10, i),
                    a = t * r;
                if (ie(a) || i === n) return (a + e) / r
            }
        },
        ae = re.bind(null, 1),
        se = re.bind(null, -1),
        oe = function(e, t, n, i) {
            var r = void 0,
                a = void 0,
                s = e.segments.length,
                o = t - i;
            if (0 > o) {
                if (n > 0)
                    for (r = n - 1; r >= 0; r--)
                        if (a = e.segments[r], o += se(a.duration), o > 0) return {
                            mediaIndex: r,
                            startTime: i - Z(e, n, r)
                        };
                return {
                    mediaIndex: 0,
                    startTime: t
                }
            }
            if (0 > n) {
                for (r = n; 0 > r; r++)
                    if (o -= e.targetDuration, 0 > o) return {
                        mediaIndex: 0,
                        startTime: t
                    };
                n = 0
            }
            for (r = n; s > r; r++)
                if (a = e.segments[r], o -= ae(a.duration), 0 > o) return {
                    mediaIndex: r,
                    startTime: i + Z(e, n, r)
                };
            return {
                mediaIndex: s - 1,
                startTime: t
            }
        },
        ue = function(e) {
            return e.excludeUntil && e.excludeUntil > Date.now()
        },
        le = function(e) {
            return e.excludeUntil && e.excludeUntil === 1 / 0
        },
        ce = function(e) {
            var t = ue(e);
            return !e.disabled && !t
        },
        de = function(e) {
            return e.disabled
        },
        he = function(e) {
            for (var t = 0; t < e.segments.length; t++)
                if (e.segments[t].key) return !0;
            return !1
        },
        pe = function(e) {
            for (var t = 0; t < e.segments.length; t++)
                if (e.segments[t].map) return !0;
            return !1
        },
        fe = function(e, t) {
            return t.attributes && t.attributes[e]
        },
        me = function(e, t, n) {
            var i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0;
            if (!fe("BANDWIDTH", n)) return NaN;
            var r = e * n.attributes.BANDWIDTH;
            return (r - 8 * i) / t
        },
        ge = function(e, t) {
            if (1 === e.playlists.length) return !0;
            var n = t.attributes.BANDWIDTH || Number.MAX_VALUE;
            return 0 === e.playlists.filter(function(e) {
                return ce(e) ? (e.attributes.BANDWIDTH || 0) < n : !1
            }).length
        },
        ve = {
            duration: J,
            seekable: ne,
            safeLiveIndex: ee,
            getMediaInfoForTime: oe,
            isEnabled: ce,
            isDisabled: de,
            isBlacklisted: ue,
            isIncompatible: le,
            playlistEnd: te,
            isAes: he,
            isFmp4: pe,
            hasAttribute: fe,
            estimateSegmentRequestTime: me,
            isLowestEnabledRendition: ge
        },
        ye = t.xhr,
        _e = t.mergeOptions,
        be = function() {
            var e = function n(e, i) {
                e = _e({
                    timeout: 45e3
                }, e);
                var r = n.beforeRequest || t.Hls.xhr.beforeRequest;
                if (r && "function" == typeof r) {
                    var a = r(e);
                    a && (e = a)
                }
                var s = ye(e, function(e, t) {
                        var n = s.response;
                        !e && n && (s.responseTime = Date.now(), s.roundTripTime = s.responseTime - s.requestTime, s.bytesReceived = n.byteLength || n.length, s.bandwidth || (s.bandwidth = Math.floor(s.bytesReceived / s.roundTripTime * 8 * 1e3))), t.headers && (s.responseHeaders = t.headers), e && "ETIMEDOUT" === e.code && (s.timedout = !0), e || s.aborted || 200 === t.statusCode || 206 === t.statusCode || 0 === t.statusCode || (e = new Error("XHR Failed with a response of: " + (s && (n || s.responseText)))), i(e, s)
                    }),
                    o = s.abort;
                return s.abort = function() {
                    return s.aborted = !0, o.apply(s, arguments)
                }, s.uri = e.uri, s.requestTime = Date.now(), s
            };
            return e
        },
        Te = function(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        },
        Se = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        ke = function(e, t) {
            if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, {
                constructor: {
                    value: e,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
        },
        we = function(e, t) {
            if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !t || "object" != typeof t && "function" != typeof t ? e : t
        },
        Ce = function() {
            var e = [
                    [
                        [],
                        [],
                        [],
                        [],
                        []
                    ],
                    [
                        [],
                        [],
                        [],
                        [],
                        []
                    ]
                ],
                t = e[0],
                n = e[1],
                i = t[4],
                r = n[4],
                a = void 0,
                s = void 0,
                o = void 0,
                u = [],
                l = [],
                c = void 0,
                d = void 0,
                h = void 0,
                p = void 0,
                f = void 0,
                m = void 0;
            for (a = 0; 256 > a; a++) l[(u[a] = a << 1 ^ 283 * (a >> 7)) ^ a] = a;
            for (s = o = 0; !i[s]; s ^= c || 1, o = l[o] || 1)
                for (p = o ^ o << 1 ^ o << 2 ^ o << 3 ^ o << 4, p = p >> 8 ^ 255 & p ^ 99, i[s] = p, r[p] = s, h = u[d = u[c = u[s]]], m = 16843009 * h ^ 65537 * d ^ 257 * c ^ 16843008 * s, f = 257 * u[p] ^ 16843008 * p, a = 0; 4 > a; a++) t[a][s] = f = f << 24 ^ f >>> 8, n[a][p] = m = m << 24 ^ m >>> 8;
            for (a = 0; 5 > a; a++) t[a] = t[a].slice(0), n[a] = n[a].slice(0);
            return e
        },
        Ee = null,
        Ae = function() {
            function e(t) {
                Te(this, e), Ee || (Ee = Ce()), this._tables = [
                    [Ee[0][0].slice(), Ee[0][1].slice(), Ee[0][2].slice(), Ee[0][3].slice(), Ee[0][4].slice()],
                    [Ee[1][0].slice(), Ee[1][1].slice(), Ee[1][2].slice(), Ee[1][3].slice(), Ee[1][4].slice()]
                ];
                var n = void 0,
                    i = void 0,
                    r = void 0,
                    a = void 0,
                    s = void 0,
                    o = this._tables[0][4],
                    u = this._tables[1],
                    l = t.length,
                    c = 1;
                if (4 !== l && 6 !== l && 8 !== l) throw new Error("Invalid aes key size");
                for (a = t.slice(0), s = [], this._key = [a, s], n = l; 4 * l + 28 > n; n++) r = a[n - 1], (n % l === 0 || 8 === l && n % l === 4) && (r = o[r >>> 24] << 24 ^ o[r >> 16 & 255] << 16 ^ o[r >> 8 & 255] << 8 ^ o[255 & r], n % l === 0 && (r = r << 8 ^ r >>> 24 ^ c << 24, c = c << 1 ^ 283 * (c >> 7))), a[n] = a[n - l] ^ r;
                for (i = 0; n; i++, n--) r = a[3 & i ? n : n - 4], 4 >= n || 4 > i ? s[i] = r : s[i] = u[0][o[r >>> 24]] ^ u[1][o[r >> 16 & 255]] ^ u[2][o[r >> 8 & 255]] ^ u[3][o[255 & r]]
            }
            return e.prototype.decrypt = function(e, t, n, i, r, a) {
                var s = this._key[1],
                    o = e ^ s[0],
                    u = i ^ s[1],
                    l = n ^ s[2],
                    c = t ^ s[3],
                    d = void 0,
                    h = void 0,
                    p = void 0,
                    f = s.length / 4 - 2,
                    m = void 0,
                    g = 4,
                    v = this._tables[1],
                    y = v[0],
                    _ = v[1],
                    b = v[2],
                    T = v[3],
                    S = v[4];
                for (m = 0; f > m; m++) d = y[o >>> 24] ^ _[u >> 16 & 255] ^ b[l >> 8 & 255] ^ T[255 & c] ^ s[g], h = y[u >>> 24] ^ _[l >> 16 & 255] ^ b[c >> 8 & 255] ^ T[255 & o] ^ s[g + 1], p = y[l >>> 24] ^ _[c >> 16 & 255] ^ b[o >> 8 & 255] ^ T[255 & u] ^ s[g + 2], c = y[c >>> 24] ^ _[o >> 16 & 255] ^ b[u >> 8 & 255] ^ T[255 & l] ^ s[g + 3], g += 4, o = d, u = h, l = p;
                for (m = 0; 4 > m; m++) r[(3 & -m) + a] = S[o >>> 24] << 24 ^ S[u >> 16 & 255] << 16 ^ S[l >> 8 & 255] << 8 ^ S[255 & c] ^ s[g++], d = o, o = u, u = l, l = c, c = d
            }, e
        }(),
        Le = function() {
            function e() {
                Te(this, e), this.listeners = {}
            }
            return e.prototype.on = function(e, t) {
                this.listeners[e] || (this.listeners[e] = []), this.listeners[e].push(t)
            }, e.prototype.off = function(e, t) {
                if (!this.listeners[e]) return !1;
                var n = this.listeners[e].indexOf(t);
                return this.listeners[e].splice(n, 1), n > -1
            }, e.prototype.trigger = function(e) {
                var t = this.listeners[e];
                if (t)
                    if (2 === arguments.length)
                        for (var n = t.length, i = 0; n > i; ++i) t[i].call(this, arguments[1]);
                    else
                        for (var r = Array.prototype.slice.call(arguments, 1), a = t.length, s = 0; a > s; ++s) t[s].apply(this, r)
            }, e.prototype.dispose = function() {
                this.listeners = {}
            }, e.prototype.pipe = function(e) {
                this.on("data", function(t) {
                    e.push(t)
                })
            }, e
        }(),
        Ie = function(e) {
            function t() {
                Te(this, t);
                var n = we(this, e.call(this, Le));
                return n.jobs = [], n.delay = 1, n.timeout_ = null, n
            }
            return ke(t, e), t.prototype.processJob_ = function() {
                this.jobs.shift()(), this.jobs.length ? this.timeout_ = setTimeout(this.processJob_.bind(this), this.delay) : this.timeout_ = null
            }, t.prototype.push = function(e) {
                this.jobs.push(e), this.timeout_ || (this.timeout_ = setTimeout(this.processJob_.bind(this), this.delay))
            }, t
        }(Le),
        Pe = function(e) {
            return e << 24 | (65280 & e) << 8 | (16711680 & e) >> 8 | e >>> 24
        },
        xe = function(e, t, n) {
            var i = new Int32Array(e.buffer, e.byteOffset, e.byteLength >> 2),
                r = new Ae(Array.prototype.slice.call(t)),
                a = new Uint8Array(e.byteLength),
                s = new Int32Array(a.buffer),
                o = void 0,
                u = void 0,
                l = void 0,
                c = void 0,
                d = void 0,
                h = void 0,
                p = void 0,
                f = void 0,
                m = void 0;
            for (o = n[0], u = n[1], l = n[2], c = n[3], m = 0; m < i.length; m += 4) d = Pe(i[m]), h = Pe(i[m + 1]), p = Pe(i[m + 2]), f = Pe(i[m + 3]), r.decrypt(d, h, p, f, s, m), s[m] = Pe(s[m] ^ o), s[m + 1] = Pe(s[m + 1] ^ u), s[m + 2] = Pe(s[m + 2] ^ l), s[m + 3] = Pe(s[m + 3] ^ c), o = d, u = h, l = p, c = f;
            return a
        },
        De = function() {
            function e(t, n, r, a) {
                Te(this, e);
                var s = e.STEP,
                    o = new Int32Array(t.buffer),
                    u = new Uint8Array(t.byteLength),
                    l = 0;
                for (this.asyncStream_ = new Ie, this.asyncStream_.push(this.decryptChunk_(o.subarray(l, l + s), n, r, u)), l = s; l < o.length; l += s) r = new Uint32Array([Pe(o[l - 4]), Pe(o[l - 3]), Pe(o[l - 2]), Pe(o[l - 1])]), this.asyncStream_.push(this.decryptChunk_(o.subarray(l, l + s), n, r, u));
                this.asyncStream_.push(function() {
                    a(null, i(u))
                })
            }
            return e.prototype.decryptChunk_ = function(e, t, n, i) {
                return function() {
                    var r = xe(e, t, n);
                    i.set(r, e.byteOffset)
                }
            }, Se(e, null, [{
                key: "STEP",
                get: function() {
                    return 32e3
                }
            }]), e
        }(),
        Ue = function(e, t) {
            return e.start(t) + "-" + e.end(t)
        },
        Oe = function(e, t) {
            var n = e.toString(16);
            return "00".substring(0, 2 - n.length) + n + (t % 2 ? " " : "")
        },
        Me = function(e) {
            return e >= 32 && 126 > e ? String.fromCharCode(e) : "."
        },
        Re = function(e) {
            var t = {};
            return Object.keys(e).forEach(function(n) {
                var i = e[n];
                ArrayBuffer.isView(i) ? t[n] = {
                    bytes: i.buffer,
                    byteOffset: i.byteOffset,
                    byteLength: i.byteLength
                } : t[n] = i
            }), t
        },
        je = function(e) {
            var t = e.byterange || {
                length: 1 / 0,
                offset: 0
            };
            return [t.length, t.offset, e.resolvedUri].join(",")
        },
        Ne = function(e) {
            for (var t = Array.prototype.slice.call(e), n = 16, i = "", r = void 0, a = void 0, s = 0; s < t.length / n; s++) r = t.slice(s * n, s * n + n).map(Oe).join(""), a = t.slice(s * n, s * n + n).map(Me).join(""), i += r + " " + a + "\n";
            return i
        },
        Be = function(e) {
            var t = e.bytes;
            return Ne(t)
        },
        Fe = function(e) {
            var t = "",
                n = void 0;
            for (n = 0; n < e.length; n++) t += Ue(e, n) + " ";
            return t
        },
        Ve = Object.freeze({
            createTransferableMessage: Re,
            initSegmentId: je,
            hexDump: Ne,
            tagDump: Be,
            textRanges: Fe
        }),
        He = 1 / 30,
        qe = 3 * He,
        ze = function(e, n) {
            var i = [],
                r = void 0;
            if (e && e.length)
                for (r = 0; r < e.length; r++) n(e.start(r), e.end(r)) && i.push([e.start(r), e.end(r)]);
            return t.createTimeRanges(i)
        },
        We = function(e, t) {
            return ze(e, function(e, n) {
                return t >= e - He && n + He >= t
            })
        },
        Ge = function(e, t) {
            return ze(e, function(e) {
                return e - He >= t
            })
        },
        Xe = function(e) {
            if (e.length < 2) return t.createTimeRanges();
            for (var n = [], i = 1; i < e.length; i++) {
                var r = e.end(i - 1),
                    a = e.start(i);
                n.push([r, a])
            }
            return t.createTimeRanges(n)
        },
        Ye = function(e) {
            var t = [];
            if (!e || !e.length) return "";
            for (var n = 0; n < e.length; n++) t.push(e.start(n) + " => " + e.end(n));
            return t.join(", ")
        },
        $e = function(e, t) {
            var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1,
                i = e.length ? e.end(e.length - 1) : 0;
            return (i - t) / n
        },
        Qe = function(e) {
            for (var t = [], n = 0; n < e.length; n++) t.push({
                start: e.start(n),
                end: e.end(n)
            });
            return t
        },
        Ke = function(e, t, n) {
            var i = t.player_;
            if (n.captions && n.captions.length) {
                e.inbandTextTracks_ || (e.inbandTextTracks_ = {});
                for (var r in n.captionStreams)
                    if (!e.inbandTextTracks_[r]) {
                        i.tech_.trigger({
                            type: "usage",
                            name: "hls-608"
                        });
                        var a = i.textTracks().getTrackById(r);
                        a ? e.inbandTextTracks_[r] = a : e.inbandTextTracks_[r] = i.addRemoteTextTrack({
                            kind: "captions",
                            id: r,
                            label: r
                        }, !1).track
                    }
            }
            n.metadata && n.metadata.length && !e.metadataTrack_ && (e.metadataTrack_ = i.addRemoteTextTrack({
                kind: "metadata",
                label: "Timed Metadata"
            }, !1).track, e.metadataTrack_.inBandMetadataTrackDispatchType = n.metadata.dispatchType)
        },
        Je = function(e, t, n) {
            var i = void 0,
                r = void 0;
            if (n && n.cues)
                for (i = n.cues.length; i--;) r = n.cues[i], r.startTime <= t && r.endTime >= e && n.removeCue(r)
        },
        Ze = function(e) {
            Object.defineProperties(e.frame, {
                id: {
                    get: function() {
                        return t.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."), e.value.key
                    }
                },
                value: {
                    get: function() {
                        return t.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."), e.value.data
                    }
                },
                privateData: {
                    get: function() {
                        return t.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."), e.value.data
                    }
                }
            })
        },
        et = function(e) {
            var t = void 0;
            return t = isNaN(e) || Math.abs(e) === 1 / 0 ? Number.MAX_VALUE : e
        },
        tt = function(e, t, n) {
            var i = _.WebKitDataCue || _.VTTCue;
            if (t && t.forEach(function(e) {
                var t = e.stream;
                this.inbandTextTracks_[t].addCue(new i(e.startTime + this.timestampOffset, e.endTime + this.timestampOffset, e.text))
            }, e), n) {
                var r = et(e.mediaSource_.duration);
                if (n.forEach(function(e) {
                    var t = e.cueTime + this.timestampOffset;
                    e.frames.forEach(function(e) {
                        var n = new i(t, t, e.value || e.url || e.data || "");
                        n.frame = e, n.value = e, Ze(n), this.metadataTrack_.addCue(n)
                    }, this)
                }, e), e.metadataTrack_ && e.metadataTrack_.cues && e.metadataTrack_.cues.length) {
                    for (var a = e.metadataTrack_.cues, s = [], o = 0; o < a.length; o++) a[o] && s.push(a[o]);
                    var u = s.reduce(function(e, t) {
                            var n = e[t.startTime] || [];
                            return n.push(t), e[t.startTime] = n, e
                        }, {}),
                        l = Object.keys(u).sort(function(e, t) {
                            return Number(e) - Number(t)
                        });
                    l.forEach(function(e, t) {
                        var n = u[e],
                            i = Number(l[t + 1]) || r;
                        n.forEach(function(e) {
                            e.endTime = i
                        })
                    })
                }
            }
        },
        nt = "undefined" != typeof window ? window : {},
        it = "undefined" == typeof Symbol ? "__target" : Symbol(),
        rt = "application/javascript",
        at = nt.BlobBuilder || nt.WebKitBlobBuilder || nt.MozBlobBuilder || nt.MSBlobBuilder,
        st = nt.URL || nt.webkitURL || st && st.msURL,
        ot = nt.Worker;
    if (ot) {
        var ut, lt = a("self.onmessage = function () {}"),
            ct = new Uint8Array(1);
        try {
            ut = new ot(lt), ut.postMessage(ct, [ct.buffer])
        } catch (dt) {
            ot = null
        } finally {
            st.revokeObjectURL(lt), ut && ut.terminate()
        }
    }
    var ht = new r("./transmuxer-worker.worker.js", function(e, t) {
            var n = this;
            (function() {
                var e, t, i, r, a, s, o, u, l, c, d, h, p, f, m, g, v, y, _, b, T, S, k, w, C, E, A, L, I, P, x, D, U, O, M, R, j = Math.pow(2, 32) - 1;
                ! function() {
                    var e;
                    if (k = {
                        avc1: [],
                        avcC: [],
                        btrt: [],
                        dinf: [],
                        dref: [],
                        esds: [],
                        ftyp: [],
                        hdlr: [],
                        mdat: [],
                        mdhd: [],
                        mdia: [],
                        mfhd: [],
                        minf: [],
                        moof: [],
                        moov: [],
                        mp4a: [],
                        mvex: [],
                        mvhd: [],
                        sdtp: [],
                        smhd: [],
                        stbl: [],
                        stco: [],
                        stsc: [],
                        stsd: [],
                        stsz: [],
                        stts: [],
                        styp: [],
                        tfdt: [],
                        tfhd: [],
                        traf: [],
                        trak: [],
                        trun: [],
                        trex: [],
                        tkhd: [],
                        vmhd: []
                    }, "undefined" != typeof Uint8Array) {
                        for (e in k) k.hasOwnProperty(e) && (k[e] = [e.charCodeAt(0), e.charCodeAt(1), e.charCodeAt(2), e.charCodeAt(3)]);
                        w = new Uint8Array(["i".charCodeAt(0), "s".charCodeAt(0), "o".charCodeAt(0), "m".charCodeAt(0)]), E = new Uint8Array(["a".charCodeAt(0), "v".charCodeAt(0), "c".charCodeAt(0), "1".charCodeAt(0)]), C = new Uint8Array([0, 0, 0, 1]), A = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 118, 105, 100, 101, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 86, 105, 100, 101, 111, 72, 97, 110, 100, 108, 101, 114, 0]), L = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 115, 111, 117, 110, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 83, 111, 117, 110, 100, 72, 97, 110, 100, 108, 101, 114, 0]), I = {
                            video: A,
                            audio: L
                        }, D = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 12, 117, 114, 108, 32, 0, 0, 0, 1]), x = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]), U = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]), O = U, M = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]), R = U, P = new Uint8Array([0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0])
                    }
                }(), e = function(e) {
                        var t, n, i, r = [],
                            a = 0;
                        for (t = 1; t < arguments.length; t++) r.push(arguments[t]);
                        for (t = r.length; t--;) a += r[t].byteLength;
                        for (n = new Uint8Array(a + 8), i = new DataView(n.buffer, n.byteOffset, n.byteLength), i.setUint32(0, n.byteLength), n.set(e, 4), t = 0, a = 8; t < r.length; t++) n.set(r[t], a), a += r[t].byteLength;
                        return n
                    }, t = function() {
                        return e(k.dinf, e(k.dref, D))
                    }, i = function(t) {
                        return e(k.esds, new Uint8Array([0, 0, 0, 0, 3, 25, 0, 0, 0, 4, 17, 64, 21, 0, 6, 0, 0, 0, 218, 192, 0, 0, 218, 192, 5, 2, t.audioobjecttype << 3 | t.samplingfrequencyindex >>> 1, t.samplingfrequencyindex << 7 | t.channelcount << 3, 6, 1, 2]))
                    }, r = function() {
                        return e(k.ftyp, w, C, w, E)
                    }, g = function(t) {
                        return e(k.hdlr, I[t])
                    }, a = function(t) {
                        return e(k.mdat, t)
                    }, m = function(t) {
                        var n = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 3, 0, 1, 95, 144, t.duration >>> 24 & 255, t.duration >>> 16 & 255, t.duration >>> 8 & 255, 255 & t.duration, 85, 196, 0, 0]);
                        return t.samplerate && (n[12] = t.samplerate >>> 24 & 255, n[13] = t.samplerate >>> 16 & 255, n[14] = t.samplerate >>> 8 & 255, n[15] = 255 & t.samplerate), e(k.mdhd, n)
                    }, f = function(t) {
                        return e(k.mdia, m(t), g(t.type), o(t))
                    }, s = function(t) {
                        return e(k.mfhd, new Uint8Array([0, 0, 0, 0, (4278190080 & t) >> 24, (16711680 & t) >> 16, (65280 & t) >> 8, 255 & t]))
                    }, o = function(n) {
                        return e(k.minf, "video" === n.type ? e(k.vmhd, P) : e(k.smhd, x), t(), y(n))
                    }, u = function(t, n) {
                        for (var i = [], r = n.length; r--;) i[r] = b(n[r]);
                        return e.apply(null, [k.moof, s(t)].concat(i))
                    }, l = function(t) {
                        for (var n = t.length, i = []; n--;) i[n] = h(t[n]);
                        return e.apply(null, [k.moov, d(4294967295)].concat(i).concat(c(t)))
                    }, c = function(t) {
                        for (var n = t.length, i = []; n--;) i[n] = T(t[n]);
                        return e.apply(null, [k.mvex].concat(i))
                    }, d = function(t) {
                        var n = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 2, 0, 1, 95, 144, (4278190080 & t) >> 24, (16711680 & t) >> 16, (65280 & t) >> 8, 255 & t, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 255, 255, 255, 255]);
                        return e(k.mvhd, n)
                    }, v = function(t) {
                        var n, i, r = t.samples || [],
                            a = new Uint8Array(4 + r.length);
                        for (i = 0; i < r.length; i++) n = r[i].flags, a[i + 4] = n.dependsOn << 4 | n.isDependedOn << 2 | n.hasRedundancy;
                        return e(k.sdtp, a)
                    }, y = function(t) {
                        return e(k.stbl, _(t), e(k.stts, R), e(k.stsc, O), e(k.stsz, M), e(k.stco, U))
                    },
                    function() {
                        var t, n;
                        _ = function(i) {
                            return e(k.stsd, new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1]), "video" === i.type ? t(i) : n(i))
                        }, t = function(t) {
                            var n, i = t.sps || [],
                                r = t.pps || [],
                                a = [],
                                s = [];
                            for (n = 0; n < i.length; n++) a.push((65280 & i[n].byteLength) >>> 8), a.push(255 & i[n].byteLength), a = a.concat(Array.prototype.slice.call(i[n]));
                            for (n = 0; n < r.length; n++) s.push((65280 & r[n].byteLength) >>> 8), s.push(255 & r[n].byteLength), s = s.concat(Array.prototype.slice.call(r[n]));
                            return e(k.avc1, new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, (65280 & t.width) >> 8, 255 & t.width, (65280 & t.height) >> 8, 255 & t.height, 0, 72, 0, 0, 0, 72, 0, 0, 0, 0, 0, 0, 0, 1, 19, 118, 105, 100, 101, 111, 106, 115, 45, 99, 111, 110, 116, 114, 105, 98, 45, 104, 108, 115, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 24, 17, 17]), e(k.avcC, new Uint8Array([1, t.profileIdc, t.profileCompatibility, t.levelIdc, 255].concat([i.length]).concat(a).concat([r.length]).concat(s))), e(k.btrt, new Uint8Array([0, 28, 156, 128, 0, 45, 198, 192, 0, 45, 198, 192])))
                        }, n = function(t) {
                            return e(k.mp4a, new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, (65280 & t.channelcount) >> 8, 255 & t.channelcount, (65280 & t.samplesize) >> 8, 255 & t.samplesize, 0, 0, 0, 0, (65280 & t.samplerate) >> 8, 255 & t.samplerate, 0, 0]), i(t))
                        }
                    }(), p = function(t) {
                        var n = new Uint8Array([0, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, 0, (4278190080 & t.id) >> 24, (16711680 & t.id) >> 16, (65280 & t.id) >> 8, 255 & t.id, 0, 0, 0, 0, (4278190080 & t.duration) >> 24, (16711680 & t.duration) >> 16, (65280 & t.duration) >> 8, 255 & t.duration, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0, (65280 & t.width) >> 8, 255 & t.width, 0, 0, (65280 & t.height) >> 8, 255 & t.height, 0, 0]);
                        return e(k.tkhd, n)
                    }, b = function(t) {
                        var n, i, r, a, s, o, u;
                        return n = e(k.tfhd, new Uint8Array([0, 0, 0, 58, (4278190080 & t.id) >> 24, (16711680 & t.id) >> 16, (65280 & t.id) >> 8, 255 & t.id, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0])), o = Math.floor(t.baseMediaDecodeTime / (j + 1)), u = Math.floor(t.baseMediaDecodeTime % (j + 1)), i = e(k.tfdt, new Uint8Array([1, 0, 0, 0, o >>> 24 & 255, o >>> 16 & 255, o >>> 8 & 255, 255 & o, u >>> 24 & 255, u >>> 16 & 255, u >>> 8 & 255, 255 & u])), s = 92, "audio" === t.type ? (r = S(t, s), e(k.traf, n, i, r)) : (a = v(t), r = S(t, a.length + s), e(k.traf, n, i, r, a))
                    }, h = function(t) {
                        return t.duration = t.duration || 4294967295, e(k.trak, p(t), f(t))
                    }, T = function(t) {
                        var n = new Uint8Array([0, 0, 0, 0, (4278190080 & t.id) >> 24, (16711680 & t.id) >> 16, (65280 & t.id) >> 8, 255 & t.id, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1]);
                        return "video" !== t.type && (n[n.length - 1] = 0), e(k.trex, n)
                    },
                    function() {
                        var t, n, i;
                        i = function(e, t) {
                            var n = 0,
                                i = 0,
                                r = 0,
                                a = 0;
                            return e.length && (void 0 !== e[0].duration && (n = 1), void 0 !== e[0].size && (i = 2), void 0 !== e[0].flags && (r = 4), void 0 !== e[0].compositionTimeOffset && (a = 8)), [0, 0, n | i | r | a, 1, (4278190080 & e.length) >>> 24, (16711680 & e.length) >>> 16, (65280 & e.length) >>> 8, 255 & e.length, (4278190080 & t) >>> 24, (16711680 & t) >>> 16, (65280 & t) >>> 8, 255 & t]
                        }, n = function(t, n) {
                            var r, a, s, o;
                            for (a = t.samples || [], n += 20 + 16 * a.length, r = i(a, n), o = 0; o < a.length; o++) s = a[o], r = r.concat([(4278190080 & s.duration) >>> 24, (16711680 & s.duration) >>> 16, (65280 & s.duration) >>> 8, 255 & s.duration, (4278190080 & s.size) >>> 24, (16711680 & s.size) >>> 16, (65280 & s.size) >>> 8, 255 & s.size, s.flags.isLeading << 2 | s.flags.dependsOn, s.flags.isDependedOn << 6 | s.flags.hasRedundancy << 4 | s.flags.paddingValue << 1 | s.flags.isNonSyncSample, 61440 & s.flags.degradationPriority, 15 & s.flags.degradationPriority, (4278190080 & s.compositionTimeOffset) >>> 24, (16711680 & s.compositionTimeOffset) >>> 16, (65280 & s.compositionTimeOffset) >>> 8, 255 & s.compositionTimeOffset]);
                            return e(k.trun, new Uint8Array(r))
                        }, t = function(t, n) {
                            var r, a, s, o;
                            for (a = t.samples || [], n += 20 + 8 * a.length, r = i(a, n), o = 0; o < a.length; o++) s = a[o], r = r.concat([(4278190080 & s.duration) >>> 24, (16711680 & s.duration) >>> 16, (65280 & s.duration) >>> 8, 255 & s.duration, (4278190080 & s.size) >>> 24, (16711680 & s.size) >>> 16, (65280 & s.size) >>> 8, 255 & s.size]);
                            return e(k.trun, new Uint8Array(r))
                        }, S = function(e, i) {
                            return "audio" === e.type ? t(e, i) : n(e, i)
                        }
                    }();
                var N, B, F, V, H, q = {
                        ftyp: r,
                        mdat: a,
                        moof: u,
                        moov: l,
                        initSegment: function(e) {
                            var t, n = r(),
                                i = l(e);
                            return t = new Uint8Array(n.byteLength + i.byteLength), t.set(n), t.set(i, n.byteLength), t
                        }
                    },
                    z = function(e) {
                        return e >>> 0
                    },
                    W = {
                        toUnsigned: z
                    },
                    G = W.toUnsigned;
                N = function(e, t) {
                    var n, i, r, a, s, o = [];
                    if (!t.length) return null;
                    for (n = 0; n < e.byteLength;) i = G(e[n] << 24 | e[n + 1] << 16 | e[n + 2] << 8 | e[n + 3]), r = B(e.subarray(n + 4, n + 8)), a = i > 1 ? n + i : e.byteLength, r === t[0] && (1 === t.length ? o.push(e.subarray(n + 8, a)) : (s = N(e.subarray(n + 8, a), t.slice(1)), s.length && (o = o.concat(s)))), n = a;
                    return o
                }, B = function(e) {
                    var t = "";
                    return t += String.fromCharCode(e[0]), t += String.fromCharCode(e[1]), t += String.fromCharCode(e[2]), t += String.fromCharCode(e[3])
                }, F = function(e) {
                    var t = {},
                        n = N(e, ["moov", "trak"]);
                    return n.reduce(function(e, t) {
                        var n, i, r, a, s;
                        return (n = N(t, ["tkhd"])[0]) ? (i = n[0], r = 0 === i ? 12 : 20, a = G(n[r] << 24 | n[r + 1] << 16 | n[r + 2] << 8 | n[r + 3]), (s = N(t, ["mdia", "mdhd"])[0]) ? (i = s[0], r = 0 === i ? 12 : 20, e[a] = G(s[r] << 24 | s[r + 1] << 16 | s[r + 2] << 8 | s[r + 3]), e) : null) : null
                    }, t)
                }, V = function(e, t) {
                    var n, i, r;
                    return n = N(t, ["moof", "traf"]), i = [].concat.apply([], n.map(function(t) {
                        return N(t, ["tfhd"]).map(function(n) {
                            var i, r, a;
                            return i = G(n[4] << 24 | n[5] << 16 | n[6] << 8 | n[7]), r = e[i] || 9e4, a = N(t, ["tfdt"]).map(function(e) {
                                var t, n;
                                return t = e[0], n = G(e[4] << 24 | e[5] << 16 | e[6] << 8 | e[7]), 1 === t && (n *= Math.pow(2, 32), n += G(e[8] << 24 | e[9] << 16 | e[10] << 8 | e[11])), n
                            })[0], a = a || 1 / 0, a / r
                        })
                    })), r = Math.min.apply(null, i), isFinite(r) ? r : 0
                }, H = function(e) {
                    var t = N(e, ["moov", "trak"]),
                        n = [];
                    return t.forEach(function(e) {
                        var t = N(e, ["mdia", "hdlr"]),
                            i = N(e, ["tkhd"]);
                        t.forEach(function(e, t) {
                            var r, a, s, o = B(e.subarray(8, 12)),
                                u = i[t];
                            "vide" === o && (r = new DataView(u.buffer, u.byteOffset, u.byteLength), a = r.getUint8(0), s = 0 === a ? r.getUint32(12) : r.getUint32(20), n.push(s))
                        })
                    }), n
                };
                var X = {
                        findBox: N,
                        parseType: B,
                        timescale: F,
                        startTime: V,
                        videoTrackIds: H
                    },
                    Y = function() {
                        this.init = function() {
                            var e = {};
                            this.on = function(t, n) {
                                e[t] || (e[t] = []), e[t] = e[t].concat(n)
                            }, this.off = function(t, n) {
                                var i;
                                return e[t] ? (i = e[t].indexOf(n), e[t] = e[t].slice(), e[t].splice(i, 1), i > -1) : !1
                            }, this.trigger = function(t) {
                                var n, i, r, a;
                                if (n = e[t])
                                    if (2 === arguments.length)
                                        for (r = n.length, i = 0; r > i; ++i) n[i].call(this, arguments[1]);
                                    else {
                                        for (a = [], i = arguments.length, i = 1; i < arguments.length; ++i) a.push(arguments[i]);
                                        for (r = n.length, i = 0; r > i; ++i) n[i].apply(this, a)
                                    }
                            }, this.dispose = function() {
                                e = {}
                            }
                        }
                    };
                Y.prototype.pipe = function(e) {
                    return this.on("data", function(t) {
                        e.push(t)
                    }), this.on("done", function(t) {
                        e.flush(t)
                    }), e
                }, Y.prototype.push = function(e) {
                    this.trigger("data", e)
                }, Y.prototype.flush = function(e) {
                    this.trigger("done", e)
                };
                var $ = Y,
                    Q = function(e) {
                        var t, n, i = [],
                            r = [];
                        for (i.byteLength = 0, t = 0; t < e.length; t++) n = e[t], "access_unit_delimiter_rbsp" === n.nalUnitType ? (i.length && (i.duration = n.dts - i.dts, r.push(i)), i = [n], i.byteLength = n.data.byteLength, i.pts = n.pts, i.dts = n.dts) : ("slice_layer_without_partitioning_rbsp_idr" === n.nalUnitType && (i.keyFrame = !0), i.duration = n.dts - i.dts, i.byteLength += n.data.byteLength, i.push(n));
                        return r.length && (!i.duration || i.duration <= 0) && (i.duration = r[r.length - 1].duration), r.push(i), r
                    },
                    K = function(e) {
                        var t, n, i = [],
                            r = [];
                        for (i.byteLength = 0, i.nalCount = 0, i.duration = 0, i.pts = e[0].pts, i.dts = e[0].dts, r.byteLength = 0, r.nalCount = 0, r.duration = 0, r.pts = e[0].pts, r.dts = e[0].dts, t = 0; t < e.length; t++) n = e[t], n.keyFrame ? (i.length && (r.push(i), r.byteLength += i.byteLength, r.nalCount += i.nalCount, r.duration += i.duration), i = [n], i.nalCount = n.length, i.byteLength = n.byteLength, i.pts = n.pts, i.dts = n.dts, i.duration = n.duration) : (i.duration += n.duration, i.nalCount += n.length, i.byteLength += n.byteLength, i.push(n));
                        return r.length && i.duration <= 0 && (i.duration = r[r.length - 1].duration), r.byteLength += i.byteLength, r.nalCount += i.nalCount, r.duration += i.duration, r.push(i), r
                    },
                    J = function(e) {
                        var t;
                        return !e[0][0].keyFrame && e.length > 1 && (t = e.shift(), e.byteLength -= t.byteLength, e.nalCount -= t.nalCount, e[0][0].dts = t.dts, e[0][0].pts = t.pts, e[0][0].duration += t.duration), e
                    },
                    Z = function() {
                        return {
                            size: 0,
                            flags: {
                                isLeading: 0,
                                dependsOn: 1,
                                isDependedOn: 0,
                                hasRedundancy: 0,
                                degradationPriority: 0,
                                isNonSyncSample: 1
                            }
                        }
                    },
                    ee = function(e, t) {
                        var n = Z();
                        return n.dataOffset = t, n.compositionTimeOffset = e.pts - e.dts, n.duration = e.duration, n.size = 4 * e.length, n.size += e.byteLength, e.keyFrame && (n.flags.dependsOn = 2, n.flags.isNonSyncSample = 0), n
                    },
                    te = function(e, t) {
                        var n, i, r, a, s, o = t || 0,
                            u = [];
                        for (n = 0; n < e.length; n++)
                            for (a = e[n], i = 0; i < a.length; i++) s = a[i], r = ee(s, o), o += r.size, u.push(r);
                        return u
                    },
                    ne = function(e) {
                        var t, n, i, r, a, s, o = 0,
                            u = e.byteLength,
                            l = e.nalCount,
                            c = u + 4 * l,
                            d = new Uint8Array(c),
                            h = new DataView(d.buffer);
                        for (t = 0; t < e.length; t++)
                            for (r = e[t], n = 0; n < r.length; n++)
                                for (a = r[n], i = 0; i < a.length; i++) s = a[i], h.setUint32(o, s.data.byteLength), o += 4, d.set(s.data, o), o += s.data.byteLength;
                        return d
                    },
                    ie = {
                        groupNalsIntoFrames: Q,
                        groupFramesIntoGops: K,
                        extendFirstKeyFrame: J,
                        generateSampleTable: te,
                        concatenateNalData: ne
                    },
                    re = 9e4,
                    ae = function(e, t) {
                        "number" == typeof t.pts && (void 0 === e.timelineStartInfo.pts && (e.timelineStartInfo.pts = t.pts), void 0 === e.minSegmentPts ? e.minSegmentPts = t.pts : e.minSegmentPts = Math.min(e.minSegmentPts, t.pts), void 0 === e.maxSegmentPts ? e.maxSegmentPts = t.pts : e.maxSegmentPts = Math.max(e.maxSegmentPts, t.pts)), "number" == typeof t.dts && (void 0 === e.timelineStartInfo.dts && (e.timelineStartInfo.dts = t.dts), void 0 === e.minSegmentDts ? e.minSegmentDts = t.dts : e.minSegmentDts = Math.min(e.minSegmentDts, t.dts), void 0 === e.maxSegmentDts ? e.maxSegmentDts = t.dts : e.maxSegmentDts = Math.max(e.maxSegmentDts, t.dts))
                    },
                    se = function(e) {
                        delete e.minSegmentDts, delete e.maxSegmentDts, delete e.minSegmentPts, delete e.maxSegmentPts
                    },
                    oe = function(e, t) {
                        var n, i, r = e.minSegmentDts;
                        return t || (r -= e.timelineStartInfo.dts), n = e.timelineStartInfo.baseMediaDecodeTime, n += r, n = Math.max(0, n), "audio" === e.type && (i = e.samplerate / re, n *= i, n = Math.floor(n)), n
                    },
                    ue = {
                        clearDtsInfo: se,
                        calculateTrackBaseMediaDecodeTime: oe,
                        collectDtsInfo: ae
                    },
                    le = 4,
                    ce = 128,
                    de = function(e) {
                        for (var t = 0, n = {
                            payloadType: -1,
                            payloadSize: 0
                        }, i = 0, r = 0; t < e.byteLength && e[t] !== ce;) {
                            for (; 255 === e[t];) i += 255, t++;
                            for (i += e[t++]; 255 === e[t];) r += 255, t++;
                            if (r += e[t++], !n.payload && i === le) {
                                n.payloadType = i, n.payloadSize = r, n.payload = e.subarray(t, t + r);
                                break
                            }
                            t += r, i = 0, r = 0
                        }
                        return n
                    },
                    he = function(e) {
                        return 181 !== e.payload[0] ? null : 49 !== (e.payload[1] << 8 | e.payload[2]) ? null : "GA94" !== String.fromCharCode(e.payload[3], e.payload[4], e.payload[5], e.payload[6]) ? null : 3 !== e.payload[7] ? null : e.payload.subarray(8, e.payload.length - 1)
                    },
                    pe = function(e, t) {
                        var n, i, r, a, s = [];
                        if (!(64 & t[0])) return s;
                        for (i = 31 & t[0], n = 0; i > n; n++) r = 3 * n, a = {
                            type: 3 & t[r + 2],
                            pts: e
                        }, 4 & t[r + 2] && (a.ccData = t[r + 3] << 8 | t[r + 4], s.push(a));
                        return s
                    },
                    fe = function(e) {
                        for (var t, n, i = e.byteLength, r = [], a = 1; i - 2 > a;) 0 === e[a] && 0 === e[a + 1] && 3 === e[a + 2] ? (r.push(a + 2), a += 2) : a++;
                        if (0 === r.length) return e;
                        t = i - r.length, n = new Uint8Array(t);
                        var s = 0;
                        for (a = 0; t > a; s++, a++) s === r[0] && (s++, r.shift()), n[a] = e[s];
                        return n
                    },
                    me = {
                        parseSei: de,
                        parseUserData: he,
                        parseCaptionPackets: pe,
                        discardEmulationPreventionBytes: fe,
                        USER_DATA_REGISTERED_ITU_T_T35: le
                    },
                    ge = function Zt() {
                        Zt.prototype.init.call(this), this.captionPackets_ = [], this.ccStreams_ = [new Se(0, 0), new Se(0, 1), new Se(1, 0), new Se(1, 1)], this.reset(), this.ccStreams_.forEach(function(e) {
                            e.on("data", this.trigger.bind(this, "data")), e.on("done", this.trigger.bind(this, "done"))
                        }, this)
                    };
                ge.prototype = new $, ge.prototype.push = function(e) {
                    var t, n, i;
                    if ("sei_rbsp" === e.nalUnitType && (t = me.parseSei(e.escapedRBSP), t.payloadType === me.USER_DATA_REGISTERED_ITU_T_T35 && (n = me.parseUserData(t)))) {
                        if (e.dts < this.latestDts_) return void(this.ignoreNextEqualDts_ = !0);
                        if (e.dts === this.latestDts_ && this.ignoreNextEqualDts_) return this.numSameDts_--, void(this.numSameDts_ || (this.ignoreNextEqualDts_ = !1));
                        i = me.parseCaptionPackets(e.pts, n), this.captionPackets_ = this.captionPackets_.concat(i), this.latestDts_ !== e.dts && (this.numSameDts_ = 0), this.numSameDts_++, this.latestDts_ = e.dts
                    }
                }, ge.prototype.flush = function() {
                    return this.captionPackets_.length ? (this.captionPackets_.forEach(function(e, t) {
                        e.presortIndex = t
                    }), this.captionPackets_.sort(function(e, t) {
                        return e.pts === t.pts ? e.presortIndex - t.presortIndex : e.pts - t.pts
                    }), this.captionPackets_.forEach(function(e) {
                        e.type < 2 && this.dispatchCea608Packet(e)
                    }, this), this.captionPackets_.length = 0, void this.ccStreams_.forEach(function(e) {
                        e.flush()
                    }, this)) : void this.ccStreams_.forEach(function(e) {
                        e.flush()
                    }, this)
                }, ge.prototype.reset = function() {
                    this.latestDts_ = null, this.ignoreNextEqualDts_ = !1, this.numSameDts_ = 0, this.activeCea608Channel_ = [null, null], this.ccStreams_.forEach(function(e) {
                        e.reset()
                    })
                }, ge.prototype.dispatchCea608Packet = function(e) {
                    this.setsChannel1Active(e) ? this.activeCea608Channel_[e.type] = 0 : this.setsChannel2Active(e) && (this.activeCea608Channel_[e.type] = 1), null !== this.activeCea608Channel_[e.type] && this.ccStreams_[(e.type << 1) + this.activeCea608Channel_[e.type]].push(e)
                }, ge.prototype.setsChannel1Active = function(e) {
                    return 4096 === (30720 & e.ccData)
                }, ge.prototype.setsChannel2Active = function(e) {
                    return 6144 === (30720 & e.ccData)
                };
                var ve = {
                        42: 225,
                        92: 233,
                        94: 237,
                        95: 243,
                        96: 250,
                        123: 231,
                        124: 247,
                        125: 209,
                        126: 241,
                        127: 9608,
                        304: 174,
                        305: 176,
                        306: 189,
                        307: 191,
                        308: 8482,
                        309: 162,
                        310: 163,
                        311: 9834,
                        312: 224,
                        313: 160,
                        314: 232,
                        315: 226,
                        316: 234,
                        317: 238,
                        318: 244,
                        319: 251,
                        544: 193,
                        545: 201,
                        546: 211,
                        547: 218,
                        548: 220,
                        549: 252,
                        550: 8216,
                        551: 161,
                        552: 42,
                        553: 39,
                        554: 8212,
                        555: 169,
                        556: 8480,
                        557: 8226,
                        558: 8220,
                        559: 8221,
                        560: 192,
                        561: 194,
                        562: 199,
                        563: 200,
                        564: 202,
                        565: 203,
                        566: 235,
                        567: 206,
                        568: 207,
                        569: 239,
                        570: 212,
                        571: 217,
                        572: 249,
                        573: 219,
                        574: 171,
                        575: 187,
                        800: 195,
                        801: 227,
                        802: 205,
                        803: 204,
                        804: 236,
                        805: 210,
                        806: 242,
                        807: 213,
                        808: 245,
                        809: 123,
                        810: 125,
                        811: 92,
                        812: 94,
                        813: 95,
                        814: 124,
                        815: 126,
                        816: 196,
                        817: 228,
                        818: 214,
                        819: 246,
                        820: 223,
                        821: 165,
                        822: 164,
                        823: 9474,
                        824: 197,
                        825: 229,
                        826: 216,
                        827: 248,
                        828: 9484,
                        829: 9488,
                        830: 9492,
                        831: 9496
                    },
                    ye = function(e) {
                        return null === e ? "" : (e = ve[e] || e, String.fromCharCode(e))
                    },
                    _e = 14,
                    be = [4352, 4384, 4608, 4640, 5376, 5408, 5632, 5664, 5888, 5920, 4096, 4864, 4896, 5120, 5152],
                    Te = function() {
                        for (var e = [], t = _e + 1; t--;) e.push("");
                        return e
                    },
                    Se = function en(e, t) {
                        en.prototype.init.call(this), this.field_ = e || 0, this.dataChannel_ = t || 0, this.name_ = "CC" + ((this.field_ << 1 | this.dataChannel_) + 1), this.setConstants(), this.reset(), this.push = function(e) {
                            var t, n, i, r, a;
                            if (t = 32639 & e.ccData, t === this.lastControlCode_) return void(this.lastControlCode_ = null);
                            if (4096 === (61440 & t) ? this.lastControlCode_ = t : t !== this.PADDING_ && (this.lastControlCode_ = null), i = t >>> 8, r = 255 & t, t !== this.PADDING_)
                                if (t === this.RESUME_CAPTION_LOADING_) this.mode_ = "popOn";
                                else if (t === this.END_OF_CAPTION_) this.mode_ = "popOn", this.clearFormatting(e.pts), this.flushDisplayed(e.pts), n = this.displayed_, this.displayed_ = this.nonDisplayed_, this.nonDisplayed_ = n, this.startPts_ = e.pts;
                            else if (t === this.ROLL_UP_2_ROWS_) this.rollUpRows_ = 2, this.setRollUp(e.pts);
                            else if (t === this.ROLL_UP_3_ROWS_) this.rollUpRows_ = 3, this.setRollUp(e.pts);
                            else if (t === this.ROLL_UP_4_ROWS_) this.rollUpRows_ = 4, this.setRollUp(e.pts);
                            else if (t === this.CARRIAGE_RETURN_) this.clearFormatting(e.pts), this.flushDisplayed(e.pts), this.shiftRowsUp_(), this.startPts_ = e.pts;
                            else if (t === this.BACKSPACE_) "popOn" === this.mode_ ? this.nonDisplayed_[this.row_] = this.nonDisplayed_[this.row_].slice(0, -1) : this.displayed_[this.row_] = this.displayed_[this.row_].slice(0, -1);
                            else if (t === this.ERASE_DISPLAYED_MEMORY_) this.flushDisplayed(e.pts), this.displayed_ = Te();
                            else if (t === this.ERASE_NON_DISPLAYED_MEMORY_) this.nonDisplayed_ = Te();
                            else if (t === this.RESUME_DIRECT_CAPTIONING_) "paintOn" !== this.mode_ && (this.flushDisplayed(e.pts), this.displayed_ = Te()), this.mode_ = "paintOn", this.startPts_ = e.pts;
                            else if (this.isSpecialCharacter(i, r)) i = (3 & i) << 8, a = ye(i | r), this[this.mode_](e.pts, a), this.column_++;
                            else if (this.isExtCharacter(i, r)) "popOn" === this.mode_ ? this.nonDisplayed_[this.row_] = this.nonDisplayed_[this.row_].slice(0, -1) : this.displayed_[this.row_] = this.displayed_[this.row_].slice(0, -1), i = (3 & i) << 8, a = ye(i | r), this[this.mode_](e.pts, a), this.column_++;
                            else if (this.isMidRowCode(i, r)) this.clearFormatting(e.pts), this[this.mode_](e.pts, " "), this.column_++, 14 === (14 & r) && this.addFormatting(e.pts, ["i"]), 1 === (1 & r) && this.addFormatting(e.pts, ["u"]);
                            else if (this.isOffsetControlCode(i, r)) this.column_ += 3 & r;
                            else if (this.isPAC(i, r)) {
                                var s = be.indexOf(7968 & t);
                                "rollUp" === this.mode_ && this.setRollUp(e.pts, s), s !== this.row_ && (this.clearFormatting(e.pts), this.row_ = s), 1 & r && -1 === this.formatting_.indexOf("u") && this.addFormatting(e.pts, ["u"]), 16 === (16 & t) && (this.column_ = 4 * ((14 & t) >> 1)), this.isColorPAC(r) && 14 === (14 & r) && this.addFormatting(e.pts, ["i"])
                            } else this.isNormalChar(i) && (0 === r && (r = null), a = ye(i), a += ye(r), this[this.mode_](e.pts, a), this.column_ += a.length)
                        }
                    };
                Se.prototype = new $, Se.prototype.flushDisplayed = function(e) {
                    var t = this.displayed_.map(function(e) {
                        return e.trim()
                    }).join("\n").replace(/^\n+|\n+$/g, "");
                    t.length && this.trigger("data", {
                        startPts: this.startPts_,
                        endPts: e,
                        text: t,
                        stream: this.name_
                    })
                }, Se.prototype.reset = function() {
                    this.mode_ = "popOn", this.topRow_ = 0, this.startPts_ = 0, this.displayed_ = Te(), this.nonDisplayed_ = Te(), this.lastControlCode_ = null, this.column_ = 0, this.row_ = _e, this.rollUpRows_ = 2, this.formatting_ = []
                }, Se.prototype.setConstants = function() {
                    0 === this.dataChannel_ ? (this.BASE_ = 16, this.EXT_ = 17, this.CONTROL_ = (20 | this.field_) << 8, this.OFFSET_ = 23) : 1 === this.dataChannel_ && (this.BASE_ = 24, this.EXT_ = 25, this.CONTROL_ = (28 | this.field_) << 8, this.OFFSET_ = 31), this.PADDING_ = 0, this.RESUME_CAPTION_LOADING_ = 32 | this.CONTROL_, this.END_OF_CAPTION_ = 47 | this.CONTROL_, this.ROLL_UP_2_ROWS_ = 37 | this.CONTROL_, this.ROLL_UP_3_ROWS_ = 38 | this.CONTROL_, this.ROLL_UP_4_ROWS_ = 39 | this.CONTROL_, this.CARRIAGE_RETURN_ = 45 | this.CONTROL_, this.RESUME_DIRECT_CAPTIONING_ = 41 | this.CONTROL_, this.BACKSPACE_ = 33 | this.CONTROL_, this.ERASE_DISPLAYED_MEMORY_ = 44 | this.CONTROL_, this.ERASE_NON_DISPLAYED_MEMORY_ = 46 | this.CONTROL_
                }, Se.prototype.isSpecialCharacter = function(e, t) {
                    return e === this.EXT_ && t >= 48 && 63 >= t
                }, Se.prototype.isExtCharacter = function(e, t) {
                    return (e === this.EXT_ + 1 || e === this.EXT_ + 2) && t >= 32 && 63 >= t
                }, Se.prototype.isMidRowCode = function(e, t) {
                    return e === this.EXT_ && t >= 32 && 47 >= t
                }, Se.prototype.isOffsetControlCode = function(e, t) {
                    return e === this.OFFSET_ && t >= 33 && 35 >= t
                }, Se.prototype.isPAC = function(e, t) {
                    return e >= this.BASE_ && e < this.BASE_ + 8 && t >= 64 && 127 >= t
                }, Se.prototype.isColorPAC = function(e) {
                    return e >= 64 && 79 >= e || e >= 96 && 127 >= e
                }, Se.prototype.isNormalChar = function(e) {
                    return e >= 32 && 127 >= e
                }, Se.prototype.setRollUp = function(e, t) {
                    if ("rollUp" !== this.mode_ && (this.row_ = _e, this.mode_ = "rollUp", this.flushDisplayed(e), this.nonDisplayed_ = Te(), this.displayed_ = Te()), void 0 !== t && t !== this.row_)
                        for (var n = 0; n < this.rollUpRows_; n++) this.displayed_[t - n] = this.displayed_[this.row_ - n], this.displayed_[this.row_ - n] = "";
                    void 0 === t && (t = this.row_), this.topRow_ = t - this.rollUpRows_ + 1
                }, Se.prototype.addFormatting = function(e, t) {
                    this.formatting_ = this.formatting_.concat(t);
                    var n = t.reduce(function(e, t) {
                        return e + "<" + t + ">"
                    }, "");
                    this[this.mode_](e, n)
                }, Se.prototype.clearFormatting = function(e) {
                    if (this.formatting_.length) {
                        var t = this.formatting_.reverse().reduce(function(e, t) {
                            return e + "</" + t + ">"
                        }, "");
                        this.formatting_ = [], this[this.mode_](e, t)
                    }
                }, Se.prototype.popOn = function(e, t) {
                    var n = this.nonDisplayed_[this.row_];
                    n += t, this.nonDisplayed_[this.row_] = n
                }, Se.prototype.rollUp = function(e, t) {
                    var n = this.displayed_[this.row_];
                    n += t, this.displayed_[this.row_] = n
                }, Se.prototype.shiftRowsUp_ = function() {
                    var e;
                    for (e = 0; e < this.topRow_; e++) this.displayed_[e] = "";
                    for (e = this.row_ + 1; _e + 1 > e; e++) this.displayed_[e] = "";
                    for (e = this.topRow_; e < this.row_; e++) this.displayed_[e] = this.displayed_[e + 1];
                    this.displayed_[this.row_] = ""
                }, Se.prototype.paintOn = function(e, t) {
                    var n = this.displayed_[this.row_];
                    n += t, this.displayed_[this.row_] = n
                };
                var ke = {
                        CaptionStream: ge,
                        Cea608Stream: Se
                    },
                    we = {
                        H264_STREAM_TYPE: 27,
                        ADTS_STREAM_TYPE: 15,
                        METADATA_STREAM_TYPE: 21
                    },
                    Ce = 8589934592,
                    Ee = 4294967296,
                    Ae = function(e, t) {
                        var n = 1;
                        for (e > t && (n = -1); Math.abs(t - e) > Ee;) e += n * Ce;
                        return e
                    },
                    Le = function tn(e) {
                        var t, n;
                        tn.prototype.init.call(this), this.type_ = e, this.push = function(e) {
                            e.type === this.type_ && (void 0 === n && (n = e.dts), e.dts = Ae(e.dts, n), e.pts = Ae(e.pts, n), t = e.dts, this.trigger("data", e))
                        }, this.flush = function() {
                            n = t, this.trigger("done")
                        }, this.discontinuity = function() {
                            n = void 0, t = void 0
                        }
                    };
                Le.prototype = new $;
                var Ie, Pe = {
                        TimestampRolloverStream: Le,
                        handleRollover: Ae
                    },
                    xe = function(e, t, n) {
                        var i, r = "";
                        for (i = t; n > i; i++) r += "%" + ("00" + e[i].toString(16)).slice(-2);
                        return r
                    },
                    De = function(e, t, n) {
                        return decodeURIComponent(xe(e, t, n))
                    },
                    Ue = function(e, t, n) {
                        return unescape(xe(e, t, n))
                    },
                    Oe = function(e) {
                        return e[0] << 21 | e[1] << 14 | e[2] << 7 | e[3]
                    },
                    Me = {
                        TXXX: function(e) {
                            var t;
                            if (3 === e.data[0]) {
                                for (t = 1; t < e.data.length; t++)
                                    if (0 === e.data[t]) {
                                        e.description = De(e.data, 1, t), e.value = De(e.data, t + 1, e.data.length).replace(/\0*$/, "");
                                        break
                                    }
                                e.data = e.value
                            }
                        },
                        WXXX: function(e) {
                            var t;
                            if (3 === e.data[0])
                                for (t = 1; t < e.data.length; t++)
                                    if (0 === e.data[t]) {
                                        e.description = De(e.data, 1, t), e.url = De(e.data, t + 1, e.data.length);
                                        break
                                    }
                        },
                        PRIV: function(e) {
                            var t;
                            for (t = 0; t < e.data.length; t++)
                                if (0 === e.data[t]) {
                                    e.owner = Ue(e.data, 0, t);
                                    break
                                }
                            e.privateData = e.data.subarray(t + 1), e.data = e.privateData
                        }
                    };
                Ie = function(e) {
                    var t, n = {
                            debug: !(!e || !e.debug),
                            descriptor: e && e.descriptor
                        },
                        i = 0,
                        r = [],
                        a = 0;
                    if (Ie.prototype.init.call(this), this.dispatchType = we.METADATA_STREAM_TYPE.toString(16), n.descriptor)
                        for (t = 0; t < n.descriptor.length; t++) this.dispatchType += ("00" + n.descriptor[t].toString(16)).slice(-2);
                    this.push = function(e) {
                        var t, s, o, u, l, c;
                        if ("timed-metadata" === e.type) {
                            if (e.dataAlignmentIndicator && (a = 0, r.length = 0), 0 === r.length && (e.data.length < 10 || e.data[0] !== "I".charCodeAt(0) || e.data[1] !== "D".charCodeAt(0) || e.data[2] !== "3".charCodeAt(0))) return void(n.debug && console.log("Skipping unrecognized metadata packet"));
                            if (r.push(e), a += e.data.byteLength, 1 === r.length && (i = Oe(e.data.subarray(6, 10)), i += 10), !(i > a)) {
                                for (t = {
                                    data: new Uint8Array(i),
                                    frames: [],
                                    pts: r[0].pts,
                                    dts: r[0].dts
                                }, l = 0; i > l;) t.data.set(r[0].data.subarray(0, i - l), l), l += r[0].data.byteLength, a -= r[0].data.byteLength, r.shift();
                                s = 10, 64 & t.data[5] && (s += 4, s += Oe(t.data.subarray(10, 14)), i -= Oe(t.data.subarray(16, 20)));
                                do {
                                    if (o = Oe(t.data.subarray(s + 4, s + 8)), 1 > o) return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");
                                    if (c = String.fromCharCode(t.data[s], t.data[s + 1], t.data[s + 2], t.data[s + 3]), u = {
                                        id: c,
                                        data: t.data.subarray(s + 10, s + o + 10)
                                    }, u.key = u.id, Me[u.id] && (Me[u.id](u), "com.apple.streaming.transportStreamTimestamp" === u.owner)) {
                                        var d = u.data,
                                            h = (1 & d[3]) << 30 | d[4] << 22 | d[5] << 14 | d[6] << 6 | d[7] >>> 2;
                                        h *= 4, h += 3 & d[7], u.timeStamp = h, void 0 === t.pts && void 0 === t.dts && (t.pts = u.timeStamp, t.dts = u.timeStamp), this.trigger("timestamp", u)
                                    }
                                    t.frames.push(u), s += 10, s += o
                                } while (i > s);
                                this.trigger("data", t)
                            }
                        }
                    }
                }, Ie.prototype = new $;
                var Re, je, Ne, Be = Ie,
                    Fe = Pe.TimestampRolloverStream,
                    Ve = 188,
                    He = 71;
                Re = function() {
                    var e = new Uint8Array(Ve),
                        t = 0;
                    Re.prototype.init.call(this), this.push = function(n) {
                        var i, r = 0,
                            a = Ve;
                        for (t ? (i = new Uint8Array(n.byteLength + t), i.set(e.subarray(0, t)), i.set(n, t), t = 0) : i = n; a < i.byteLength;) i[r] !== He || i[a] !== He ? (r++, a++) : (this.trigger("data", i.subarray(r, a)), r += Ve, a += Ve);
                        r < i.byteLength && (e.set(i.subarray(r), 0), t = i.byteLength - r)
                    }, this.flush = function() {
                        t === Ve && e[0] === He && (this.trigger("data", e), t = 0), this.trigger("done")
                    }
                }, Re.prototype = new $, je = function() {
                    var e, t, n, i;
                    je.prototype.init.call(this), i = this, this.packetsWaitingForPmt = [], this.programMapTable = void 0, e = function(e, i) {
                        var r = 0;
                        i.payloadUnitStartIndicator && (r += e[r] + 1), "pat" === i.type ? t(e.subarray(r), i) : n(e.subarray(r), i)
                    }, t = function(e, t) {
                        t.section_number = e[7], t.last_section_number = e[8], i.pmtPid = (31 & e[10]) << 8 | e[11], t.pmtPid = i.pmtPid
                    }, n = function(e, t) {
                        var n, r, a, s;
                        if (1 & e[5]) {
                            for (i.programMapTable = {
                                video: null,
                                audio: null,
                                "timed-metadata": {}
                            }, n = (15 & e[1]) << 8 | e[2], r = 3 + n - 4, a = (15 & e[10]) << 8 | e[11], s = 12 + a; r > s;) {
                                var o = e[s],
                                    u = (31 & e[s + 1]) << 8 | e[s + 2];
                                o === we.H264_STREAM_TYPE && null === i.programMapTable.video ? i.programMapTable.video = u : o === we.ADTS_STREAM_TYPE && null === i.programMapTable.audio ? i.programMapTable.audio = u : o === we.METADATA_STREAM_TYPE && (i.programMapTable["timed-metadata"][u] = o), s += ((15 & e[s + 3]) << 8 | e[s + 4]) + 5
                            }
                            t.programMapTable = i.programMapTable
                        }
                    }, this.push = function(t) {
                        var n = {},
                            i = 4;
                        if (n.payloadUnitStartIndicator = !!(64 & t[1]), n.pid = 31 & t[1], n.pid <<= 8, n.pid |= t[2], (48 & t[3]) >>> 4 > 1 && (i += t[i] + 1), 0 === n.pid) n.type = "pat", e(t.subarray(i), n), this.trigger("data", n);
                        else if (n.pid === this.pmtPid)
                            for (n.type = "pmt", e(t.subarray(i), n), this.trigger("data", n); this.packetsWaitingForPmt.length;) this.processPes_.apply(this, this.packetsWaitingForPmt.shift());
                        else void 0 === this.programMapTable ? this.packetsWaitingForPmt.push([t, i, n]) : this.processPes_(t, i, n)
                    }, this.processPes_ = function(e, t, n) {
                        n.pid === this.programMapTable.video ? n.streamType = we.H264_STREAM_TYPE : n.pid === this.programMapTable.audio ? n.streamType = we.ADTS_STREAM_TYPE : n.streamType = this.programMapTable["timed-metadata"][n.pid], n.type = "pes", n.data = e.subarray(t), this.trigger("data", n)
                    }
                }, je.prototype = new $, je.STREAM_TYPES = {
                    h264: 27,
                    adts: 15
                }, Ne = function() {
                    var e = this,
                        t = {
                            data: [],
                            size: 0
                        },
                        n = {
                            data: [],
                            size: 0
                        },
                        i = {
                            data: [],
                            size: 0
                        },
                        r = function(e, t) {
                            var n;
                            t.packetLength = 6 + (e[4] << 8 | e[5]), t.dataAlignmentIndicator = 0 !== (4 & e[6]), n = e[7], 192 & n && (t.pts = (14 & e[9]) << 27 | (255 & e[10]) << 20 | (254 & e[11]) << 12 | (255 & e[12]) << 5 | (254 & e[13]) >>> 3, t.pts *= 4, t.pts += (6 & e[13]) >>> 1, t.dts = t.pts, 64 & n && (t.dts = (14 & e[14]) << 27 | (255 & e[15]) << 20 | (254 & e[16]) << 12 | (255 & e[17]) << 5 | (254 & e[18]) >>> 3, t.dts *= 4, t.dts += (6 & e[18]) >>> 1)), t.data = e.subarray(9 + e[8])
                        },
                        a = function(t, n, i) {
                            var a, s = new Uint8Array(t.size),
                                o = {
                                    type: n
                                },
                                u = 0,
                                l = 0,
                                c = !1;
                            if (t.data.length && !(t.size < 9)) {
                                for (o.trackId = t.data[0].pid, u = 0; u < t.data.length; u++) a = t.data[u], s.set(a.data, l), l += a.data.byteLength;
                                r(s, o), c = "video" === n || o.packetLength <= t.size, (i || c) && (t.size = 0, t.data.length = 0), c && e.trigger("data", o)
                            }
                        };
                    Ne.prototype.init.call(this), this.push = function(r) {
                        ({
                            pat: function() {},
                            pes: function() {
                                var e, s;
                                switch (r.streamType) {
                                    case we.H264_STREAM_TYPE:
                                    case we.H264_STREAM_TYPE:
                                        e = t, s = "video";
                                        break;
                                    case we.ADTS_STREAM_TYPE:
                                        e = n, s = "audio";
                                        break;
                                    case we.METADATA_STREAM_TYPE:
                                        e = i, s = "timed-metadata";
                                        break;
                                    default:
                                        return
                                }
                                r.payloadUnitStartIndicator && a(e, s, !0), e.data.push(r), e.size += r.data.byteLength
                            },
                            pmt: function() {
                                var t = {
                                        type: "metadata",
                                        tracks: []
                                    },
                                    n = r.programMapTable;
                                null !== n.video && t.tracks.push({
                                    timelineStartInfo: {
                                        baseMediaDecodeTime: 0
                                    },
                                    id: +n.video,
                                    codec: "avc",
                                    type: "video"
                                }), null !== n.audio && t.tracks.push({
                                    timelineStartInfo: {
                                        baseMediaDecodeTime: 0
                                    },
                                    id: +n.audio,
                                    codec: "adts",
                                    type: "audio"
                                }), e.trigger("data", t)
                            }
                        })[r.type]()
                    }, this.flush = function() {
                        a(t, "video"), a(n, "audio"), a(i, "timed-metadata"), this.trigger("done")
                    }
                }, Ne.prototype = new $;
                var qe = {
                    PAT_PID: 0,
                    MP2T_PACKET_LENGTH: Ve,
                    TransportPacketStream: Re,
                    TransportParseStream: je,
                    ElementaryStream: Ne,
                    TimestampRolloverStream: Fe,
                    CaptionStream: ke.CaptionStream,
                    Cea608Stream: ke.Cea608Stream,
                    MetadataStream: Be
                };
                for (var ze in we) we.hasOwnProperty(ze) && (qe[ze] = we[ze]);
                var We, Ge = qe,
                    Xe = [96e3, 88200, 64e3, 48e3, 44100, 32e3, 24e3, 22050, 16e3, 12e3, 11025, 8e3, 7350];
                We = function() {
                    var e;
                    We.prototype.init.call(this), this.push = function(t) {
                        var n, i, r, a, s, o, u = 0,
                            l = 0;
                        if ("audio" === t.type)
                            for (e ? (a = e, e = new Uint8Array(a.byteLength + t.data.byteLength), e.set(a), e.set(t.data, a.byteLength)) : e = t.data; u + 5 < e.length;)
                                if (255 === e[u] && 240 === (246 & e[u + 1])) {
                                    if (i = 2 * (1 & ~e[u + 1]), n = (3 & e[u + 3]) << 11 | e[u + 4] << 3 | (224 & e[u + 5]) >> 5, s = 1024 * ((3 & e[u + 6]) + 1), o = 9e4 * s / Xe[(60 & e[u + 2]) >>> 2], r = u + n, e.byteLength < r) return;
                                    if (this.trigger("data", {
                                        pts: t.pts + l * o,
                                        dts: t.dts + l * o,
                                        sampleCount: s,
                                        audioobjecttype: (e[u + 2] >>> 6 & 3) + 1,
                                        channelcount: (1 & e[u + 2]) << 2 | (192 & e[u + 3]) >>> 6,
                                        samplerate: Xe[(60 & e[u + 2]) >>> 2],
                                        samplingfrequencyindex: (60 & e[u + 2]) >>> 2,
                                        samplesize: 16,
                                        data: e.subarray(u + 7 + i, r)
                                    }), e.byteLength === r) return void(e = void 0);
                                    l++, e = e.subarray(r)
                                } else u++
                    }, this.flush = function() {
                        this.trigger("done")
                    }
                }, We.prototype = new $;
                var Ye, $e = We;
                Ye = function(e) {
                    var t = e.byteLength,
                        n = 0,
                        i = 0;
                    this.length = function() {
                        return 8 * t
                    }, this.bitsAvailable = function() {
                        return 8 * t + i
                    }, this.loadWord = function() {
                        var r = e.byteLength - t,
                            a = new Uint8Array(4),
                            s = Math.min(4, t);
                        if (0 === s) throw new Error("no bytes available");
                        a.set(e.subarray(r, r + s)), n = new DataView(a.buffer).getUint32(0), i = 8 * s, t -= s
                    }, this.skipBits = function(e) {
                        var r;
                        i > e ? (n <<= e, i -= e) : (e -= i, r = Math.floor(e / 8), e -= 8 * r, t -= r, this.loadWord(), n <<= e, i -= e)
                    }, this.readBits = function(e) {
                        var r = Math.min(i, e),
                            a = n >>> 32 - r;
                        return i -= r, i > 0 ? n <<= r : t > 0 && this.loadWord(), r = e - r, r > 0 ? a << r | this.readBits(r) : a
                    }, this.skipLeadingZeros = function() {
                        var e;
                        for (e = 0; i > e; ++e)
                            if (0 !== (n & 2147483648 >>> e)) return n <<= e, i -= e, e;
                        return this.loadWord(), e + this.skipLeadingZeros()
                    }, this.skipUnsignedExpGolomb = function() {
                        this.skipBits(1 + this.skipLeadingZeros())
                    }, this.skipExpGolomb = function() {
                        this.skipBits(1 + this.skipLeadingZeros())
                    }, this.readUnsignedExpGolomb = function() {
                        var e = this.skipLeadingZeros();
                        return this.readBits(e + 1) - 1
                    }, this.readExpGolomb = function() {
                        var e = this.readUnsignedExpGolomb();
                        return 1 & e ? 1 + e >>> 1 : -1 * (e >>> 1)
                    }, this.readBoolean = function() {
                        return 1 === this.readBits(1)
                    }, this.readUnsignedByte = function() {
                        return this.readBits(8)
                    }, this.loadWord()
                };
                var Qe, Ke, Je, Ze = Ye;
                Ke = function() {
                    var e, t, n = 0;
                    Ke.prototype.init.call(this), this.push = function(i) {
                        var r;
                        for (t ? (r = new Uint8Array(t.byteLength + i.data.byteLength), r.set(t), r.set(i.data, t.byteLength), t = r) : t = i.data; n < t.byteLength - 3; n++)
                            if (1 === t[n + 2]) {
                                e = n + 5;
                                break
                            }
                        for (; e < t.byteLength;) switch (t[e]) {
                            case 0:
                                if (0 !== t[e - 1]) {
                                    e += 2;
                                    break
                                }
                                if (0 !== t[e - 2]) {
                                    e++;
                                    break
                                }
                                n + 3 !== e - 2 && this.trigger("data", t.subarray(n + 3, e - 2));
                                do e++; while (1 !== t[e] && e < t.length);
                                n = e - 2, e += 3;
                                break;
                            case 1:
                                if (0 !== t[e - 1] || 0 !== t[e - 2]) {
                                    e += 3;
                                    break
                                }
                                this.trigger("data", t.subarray(n + 3, e - 2)), n = e - 2, e += 3;
                                break;
                            default:
                                e += 3
                        }
                        t = t.subarray(n), e -= n, n = 0
                    }, this.flush = function() {
                        t && t.byteLength > 3 && this.trigger("data", t.subarray(n + 3)), t = null, n = 0, this.trigger("done")
                    }
                }, Ke.prototype = new $, Je = {
                    100: !0,
                    110: !0,
                    122: !0,
                    244: !0,
                    44: !0,
                    83: !0,
                    86: !0,
                    118: !0,
                    128: !0,
                    138: !0,
                    139: !0,
                    134: !0
                }, Qe = function() {
                    var e, t, n, i, r, a, s, o = new Ke;
                    Qe.prototype.init.call(this), e = this, this.push = function(e) {
                        "video" === e.type && (t = e.trackId, n = e.pts, i = e.dts, o.push(e))
                    }, o.on("data", function(s) {
                        var o = {
                            trackId: t,
                            pts: n,
                            dts: i,
                            data: s
                        };
                        switch (31 & s[0]) {
                            case 5:
                                o.nalUnitType = "slice_layer_without_partitioning_rbsp_idr";
                                break;
                            case 6:
                                o.nalUnitType = "sei_rbsp", o.escapedRBSP = r(s.subarray(1));
                                break;
                            case 7:
                                o.nalUnitType = "seq_parameter_set_rbsp", o.escapedRBSP = r(s.subarray(1)), o.config = a(o.escapedRBSP);
                                break;
                            case 8:
                                o.nalUnitType = "pic_parameter_set_rbsp";
                                break;
                            case 9:
                                o.nalUnitType = "access_unit_delimiter_rbsp"
                        }
                        e.trigger("data", o)
                    }), o.on("done", function() {
                        e.trigger("done")
                    }), this.flush = function() {
                        o.flush()
                    }, s = function(e, t) {
                        var n, i, r = 8,
                            a = 8;
                        for (n = 0; e > n; n++) 0 !== a && (i = t.readExpGolomb(), a = (r + i + 256) % 256), r = 0 === a ? r : a
                    }, r = function(e) {
                        for (var t, n, i = e.byteLength, r = [], a = 1; i - 2 > a;) 0 === e[a] && 0 === e[a + 1] && 3 === e[a + 2] ? (r.push(a + 2), a += 2) : a++;
                        if (0 === r.length) return e;
                        t = i - r.length, n = new Uint8Array(t);
                        var s = 0;
                        for (a = 0; t > a; s++, a++) s === r[0] && (s++, r.shift()), n[a] = e[s];
                        return n
                    }, a = function(e) {
                        var t, n, i, r, a, o, u, l, c, d, h, p, f, m, g = 0,
                            v = 0,
                            y = 0,
                            _ = 0,
                            b = 1;
                        if (t = new Ze(e), n = t.readUnsignedByte(), r = t.readUnsignedByte(), i = t.readUnsignedByte(), t.skipUnsignedExpGolomb(), Je[n] && (a = t.readUnsignedExpGolomb(), 3 === a && t.skipBits(1), t.skipUnsignedExpGolomb(), t.skipUnsignedExpGolomb(), t.skipBits(1), t.readBoolean()))
                            for (h = 3 !== a ? 8 : 12, m = 0; h > m; m++) t.readBoolean() && (6 > m ? s(16, t) : s(64, t));
                        if (t.skipUnsignedExpGolomb(), o = t.readUnsignedExpGolomb(), 0 === o) t.readUnsignedExpGolomb();
                        else if (1 === o)
                            for (t.skipBits(1), t.skipExpGolomb(), t.skipExpGolomb(), u = t.readUnsignedExpGolomb(), m = 0; u > m; m++) t.skipExpGolomb();
                        if (t.skipUnsignedExpGolomb(), t.skipBits(1), l = t.readUnsignedExpGolomb(), c = t.readUnsignedExpGolomb(), d = t.readBits(1), 0 === d && t.skipBits(1), t.skipBits(1), t.readBoolean() && (g = t.readUnsignedExpGolomb(), v = t.readUnsignedExpGolomb(), y = t.readUnsignedExpGolomb(), _ = t.readUnsignedExpGolomb()), t.readBoolean() && t.readBoolean()) {
                            switch (f = t.readUnsignedByte()) {
                                case 1:
                                    p = [1, 1];
                                    break;
                                case 2:
                                    p = [12, 11];
                                    break;
                                case 3:
                                    p = [10, 11];
                                    break;
                                case 4:
                                    p = [16, 11];
                                    break;
                                case 5:
                                    p = [40, 33];
                                    break;
                                case 6:
                                    p = [24, 11];
                                    break;
                                case 7:
                                    p = [20, 11];
                                    break;
                                case 8:
                                    p = [32, 11];
                                    break;
                                case 9:
                                    p = [80, 33];
                                    break;
                                case 10:
                                    p = [18, 11];
                                    break;
                                case 11:
                                    p = [15, 11];
                                    break;
                                case 12:
                                    p = [64, 33];
                                    break;
                                case 13:
                                    p = [160, 99];
                                    break;
                                case 14:
                                    p = [4, 3];
                                    break;
                                case 15:
                                    p = [3, 2];
                                    break;
                                case 16:
                                    p = [2, 1];
                                    break;
                                case 255:
                                    p = [t.readUnsignedByte() << 8 | t.readUnsignedByte(), t.readUnsignedByte() << 8 | t.readUnsignedByte()]
                            }
                            p && (b = p[0] / p[1])
                        }
                        return {
                            profileIdc: n,
                            levelIdc: i,
                            profileCompatibility: r,
                            width: Math.ceil((16 * (l + 1) - 2 * g - 2 * v) * b),
                            height: (2 - d) * (c + 1) * 16 - 2 * y - 2 * _
                        }
                    }
                }, Qe.prototype = new $;
                var et, tt = {
                    H264Stream: Qe,
                    NalByteStream: Ke
                };
                et = function() {
                    var e = new Uint8Array,
                        t = 0;
                    et.prototype.init.call(this), this.setTimestamp = function(e) {
                        t = e
                    }, this.parseId3TagSize = function(e, t) {
                        var n = e[t + 6] << 21 | e[t + 7] << 14 | e[t + 8] << 7 | e[t + 9],
                            i = e[t + 5],
                            r = (16 & i) >> 4;
                        return r ? n + 20 : n + 10
                    }, this.parseAdtsSize = function(e, t) {
                        var n = (224 & e[t + 5]) >> 5,
                            i = e[t + 4] << 3,
                            r = 6144 & e[t + 3];
                        return r | i | n
                    }, this.push = function(n) {
                        var i, r, a, s, o = 0,
                            u = 0;
                        for (e.length ? (s = e.length, e = new Uint8Array(n.byteLength + s), e.set(e.subarray(0, s)), e.set(n, s)) : e = n; e.length - u >= 3;)
                            if (e[u] !== "I".charCodeAt(0) || e[u + 1] !== "D".charCodeAt(0) || e[u + 2] !== "3".charCodeAt(0))
                                if (e[u] & !0 && 240 === (240 & e[u + 1])) {
                                    if (e.length - u < 7) break;
                                    if (o = this.parseAdtsSize(e, u), o > e.length) break;
                                    a = {
                                        type: "audio",
                                        data: e.subarray(u, u + o),
                                        pts: t,
                                        dts: t
                                    }, this.trigger("data", a), u += o
                                } else u++;
                        else {
                            if (e.length - u < 10) break;
                            if (o = this.parseId3TagSize(e, u), o > e.length) break;
                            r = {
                                type: "timed-metadata",
                                data: e.subarray(u, u + o)
                            }, this.trigger("data", r), u += o
                        }
                        i = e.length - u, e = i > 0 ? e.subarray(u) : new Uint8Array
                    }
                }, et.prototype = new $;
                var nt, it, rt, at, st, ot, ut = et,
                    lt = [33, 16, 5, 32, 164, 27],
                    ct = [33, 65, 108, 84, 1, 2, 4, 8, 168, 2, 4, 8, 17, 191, 252],
                    dt = function(e) {
                        for (var t = []; e--;) t.push(0);
                        return t
                    },
                    ht = function(e) {
                        return Object.keys(e).reduce(function(t, n) {
                            return t[n] = new Uint8Array(e[n].reduce(function(e, t) {
                                return e.concat(t)
                            }, [])), t
                        }, {})
                    },
                    pt = {
                        96e3: [lt, [227, 64], dt(154), [56]],
                        88200: [lt, [231], dt(170), [56]],
                        64e3: [lt, [248, 192], dt(240), [56]],
                        48e3: [lt, [255, 192], dt(268), [55, 148, 128], dt(54), [112]],
                        44100: [lt, [255, 192], dt(268), [55, 163, 128], dt(84), [112]],
                        32e3: [lt, [255, 192], dt(268), [55, 234], dt(226), [112]],
                        24e3: [lt, [255, 192], dt(268), [55, 255, 128], dt(268), [111, 112], dt(126), [224]],
                        16e3: [lt, [255, 192], dt(268), [55, 255, 128], dt(268), [111, 255], dt(269), [223, 108], dt(195), [1, 192]],
                        12e3: [ct, dt(268), [3, 127, 248], dt(268), [6, 255, 240], dt(268), [13, 255, 224], dt(268), [27, 253, 128], dt(259), [56]],
                        11025: [ct, dt(268), [3, 127, 248], dt(268), [6, 255, 240], dt(268), [13, 255, 224], dt(268), [27, 255, 192], dt(268), [55, 175, 128], dt(108), [112]],
                        8e3: [ct, dt(268), [3, 121, 16], dt(47), [7]]
                    },
                    ft = ht(pt),
                    mt = 9e4;
                nt = function(e) {
                    return e * mt
                }, it = function(e, t) {
                    return e * t
                }, rt = function(e) {
                    return e / mt
                }, at = function(e, t) {
                    return e / t
                }, st = function(e, t) {
                    return nt(at(e, t))
                }, ot = function(e, t) {
                    return it(rt(e), t)
                };
                var gt, vt, yt, _t, bt, Tt, St, kt = {
                        secondsToVideoTs: nt,
                        secondsToAudioTs: it,
                        videoTsToSeconds: rt,
                        audioTsToSeconds: at,
                        audioTsToVideoTs: st,
                        videoTsToAudioTs: ot
                    },
                    wt = tt.H264Stream,
                    Ct = ["audioobjecttype", "channelcount", "samplerate", "samplingfrequencyindex", "samplesize"],
                    Et = ["width", "height", "profileIdc", "levelIdc", "profileCompatibility"],
                    At = 9e4;
                bt = function(e) {
                    return e[0] === "I".charCodeAt(0) && e[1] === "D".charCodeAt(0) && e[2] === "3".charCodeAt(0) ? !0 : !1
                }, Tt = function(e, t) {
                    var n;
                    if (e.length !== t.length) return !1;
                    for (n = 0; n < e.length; n++)
                        if (e[n] !== t[n]) return !1;
                    return !0
                }, St = function(e) {
                    var t, n, i = 0;
                    for (t = 0; t < e.length; t++) n = e[t], i += n.data.byteLength;
                    return i
                }, vt = function(e, t) {
                    var n = [],
                        i = 0,
                        r = 0,
                        a = 0,
                        s = 1 / 0;
                    t = t || {}, vt.prototype.init.call(this), this.push = function(t) {
                        ue.collectDtsInfo(e, t), e && Ct.forEach(function(n) {
                            e[n] = t[n]
                        }), n.push(t)
                    }, this.setEarliestDts = function(t) {
                        r = t - e.timelineStartInfo.baseMediaDecodeTime
                    }, this.setVideoBaseMediaDecodeTime = function(e) {
                        s = e
                    }, this.setAudioAppendStart = function(e) {
                        a = e
                    }, this.flush = function() {
                        var r, a, s, o;
                        return 0 === n.length ? void this.trigger("done", "AudioSegmentStream") : (r = this.trimAdtsFramesByEarliestDts_(n), e.baseMediaDecodeTime = ue.calculateTrackBaseMediaDecodeTime(e, t.keepOriginalTimestamps), this.prefixWithSilence_(e, r), e.samples = this.generateSampleTable_(r), s = q.mdat(this.concatenateFrameData_(r)), n = [], a = q.moof(i, [e]), o = new Uint8Array(a.byteLength + s.byteLength), i++, o.set(a), o.set(s, a.byteLength), ue.clearDtsInfo(e), this.trigger("data", {
                            track: e,
                            boxes: o
                        }), void this.trigger("done", "AudioSegmentStream"))
                    }, this.prefixWithSilence_ = function(e, t) {
                        var n, i, r, o = 0,
                            u = 0,
                            l = 0,
                            c = 0;
                        if (t.length && (n = kt.audioTsToVideoTs(e.baseMediaDecodeTime, e.samplerate), o = Math.ceil(At / (e.samplerate / 1024)), a && s && (u = n - Math.max(a, s), l = Math.floor(u / o), c = l * o), !(1 > l || c > At / 2))) {
                            for (i = ft[e.samplerate], i || (i = t[0].data), r = 0; l > r; r++) t.splice(r, 0, {
                                data: i
                            });
                            e.baseMediaDecodeTime -= Math.floor(kt.videoTsToAudioTs(c, e.samplerate))
                        }
                    }, this.trimAdtsFramesByEarliestDts_ = function(t) {
                        return e.minSegmentDts >= r ? t : (e.minSegmentDts = 1 / 0, t.filter(function(t) {
                            return t.dts >= r ? (e.minSegmentDts = Math.min(e.minSegmentDts, t.dts), e.minSegmentPts = e.minSegmentDts, !0) : !1
                        }))
                    }, this.generateSampleTable_ = function(e) {
                        var t, n, i = [];
                        for (t = 0; t < e.length; t++) n = e[t], i.push({
                            size: n.data.byteLength,
                            duration: 1024
                        });
                        return i
                    }, this.concatenateFrameData_ = function(e) {
                        var t, n, i = 0,
                            r = new Uint8Array(St(e));
                        for (t = 0; t < e.length; t++) n = e[t], r.set(n.data, i), i += n.data.byteLength;
                        return r
                    }
                }, vt.prototype = new $, gt = function(e, t) {
                    var n, i, r = 0,
                        a = [],
                        s = [];
                    t = t || {}, gt.prototype.init.call(this), delete e.minPTS, this.gopCache_ = [], this.push = function(t) {
                        ue.collectDtsInfo(e, t), "seq_parameter_set_rbsp" !== t.nalUnitType || n || (n = t.config, e.sps = [t.data], Et.forEach(function(t) {
                            e[t] = n[t]
                        }, this)), "pic_parameter_set_rbsp" !== t.nalUnitType || i || (i = t.data, e.pps = [t.data]), a.push(t)
                    }, this.flush = function() {
                        for (var n, i, o, u, l, c; a.length && "access_unit_delimiter_rbsp" !== a[0].nalUnitType;) a.shift();
                        if (0 === a.length) return this.resetStream_(), void this.trigger("done", "VideoSegmentStream");
                        if (n = ie.groupNalsIntoFrames(a), o = ie.groupFramesIntoGops(n), o[0][0].keyFrame || (i = this.getGopForFusion_(a[0], e), i ? (o.unshift(i), o.byteLength += i.byteLength, o.nalCount += i.nalCount, o.pts = i.pts, o.dts = i.dts, o.duration += i.duration) : o = ie.extendFirstKeyFrame(o)), s.length) {
                            var d;
                            if (d = t.alignGopsAtEnd ? this.alignGopsAtEnd_(o) : this.alignGopsAtStart_(o), !d) return this.gopCache_.unshift({
                                gop: o.pop(),
                                pps: e.pps,
                                sps: e.sps
                            }), this.gopCache_.length = Math.min(6, this.gopCache_.length), a = [], this.resetStream_(), void this.trigger("done", "VideoSegmentStream");
                            ue.clearDtsInfo(e), o = d
                        }
                        ue.collectDtsInfo(e, o), e.samples = ie.generateSampleTable(o), l = q.mdat(ie.concatenateNalData(o)), e.baseMediaDecodeTime = ue.calculateTrackBaseMediaDecodeTime(e, t.keepOriginalTimestamps), this.trigger("processedGopsInfo", o.map(function(e) {
                            return {
                                pts: e.pts,
                                dts: e.dts,
                                byteLength: e.byteLength
                            }
                        })), this.gopCache_.unshift({
                            gop: o.pop(),
                            pps: e.pps,
                            sps: e.sps
                        }), this.gopCache_.length = Math.min(6, this.gopCache_.length), a = [], this.trigger("baseMediaDecodeTime", e.baseMediaDecodeTime), this.trigger("timelineStartInfo", e.timelineStartInfo), u = q.moof(r, [e]), c = new Uint8Array(u.byteLength + l.byteLength), r++, c.set(u), c.set(l, u.byteLength), this.trigger("data", {
                            track: e,
                            boxes: c
                        }), this.resetStream_(), this.trigger("done", "VideoSegmentStream")
                    }, this.resetStream_ = function() {
                        ue.clearDtsInfo(e), n = void 0, i = void 0
                    }, this.getGopForFusion_ = function(t) {
                        var n, i, r, a, s, o = 45e3,
                            u = 1e4,
                            l = 1 / 0;
                        for (s = 0; s < this.gopCache_.length; s++) a = this.gopCache_[s], r = a.gop, e.pps && Tt(e.pps[0], a.pps[0]) && e.sps && Tt(e.sps[0], a.sps[0]) && (r.dts < e.timelineStartInfo.dts || (n = t.dts - r.dts - r.duration, n >= -u && o >= n && (!i || l > n) && (i = a, l = n)));
                        return i ? i.gop : null
                    }, this.alignGopsAtStart_ = function(e) {
                        var t, n, i, r, a, o, u, l;
                        for (a = e.byteLength, o = e.nalCount, u = e.duration, t = n = 0; t < s.length && n < e.length && (i = s[t], r = e[n], i.pts !== r.pts);) r.pts > i.pts ? t++ : (n++, a -= r.byteLength, o -= r.nalCount, u -= r.duration);
                        return 0 === n ? e : n === e.length ? null : (l = e.slice(n), l.byteLength = a, l.duration = u, l.nalCount = o, l.pts = l[0].pts, l.dts = l[0].dts, l)
                    }, this.alignGopsAtEnd_ = function(e) {
                        var t, n, i, r, a, o;
                        for (t = s.length - 1, n = e.length - 1, a = null, o = !1; t >= 0 && n >= 0;) {
                            if (i = s[t], r = e[n], i.pts === r.pts) {
                                o = !0;
                                break
                            }
                            i.pts > r.pts ? t-- : (t === s.length - 1 && (a = n), n--)
                        }
                        if (!o && null === a) return null;
                        var u;
                        if (u = o ? n : a, 0 === u) return e;
                        var l = e.slice(u),
                            c = l.reduce(function(e, t) {
                                return e.byteLength += t.byteLength, e.duration += t.duration, e.nalCount += t.nalCount, e
                            }, {
                                byteLength: 0,
                                duration: 0,
                                nalCount: 0
                            });
                        return l.byteLength = c.byteLength, l.duration = c.duration, l.nalCount = c.nalCount, l.pts = l[0].pts, l.dts = l[0].dts, l
                    }, this.alignGopsWith = function(e) {
                        s = e
                    }
                }, gt.prototype = new $, _t = function(e, t) {
                    this.numberOfTracks = 0, this.metadataStream = t, "undefined" != typeof e.remux ? this.remuxTracks = !!e.remux : this.remuxTracks = !0, this.pendingTracks = [], this.videoTrack = null, this.pendingBoxes = [], this.pendingCaptions = [], this.pendingMetadata = [], this.pendingBytes = 0, this.emittedTracks = 0, _t.prototype.init.call(this), this.push = function(e) {
                        return e.text ? this.pendingCaptions.push(e) : e.frames ? this.pendingMetadata.push(e) : (this.pendingTracks.push(e.track), this.pendingBoxes.push(e.boxes), this.pendingBytes += e.boxes.byteLength, "video" === e.track.type && (this.videoTrack = e.track), void("audio" === e.track.type && (this.audioTrack = e.track)))
                    }
                }, _t.prototype = new $, _t.prototype.flush = function(e) {
                    var t, n, i, r, a = 0,
                        s = {
                            captions: [],
                            captionStreams: {},
                            metadata: [],
                            info: {}
                        },
                        o = 0;
                    if (this.pendingTracks.length < this.numberOfTracks) {
                        if ("VideoSegmentStream" !== e && "AudioSegmentStream" !== e) return;
                        if (this.remuxTracks) return;
                        if (0 === this.pendingTracks.length) return this.emittedTracks++, void(this.emittedTracks >= this.numberOfTracks && (this.trigger("done"), this.emittedTracks = 0))
                    }
                    for (this.videoTrack ? (o = this.videoTrack.timelineStartInfo.pts, Et.forEach(function(e) {
                        s.info[e] = this.videoTrack[e]
                    }, this)) : this.audioTrack && (o = this.audioTrack.timelineStartInfo.pts,
                        Ct.forEach(function(e) {
                            s.info[e] = this.audioTrack[e]
                        }, this)), 1 === this.pendingTracks.length ? s.type = this.pendingTracks[0].type : s.type = "combined", this.emittedTracks += this.pendingTracks.length, i = q.initSegment(this.pendingTracks), s.initSegment = new Uint8Array(i.byteLength), s.initSegment.set(i), s.data = new Uint8Array(this.pendingBytes), r = 0; r < this.pendingBoxes.length; r++) s.data.set(this.pendingBoxes[r], a), a += this.pendingBoxes[r].byteLength;
                    for (r = 0; r < this.pendingCaptions.length; r++) t = this.pendingCaptions[r], t.startTime = t.startPts - o, t.startTime /= 9e4, t.endTime = t.endPts - o, t.endTime /= 9e4, s.captionStreams[t.stream] = !0, s.captions.push(t);
                    for (r = 0; r < this.pendingMetadata.length; r++) n = this.pendingMetadata[r], n.cueTime = n.pts - o, n.cueTime /= 9e4, s.metadata.push(n);
                    s.metadata.dispatchType = this.metadataStream.dispatchType, this.pendingTracks.length = 0, this.videoTrack = null, this.pendingBoxes.length = 0, this.pendingCaptions.length = 0, this.pendingBytes = 0, this.pendingMetadata.length = 0, this.trigger("data", s), this.emittedTracks >= this.numberOfTracks && (this.trigger("done"), this.emittedTracks = 0)
                }, yt = function(e) {
                    var t, n, i = this,
                        r = !0;
                    yt.prototype.init.call(this), e = e || {}, this.baseMediaDecodeTime = e.baseMediaDecodeTime || 0, this.transmuxPipeline_ = {}, this.setupAacPipeline = function() {
                        var t = {};
                        this.transmuxPipeline_ = t, t.type = "aac", t.metadataStream = new Ge.MetadataStream, t.aacStream = new ut, t.audioTimestampRolloverStream = new Ge.TimestampRolloverStream("audio"), t.timedMetadataTimestampRolloverStream = new Ge.TimestampRolloverStream("timed-metadata"), t.adtsStream = new $e, t.coalesceStream = new _t(e, t.metadataStream), t.headOfPipeline = t.aacStream, t.aacStream.pipe(t.audioTimestampRolloverStream).pipe(t.adtsStream), t.aacStream.pipe(t.timedMetadataTimestampRolloverStream).pipe(t.metadataStream).pipe(t.coalesceStream), t.metadataStream.on("timestamp", function(e) {
                            t.aacStream.setTimestamp(e.timeStamp)
                        }), t.aacStream.on("data", function(r) {
                            "timed-metadata" !== r.type || t.audioSegmentStream || (n = n || {
                                timelineStartInfo: {
                                    baseMediaDecodeTime: i.baseMediaDecodeTime
                                },
                                codec: "adts",
                                type: "audio"
                            }, t.coalesceStream.numberOfTracks++, t.audioSegmentStream = new vt(n, e), t.adtsStream.pipe(t.audioSegmentStream).pipe(t.coalesceStream))
                        }), t.coalesceStream.on("data", this.trigger.bind(this, "data")), t.coalesceStream.on("done", this.trigger.bind(this, "done"))
                    }, this.setupTsPipeline = function() {
                        var r = {};
                        this.transmuxPipeline_ = r, r.type = "ts", r.metadataStream = new Ge.MetadataStream, r.packetStream = new Ge.TransportPacketStream, r.parseStream = new Ge.TransportParseStream, r.elementaryStream = new Ge.ElementaryStream, r.videoTimestampRolloverStream = new Ge.TimestampRolloverStream("video"), r.audioTimestampRolloverStream = new Ge.TimestampRolloverStream("audio"), r.timedMetadataTimestampRolloverStream = new Ge.TimestampRolloverStream("timed-metadata"), r.adtsStream = new $e, r.h264Stream = new wt, r.captionStream = new Ge.CaptionStream, r.coalesceStream = new _t(e, r.metadataStream), r.headOfPipeline = r.packetStream, r.packetStream.pipe(r.parseStream).pipe(r.elementaryStream), r.elementaryStream.pipe(r.videoTimestampRolloverStream).pipe(r.h264Stream), r.elementaryStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream), r.elementaryStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream), r.h264Stream.pipe(r.captionStream).pipe(r.coalesceStream), r.elementaryStream.on("data", function(a) {
                            var s;
                            if ("metadata" === a.type) {
                                for (s = a.tracks.length; s--;) t || "video" !== a.tracks[s].type ? n || "audio" !== a.tracks[s].type || (n = a.tracks[s], n.timelineStartInfo.baseMediaDecodeTime = i.baseMediaDecodeTime) : (t = a.tracks[s], t.timelineStartInfo.baseMediaDecodeTime = i.baseMediaDecodeTime);
                                t && !r.videoSegmentStream && (r.coalesceStream.numberOfTracks++, r.videoSegmentStream = new gt(t, e), r.videoSegmentStream.on("timelineStartInfo", function(e) {
                                    n && (n.timelineStartInfo = e, r.audioSegmentStream.setEarliestDts(e.dts))
                                }), r.videoSegmentStream.on("processedGopsInfo", i.trigger.bind(i, "gopInfo")), r.videoSegmentStream.on("baseMediaDecodeTime", function(e) {
                                    n && r.audioSegmentStream.setVideoBaseMediaDecodeTime(e)
                                }), r.h264Stream.pipe(r.videoSegmentStream).pipe(r.coalesceStream)), n && !r.audioSegmentStream && (r.coalesceStream.numberOfTracks++, r.audioSegmentStream = new vt(n, e), r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream))
                            }
                        }), r.coalesceStream.on("data", this.trigger.bind(this, "data")), r.coalesceStream.on("done", this.trigger.bind(this, "done"))
                    }, this.setBaseMediaDecodeTime = function(e) {
                        var i = this.transmuxPipeline_;
                        this.baseMediaDecodeTime = e, n && (n.timelineStartInfo.dts = void 0, n.timelineStartInfo.pts = void 0, ue.clearDtsInfo(n), n.timelineStartInfo.baseMediaDecodeTime = e, i.audioTimestampRolloverStream && i.audioTimestampRolloverStream.discontinuity()), t && (i.videoSegmentStream && (i.videoSegmentStream.gopCache_ = [], i.videoTimestampRolloverStream.discontinuity()), t.timelineStartInfo.dts = void 0, t.timelineStartInfo.pts = void 0, ue.clearDtsInfo(t), i.captionStream.reset(), t.timelineStartInfo.baseMediaDecodeTime = e), i.timedMetadataTimestampRolloverStream && i.timedMetadataTimestampRolloverStream.discontinuity()
                    }, this.setAudioAppendStart = function(e) {
                        n && this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)
                    }, this.alignGopsWith = function(e) {
                        t && this.transmuxPipeline_.videoSegmentStream && this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)
                    }, this.push = function(e) {
                        if (r) {
                            var t = bt(e);
                            t && "aac" !== this.transmuxPipeline_.type ? this.setupAacPipeline() : t || "ts" === this.transmuxPipeline_.type || this.setupTsPipeline(), r = !1
                        }
                        this.transmuxPipeline_.headOfPipeline.push(e)
                    }, this.flush = function() {
                        r = !0, this.transmuxPipeline_.headOfPipeline.flush()
                    }, this.resetCaptions = function() {
                        this.transmuxPipeline_.captionStream && this.transmuxPipeline_.captionStream.reset()
                    }
                }, yt.prototype = new $;
                var Lt, It, Pt = {
                        Transmuxer: yt,
                        VideoSegmentStream: gt,
                        AudioSegmentStream: vt,
                        AUDIO_PROPERTIES: Ct,
                        VIDEO_PROPERTIES: Et
                    },
                    xt = X.parseType,
                    Dt = function(e) {
                        return new Date(1e3 * e - 20828448e5)
                    },
                    Ut = function(e) {
                        return {
                            isLeading: (12 & e[0]) >>> 2,
                            dependsOn: 3 & e[0],
                            isDependedOn: (192 & e[1]) >>> 6,
                            hasRedundancy: (48 & e[1]) >>> 4,
                            paddingValue: (14 & e[1]) >>> 1,
                            isNonSyncSample: 1 & e[1],
                            degradationPriority: e[2] << 8 | e[3]
                        }
                    },
                    Ot = function(e) {
                        var t, n, i = new DataView(e.buffer, e.byteOffset, e.byteLength),
                            r = [];
                        for (t = 0; t + 4 < e.length; t += n)
                            if (n = i.getUint32(t), t += 4, 0 >= n) r.push("<span style='color:red;'>MALFORMED DATA</span>");
                            else switch (31 & e[t]) {
                                case 1:
                                    r.push("slice_layer_without_partitioning_rbsp");
                                    break;
                                case 5:
                                    r.push("slice_layer_without_partitioning_rbsp_idr");
                                    break;
                                case 6:
                                    r.push("sei_rbsp");
                                    break;
                                case 7:
                                    r.push("seq_parameter_set_rbsp");
                                    break;
                                case 8:
                                    r.push("pic_parameter_set_rbsp");
                                    break;
                                case 9:
                                    r.push("access_unit_delimiter_rbsp");
                                    break;
                                default:
                                    r.push("UNKNOWN NAL - " + e[t] & 31)
                            }
                            return r
                    },
                    Mt = {
                        avc1: function(e) {
                            var t = new DataView(e.buffer, e.byteOffset, e.byteLength);
                            return {
                                dataReferenceIndex: t.getUint16(6),
                                width: t.getUint16(24),
                                height: t.getUint16(26),
                                horizresolution: t.getUint16(28) + t.getUint16(30) / 16,
                                vertresolution: t.getUint16(32) + t.getUint16(34) / 16,
                                frameCount: t.getUint16(40),
                                depth: t.getUint16(74),
                                config: Lt(e.subarray(78, e.byteLength))
                            }
                        },
                        avcC: function(e) {
                            var t, n, i, r, a = new DataView(e.buffer, e.byteOffset, e.byteLength),
                                s = {
                                    configurationVersion: e[0],
                                    avcProfileIndication: e[1],
                                    profileCompatibility: e[2],
                                    avcLevelIndication: e[3],
                                    lengthSizeMinusOne: 3 & e[4],
                                    sps: [],
                                    pps: []
                                },
                                o = 31 & e[5];
                            for (i = 6, r = 0; o > r; r++) n = a.getUint16(i), i += 2, s.sps.push(new Uint8Array(e.subarray(i, i + n))), i += n;
                            for (t = e[i], i++, r = 0; t > r; r++) n = a.getUint16(i), i += 2, s.pps.push(new Uint8Array(e.subarray(i, i + n))), i += n;
                            return s
                        },
                        btrt: function(e) {
                            var t = new DataView(e.buffer, e.byteOffset, e.byteLength);
                            return {
                                bufferSizeDB: t.getUint32(0),
                                maxBitrate: t.getUint32(4),
                                avgBitrate: t.getUint32(8)
                            }
                        },
                        esds: function(e) {
                            return {
                                version: e[0],
                                flags: new Uint8Array(e.subarray(1, 4)),
                                esId: e[6] << 8 | e[7],
                                streamPriority: 31 & e[8],
                                decoderConfig: {
                                    objectProfileIndication: e[11],
                                    streamType: e[12] >>> 2 & 63,
                                    bufferSize: e[13] << 16 | e[14] << 8 | e[15],
                                    maxBitrate: e[16] << 24 | e[17] << 16 | e[18] << 8 | e[19],
                                    avgBitrate: e[20] << 24 | e[21] << 16 | e[22] << 8 | e[23],
                                    decoderConfigDescriptor: {
                                        tag: e[24],
                                        length: e[25],
                                        audioObjectType: e[26] >>> 3 & 31,
                                        samplingFrequencyIndex: (7 & e[26]) << 1 | e[27] >>> 7 & 1,
                                        channelConfiguration: e[27] >>> 3 & 15
                                    }
                                }
                            }
                        },
                        ftyp: function(e) {
                            for (var t = new DataView(e.buffer, e.byteOffset, e.byteLength), n = {
                                majorBrand: xt(e.subarray(0, 4)),
                                minorVersion: t.getUint32(4),
                                compatibleBrands: []
                            }, i = 8; i < e.byteLength;) n.compatibleBrands.push(xt(e.subarray(i, i + 4))), i += 4;
                            return n
                        },
                        dinf: function(e) {
                            return {
                                boxes: Lt(e)
                            }
                        },
                        dref: function(e) {
                            return {
                                version: e[0],
                                flags: new Uint8Array(e.subarray(1, 4)),
                                dataReferences: Lt(e.subarray(8))
                            }
                        },
                        hdlr: function(e) {
                            var t = new DataView(e.buffer, e.byteOffset, e.byteLength),
                                n = {
                                    version: t.getUint8(0),
                                    flags: new Uint8Array(e.subarray(1, 4)),
                                    handlerType: xt(e.subarray(8, 12)),
                                    name: ""
                                },
                                i = 8;
                            for (i = 24; i < e.byteLength; i++) {
                                if (0 === e[i]) {
                                    i++;
                                    break
                                }
                                n.name += String.fromCharCode(e[i])
                            }
                            return n.name = decodeURIComponent(escape(n.name)), n
                        },
                        mdat: function(e) {
                            return {
                                byteLength: e.byteLength,
                                nals: Ot(e)
                            }
                        },
                        mdhd: function(e) {
                            var t, n = new DataView(e.buffer, e.byteOffset, e.byteLength),
                                i = 4,
                                r = {
                                    version: n.getUint8(0),
                                    flags: new Uint8Array(e.subarray(1, 4)),
                                    language: ""
                                };
                            return 1 === r.version ? (i += 4, r.creationTime = Dt(n.getUint32(i)), i += 8, r.modificationTime = Dt(n.getUint32(i)), i += 4, r.timescale = n.getUint32(i), i += 8, r.duration = n.getUint32(i)) : (r.creationTime = Dt(n.getUint32(i)), i += 4, r.modificationTime = Dt(n.getUint32(i)), i += 4, r.timescale = n.getUint32(i), i += 4, r.duration = n.getUint32(i)), i += 4, t = n.getUint16(i), r.language += String.fromCharCode((t >> 10) + 96), r.language += String.fromCharCode(((992 & t) >> 5) + 96), r.language += String.fromCharCode((31 & t) + 96), r
                        },
                        mdia: function(e) {
                            return {
                                boxes: Lt(e)
                            }
                        },
                        mfhd: function(e) {
                            return {
                                version: e[0],
                                flags: new Uint8Array(e.subarray(1, 4)),
                                sequenceNumber: e[4] << 24 | e[5] << 16 | e[6] << 8 | e[7]
                            }
                        },
                        minf: function(e) {
                            return {
                                boxes: Lt(e)
                            }
                        },
                        mp4a: function(e) {
                            var t = new DataView(e.buffer, e.byteOffset, e.byteLength),
                                n = {
                                    dataReferenceIndex: t.getUint16(6),
                                    channelcount: t.getUint16(16),
                                    samplesize: t.getUint16(18),
                                    samplerate: t.getUint16(24) + t.getUint16(26) / 65536
                                };
                            return e.byteLength > 28 && (n.streamDescriptor = Lt(e.subarray(28))[0]), n
                        },
                        moof: function(e) {
                            return {
                                boxes: Lt(e)
                            }
                        },
                        moov: function(e) {
                            return {
                                boxes: Lt(e)
                            }
                        },
                        mvex: function(e) {
                            return {
                                boxes: Lt(e)
                            }
                        },
                        mvhd: function(e) {
                            var t = new DataView(e.buffer, e.byteOffset, e.byteLength),
                                n = 4,
                                i = {
                                    version: t.getUint8(0),
                                    flags: new Uint8Array(e.subarray(1, 4))
                                };
                            return 1 === i.version ? (n += 4, i.creationTime = Dt(t.getUint32(n)), n += 8, i.modificationTime = Dt(t.getUint32(n)), n += 4, i.timescale = t.getUint32(n), n += 8, i.duration = t.getUint32(n)) : (i.creationTime = Dt(t.getUint32(n)), n += 4, i.modificationTime = Dt(t.getUint32(n)), n += 4, i.timescale = t.getUint32(n), n += 4, i.duration = t.getUint32(n)), n += 4, i.rate = t.getUint16(n) + t.getUint16(n + 2) / 16, n += 4, i.volume = t.getUint8(n) + t.getUint8(n + 1) / 8, n += 2, n += 2, n += 8, i.matrix = new Uint32Array(e.subarray(n, n + 36)), n += 36, n += 24, i.nextTrackId = t.getUint32(n), i
                        },
                        pdin: function(e) {
                            var t = new DataView(e.buffer, e.byteOffset, e.byteLength);
                            return {
                                version: t.getUint8(0),
                                flags: new Uint8Array(e.subarray(1, 4)),
                                rate: t.getUint32(4),
                                initialDelay: t.getUint32(8)
                            }
                        },
                        sdtp: function(e) {
                            var t, n = {
                                version: e[0],
                                flags: new Uint8Array(e.subarray(1, 4)),
                                samples: []
                            };
                            for (t = 4; t < e.byteLength; t++) n.samples.push({
                                dependsOn: (48 & e[t]) >> 4,
                                isDependedOn: (12 & e[t]) >> 2,
                                hasRedundancy: 3 & e[t]
                            });
                            return n
                        },
                        sidx: function(e) {
                            var t, n = new DataView(e.buffer, e.byteOffset, e.byteLength),
                                i = {
                                    version: e[0],
                                    flags: new Uint8Array(e.subarray(1, 4)),
                                    references: [],
                                    referenceId: n.getUint32(4),
                                    timescale: n.getUint32(8),
                                    earliestPresentationTime: n.getUint32(12),
                                    firstOffset: n.getUint32(16)
                                },
                                r = n.getUint16(22);
                            for (t = 24; r; t += 12, r--) i.references.push({
                                referenceType: (128 & e[t]) >>> 7,
                                referencedSize: 2147483647 & n.getUint32(t),
                                subsegmentDuration: n.getUint32(t + 4),
                                startsWithSap: !!(128 & e[t + 8]),
                                sapType: (112 & e[t + 8]) >>> 4,
                                sapDeltaTime: 268435455 & n.getUint32(t + 8)
                            });
                            return i
                        },
                        smhd: function(e) {
                            return {
                                version: e[0],
                                flags: new Uint8Array(e.subarray(1, 4)),
                                balance: e[4] + e[5] / 256
                            }
                        },
                        stbl: function(e) {
                            return {
                                boxes: Lt(e)
                            }
                        },
                        stco: function(e) {
                            var t, n = new DataView(e.buffer, e.byteOffset, e.byteLength),
                                i = {
                                    version: e[0],
                                    flags: new Uint8Array(e.subarray(1, 4)),
                                    chunkOffsets: []
                                },
                                r = n.getUint32(4);
                            for (t = 8; r; t += 4, r--) i.chunkOffsets.push(n.getUint32(t));
                            return i
                        },
                        stsc: function(e) {
                            var t, n = new DataView(e.buffer, e.byteOffset, e.byteLength),
                                i = n.getUint32(4),
                                r = {
                                    version: e[0],
                                    flags: new Uint8Array(e.subarray(1, 4)),
                                    sampleToChunks: []
                                };
                            for (t = 8; i; t += 12, i--) r.sampleToChunks.push({
                                firstChunk: n.getUint32(t),
                                samplesPerChunk: n.getUint32(t + 4),
                                sampleDescriptionIndex: n.getUint32(t + 8)
                            });
                            return r
                        },
                        stsd: function(e) {
                            return {
                                version: e[0],
                                flags: new Uint8Array(e.subarray(1, 4)),
                                sampleDescriptions: Lt(e.subarray(8))
                            }
                        },
                        stsz: function(e) {
                            var t, n = new DataView(e.buffer, e.byteOffset, e.byteLength),
                                i = {
                                    version: e[0],
                                    flags: new Uint8Array(e.subarray(1, 4)),
                                    sampleSize: n.getUint32(4),
                                    entries: []
                                };
                            for (t = 12; t < e.byteLength; t += 4) i.entries.push(n.getUint32(t));
                            return i
                        },
                        stts: function(e) {
                            var t, n = new DataView(e.buffer, e.byteOffset, e.byteLength),
                                i = {
                                    version: e[0],
                                    flags: new Uint8Array(e.subarray(1, 4)),
                                    timeToSamples: []
                                },
                                r = n.getUint32(4);
                            for (t = 8; r; t += 8, r--) i.timeToSamples.push({
                                sampleCount: n.getUint32(t),
                                sampleDelta: n.getUint32(t + 4)
                            });
                            return i
                        },
                        styp: function(e) {
                            return Mt.ftyp(e)
                        },
                        tfdt: function(e) {
                            var t = {
                                version: e[0],
                                flags: new Uint8Array(e.subarray(1, 4)),
                                baseMediaDecodeTime: e[4] << 24 | e[5] << 16 | e[6] << 8 | e[7]
                            };
                            return 1 === t.version && (t.baseMediaDecodeTime *= Math.pow(2, 32), t.baseMediaDecodeTime += e[8] << 24 | e[9] << 16 | e[10] << 8 | e[11]), t
                        },
                        tfhd: function(e) {
                            var t, n = new DataView(e.buffer, e.byteOffset, e.byteLength),
                                i = {
                                    version: e[0],
                                    flags: new Uint8Array(e.subarray(1, 4)),
                                    trackId: n.getUint32(4)
                                },
                                r = 1 & i.flags[2],
                                a = 2 & i.flags[2],
                                s = 8 & i.flags[2],
                                o = 16 & i.flags[2],
                                u = 32 & i.flags[2],
                                l = 65536 & i.flags[0],
                                c = 131072 & i.flags[0];
                            return t = 8, r && (t += 4, i.baseDataOffset = n.getUint32(12), t += 4), a && (i.sampleDescriptionIndex = n.getUint32(t), t += 4), s && (i.defaultSampleDuration = n.getUint32(t), t += 4), o && (i.defaultSampleSize = n.getUint32(t), t += 4), u && (i.defaultSampleFlags = n.getUint32(t)), l && (i.durationIsEmpty = !0), !r && c && (i.baseDataOffsetIsMoof = !0), i
                        },
                        tkhd: function(e) {
                            var t = new DataView(e.buffer, e.byteOffset, e.byteLength),
                                n = 4,
                                i = {
                                    version: t.getUint8(0),
                                    flags: new Uint8Array(e.subarray(1, 4))
                                };
                            return 1 === i.version ? (n += 4, i.creationTime = Dt(t.getUint32(n)), n += 8, i.modificationTime = Dt(t.getUint32(n)), n += 4, i.trackId = t.getUint32(n), n += 4, n += 8, i.duration = t.getUint32(n)) : (i.creationTime = Dt(t.getUint32(n)), n += 4, i.modificationTime = Dt(t.getUint32(n)), n += 4, i.trackId = t.getUint32(n), n += 4, n += 4, i.duration = t.getUint32(n)), n += 4, n += 8, i.layer = t.getUint16(n), n += 2, i.alternateGroup = t.getUint16(n), n += 2, i.volume = t.getUint8(n) + t.getUint8(n + 1) / 8, n += 2, n += 2, i.matrix = new Uint32Array(e.subarray(n, n + 36)), n += 36, i.width = t.getUint16(n) + t.getUint16(n + 2) / 16, n += 4, i.height = t.getUint16(n) + t.getUint16(n + 2) / 16, i
                        },
                        traf: function(e) {
                            return {
                                boxes: Lt(e)
                            }
                        },
                        trak: function(e) {
                            return {
                                boxes: Lt(e)
                            }
                        },
                        trex: function(e) {
                            var t = new DataView(e.buffer, e.byteOffset, e.byteLength);
                            return {
                                version: e[0],
                                flags: new Uint8Array(e.subarray(1, 4)),
                                trackId: t.getUint32(4),
                                defaultSampleDescriptionIndex: t.getUint32(8),
                                defaultSampleDuration: t.getUint32(12),
                                defaultSampleSize: t.getUint32(16),
                                sampleDependsOn: 3 & e[20],
                                sampleIsDependedOn: (192 & e[21]) >> 6,
                                sampleHasRedundancy: (48 & e[21]) >> 4,
                                samplePaddingValue: (14 & e[21]) >> 1,
                                sampleIsDifferenceSample: !!(1 & e[21]),
                                sampleDegradationPriority: t.getUint16(22)
                            }
                        },
                        trun: function(e) {
                            var t, n = {
                                    version: e[0],
                                    flags: new Uint8Array(e.subarray(1, 4)),
                                    samples: []
                                },
                                i = new DataView(e.buffer, e.byteOffset, e.byteLength),
                                r = 1 & n.flags[2],
                                a = 4 & n.flags[2],
                                s = 1 & n.flags[1],
                                o = 2 & n.flags[1],
                                u = 4 & n.flags[1],
                                l = 8 & n.flags[1],
                                c = i.getUint32(4),
                                d = 8;
                            for (r && (n.dataOffset = i.getInt32(d), d += 4), a && c && (t = {
                                flags: Ut(e.subarray(d, d + 4))
                            }, d += 4, s && (t.duration = i.getUint32(d), d += 4), o && (t.size = i.getUint32(d), d += 4), l && (t.compositionTimeOffset = i.getUint32(d), d += 4), n.samples.push(t), c--); c--;) t = {}, s && (t.duration = i.getUint32(d), d += 4), o && (t.size = i.getUint32(d), d += 4), u && (t.flags = Ut(e.subarray(d, d + 4)), d += 4), l && (t.compositionTimeOffset = i.getUint32(d), d += 4), n.samples.push(t);
                            return n
                        },
                        "url ": function(e) {
                            return {
                                version: e[0],
                                flags: new Uint8Array(e.subarray(1, 4))
                            }
                        },
                        vmhd: function(e) {
                            var t = new DataView(e.buffer, e.byteOffset, e.byteLength);
                            return {
                                version: e[0],
                                flags: new Uint8Array(e.subarray(1, 4)),
                                graphicsmode: t.getUint16(4),
                                opcolor: new Uint16Array([t.getUint16(6), t.getUint16(8), t.getUint16(10)])
                            }
                        }
                    };
                Lt = function(e) {
                    for (var t, n, i, r, a, s = 0, o = [], u = new ArrayBuffer(e.length), l = new Uint8Array(u), c = 0; c < e.length; ++c) l[c] = e[c];
                    for (t = new DataView(u); s < e.byteLength;) n = t.getUint32(s), i = xt(e.subarray(s + 4, s + 8)), r = n > 1 ? s + n : e.byteLength, a = (Mt[i] || function(e) {
                        return {
                            data: e
                        }
                    })(e.subarray(s + 8, r)), a.size = n, a.type = i, o.push(a), s = r;
                    return o
                }, It = function(e, t) {
                    var n;
                    return t = t || 0, n = new Array(2 * t + 1).join(" "), e.map(function(e, i) {
                        return n + e.type + "\n" + Object.keys(e).filter(function(e) {
                            return "type" !== e && "boxes" !== e
                        }).map(function(t) {
                            var i = n + "  " + t + ": ",
                                r = e[t];
                            if (r instanceof Uint8Array || r instanceof Uint32Array) {
                                var a = Array.prototype.slice.call(new Uint8Array(r.buffer, r.byteOffset, r.byteLength)).map(function(e) {
                                    return " " + ("00" + e.toString(16)).slice(-2)
                                }).join("").match(/.{1,24}/g);
                                return a ? 1 === a.length ? i + "<" + a.join("").slice(1) + ">" : i + "<\n" + a.map(function(e) {
                                    return n + "  " + e
                                }).join("\n") + "\n" + n + "  >" : i + "<>"
                            }
                            return i + JSON.stringify(r, null, 2).split("\n").map(function(e, t) {
                                return 0 === t ? e : n + "  " + e
                            }).join("\n")
                        }).join("\n") + (e.boxes ? "\n" + It(e.boxes, t + 1) : "")
                    }).join("\n")
                };
                var Rt = {
                        inspect: Lt,
                        textify: It,
                        parseTfdt: Mt.tfdt,
                        parseHdlr: Mt.hdlr,
                        parseTfhd: Mt.tfhd,
                        parseTrun: Mt.trun
                    },
                    jt = me.discardEmulationPreventionBytes,
                    Nt = ke.CaptionStream,
                    Bt = function(e, t) {
                        for (var n = e, i = 0; i < t.length; i++) {
                            var r = t[i];
                            if (n < r.size) return r;
                            n -= r.size
                        }
                        return null
                    },
                    Ft = function(e, t, n) {
                        var i, r, a, s, o = new DataView(e.buffer, e.byteOffset, e.byteLength),
                            u = [];
                        for (r = 0; r + 4 < e.length; r += a)
                            if (a = o.getUint32(r), r += 4, !(0 >= a)) switch (31 & e[r]) {
                                case 6:
                                    var l = e.subarray(r + 1, r + 1 + a),
                                        c = Bt(r, t);
                                    i = {
                                        nalUnitType: "sei_rbsp",
                                        size: a,
                                        data: l,
                                        escapedRBSP: jt(l),
                                        trackId: n
                                    }, c ? (i.pts = c.pts, i.dts = c.dts, s = c) : (i.pts = s.pts, i.dts = s.dts), u.push(i)
                            }
                            return u
                    },
                    Vt = function(e, t, n) {
                        var i = t,
                            r = n.defaultSampleDuration || 0,
                            a = n.defaultSampleSize || 0,
                            s = n.trackId,
                            o = [];
                        return e.forEach(function(e) {
                            var t = Rt.parseTrun(e),
                                n = t.samples;
                            n.forEach(function(e) {
                                void 0 === e.duration && (e.duration = r), void 0 === e.size && (e.size = a), e.trackId = s, e.dts = i, void 0 === e.compositionTimeOffset && (e.compositionTimeOffset = 0), e.pts = i + e.compositionTimeOffset, i += e.duration
                            }), o = o.concat(n)
                        }), o
                    },
                    Ht = function(e, t) {
                        var n = X.findBox(e, ["moof", "traf"]),
                            i = X.findBox(e, ["mdat"]),
                            r = {},
                            a = [];
                        return i.forEach(function(e, t) {
                            var i = n[t];
                            a.push({
                                mdat: e,
                                traf: i
                            })
                        }), a.forEach(function(e) {
                            var n, i, a = e.mdat,
                                s = e.traf,
                                o = X.findBox(s, ["tfhd"]),
                                u = Rt.parseTfhd(o[0]),
                                l = u.trackId,
                                c = X.findBox(s, ["tfdt"]),
                                d = c.length > 0 ? Rt.parseTfdt(c[0]).baseMediaDecodeTime : 0,
                                h = X.findBox(s, ["trun"]);
                            t === l && h.length > 0 && (n = Vt(h, d, u), i = Ft(a, n, l), r[l] || (r[l] = []), r[l] = r[l].concat(i))
                        }), r
                    },
                    qt = function(e, t, n) {
                        var i;
                        return t ? (i = Ht(e, t), {
                            seiNals: i[t],
                            timescale: n
                        }) : null
                    },
                    zt = function() {
                        var e, t, n, i, r, a = !1;
                        this.isInitialized = function() {
                            return a
                        }, this.init = function() {
                            e = new Nt, a = !0, e.on("data", function(e) {
                                e.startTime = e.startPts / i, e.endTime = e.endPts / i, r.captions.push(e), r.captionStreams[e.stream] = !0
                            })
                        }, this.isNewInit = function(e, t) {
                            return e && 0 === e.length || t && "object" == typeof t && 0 === Object.keys(t).length ? !1 : n !== e[0] || i !== t[n]
                        }, this.parse = function(e, a, s) {
                            var o;
                            if (!this.isInitialized()) return null;
                            if (!a || !s) return null;
                            if (this.isNewInit(a, s)) n = a[0], i = s[n];
                            else if (!n || !i) return t.push(e), null;
                            for (; t.length > 0;) {
                                var u = t.shift();
                                this.parse(u, a, s)
                            }
                            return o = qt(e, n, i), null !== o && o.seiNals ? (this.pushNals(o.seiNals), this.flushStream(), r) : null
                        }, this.pushNals = function(t) {
                            return this.isInitialized() && t && 0 !== t.length ? void t.forEach(function(t) {
                                e.push(t)
                            }) : null
                        }, this.flushStream = function() {
                            return this.isInitialized() ? void e.flush() : null
                        }, this.clearParsedCaptions = function() {
                            r.captions = [], r.captionStreams = {}
                        }, this.resetCaptionStream = function() {
                            return this.isInitialized() ? void e.reset() : null
                        }, this.clearAllCaptions = function() {
                            this.clearParsedCaptions(), this.resetCaptionStream()
                        }, this.reset = function() {
                            t = [], n = null, i = null, r ? this.clearParsedCaptions() : r = {
                                captions: [],
                                captionStreams: {}
                            }, this.resetCaptionStream()
                        }, this.reset()
                    },
                    Wt = zt,
                    Gt = {
                        generator: q,
                        probe: X,
                        Transmuxer: Pt.Transmuxer,
                        AudioSegmentStream: Pt.AudioSegmentStream,
                        VideoSegmentStream: Pt.VideoSegmentStream,
                        CaptionParser: Wt
                    },
                    Xt = function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    },
                    Yt = function() {
                        function e(e, t) {
                            for (var n = 0; n < t.length; n++) {
                                var i = t[n];
                                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                            }
                        }
                        return function(t, n, i) {
                            return n && e(t.prototype, n), i && e(t, i), t
                        }
                    }(),
                    $t = function(e, t) {
                        t.on("data", function(t) {
                            var n = t.initSegment;
                            t.initSegment = {
                                data: n.buffer,
                                byteOffset: n.byteOffset,
                                byteLength: n.byteLength
                            };
                            var i = t.data;
                            t.data = i.buffer, e.postMessage({
                                action: "data",
                                segment: t,
                                byteOffset: i.byteOffset,
                                byteLength: i.byteLength
                            }, [t.data])
                        }), t.captionStream && t.captionStream.on("data", function(t) {
                            e.postMessage({
                                action: "caption",
                                data: t
                            })
                        }), t.on("done", function(t) {
                            e.postMessage({
                                action: "done"
                            })
                        }), t.on("gopInfo", function(t) {
                            e.postMessage({
                                action: "gopInfo",
                                gopInfo: t
                            })
                        })
                    },
                    Qt = function() {
                        function e(t, n) {
                            Xt(this, e), this.options = n || {}, this.self = t, this.init()
                        }
                        return Yt(e, [{
                            key: "init",
                            value: function() {
                                this.transmuxer && this.transmuxer.dispose(), this.transmuxer = new Gt.Transmuxer(this.options), $t(this.self, this.transmuxer)
                            }
                        }, {
                            key: "push",
                            value: function(e) {
                                var t = new Uint8Array(e.data, e.byteOffset, e.byteLength);
                                this.transmuxer.push(t)
                            }
                        }, {
                            key: "reset",
                            value: function() {
                                this.init()
                            }
                        }, {
                            key: "setTimestampOffset",
                            value: function(e) {
                                var t = e.timestampOffset || 0;
                                this.transmuxer.setBaseMediaDecodeTime(Math.round(9e4 * t))
                            }
                        }, {
                            key: "setAudioAppendStart",
                            value: function(e) {
                                this.transmuxer.setAudioAppendStart(Math.ceil(9e4 * e.appendStart))
                            }
                        }, {
                            key: "flush",
                            value: function(e) {
                                this.transmuxer.flush()
                            }
                        }, {
                            key: "resetCaptions",
                            value: function() {
                                this.transmuxer.resetCaptions()
                            }
                        }, {
                            key: "alignGopsWith",
                            value: function(e) {
                                this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())
                            }
                        }]), e
                    }(),
                    Kt = function(e) {
                        e.onmessage = function(t) {
                            return "init" === t.data.action && t.data.options ? void(this.messageHandlers = new Qt(e, t.data.options)) : (this.messageHandlers || (this.messageHandlers = new Qt(e)), void(t.data && t.data.action && "init" !== t.data.action && this.messageHandlers[t.data.action] && this.messageHandlers[t.data.action](t.data)))
                        }
                    },
                    Jt = new Kt(n);
                return Jt
            })()
        }),
        pt = {
            videoCodec: "avc1",
            videoObjectTypeIndicator: ".4d400d",
            audioProfile: "2"
        },
        ft = function(e) {
            return e.map(function(e) {
                return e.replace(/avc1\.(\d+)\.(\d+)/i, function(e, t, n) {
                    var i = ("00" + Number(t).toString(16)).slice(-2),
                        r = ("00" + Number(n).toString(16)).slice(-2);
                    return "avc1." + i + "00" + r
                })
            })
        },
        mt = function() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "",
                t = {
                    codecCount: 0
                },
                n = void 0;
            return t.codecCount = e.split(",").length, t.codecCount = t.codecCount || 2, n = /(^|\s|,)+(avc[13])([^ ,]*)/i.exec(e), n && (t.videoCodec = n[2], t.videoObjectTypeIndicator = n[3]), t.audioProfile = /(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(e), t.audioProfile = t.audioProfile && t.audioProfile[2], t
        },
        gt = function(e) {
            return e.replace(/avc1\.(\d+)\.(\d+)/i, function(e) {
                return ft([e])[0]
            })
        },
        vt = function(e, t, n) {
            return e + "/" + t + '; codecs="' + n.filter(function(e) {
                return !!e
            }).join(", ") + '"'
        },
        yt = function(e) {
            return e.segments && e.segments.length && e.segments[0].map ? "mp4" : "mp2t"
        },
        _t = function(e) {
            var t = e.attributes || {};
            return t.CODECS ? mt(t.CODECS) : pt
        },
        bt = function(e, t) {
            if (!e.mediaGroups.AUDIO || !t) return null;
            var n = e.mediaGroups.AUDIO[t];
            if (!n) return null;
            for (var i in n) {
                var r = n[i];
                if (r["default"] && r.playlists) return mt(r.playlists[0].attributes.CODECS).audioProfile
            }
            return null
        },
        Tt = function(e, n) {
            var i = yt(n),
                r = _t(n),
                a = n.attributes || {},
                s = !0,
                o = !1;
            if (!n) return [];
            if (e.mediaGroups.AUDIO && a.AUDIO) {
                var u = e.mediaGroups.AUDIO[a.AUDIO];
                if (u) {
                    o = !0, s = !1;
                    for (var l in u)
                        if (!u[l].uri && !u[l].playlists) {
                            s = !0;
                            break
                        }
                }
            }
            o && !r.audioProfile && (s || (r.audioProfile = bt(e, a.AUDIO)), r.audioProfile || (t.log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"), r.audioProfile = pt.audioProfile));
            var c = {};
            r.videoCodec && (c.video = "" + r.videoCodec + r.videoObjectTypeIndicator), r.audioProfile && (c.audio = "mp4a.40." + r.audioProfile);
            var d = vt("audio", i, [c.audio]),
                h = vt("video", i, [c.video]),
                p = vt("video", i, [c.video, c.audio]);
            return o ? !s && c.video ? [h, d] : s || c.video ? [p, d] : [d, d] : c.video ? [p] : [d]
        },
        St = function(e) {
            var t = {
                    type: "",
                    parameters: {}
                },
                n = e.trim().split(";");
            return t.type = n.shift().trim(), n.forEach(function(e) {
                var n = e.trim().split("=");
                if (n.length > 1) {
                    var i = n[0].replace(/"/g, "").trim(),
                        r = n[1].replace(/"/g, "").trim();
                    t.parameters[i] = r
                }
            }), t
        },
        kt = function(e) {
            return /mp4a\.\d+.\d+/i.test(e)
        },
        wt = function(e) {
            return /avc1\.[\da-f]+/i.test(e)
        },
        Ct = function(e, t, n) {
            if ("undefined" == typeof t || null === t || !e.length) return [];
            var i = Math.ceil(9e4 * (t - n + 3)),
                r = void 0;
            for (r = 0; r < e.length && !(e[r].pts > i); r++);
            return e.slice(r)
        },
        Et = function(e, t, n) {
            if (!t.length) return e;
            if (n) return t.slice();
            var i = t[0].pts,
                r = 0;
            for (r; r < e.length && !(e[r].pts >= i); r++);
            return e.slice(0, r).concat(t)
        },
        At = function(e, t, n, i) {
            for (var r = Math.ceil(9e4 * (t - i)), a = Math.ceil(9e4 * (n - i)), s = e.slice(), o = e.length; o-- && !(e[o].pts <= a););
            if (-1 === o) return s;
            for (var u = o + 1; u-- && !(e[u].pts <= r););
            return u = Math.max(u, 0), s.splice(u, o - u + 1), s
        },
        Lt = function(e, n, i) {
            var r = null,
                a = null,
                s = 0,
                o = [],
                u = [];
            if (!e && !n) return t.createTimeRange();
            if (!e) return n.buffered;
            if (!n) return e.buffered;
            if (i) return e.buffered;
            if (0 === e.buffered.length && 0 === n.buffered.length) return t.createTimeRange();
            for (var l = e.buffered, c = n.buffered, d = l.length; d--;) o.push({
                time: l.start(d),
                type: "start"
            }), o.push({
                time: l.end(d),
                type: "end"
            });
            for (d = c.length; d--;) o.push({
                time: c.start(d),
                type: "start"
            }), o.push({
                time: c.end(d),
                type: "end"
            });
            for (o.sort(function(e, t) {
                return e.time - t.time
            }), d = 0; d < o.length; d++) "start" === o[d].type ? (s++, 2 === s && (r = o[d].time)) : "end" === o[d].type && (s--, 1 === s && (a = o[d].time)), null !== r && null !== a && (u.push([r, a]), r = null, a = null);
            return t.createTimeRanges(u)
        },
        It = function(e, t) {
            var n = e.addSourceBuffer(t),
                i = Object.create(null);
            i.updating = !1, i.realBuffer_ = n;
            var r = function(e) {
                "function" == typeof n[e] ? i[e] = function() {
                    return n[e].apply(n, arguments)
                } : "undefined" == typeof i[e] && Object.defineProperty(i, e, {
                    get: function() {
                        return n[e]
                    },
                    set: function(t) {
                        return n[e] = t
                    }
                })
            };
            for (var a in n) r(a);
            return i
        },
        Pt = function(e) {
            function n(e, i) {
                x(this, n);
                var r = M(this, (n.__proto__ || Object.getPrototypeOf(n)).call(this, t.EventTarget));
                r.timestampOffset_ = 0, r.pendingBuffers_ = [], r.bufferUpdating_ = !1, r.mediaSource_ = e, r.codecs_ = i, r.audioCodec_ = null, r.videoCodec_ = null, r.audioDisabled_ = !1, r.appendAudioInitSegment_ = !0, r.gopBuffer_ = [], r.timeMapping_ = 0, r.safeAppend_ = t.browser.IE_VERSION >= 11;
                var a = {
                    remux: !1,
                    alignGopsAtEnd: r.safeAppend_
                };
                return r.codecs_.forEach(function(e) {
                    kt(e) ? r.audioCodec_ = e : wt(e) && (r.videoCodec_ = e)
                }), r.transmuxer_ = new ht, r.transmuxer_.postMessage({
                    action: "init",
                    options: a
                }), r.transmuxer_.onmessage = function(e) {
                    return "data" === e.data.action ? r.data_(e) : "done" === e.data.action ? r.done_(e) : "gopInfo" === e.data.action ? r.appendGopInfo_(e) : void 0
                }, Object.defineProperty(r, "timestampOffset", {
                    get: function() {
                        return this.timestampOffset_
                    },
                    set: function(e) {
                        "number" == typeof e && e >= 0 && (this.timestampOffset_ = e, this.appendAudioInitSegment_ = !0, this.gopBuffer_.length = 0, this.timeMapping_ = 0, this.transmuxer_.postMessage({
                            action: "setTimestampOffset",
                            timestampOffset: e
                        }))
                    }
                }), Object.defineProperty(r, "appendWindowStart", {
                    get: function() {
                        return (this.videoBuffer_ || this.audioBuffer_).appendWindowStart
                    },
                    set: function(e) {
                        this.videoBuffer_ && (this.videoBuffer_.appendWindowStart = e), this.audioBuffer_ && (this.audioBuffer_.appendWindowStart = e)
                    }
                }), Object.defineProperty(r, "updating", {
                    get: function() {
                        return !!(this.bufferUpdating_ || !this.audioDisabled_ && this.audioBuffer_ && this.audioBuffer_.updating || this.videoBuffer_ && this.videoBuffer_.updating)
                    }
                }), Object.defineProperty(r, "buffered", {
                    get: function() {
                        return Lt(this.videoBuffer_, this.audioBuffer_, this.audioDisabled_)
                    }
                }), r
            }
            return O(n, e), D(n, [{
                key: "data_",
                value: function(e) {
                    var t = e.data.segment;
                    t.data = new Uint8Array(t.data, e.data.byteOffset, e.data.byteLength), t.initSegment = new Uint8Array(t.initSegment.data, t.initSegment.byteOffset, t.initSegment.byteLength), Ke(this, this.mediaSource_, t), this.pendingBuffers_.push(t)
                }
            }, {
                key: "done_",
                value: function(e) {
                    return "closed" === this.mediaSource_.readyState ? void(this.pendingBuffers_.length = 0) : void this.processPendingSegments_()
                }
            }, {
                key: "createRealSourceBuffers_",
                value: function() {
                    var e = this,
                        t = ["audio", "video"];
                    t.forEach(function(n) {
                        if (e[n + "Codec_"] && !e[n + "Buffer_"]) {
                            var i = null;
                            if (e.mediaSource_[n + "Buffer_"]) i = e.mediaSource_[n + "Buffer_"], i.updating = !1;
                            else {
                                var r = n + "Codec_",
                                    a = n + '/mp4;codecs="' + e[r] + '"';
                                i = It(e.mediaSource_.nativeMediaSource_, a), e.mediaSource_[n + "Buffer_"] = i
                            }
                            e[n + "Buffer_"] = i, ["update", "updatestart", "updateend"].forEach(function(r) {
                                i.addEventListener(r, function() {
                                    if ("audio" !== n || !e.audioDisabled_) {
                                        "updateend" === r && (e[n + "Buffer_"].updating = !1);
                                        var i = t.every(function(t) {
                                            return "audio" === t && e.audioDisabled_ ? !0 : n !== t && e[t + "Buffer_"] && e[t + "Buffer_"].updating ? !1 : !0
                                        });
                                        return i ? e.trigger(r) : void 0
                                    }
                                })
                            })
                        }
                    })
                }
            }, {
                key: "appendBuffer",
                value: function(e) {
                    if (this.bufferUpdating_ = !0, this.audioBuffer_ && this.audioBuffer_.buffered.length && this.audioBuffer_.updating) {
                        var t = this.audioBuffer_.buffered;
                        this.transmuxer_.postMessage({
                            action: "setAudioAppendStart",
                            appendStart: t.end(t.length - 1)
                        })
                    }
                    this.videoBuffer_ && this.transmuxer_.postMessage({
                        action: "alignGopsWith",
                        gopsToAlignWith: Ct(this.gopBuffer_, this.mediaSource_.player_ ? this.mediaSource_.player_.currentTime() : null, this.timeMapping_)
                    }), this.transmuxer_.postMessage({
                        action: "push",
                        data: e.buffer,
                        byteOffset: e.byteOffset,
                        byteLength: e.byteLength
                    }, [e.buffer]), this.transmuxer_.postMessage({
                        action: "flush"
                    })
                }
            }, {
                key: "appendGopInfo_",
                value: function(e) {
                    this.gopBuffer_ = Et(this.gopBuffer_, e.data.gopInfo, this.safeAppend_)
                }
            }, {
                key: "remove",
                value: function(e, t) {
                    if (this.videoBuffer_ && (this.videoBuffer_.updating = !0, this.videoBuffer_.remove(e, t), this.gopBuffer_ = At(this.gopBuffer_, e, t, this.timeMapping_)), !this.audioDisabled_ && this.audioBuffer_ && (this.audioBuffer_.updating = !0, this.audioBuffer_.remove(e, t)), Je(e, t, this.metadataTrack_), this.inbandTextTracks_)
                        for (var n in this.inbandTextTracks_) Je(e, t, this.inbandTextTracks_[n])
                }
            }, {
                key: "processPendingSegments_",
                value: function() {
                    var e = {
                        video: {
                            segments: [],
                            bytes: 0
                        },
                        audio: {
                            segments: [],
                            bytes: 0
                        },
                        captions: [],
                        metadata: []
                    };
                    e = this.pendingBuffers_.reduce(function(e, t) {
                        var n = t.type,
                            i = t.data,
                            r = t.initSegment;
                        return e[n].segments.push(i), e[n].bytes += i.byteLength, e[n].initSegment = r, t.captions && (e.captions = e.captions.concat(t.captions)), t.info && (e[n].info = t.info), t.metadata && (e.metadata = e.metadata.concat(t.metadata)), e
                    }, e), this.videoBuffer_ || this.audioBuffer_ || (0 === e.video.bytes && (this.videoCodec_ = null), 0 === e.audio.bytes && (this.audioCodec_ = null), this.createRealSourceBuffers_()), e.audio.info && this.mediaSource_.trigger({
                        type: "audioinfo",
                        info: e.audio.info
                    }), e.video.info && this.mediaSource_.trigger({
                        type: "videoinfo",
                        info: e.video.info
                    }), this.appendAudioInitSegment_ && (!this.audioDisabled_ && this.audioBuffer_ && (e.audio.segments.unshift(e.audio.initSegment), e.audio.bytes += e.audio.initSegment.byteLength), this.appendAudioInitSegment_ = !1);
                    var t = !1;
                    this.videoBuffer_ && e.video.bytes ? (e.video.segments.unshift(e.video.initSegment), e.video.bytes += e.video.initSegment.byteLength, this.concatAndAppendSegments_(e.video, this.videoBuffer_), tt(this, e.captions, e.metadata)) : !this.videoBuffer_ || !this.audioDisabled_ && this.audioBuffer_ || (t = !0), !this.audioDisabled_ && this.audioBuffer_ && this.concatAndAppendSegments_(e.audio, this.audioBuffer_), this.pendingBuffers_.length = 0, t && this.trigger("updateend"), this.bufferUpdating_ = !1
                }
            }, {
                key: "concatAndAppendSegments_",
                value: function(e, t) {
                    var n = 0,
                        i = void 0;
                    if (e.bytes) {
                        i = new Uint8Array(e.bytes), e.segments.forEach(function(e) {
                            i.set(e, n), n += e.byteLength
                        });
                        try {
                            t.updating = !0, t.appendBuffer(i)
                        } catch (r) {
                            this.mediaSource_.player_ && this.mediaSource_.player_.error({
                                code: -3,
                                type: "APPEND_BUFFER_ERR",
                                message: r.message,
                                originalError: r
                            })
                        }
                    }
                }
            }, {
                key: "abort",
                value: function() {
                    this.videoBuffer_ && this.videoBuffer_.updating && this.videoBuffer_.abort(), !this.audioDisabled_ && this.audioBuffer_ && this.audioBuffer_.updating && this.audioBuffer_.abort(), this.transmuxer_ && this.transmuxer_.postMessage({
                        action: "reset"
                    }), this.pendingBuffers_.length = 0, this.bufferUpdating_ = !1
                }
            }]), n
        }(t.EventTarget),
        xt = function(e) {
            function n() {
                x(this, n);
                var e = M(this, (n.__proto__ || Object.getPrototypeOf(n)).call(this)),
                    i = void 0;
                e.nativeMediaSource_ = new _.MediaSource;
                for (i in e.nativeMediaSource_) i in n.prototype || "function" != typeof e.nativeMediaSource_[i] || (e[i] = e.nativeMediaSource_[i].bind(e.nativeMediaSource_));
                return e.duration_ = NaN, Object.defineProperty(e, "duration", {
                    get: function() {
                        return this.duration_ === 1 / 0 ? this.duration_ : this.nativeMediaSource_.duration
                    },
                    set: function(e) {
                        return this.duration_ = e, e !== 1 / 0 ? void(this.nativeMediaSource_.duration = e) : void 0
                    }
                }), Object.defineProperty(e, "seekable", {
                    get: function() {
                        return this.duration_ === 1 / 0 ? t.createTimeRanges([
                            [0, this.nativeMediaSource_.duration]
                        ]) : this.nativeMediaSource_.seekable
                    }
                }), Object.defineProperty(e, "readyState", {
                    get: function() {
                        return this.nativeMediaSource_.readyState
                    }
                }), Object.defineProperty(e, "activeSourceBuffers", {
                    get: function() {
                        return this.activeSourceBuffers_
                    }
                }), e.sourceBuffers = [], e.activeSourceBuffers_ = [], e.updateActiveSourceBuffers_ = function() {
                    if (e.activeSourceBuffers_.length = 0, 1 === e.sourceBuffers.length) {
                        var t = e.sourceBuffers[0];
                        return t.appendAudioInitSegment_ = !0, t.audioDisabled_ = !t.audioCodec_, void e.activeSourceBuffers_.push(t)
                    }
                    for (var n = !1, i = !0, r = 0; r < e.player_.audioTracks().length; r++) {
                        var a = e.player_.audioTracks()[r];
                        if (a.enabled && "main" !== a.kind) {
                            n = !0, i = !1;
                            break
                        }
                    }
                    e.sourceBuffers.forEach(function(t, r) {
                        if (t.appendAudioInitSegment_ = !0, t.videoCodec_ && t.audioCodec_) t.audioDisabled_ = n;
                        else if (t.videoCodec_ && !t.audioCodec_) t.audioDisabled_ = !0, i = !1;
                        else if (!t.videoCodec_ && t.audioCodec_ && (t.audioDisabled_ = r ? i : !i, t.audioDisabled_)) return;
                        e.activeSourceBuffers_.push(t)
                    })
                }, e.onPlayerMediachange_ = function() {
                    e.sourceBuffers.forEach(function(e) {
                        e.appendAudioInitSegment_ = !0
                    })
                }, e.onHlsReset_ = function() {
                    e.sourceBuffers.forEach(function(e) {
                        e.transmuxer_ && e.transmuxer_.postMessage({
                            action: "resetCaptions"
                        })
                    })
                }, e.onHlsSegmentTimeMapping_ = function(t) {
                    e.sourceBuffers.forEach(function(e) {
                        return e.timeMapping_ = t.mapping
                    })
                }, ["sourceopen", "sourceclose", "sourceended"].forEach(function(e) {
                    this.nativeMediaSource_.addEventListener(e, this.trigger.bind(this))
                }, e), e.on("sourceopen", function(n) {
                    var i = v.querySelector('[src="' + e.url_ + '"]');
                    i && (e.player_ = t(i.parentNode), e.player_.tech_.on("hls-reset", e.onHlsReset_), e.player_.tech_.on("hls-segment-time-mapping", e.onHlsSegmentTimeMapping_), e.player_.audioTracks && e.player_.audioTracks() && (e.player_.audioTracks().on("change", e.updateActiveSourceBuffers_), e.player_.audioTracks().on("addtrack", e.updateActiveSourceBuffers_), e.player_.audioTracks().on("removetrack", e.updateActiveSourceBuffers_)), e.player_.on("mediachange", e.onPlayerMediachange_))
                }), e.on("sourceended", function(t) {
                    for (var n = et(e.duration), i = 0; i < e.sourceBuffers.length; i++) {
                        var r = e.sourceBuffers[i],
                            a = r.metadataTrack_ && r.metadataTrack_.cues;
                        a && a.length && (a[a.length - 1].endTime = n)
                    }
                }), e.on("sourceclose", function(e) {
                    this.sourceBuffers.forEach(function(e) {
                        e.transmuxer_ && e.transmuxer_.terminate()
                    }), this.sourceBuffers.length = 0, this.player_ && (this.player_.audioTracks && this.player_.audioTracks() && (this.player_.audioTracks().off("change", this.updateActiveSourceBuffers_), this.player_.audioTracks().off("addtrack", this.updateActiveSourceBuffers_), this.player_.audioTracks().off("removetrack", this.updateActiveSourceBuffers_)), this.player_.el_ && (this.player_.off("mediachange", this.onPlayerMediachange_), this.player_.tech_.off("hls-reset", this.onHlsReset_), this.player_.tech_.off("hls-segment-time-mapping", this.onHlsSegmentTimeMapping_)))
                }), e
            }
            return O(n, e), D(n, [{
                key: "addSeekableRange_",
                value: function(e, t) {
                    var n = void 0;
                    if (this.duration !== 1 / 0) throw n = new Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity"), n.name = "InvalidStateError", n.code = 11, n;
                    (t > this.nativeMediaSource_.duration || isNaN(this.nativeMediaSource_.duration)) && (this.nativeMediaSource_.duration = t)
                }
            }, {
                key: "addSourceBuffer",
                value: function(e) {
                    var t = void 0,
                        n = St(e);
                    if (/^(video|audio)\/mp2t$/i.test(n.type)) {
                        var i = [];
                        n.parameters && n.parameters.codecs && (i = n.parameters.codecs.split(","), i = ft(i), i = i.filter(function(e) {
                            return kt(e) || wt(e)
                        })), 0 === i.length && (i = ["avc1.4d400d", "mp4a.40.2"]), t = new Pt(this, i), 0 !== this.sourceBuffers.length && (this.sourceBuffers[0].createRealSourceBuffers_(), t.createRealSourceBuffers_(), this.sourceBuffers[0].audioDisabled_ = !0)
                    } else t = this.nativeMediaSource_.addSourceBuffer(e);
                    return this.sourceBuffers.push(t), t
                }
            }]), n
        }(t.EventTarget),
        Dt = 0;
    t.mediaSources = {};
    var Ut = function(e, n) {
            var i = t.mediaSources[e];
            if (!i) throw new Error("Media Source not found (Video.js)");
            i.trigger({
                type: "sourceopen",
                swfId: n
            })
        },
        Ot = function() {
            return !!_.MediaSource && !!_.MediaSource.isTypeSupported && _.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')
        },
        Mt = function() {
            if (this.MediaSource = {
                open: Ut,
                supportsNativeMediaSources: Ot
            }, Ot()) return new xt;
            throw new Error("Cannot use create a virtual MediaSource for this video")
        };
    Mt.open = Ut, Mt.supportsNativeMediaSources = Ot;
    var Rt = {
        createObjectURL: function(e) {
            var n = "blob:vjs-media-source/",
                i = void 0;
            return e instanceof xt ? (i = _.URL.createObjectURL(e.nativeMediaSource_), e.url_ = i, i) : e instanceof xt ? (i = n + Dt, Dt++, t.mediaSources[i] = e, i) : (i = _.URL.createObjectURL(e), e.url_ = i, i)
        }
    };
    t.MediaSource = Mt, t.URL = Rt;
    var jt, Nt, Bt, Ft, Vt, Ht = function(e) {
            return !!e && "object" == typeof e
        },
        qt = function qo() {
            for (var e = arguments.length, t = new Array(e), n = 0; e > n; n++) t[n] = arguments[n];
            return t.reduce(function(e, t) {
                return Object.keys(t).forEach(function(n) {
                    Array.isArray(e[n]) && Array.isArray(t[n]) ? e[n] = e[n].concat(t[n]) : Ht(e[n]) && Ht(t[n]) ? e[n] = qo(e[n], t[n]) : e[n] = t[n]
                }), e
            }, {})
        },
        zt = function(e) {
            return Object.keys(e).map(function(t) {
                return e[t]
            })
        },
        Wt = function(e, t) {
            for (var n = [], i = e; t > i; i++) n.push(i);
            return n
        },
        Gt = function(e) {
            return e.reduce(function(e, t) {
                return e.concat(t)
            }, [])
        },
        Xt = function(e) {
            if (!e.length) return [];
            for (var t = [], n = 0; n < e.length; n++) t.push(e[n]);
            return t
        },
        Yt = function(e, t) {
            return e.reduce(function(e, n, i) {
                return n[t] && e.push(i), e
            }, [])
        },
        $t = function(e) {
            var t = zt(e.reduce(function(e, t) {
                var n = t.attributes.id + (t.attributes.lang || "");
                if (e[n]) {
                    var i;
                    t.segments[0].discontinuity = !0, (i = e[n].segments).push.apply(i, t.segments), t.attributes.contentProtection && (e[n].attributes.contentProtection = t.attributes.contentProtection)
                } else e[n] = t;
                return e
            }, {}));
            return t.map(function(e) {
                return e.discontinuityStarts = Yt(e.segments, "discontinuity"), e
            })
        },
        Qt = function(e) {
            var t, n = e.attributes,
                i = e.segments,
                r = {
                    attributes: (t = {
                        NAME: n.id,
                        BANDWIDTH: n.bandwidth,
                        CODECS: n.codecs
                    }, t["PROGRAM-ID"] = 1, t),
                    uri: "",
                    endList: "static" === (n.type || "static"),
                    timeline: n.periodIndex,
                    resolvedUri: "",
                    targetDuration: n.duration,
                    segments: i,
                    mediaSequence: i.length ? i[0].number : 1
                };
            return n.contentProtection && (r.contentProtection = n.contentProtection), r
        },
        Kt = function(e) {
            var t, n = e.attributes,
                i = e.segments;
            return "undefined" == typeof i && (i = [{
                uri: n.baseUrl,
                timeline: n.periodIndex,
                resolvedUri: n.baseUrl || "",
                duration: n.sourceDuration,
                number: 0
            }], n.duration = n.sourceDuration), {
                attributes: (t = {
                    NAME: n.id,
                    BANDWIDTH: n.bandwidth
                }, t["PROGRAM-ID"] = 1, t),
                uri: "",
                endList: "static" === (n.type || "static"),
                timeline: n.periodIndex,
                resolvedUri: n.baseUrl || "",
                targetDuration: n.duration,
                segments: i,
                mediaSequence: i.length ? i[0].number : 1
            }
        },
        Jt = function(e) {
            return e.reduce(function(e, t) {
                var n = t.attributes.role && t.attributes.role.value || "main",
                    i = t.attributes.lang || "",
                    r = "main";
                return i && (r = t.attributes.lang + " (" + n + ")"), e[r] && e[r].playlists[0].attributes.BANDWIDTH > t.attributes.bandwidth ? e : (e[r] = {
                    language: i,
                    autoselect: !0,
                    "default": "main" === n,
                    playlists: [Qt(t)],
                    uri: ""
                }, e)
            }, {})
        },
        Zt = function(e) {
            return e.reduce(function(e, t) {
                var n = t.attributes.lang || "text";
                return e[n] ? e : (e[n] = {
                    language: n,
                    "default": !1,
                    autoselect: !1,
                    playlists: [Kt(t)],
                    uri: ""
                }, e)
            }, {})
        },
        en = function(e) {
            var t, n = e.attributes,
                i = e.segments,
                r = {
                    attributes: (t = {
                        NAME: n.id,
                        AUDIO: "audio",
                        SUBTITLES: "subs",
                        RESOLUTION: {
                            width: n.width,
                            height: n.height
                        },
                        CODECS: n.codecs,
                        BANDWIDTH: n.bandwidth
                    }, t["PROGRAM-ID"] = 1, t),
                    uri: "",
                    endList: "static" === (n.type || "static"),
                    timeline: n.periodIndex,
                    resolvedUri: "",
                    targetDuration: n.duration,
                    segments: i,
                    mediaSequence: i.length ? i[0].number : 1
                };
            return n.contentProtection && (r.contentProtection = n.contentProtection), r
        },
        tn = function(e) {
            var t;
            if (!e.length) return {};
            var n = e[0].attributes,
                i = n.sourceDuration,
                r = n.minimumUpdatePeriod,
                a = void 0 === r ? 0 : r,
                s = function(e) {
                    var t = e.attributes;
                    return "video/mp4" === t.mimeType || "video" === t.contentType
                },
                o = function(e) {
                    var t = e.attributes;
                    return "audio/mp4" === t.mimeType || "audio" === t.contentType
                },
                u = function(e) {
                    var t = e.attributes;
                    return "text/vtt" === t.mimeType || "text" === t.contentType
                },
                l = $t(e.filter(s)).map(en),
                c = $t(e.filter(o)),
                d = e.filter(u),
                h = {
                    allowCache: !0,
                    discontinuityStarts: [],
                    segments: [],
                    endList: !0,
                    mediaGroups: (t = {
                        AUDIO: {},
                        VIDEO: {}
                    }, t["CLOSED-CAPTIONS"] = {}, t.SUBTITLES = {}, t),
                    uri: "",
                    duration: i,
                    playlists: l,
                    minimumUpdatePeriod: 1e3 * a
                };
            return c.length && (h.mediaGroups.AUDIO.audio = Jt(c)), d.length && (h.mediaGroups.SUBTITLES.subs = Zt(d)), h
        },
        nn = "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : {},
        rn = o(function(e, t) {
            ! function(t) {
                var n = /^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,
                    i = /^([^\/?#]*)(.*)$/,
                    r = /(?:\/|^)\.(?=\/)/g,
                    a = /(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,
                    s = {
                        buildAbsoluteURL: function(e, t, n) {
                            if (n = n || {}, e = e.trim(), t = t.trim(), !t) {
                                if (!n.alwaysNormalize) return e;
                                var r = s.parseURL(e);
                                if (!r) throw new Error("Error trying to parse base URL.");
                                return r.path = s.normalizePath(r.path), s.buildURLFromParts(r)
                            }
                            var a = s.parseURL(t);
                            if (!a) throw new Error("Error trying to parse relative URL.");
                            if (a.scheme) return n.alwaysNormalize ? (a.path = s.normalizePath(a.path), s.buildURLFromParts(a)) : t;
                            var o = s.parseURL(e);
                            if (!o) throw new Error("Error trying to parse base URL.");
                            if (!o.netLoc && o.path && "/" !== o.path[0]) {
                                var u = i.exec(o.path);
                                o.netLoc = u[1], o.path = u[2]
                            }
                            o.netLoc && !o.path && (o.path = "/");
                            var l = {
                                scheme: o.scheme,
                                netLoc: a.netLoc,
                                path: null,
                                params: a.params,
                                query: a.query,
                                fragment: a.fragment
                            };
                            if (!a.netLoc && (l.netLoc = o.netLoc, "/" !== a.path[0]))
                                if (a.path) {
                                    var c = o.path,
                                        d = c.substring(0, c.lastIndexOf("/") + 1) + a.path;
                                    l.path = s.normalizePath(d)
                                } else l.path = o.path, a.params || (l.params = o.params, a.query || (l.query = o.query));
                            return null === l.path && (l.path = n.alwaysNormalize ? s.normalizePath(a.path) : a.path), s.buildURLFromParts(l)
                        },
                        parseURL: function(e) {
                            var t = n.exec(e);
                            return t ? {
                                scheme: t[1] || "",
                                netLoc: t[2] || "",
                                path: t[3] || "",
                                params: t[4] || "",
                                query: t[5] || "",
                                fragment: t[6] || ""
                            } : null
                        },
                        normalizePath: function(e) {
                            for (e = e.split("").reverse().join("").replace(r, ""); e.length !== (e = e.replace(a, "")).length;);
                            return e.split("").reverse().join("")
                        },
                        buildURLFromParts: function(e) {
                            return e.scheme + e.netLoc + e.path + e.params + e.query + e.fragment
                        }
                    };
                e.exports = s
            }(nn)
        }),
        an = function(e, t) {
            return /^[a-z]+:/i.test(t) ? t : (/\/\//i.test(e) || (e = rn.buildAbsoluteURL(_.location.href, e)), rn.buildAbsoluteURL(e, t))
        },
        sn = function(e) {
            var t = e.baseUrl,
                n = void 0 === t ? "" : t,
                i = e.source,
                r = void 0 === i ? "" : i,
                a = e.range,
                s = void 0 === a ? "" : a,
                o = {
                    uri: r,
                    resolvedUri: an(n || "", r)
                };
            if (s) {
                var u = s.split("-"),
                    l = parseInt(u[0], 10),
                    c = parseInt(u[1], 10);
                o.byterange = {
                    length: c - l,
                    offset: l
                }
            }
            return o
        },
        on = function(e, t, n) {
            var i = e.NOW,
                r = e.clientOffset,
                a = e.availabilityStartTime,
                s = e.timescale,
                o = void 0 === s ? 1 : s,
                u = e.start,
                l = void 0 === u ? 0 : u,
                c = e.minimumUpdatePeriod,
                d = void 0 === c ? 0 : c,
                h = (i + r) / 1e3,
                p = a + l,
                f = h + d,
                m = f - p;
            return Math.ceil((m * o - t) / n)
        },
        un = function(e, t) {
            for (var n = e.type, i = void 0 === n ? "static" : n, r = e.minimumUpdatePeriod, a = void 0 === r ? 0 : r, s = e.media, o = void 0 === s ? "" : s, u = e.sourceDuration, l = e.timescale, c = void 0 === l ? 1 : l, d = e.startNumber, h = void 0 === d ? 1 : d, p = e.periodIndex, f = [], m = -1, g = 0; g < t.length; g++) {
                var v = t[g],
                    y = v.d,
                    _ = v.r || 0,
                    b = v.t || 0;
                0 > m && (m = b), b && b > m && (m = b);
                var T = void 0;
                if (0 > _) {
                    var S = g + 1;
                    T = S === t.length ? "dynamic" === i && a > 0 && o.indexOf("$Number$") > 0 ? on(e, m, y) : (u * c - m) / y : (t[S].t - m) / y
                } else T = _ + 1;
                for (var k = h + f.length + T, w = h + f.length; k > w;) f.push({
                    number: w,
                    duration: y / c,
                    time: m,
                    timeline: p
                }), m += y, w++
            }
            return f
        },
        ln = {
            "static": function(e) {
                var t = e.duration,
                    n = e.timescale,
                    i = void 0 === n ? 1 : n,
                    r = e.sourceDuration;
                return {
                    start: 0,
                    end: Math.ceil(r / (t / i))
                }
            },
            dynamic: function(e) {
                var t = e.NOW,
                    n = e.clientOffset,
                    i = e.availabilityStartTime,
                    r = e.timescale,
                    a = void 0 === r ? 1 : r,
                    s = e.duration,
                    o = e.start,
                    u = void 0 === o ? 0 : o,
                    l = e.minimumUpdatePeriod,
                    c = void 0 === l ? 0 : l,
                    d = e.timeShiftBufferDepth,
                    h = void 0 === d ? 1 / 0 : d,
                    p = (t + n) / 1e3,
                    f = i + u,
                    m = p + c,
                    g = m - f,
                    v = Math.ceil(g * a / s),
                    y = Math.floor((p - f - h) * a / s),
                    _ = Math.floor((p - f) * a / s);
                return {
                    start: Math.max(0, y),
                    end: Math.min(v, _)
                }
            }
        },
        cn = function(e) {
            return function(t, n) {
                var i = e.duration,
                    r = e.timescale,
                    a = void 0 === r ? 1 : r,
                    s = e.periodIndex,
                    o = e.startNumber,
                    u = void 0 === o ? 1 : o;
                return {
                    number: u + t,
                    duration: i / a,
                    timeline: s,
                    time: n * i
                }
            }
        },
        dn = function(e) {
            var t = e.type,
                n = void 0 === t ? "static" : t,
                i = e.duration,
                r = e.timescale,
                a = void 0 === r ? 1 : r,
                s = e.sourceDuration,
                o = ln[n](e),
                u = o.start,
                l = o.end,
                c = Wt(u, l).map(cn(e));
            if ("static" === n) {
                var d = c.length - 1;
                c[d].duration = s - i / a * d
            }
            return c
        },
        hn = /\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,
        pn = function(e) {
            return function(t, n, i, r) {
                if ("$$" === t) return "$";
                if ("undefined" == typeof e[n]) return t;
                var a = "" + e[n];
                return "RepresentationID" === n ? a : (r = i ? parseInt(r, 10) : 1, a.length >= r ? a : "" + new Array(r - a.length + 1).join("0") + a)
            }
        },
        fn = function(e, t) {
            return e.replace(hn, pn(t))
        },
        mn = function(e, t) {
            return e.duration || t ? e.duration ? dn(e) : un(e, t) : [{
                number: e.startNumber || 1,
                duration: e.sourceDuration,
                time: 0,
                timeline: e.periodIndex
            }]
        },
        gn = function(e, t) {
            var n = {
                    RepresentationID: e.id,
                    Bandwidth: e.bandwidth || 0
                },
                i = e.initialization,
                r = void 0 === i ? {
                    sourceURL: "",
                    range: ""
                } : i,
                a = sn({
                    baseUrl: e.baseUrl,
                    source: fn(r.sourceURL, n),
                    range: r.range
                }),
                s = mn(e, t);
            return s.map(function(t) {
                n.Number = t.number, n.Time = t.time;
                var i = fn(e.media || "", n);
                return {
                    uri: i,
                    timeline: t.timeline,
                    duration: t.duration,
                    resolvedUri: an(e.baseUrl || "", i),
                    map: a,
                    number: t.number
                }
            })
        },
        vn = {
            INVALID_NUMBER_OF_PERIOD: "INVALID_NUMBER_OF_PERIOD",
            DASH_EMPTY_MANIFEST: "DASH_EMPTY_MANIFEST",
            DASH_INVALID_XML: "DASH_INVALID_XML",
            NO_BASE_URL: "NO_BASE_URL",
            MISSING_SEGMENT_INFORMATION: "MISSING_SEGMENT_INFORMATION",
            SEGMENT_TIME_UNSPECIFIED: "SEGMENT_TIME_UNSPECIFIED",
            UNSUPPORTED_UTC_TIMING_SCHEME: "UNSUPPORTED_UTC_TIMING_SCHEME"
        },
        yn = function(e, t) {
            var n = e.baseUrl,
                i = e.initialization,
                r = void 0 === i ? {} : i,
                a = sn({
                    baseUrl: n,
                    source: r.sourceURL,
                    range: r.range
                }),
                s = sn({
                    baseUrl: n,
                    source: t.media,
                    range: t.mediaRange
                });
            return s.map = a, s
        },
        _n = function(e, t) {
            var n = e.duration,
                i = e.segmentUrls,
                r = void 0 === i ? [] : i;
            if (!n && !t || n && t) throw new Error(vn.SEGMENT_TIME_UNSPECIFIED);
            var a, s = r.map(function(t) {
                return yn(e, t)
            });
            n && (a = dn(e)), t && (a = un(e, t));
            var o = a.map(function(e, t) {
                if (s[t]) {
                    var n = s[t];
                    return n.timeline = e.timeline, n.duration = e.duration, n.number = e.number, n
                }
            }).filter(function(e) {
                return e
            });
            return o
        },
        bn = function(e) {
            var t = e.baseUrl,
                n = e.initialization,
                i = void 0 === n ? {} : n,
                r = e.sourceDuration,
                a = e.timescale,
                s = void 0 === a ? 1 : a,
                o = e.indexRange,
                u = void 0 === o ? "" : o,
                l = e.duration;
            if (!t) throw new Error(vn.NO_BASE_URL);
            var c = sn({
                    baseUrl: t,
                    source: i.sourceURL,
                    range: i.range
                }),
                d = sn({
                    baseUrl: t,
                    source: t,
                    range: u
                });
            if (d.map = c, l) {
                var h = dn(e);
                h.length && (d.duration = h[0].duration, d.timeline = h[0].timeline)
            } else r && (d.duration = r / s, d.timeline = 0);
            return d.number = 0, [d]
        },
        Tn = function(e) {
            var t, n, i = e.attributes,
                r = e.segmentInfo;
            if (r.template ? (n = gn, t = qt(i, r.template)) : r.base ? (n = bn, t = qt(i, r.base)) : r.list && (n = _n, t = qt(i, r.list)), !n) return {
                attributes: i
            };
            var a = n(t, r.timeline);
            if (t.duration) {
                var s = t,
                    o = s.duration,
                    u = s.timescale,
                    l = void 0 === u ? 1 : u;
                t.duration = o / l
            } else a.length ? t.duration = a.reduce(function(e, t) {
                return Math.max(e, Math.ceil(t.duration))
            }, 0) : t.duration = 0;
            return {
                attributes: t,
                segments: a
            }
        },
        Sn = function(e) {
            return e.map(Tn)
        },
        kn = function(e, t) {
            return Xt(e.childNodes).filter(function(e) {
                var n = e.tagName;
                return n === t
            })
        },
        wn = function(e) {
            return e.textContent.trim()
        },
        Cn = function(e) {
            var t = 31536e3,
                n = 2592e3,
                i = 86400,
                r = 3600,
                a = 60,
                s = /P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/,
                o = s.exec(e);
            if (!o) return 0;
            var u = o.slice(1),
                l = u[0],
                c = u[1],
                d = u[2],
                h = u[3],
                p = u[4],
                f = u[5];
            return parseFloat(l || 0) * t + parseFloat(c || 0) * n + parseFloat(d || 0) * i + parseFloat(h || 0) * r + parseFloat(p || 0) * a + parseFloat(f || 0)
        },
        En = function(e) {
            var t = /^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/;
            return t.test(e) && (e += "Z"), Date.parse(e)
        },
        An = {
            mediaPresentationDuration: function(e) {
                return Cn(e)
            },
            availabilityStartTime: function(e) {
                return En(e) / 1e3
            },
            minimumUpdatePeriod: function(e) {
                return Cn(e)
            },
            timeShiftBufferDepth: function(e) {
                return Cn(e)
            },
            start: function(e) {
                return Cn(e)
            },
            width: function(e) {
                return parseInt(e, 10)
            },
            height: function(e) {
                return parseInt(e, 10)
            },
            bandwidth: function(e) {
                return parseInt(e, 10)
            },
            startNumber: function(e) {
                return parseInt(e, 10)
            },
            timescale: function(e) {
                return parseInt(e, 10)
            },
            duration: function(e) {
                var t = parseInt(e, 10);
                return isNaN(t) ? Cn(e) : t
            },
            d: function(e) {
                return parseInt(e, 10)
            },
            t: function(e) {
                return parseInt(e, 10)
            },
            r: function(e) {
                return parseInt(e, 10)
            },
            DEFAULT: function(e) {
                return e
            }
        },
        Ln = function(e) {
            return e && e.attributes ? Xt(e.attributes).reduce(function(e, t) {
                var n = An[t.name] || An.DEFAULT;
                return e[t.name] = n(t.value), e
            }, {}) : {}
        },
        In = {
            "urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b": "org.w3.clearkey",
            "urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed": "com.widevine.alpha",
            "urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95": "com.microsoft.playready",
            "urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb": "com.adobe.primetime"
        },
        Pn = function(e, t) {
            return t.length ? Gt(e.map(function(e) {
                return t.map(function(t) {
                    return an(e, wn(t))
                })
            })) : e
        },
        xn = function(e) {
            var t = kn(e, "SegmentTemplate")[0],
                n = kn(e, "SegmentList")[0],
                i = n && kn(n, "SegmentURL").map(function(e) {
                    return qt({
                        tag: "SegmentURL"
                    }, Ln(e))
                }),
                r = kn(e, "SegmentBase")[0],
                a = n || t,
                s = a && kn(a, "SegmentTimeline")[0],
                o = n || r || t,
                u = o && kn(o, "Initialization")[0],
                l = t && Ln(t);
            l && u ? l.initialization = u && Ln(u) : l && l.initialization && (l.initialization = {
                sourceURL: l.initialization
            });
            var c = {
                template: l,
                timeline: s && kn(s, "S").map(function(e) {
                    return Ln(e)
                }),
                list: n && qt(Ln(n), {
                    segmentUrls: i,
                    initialization: Ln(u)
                }),
                base: r && qt(Ln(r), {
                    initialization: Ln(u)
                })
            };
            return Object.keys(c).forEach(function(e) {
                c[e] || delete c[e]
            }), c
        },
        Dn = function(e, t, n) {
            return function(i) {
                var r = kn(i, "BaseURL"),
                    a = Pn(t, r),
                    s = qt(e, Ln(i)),
                    o = xn(i);
                return a.map(function(e) {
                    return {
                        segmentInfo: qt(n, o),
                        attributes: qt(s, {
                            baseUrl: e
                        })
                    }
                })
            }
        },
        Un = function(e) {
            return e.reduce(function(e, t) {
                var n = Ln(t),
                    i = In[n.schemeIdUri];
                if (i) {
                    e[i] = {
                        attributes: n
                    };
                    var r = kn(t, "cenc:pssh")[0];
                    if (r) {
                        var a = wn(r),
                            s = a && u(a);
                        e[i].pssh = s
                    }
                }
                return e
            }, {})
        },
        On = function(e, t, n) {
            return function(i) {
                var r = Ln(i),
                    a = Pn(t, kn(i, "BaseURL")),
                    s = kn(i, "Role")[0],
                    o = {
                        role: Ln(s)
                    },
                    u = qt(e, r, o),
                    l = Un(kn(i, "ContentProtection"));
                Object.keys(l).length && (u = qt(u, {
                    contentProtection: l
                }));
                var c = xn(i),
                    d = kn(i, "Representation"),
                    h = qt(n, c);
                return Gt(d.map(Dn(u, a, h)))
            }
        },
        Mn = function(e, t) {
            return function(n, i) {
                var r = Pn(t, kn(n, "BaseURL")),
                    a = Ln(n),
                    s = parseInt(a.id, 10),
                    o = _.isNaN(s) ? i : s,
                    u = qt(e, {
                        periodIndex: o
                    }),
                    l = kn(n, "AdaptationSet"),
                    c = xn(n);
                return Gt(l.map(On(u, r, c)))
            }
        },
        Rn = function(e, t) {
            void 0 === t && (t = {});
            var n = t,
                i = n.manifestUri,
                r = void 0 === i ? "" : i,
                a = n.NOW,
                s = void 0 === a ? Date.now() : a,
                o = n.clientOffset,
                u = void 0 === o ? 0 : o,
                l = kn(e, "Period");
            if (!l.length) throw new Error(vn.INVALID_NUMBER_OF_PERIOD);
            var c = Ln(e),
                d = Pn([r], kn(e, "BaseURL"));
            return c.sourceDuration = c.mediaPresentationDuration || 0, c.NOW = s, c.clientOffset = u, Gt(l.map(Mn(c, d)))
        },
        jn = function(e) {
            if ("" === e) throw new Error(vn.DASH_EMPTY_MANIFEST);
            var t = new _.DOMParser,
                n = t.parseFromString(e, "application/xml"),
                i = n && "MPD" === n.documentElement.tagName ? n.documentElement : null;
            if (!i || i && i.getElementsByTagName("parsererror").length > 0) throw new Error(vn.DASH_INVALID_XML);
            return i
        },
        Nn = function(e) {
            var t = kn(e, "UTCTiming")[0];
            if (!t) return null;
            var n = Ln(t);
            switch (n.schemeIdUri) {
                case "urn:mpeg:dash:utc:http-head:2014":
                case "urn:mpeg:dash:utc:http-head:2012":
                    n.method = "HEAD";
                    break;
                case "urn:mpeg:dash:utc:http-xsdate:2014":
                case "urn:mpeg:dash:utc:http-iso:2014":
                case "urn:mpeg:dash:utc:http-xsdate:2012":
                case "urn:mpeg:dash:utc:http-iso:2012":
                    n.method = "GET";
                    break;
                case "urn:mpeg:dash:utc:direct:2014":
                case "urn:mpeg:dash:utc:direct:2012":
                    n.method = "DIRECT", n.value = Date.parse(n.value);
                    break;
                case "urn:mpeg:dash:utc:http-ntp:2014":
                case "urn:mpeg:dash:utc:ntp:2014":
                case "urn:mpeg:dash:utc:sntp:2014":
                default:
                    throw new Error(vn.UNSUPPORTED_UTC_TIMING_SCHEME)
            }
            return n
        },
        Bn = function(e, t) {
            return tn(Sn(Rn(jn(e), t)))
        },
        Fn = function(e) {
            return Nn(jn(e))
        },
        Vn = t.EventTarget,
        Hn = t.mergeOptions,
        qn = function(e, t) {
            for (var n = Hn(e, {
                duration: t.duration,
                minimumUpdatePeriod: t.minimumUpdatePeriod
            }), i = 0; i < t.playlists.length; i++) {
                var r = q(n, t.playlists[i]);
                r && (n = r)
            }
            return F(t, function(e, t, i, r) {
                if (e.playlists && e.playlists.length) {
                    var a = e.playlists[0].uri,
                        s = q(n, e.playlists[0]);
                    s && (n = s, n.mediaGroups[t][i][r].playlists[0] = n.playlists[a])
                }
            }), n
        },
        zn = function(e) {
            function t(e, n, i, r) {
                x(this, t);
                var a = M(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                if (a.hls_ = n, a.withCredentials = i, !e) throw new Error("A non-empty playlist URL or playlist is required");
                return a.on("minimumUpdatePeriod", function() {
                    a.refreshXml_()
                }), a.on("mediaupdatetimeout", function() {
                    a.refreshMedia_()
                }), "string" == typeof e ? (a.srcUrl = e, a.state = "HAVE_NOTHING", M(a)) : (a.masterPlaylistLoader_ = r, a.state = "HAVE_METADATA", a.started = !0, a.media(e), _.setTimeout(function() {
                    a.trigger("loadedmetadata")
                }, 0), a)
            }
            return O(t, e), D(t, [{
                key: "dispose",
                value: function() {
                    this.stopRequest(), _.clearTimeout(this.mediaUpdateTimeout)
                }
            }, {
                key: "stopRequest",
                value: function() {
                    if (this.request) {
                        var e = this.request;
                        this.request = null, e.onreadystatechange = null, e.abort()
                    }
                }
            }, {
                key: "media",
                value: function(e) {
                    if (!e) return this.media_;
                    if ("HAVE_NOTHING" === this.state) throw new Error("Cannot switch media playlist from " + this.state);
                    var t = this.state;
                    if ("string" == typeof e) {
                        if (!this.master.playlists[e]) throw new Error("Unknown playlist URI: " + e);
                        e = this.master.playlists[e]
                    }
                    var n = !this.media_ || e.uri !== this.media_.uri;
                    this.state = "HAVE_METADATA", n && (this.media_ && this.trigger("mediachanging"), this.media_ = e, this.refreshMedia_(), "HAVE_MASTER" !== t && this.trigger("mediachange"))
                }
            }, {
                key: "pause",
                value: function() {
                    this.stopRequest(), "HAVE_NOTHING" === this.state && (this.started = !1)
                }
            }, {
                key: "load",
                value: function() {
                    return this.started ? void this.trigger("loadedplaylist") : void this.start()
                }
            }, {
                key: "parseMasterXml",
                value: function() {
                    var e = Bn(this.masterXml_, {
                        manifestUri: this.srcUrl,
                        clientOffset: this.clientOffset_
                    });
                    e.uri = this.srcUrl;
                    for (var t = 0; t < e.playlists.length; t++) {
                        var n = "placeholder-uri-" + t;
                        e.playlists[t].uri = n, e.playlists[n] = e.playlists[t]
                    }
                    return F(e, function(t, n, i, r) {
                        if (t.playlists && t.playlists.length) {
                            var a = "placeholder-uri-" + n + "-" + i + "-" + r;
                            t.playlists[0].uri = a, e.playlists[a] = t.playlists[0]
                        }
                    }), z(e), W(e), e
                }
            }, {
                key: "start",
                value: function() {
                    var e = this;
                    this.started = !0, this.request = this.hls_.xhr({
                        uri: this.srcUrl,
                        withCredentials: this.withCredentials
                    }, function(t, n) {
                        if (e.request) {
                            if (e.request = null, t) return e.error = {
                                status: n.status,
                                message: "DASH playlist request error at URL: " + e.srcUrl,
                                responseText: n.responseText,
                                code: 2
                            }, "HAVE_NOTHING" === e.state && (e.started = !1), e.trigger("error");
                            e.masterXml_ = n.responseText, n.responseHeaders && n.responseHeaders.date ? e.masterLoaded_ = Date.parse(n.responseHeaders.date) : e.masterLoaded_ = Date.now(), e.syncClientServerClock_(e.onClientServerClockSync_.bind(e))
                        }
                    })
                }
            }, {
                key: "syncClientServerClock_",
                value: function(e) {
                    var t = this,
                        n = Fn(this.masterXml_);
                    return null === n ? (this.clientOffset_ = this.masterLoaded_ - Date.now(), e()) : "DIRECT" === n.method ? (this.clientOffset_ = n.value - Date.now(), e()) : void(this.request = this.hls_.xhr({
                        uri: b(this.srcUrl, n.value),
                        method: n.method,
                        withCredentials: this.withCredentials
                    }, function(i, r) {
                        if (t.request) {
                            if (i) return t.clientOffset_ = t.masterLoaded_ - Date.now(), e();
                            var a = void 0;
                            a = "HEAD" === n.method ? r.responseHeaders && r.responseHeaders.date ? Date.parse(r.responseHeaders.date) : t.masterLoaded_ : Date.parse(r.responseText), t.clientOffset_ = a - Date.now(), e()
                        }
                    }))
                }
            }, {
                key: "onClientServerClockSync_",
                value: function() {
                    var e = this;
                    this.master = this.parseMasterXml(), this.state = "HAVE_MASTER", this.trigger("loadedplaylist"), this.media_ || this.media(this.master.playlists[0]), _.setTimeout(function() {
                        e.trigger("loadedmetadata")
                    }, 0), this.master.minimumUpdatePeriod && _.setTimeout(function() {
                        e.trigger("minimumUpdatePeriod")
                    }, this.master.minimumUpdatePeriod)
                }
            }, {
                key: "refreshXml_",
                value: function() {
                    var e = this;
                    this.request = this.hls_.xhr({
                        uri: this.srcUrl,
                        withCredentials: this.withCredentials
                    }, function(t, n) {
                        if (e.request) {
                            if (e.request = null, t) return e.error = {
                                status: n.status,
                                message: "DASH playlist request error at URL: " + e.srcUrl,
                                responseText: n.responseText,
                                code: 2
                            }, "HAVE_NOTHING" === e.state && (e.started = !1), e.trigger("error");
                            e.masterXml_ = n.responseText;
                            var i = e.parseMasterXml();
                            e.master = qn(e.master, i), _.setTimeout(function() {
                                e.trigger("minimumUpdatePeriod")
                            }, e.master.minimumUpdatePeriod)
                        }
                    })
                }
            }, {
                key: "refreshMedia_",
                value: function() {
                    var e = this,
                        t = void 0,
                        n = void 0;
                    this.masterPlaylistLoader_ ? (t = this.masterPlaylistLoader_.master, n = this.masterPlaylistLoader_.parseMasterXml()) : (t = this.master, n = this.parseMasterXml());
                    var i = qn(t, n);
                    i ? (this.masterPlaylistLoader_ ? this.masterPlaylistLoader_.master = i : this.master = i, this.media_ = i.playlists[this.media_.uri]) : this.trigger("playlistunchanged"), this.media().endList || (this.mediaUpdateTimeout = _.setTimeout(function() {
                        e.trigger("mediaupdatetimeout")
                    }, G(this.media(), !!i))), this.trigger("loadedplaylist")
                }
            }]), t
        }(Vn),
        Wn = function(e) {
            return t.log.debug ? t.log.debug.bind(t, "VHS:", e + " >") : function() {}
        },
        Gn = function() {
            function e(t, n, i, r) {
                x(this, e), this.callbacks_ = [], this.pendingCallback_ = null, this.timestampOffset_ = 0, this.mediaSource = t, this.processedAppend_ = !1, this.type_ = i, this.mimeType_ = n, this.logger_ = Wn("SourceUpdater[" + i + "][" + n + "]"), "closed" === t.readyState ? t.addEventListener("sourceopen", this.createSourceBuffer_.bind(this, n, r)) : this.createSourceBuffer_(n, r)
            }
            return D(e, [{
                key: "createSourceBuffer_",
                value: function(e, t) {
                    var n = this;
                    return this.sourceBuffer_ = this.mediaSource.addSourceBuffer(e), this.logger_("created SourceBuffer"), t && (t.trigger("sourcebufferadded"), this.mediaSource.sourceBuffers.length < 2) ? void t.on("sourcebufferadded", function() {
                        n.start_()
                    }) : void this.start_()
                }
            }, {
                key: "start_",
                value: function() {
                    var e = this;
                    this.started_ = !0, this.onUpdateendCallback_ = function() {
                        var t = e.pendingCallback_;
                        e.pendingCallback_ = null, e.logger_("buffered [" + Ye(e.buffered()) + "]"), t && t(), e.runCallback_()
                    }, this.sourceBuffer_.addEventListener("updateend", this.onUpdateendCallback_), this.runCallback_()
                }
            }, {
                key: "abort",
                value: function(e) {
                    var t = this;
                    this.processedAppend_ && this.queueCallback_(function() {
                        t.sourceBuffer_.abort()
                    }, e)
                }
            }, {
                key: "appendBuffer",
                value: function(e, t) {
                    var n = this;
                    this.processedAppend_ = !0, this.queueCallback_(function() {
                        n.sourceBuffer_.appendBuffer(e)
                    }, t)
                }
            }, {
                key: "buffered",
                value: function() {
                    return this.sourceBuffer_ ? this.sourceBuffer_.buffered : t.createTimeRanges()
                }
            }, {
                key: "remove",
                value: function(e, t) {
                    var n = this,
                        i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : l;
                    this.processedAppend_ && this.queueCallback_(function() {
                        n.logger_("remove [" + e + " => " + t + "]"), n.sourceBuffer_.remove(e, t)
                    }, i)
                }
            }, {
                key: "updating",
                value: function() {
                    return !this.sourceBuffer_ || this.sourceBuffer_.updating || this.pendingCallback_
                }
            }, {
                key: "timestampOffset",
                value: function(e) {
                    var t = this;
                    return "undefined" != typeof e && (this.queueCallback_(function() {
                        t.sourceBuffer_.timestampOffset = e
                    }), this.timestampOffset_ = e), this.timestampOffset_
                }
            }, {
                key: "queueCallback_",
                value: function(e, t) {
                    this.callbacks_.push([e.bind(this), t]), this.runCallback_()
                }
            }, {
                key: "runCallback_",
                value: function() {
                    var e = void 0;
                    !this.updating() && this.callbacks_.length && this.started_ && (e = this.callbacks_.shift(), this.pendingCallback_ = e[1], e[0]())
                }
            }, {
                key: "dispose",
                value: function() {
                    this.sourceBuffer_.removeEventListener("updateend", this.onUpdateendCallback_), this.sourceBuffer_ && "open" === this.mediaSource.readyState && this.sourceBuffer_.abort()
                }
            }]), e
        }(),
        Xn = {
            GOAL_BUFFER_LENGTH: 30,
            MAX_GOAL_BUFFER_LENGTH: 120,
            GOAL_BUFFER_LENGTH_RATE: 1,
            INITIAL_BANDWIDTH: 8388608,
            BANDWIDTH_VARIANCE: 1.2,
            BUFFER_LOW_WATER_LINE: 0,
            MAX_BUFFER_LOW_WATER_LINE: 30,
            BUFFER_LOW_WATER_LINE_RATE: 1
        },
        Yn = function(e) {
            return e >>> 0
        },
        $n = {
            toUnsigned: Yn
        },
        Qn = $n.toUnsigned;
    jt = function(e, t) {
        var n, i, r, a, s, o = [];
        if (!t.length) return null;
        for (n = 0; n < e.byteLength;) i = Qn(e[n] << 24 | e[n + 1] << 16 | e[n + 2] << 8 | e[n + 3]), r = Nt(e.subarray(n + 4, n + 8)), a = i > 1 ? n + i : e.byteLength, r === t[0] && (1 === t.length ? o.push(e.subarray(n + 8, a)) : (s = jt(e.subarray(n + 8, a), t.slice(1)), s.length && (o = o.concat(s)))), n = a;
        return o
    }, Nt = function(e) {
        var t = "";
        return t += String.fromCharCode(e[0]), t += String.fromCharCode(e[1]), t += String.fromCharCode(e[2]), t += String.fromCharCode(e[3])
    }, Bt = function(e) {
        var t = {},
            n = jt(e, ["moov", "trak"]);
        return n.reduce(function(e, t) {
            var n, i, r, a, s;
            return (n = jt(t, ["tkhd"])[0]) ? (i = n[0], r = 0 === i ? 12 : 20, a = Qn(n[r] << 24 | n[r + 1] << 16 | n[r + 2] << 8 | n[r + 3]), (s = jt(t, ["mdia", "mdhd"])[0]) ? (i = s[0], r = 0 === i ? 12 : 20, e[a] = Qn(s[r] << 24 | s[r + 1] << 16 | s[r + 2] << 8 | s[r + 3]), e) : null) : null
        }, t)
    }, Ft = function(e, t) {
        var n, i, r;
        return n = jt(t, ["moof", "traf"]), i = [].concat.apply([], n.map(function(t) {
            return jt(t, ["tfhd"]).map(function(n) {
                var i, r, a;
                return i = Qn(n[4] << 24 | n[5] << 16 | n[6] << 8 | n[7]), r = e[i] || 9e4, a = jt(t, ["tfdt"]).map(function(e) {
                    var t, n;
                    return t = e[0], n = Qn(e[4] << 24 | e[5] << 16 | e[6] << 8 | e[7]), 1 === t && (n *= Math.pow(2, 32), n += Qn(e[8] << 24 | e[9] << 16 | e[10] << 8 | e[11])), n
                })[0], a = a || 1 / 0, a / r
            })
        })), r = Math.min.apply(null, i), isFinite(r) ? r : 0
    }, Vt = function(e) {
        var t = jt(e, ["moov", "trak"]),
            n = [];
        return t.forEach(function(e) {
            var t = jt(e, ["mdia", "hdlr"]),
                i = jt(e, ["tkhd"]);
            t.forEach(function(e, t) {
                var r, a, s, o = Nt(e.subarray(8, 12)),
                    u = i[t];
                "vide" === o && (r = new DataView(u.buffer, u.byteOffset, u.byteLength), a = r.getUint8(0), s = 0 === a ? r.getUint32(12) : r.getUint32(20), n.push(s))
            })
        }), n
    };
    var Kn, Jn, Zn, ei, ti, ni, ii, ri, ai, si, oi, ui, li, ci, di, hi, pi, fi, mi, gi, vi, yi, _i, bi, Ti, Si, ki, wi, Ci, Ei, Ai, Li, Ii, Pi, xi, Di, Ui = {
            findBox: jt,
            parseType: Nt,
            timescale: Bt,
            startTime: Ft,
            videoTrackIds: Vt
        },
        Oi = {
            FAILURE: 2,
            TIMEOUT: -101,
            ABORTED: -102
        },
        Mi = function(e) {
            var t = void 0,
                n = void 0;
            return n = e.offset + e.length - 1, t = e.offset, "bytes=" + t + "-" + n
        },
        Ri = function(e) {
            var t = {};
            return e.byterange && (t.Range = Mi(e.byterange)), t
        },
        ji = function(e) {
            e.forEach(function(e) {
                e.abort()
            })
        },
        Ni = function(e) {
            return {
                bandwidth: e.bandwidth,
                bytesReceived: e.bytesReceived || 0,
                roundTripTime: e.roundTripTime || 0
            }
        },
        Bi = function(e) {
            var t = e.target,
                n = Date.now() - t.requestTime,
                i = {
                    bandwidth: 1 / 0,
                    bytesReceived: 0,
                    roundTripTime: n || 0
                };
            return i.bytesReceived = e.loaded, i.bandwidth = Math.floor(i.bytesReceived / i.roundTripTime * 8 * 1e3), i
        },
        Fi = function(e, t) {
            return t.timedout ? {
                status: t.status,
                message: "HLS request timed-out at URL: " + t.uri,
                code: Oi.TIMEOUT,
                xhr: t
            } : t.aborted ? {
                status: t.status,
                message: "HLS request aborted at URL: " + t.uri,
                code: Oi.ABORTED,
                xhr: t
            } : e ? {
                status: t.status,
                message: "HLS request errored at URL: " + t.uri,
                code: Oi.FAILURE,
                xhr: t
            } : null
        },
        Vi = function(e, t) {
            return function(n, i) {
                var r = i.response,
                    a = Fi(n, i);
                if (a) return t(a, e);
                if (16 !== r.byteLength) return t({
                    status: i.status,
                    message: "Invalid HLS key at URL: " + i.uri,
                    code: Oi.FAILURE,
                    xhr: i
                }, e);
                var s = new DataView(r);
                return e.key.bytes = new Uint32Array([s.getUint32(0), s.getUint32(4), s.getUint32(8), s.getUint32(12)]), t(null, e)
            }
        },
        Hi = function(e, t, n) {
            return function(i, r) {
                var a = r.response,
                    s = Fi(i, r);
                return s ? n(s, e) : 0 === a.byteLength ? n({
                    status: r.status,
                    message: "Empty HLS segment content at URL: " + r.uri,
                    code: Oi.FAILURE,
                    xhr: r
                }, e) : (e.map.bytes = new Uint8Array(r.response), t.isInitialized() || t.init(), e.map.timescales = Ui.timescale(e.map.bytes), e.map.videoTrackIds = Ui.videoTrackIds(e.map.bytes), n(null, e))
            }
        },
        qi = function(e, t, n) {
            return function(i, r) {
                var a = r.response,
                    s = Fi(i, r),
                    o = void 0;
                return s ? n(s, e) : 0 === a.byteLength ? n({
                    status: r.status,
                    message: "Empty HLS segment content at URL: " + r.uri,
                    code: Oi.FAILURE,
                    xhr: r
                }, e) : (e.stats = Ni(r), e.key ? e.encryptedBytes = new Uint8Array(r.response) : e.bytes = new Uint8Array(r.response), e.map && e.map.bytes && (t.isInitialized() || t.init(), o = t.parse(e.bytes, e.map.videoTrackIds, e.map.timescales), o && o.captions && (e.captionStreams = o.captionStreams, e.fmp4Captions = o.captions)), n(null, e))
            }
        },
        zi = function(e, t, n) {
            var i = function r(i) {
                if (i.data.source === t.requestId) {
                    e.removeEventListener("message", r);
                    var a = i.data.decrypted;
                    return t.bytes = new Uint8Array(a.bytes, a.byteOffset, a.byteLength), n(null, t)
                }
            };
            e.addEventListener("message", i), e.postMessage(Re({
                source: t.requestId,
                encrypted: t.encryptedBytes,
                key: t.key.bytes,
                iv: t.key.iv
            }), [t.encryptedBytes.buffer, t.key.bytes.buffer])
        },
        Wi = function(e) {
            return e.reduce(function(e, t) {
                return t.code > e.code ? t : e
            })
        },
        Gi = function(e, t, n) {
            var i = [],
                r = 0;
            return function(a, s) {
                if (a && (ji(e), i.push(a)), r += 1, r === e.length) {
                    if (s.endOfAllRequests = Date.now(), i.length > 0) {
                        var o = Wi(i);
                        return n(o, s)
                    }
                    return s.encryptedBytes ? zi(t, s, n) : n(null, s)
                }
            }
        },
        Xi = function(e, n) {
            return function(i) {
                return e.stats = t.mergeOptions(e.stats, Bi(i)), !e.stats.firstBytesReceivedAt && e.stats.bytesReceived && (e.stats.firstBytesReceivedAt = Date.now()), n(i, e)
            }
        },
        Yi = function(e, n, i, r, a, s, o) {
            var u = [],
                l = Gi(u, i, o);
            if (a.key) {
                var c = t.mergeOptions(n, {
                        uri: a.key.resolvedUri,
                        responseType: "arraybuffer"
                    }),
                    d = Vi(a, l),
                    h = e(c, d);
                u.push(h)
            }
            if (a.map && !a.map.bytes) {
                var p = t.mergeOptions(n, {
                        uri: a.map.resolvedUri,
                        responseType: "arraybuffer",
                        headers: Ri(a.map)
                    }),
                    f = Hi(a, r, l),
                    m = e(p, f);
                u.push(m)
            }
            var g = t.mergeOptions(n, {
                    uri: a.resolvedUri,
                    responseType: "arraybuffer",
                    headers: Ri(a)
                }),
                v = qi(a, r, l),
                y = e(g, v);
            return y.addEventListener("progress", Xi(a, s)), u.push(y),
                function() {
                    return ji(u)
                }
        },
        $i = function(e, t) {
            var n = void 0;
            return e ? (n = _.getComputedStyle(e), n ? n[t] : "") : ""
        },
        Qi = function(e, t) {
            var n = e.slice();
            e.sort(function(e, i) {
                var r = t(e, i);
                return 0 === r ? n.indexOf(e) - n.indexOf(i) : r
            })
        },
        Ki = function(e, t) {
            var n = void 0,
                i = void 0;
            return e.attributes.BANDWIDTH && (n = e.attributes.BANDWIDTH), n = n || _.Number.MAX_VALUE, t.attributes.BANDWIDTH && (i = t.attributes.BANDWIDTH), i = i || _.Number.MAX_VALUE, n - i
        },
        Ji = function(e, t) {
            var n = void 0,
                i = void 0;
            return e.attributes.RESOLUTION && e.attributes.RESOLUTION.width && (n = e.attributes.RESOLUTION.width), n = n || _.Number.MAX_VALUE, t.attributes.RESOLUTION && t.attributes.RESOLUTION.width && (i = t.attributes.RESOLUTION.width), i = i || _.Number.MAX_VALUE, n === i && e.attributes.BANDWIDTH && t.attributes.BANDWIDTH ? e.attributes.BANDWIDTH - t.attributes.BANDWIDTH : n - i
        },
        Zi = function(e, t, n, i, r) {
            var a = e.playlists.map(function(e) {
                var t = void 0,
                    n = void 0,
                    i = void 0;
                return t = e.attributes.RESOLUTION && e.attributes.RESOLUTION.width, n = e.attributes.RESOLUTION && e.attributes.RESOLUTION.height, i = e.attributes.BANDWIDTH, i = i || _.Number.MAX_VALUE, {
                    bandwidth: i,
                    width: t,
                    height: n,
                    playlist: e
                }
            });
            Qi(a, function(e, t) {
                return e.bandwidth - t.bandwidth
            }), a = a.filter(function(e) {
                return !ve.isIncompatible(e.playlist)
            });
            var s = a.filter(function(e) {
                return ve.isEnabled(e.playlist)
            });
            s.length || (s = a.filter(function(e) {
                return !ve.isDisabled(e.playlist)
            }));
            var o = s.filter(function(e) {
                    return e.bandwidth * Xn.BANDWIDTH_VARIANCE < t
                }),
                u = o[o.length - 1],
                l = o.filter(function(e) {
                    return e.bandwidth === u.bandwidth
                })[0];
            if (r === !1) {
                var c = l || s[0] || a[0];
                return c ? c.playlist : null
            }
            var d = o.filter(function(e) {
                return e.width && e.height
            });
            Qi(d, function(e, t) {
                return e.width - t.width
            });
            var h = d.filter(function(e) {
                return e.width === n && e.height === i
            });
            u = h[h.length - 1];
            var p = h.filter(function(e) {
                    return e.bandwidth === u.bandwidth
                })[0],
                f = void 0,
                m = void 0,
                g = void 0;
            p || (f = d.filter(function(e) {
                return e.width > n || e.height > i
            }), m = f.filter(function(e) {
                return e.width === f[0].width && e.height === f[0].height
            }), u = m[m.length - 1], g = m.filter(function(e) {
                return e.bandwidth === u.bandwidth
            })[0]);
            var v = g || p || l || s[0] || a[0];
            return v ? v.playlist : null
        },
        er = function() {
            return Zi(this.playlists.master, this.systemBandwidth, parseInt($i(this.tech_.el(), "width"), 10), parseInt($i(this.tech_.el(), "height"), 10), this.limitRenditionByPlayerDimensions)
        },
        tr = function(e) {
            var t = e.master,
                n = e.currentTime,
                i = e.bandwidth,
                r = e.duration,
                a = e.segmentDuration,
                s = e.timeUntilRebuffer,
                o = e.currentTimeline,
                u = e.syncController,
                l = t.playlists.filter(function(e) {
                    return !ve.isIncompatible(e)
                }),
                c = l.filter(ve.isEnabled);
            c.length || (c = l.filter(function(e) {
                return !ve.isDisabled(e)
            }));
            var d = c.filter(ve.hasAttribute.bind(null, "BANDWIDTH")),
                h = d.map(function(e) {
                    var t = u.getSyncPoint(e, r, o, n),
                        l = t ? 1 : 2,
                        c = ve.estimateSegmentRequestTime(a, i, e),
                        d = c * l - s;
                    return {
                        playlist: e,
                        rebufferingImpact: d
                    }
                }),
                p = h.filter(function(e) {
                    return e.rebufferingImpact <= 0
                });
            return Qi(p, function(e, t) {
                return Ki(t.playlist, e.playlist)
            }), p.length ? p[0] : (Qi(h, function(e, t) {
                return e.rebufferingImpact - t.rebufferingImpact
            }), h[0] || null)
        },
        nr = function() {
            var e = this.playlists.master.playlists.filter(ve.isEnabled);
            Qi(e, function(e, t) {
                return Ki(e, t)
            });
            var t = e.filter(function(e) {
                return mt(e.attributes.CODECS).videoCodec
            });
            return t[0] || null
        },
        ir = function(e, t, n) {
            for (var i in n)
                if (!e[i]) {
                    t.trigger({
                        type: "usage",
                        name: "hls-608"
                    });
                    var r = t.textTracks().getTrackById(i);
                    r ? e[i] = r : e[i] = t.addRemoteTextTrack({
                        kind: "captions",
                        id: i,
                        label: i
                    }, !1).track
                }
        },
        rr = function(e) {
            var t = e.inbandTextTracks,
                n = e.captionArray,
                i = e.timestampOffset;
            if (n) {
                var r = window.WebKitDataCue || window.VTTCue;
                n.forEach(function(e) {
                    var n = e.stream,
                        a = e.startTime,
                        s = e.endTime;
                    t[n] && (a += i, s += i, t[n].addCue(new r(a, s, e.text)))
                })
            }
        },
        ar = Math.pow(2, 32) - 1;
    ! function() {
        var e;
        if (_i = {
            avc1: [],
            avcC: [],
            btrt: [],
            dinf: [],
            dref: [],
            esds: [],
            ftyp: [],
            hdlr: [],
            mdat: [],
            mdhd: [],
            mdia: [],
            mfhd: [],
            minf: [],
            moof: [],
            moov: [],
            mp4a: [],
            mvex: [],
            mvhd: [],
            sdtp: [],
            smhd: [],
            stbl: [],
            stco: [],
            stsc: [],
            stsd: [],
            stsz: [],
            stts: [],
            styp: [],
            tfdt: [],
            tfhd: [],
            traf: [],
            trak: [],
            trun: [],
            trex: [],
            tkhd: [],
            vmhd: []
        }, "undefined" != typeof Uint8Array) {
            for (e in _i) _i.hasOwnProperty(e) && (_i[e] = [e.charCodeAt(0), e.charCodeAt(1), e.charCodeAt(2), e.charCodeAt(3)]);
            bi = new Uint8Array(["i".charCodeAt(0), "s".charCodeAt(0), "o".charCodeAt(0), "m".charCodeAt(0)]), Si = new Uint8Array(["a".charCodeAt(0), "v".charCodeAt(0), "c".charCodeAt(0), "1".charCodeAt(0)]), Ti = new Uint8Array([0, 0, 0, 1]), ki = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 118, 105, 100, 101, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 86, 105, 100, 101, 111, 72, 97, 110, 100, 108, 101, 114, 0]), wi = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 115, 111, 117, 110, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 83, 111, 117, 110, 100, 72, 97, 110, 100, 108, 101, 114, 0]), Ci = {
                video: ki,
                audio: wi
            }, Li = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 12, 117, 114, 108, 32, 0, 0, 0, 1]), Ai = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]), Ii = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]), Pi = Ii, xi = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]), Di = Ii, Ei = new Uint8Array([0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0])
        }
    }(), Kn = function(e) {
            var t, n, i, r = [],
                a = 0;
            for (t = 1; t < arguments.length; t++) r.push(arguments[t]);
            for (t = r.length; t--;) a += r[t].byteLength;
            for (n = new Uint8Array(a + 8), i = new DataView(n.buffer, n.byteOffset, n.byteLength), i.setUint32(0, n.byteLength), n.set(e, 4), t = 0, a = 8; t < r.length; t++) n.set(r[t], a), a += r[t].byteLength;
            return n
        }, Jn = function() {
            return Kn(_i.dinf, Kn(_i.dref, Li))
        }, Zn = function(e) {
            return Kn(_i.esds, new Uint8Array([0, 0, 0, 0, 3, 25, 0, 0, 0, 4, 17, 64, 21, 0, 6, 0, 0, 0, 218, 192, 0, 0, 218, 192, 5, 2, e.audioobjecttype << 3 | e.samplingfrequencyindex >>> 1, e.samplingfrequencyindex << 7 | e.channelcount << 3, 6, 1, 2]))
        }, ei = function() {
            return Kn(_i.ftyp, bi, Ti, bi, Si)
        }, hi = function(e) {
            return Kn(_i.hdlr, Ci[e])
        }, ti = function(e) {
            return Kn(_i.mdat, e)
        }, di = function(e) {
            var t = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 3, 0, 1, 95, 144, e.duration >>> 24 & 255, e.duration >>> 16 & 255, e.duration >>> 8 & 255, 255 & e.duration, 85, 196, 0, 0]);
            return e.samplerate && (t[12] = e.samplerate >>> 24 & 255, t[13] = e.samplerate >>> 16 & 255, t[14] = e.samplerate >>> 8 & 255, t[15] = 255 & e.samplerate), Kn(_i.mdhd, t)
        }, ci = function(e) {
            return Kn(_i.mdia, di(e), hi(e.type), ii(e))
        }, ni = function(e) {
            return Kn(_i.mfhd, new Uint8Array([0, 0, 0, 0, (4278190080 & e) >> 24, (16711680 & e) >> 16, (65280 & e) >> 8, 255 & e]))
        }, ii = function(e) {
            return Kn(_i.minf, "video" === e.type ? Kn(_i.vmhd, Ei) : Kn(_i.smhd, Ai), Jn(), fi(e))
        }, ri = function(e, t) {
            for (var n = [], i = t.length; i--;) n[i] = gi(t[i]);
            return Kn.apply(null, [_i.moof, ni(e)].concat(n))
        }, ai = function(e) {
            for (var t = e.length, n = []; t--;) n[t] = ui(e[t]);
            return Kn.apply(null, [_i.moov, oi(4294967295)].concat(n).concat(si(e)))
        }, si = function(e) {
            for (var t = e.length, n = []; t--;) n[t] = vi(e[t]);
            return Kn.apply(null, [_i.mvex].concat(n))
        }, oi = function(e) {
            var t = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 2, 0, 1, 95, 144, (4278190080 & e) >> 24, (16711680 & e) >> 16, (65280 & e) >> 8, 255 & e, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 255, 255, 255, 255]);
            return Kn(_i.mvhd, t)
        }, pi = function(e) {
            var t, n, i = e.samples || [],
                r = new Uint8Array(4 + i.length);
            for (n = 0; n < i.length; n++) t = i[n].flags, r[n + 4] = t.dependsOn << 4 | t.isDependedOn << 2 | t.hasRedundancy;
            return Kn(_i.sdtp, r)
        }, fi = function(e) {
            return Kn(_i.stbl, mi(e), Kn(_i.stts, Di), Kn(_i.stsc, Pi), Kn(_i.stsz, xi), Kn(_i.stco, Ii))
        },
        function() {
            var e, t;
            mi = function(n) {
                return Kn(_i.stsd, new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1]), "video" === n.type ? e(n) : t(n))
            }, e = function(e) {
                var t, n = e.sps || [],
                    i = e.pps || [],
                    r = [],
                    a = [];
                for (t = 0; t < n.length; t++) r.push((65280 & n[t].byteLength) >>> 8), r.push(255 & n[t].byteLength), r = r.concat(Array.prototype.slice.call(n[t]));
                for (t = 0; t < i.length; t++) a.push((65280 & i[t].byteLength) >>> 8), a.push(255 & i[t].byteLength), a = a.concat(Array.prototype.slice.call(i[t]));
                return Kn(_i.avc1, new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, (65280 & e.width) >> 8, 255 & e.width, (65280 & e.height) >> 8, 255 & e.height, 0, 72, 0, 0, 0, 72, 0, 0, 0, 0, 0, 0, 0, 1, 19, 118, 105, 100, 101, 111, 106, 115, 45, 99, 111, 110, 116, 114, 105, 98, 45, 104, 108, 115, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 24, 17, 17]), Kn(_i.avcC, new Uint8Array([1, e.profileIdc, e.profileCompatibility, e.levelIdc, 255].concat([n.length]).concat(r).concat([i.length]).concat(a))), Kn(_i.btrt, new Uint8Array([0, 28, 156, 128, 0, 45, 198, 192, 0, 45, 198, 192])))
            }, t = function(e) {
                return Kn(_i.mp4a, new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, (65280 & e.channelcount) >> 8, 255 & e.channelcount, (65280 & e.samplesize) >> 8, 255 & e.samplesize, 0, 0, 0, 0, (65280 & e.samplerate) >> 8, 255 & e.samplerate, 0, 0]), Zn(e))
            }
        }(), li = function(e) {
            var t = new Uint8Array([0, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, 0, (4278190080 & e.id) >> 24, (16711680 & e.id) >> 16, (65280 & e.id) >> 8, 255 & e.id, 0, 0, 0, 0, (4278190080 & e.duration) >> 24, (16711680 & e.duration) >> 16, (65280 & e.duration) >> 8, 255 & e.duration, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0, (65280 & e.width) >> 8, 255 & e.width, 0, 0, (65280 & e.height) >> 8, 255 & e.height, 0, 0]);
            return Kn(_i.tkhd, t)
        }, gi = function(e) {
            var t, n, i, r, a, s, o;
            return t = Kn(_i.tfhd, new Uint8Array([0, 0, 0, 58, (4278190080 & e.id) >> 24, (16711680 & e.id) >> 16, (65280 & e.id) >> 8, 255 & e.id, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0])), s = Math.floor(e.baseMediaDecodeTime / (ar + 1)), o = Math.floor(e.baseMediaDecodeTime % (ar + 1)), n = Kn(_i.tfdt, new Uint8Array([1, 0, 0, 0, s >>> 24 & 255, s >>> 16 & 255, s >>> 8 & 255, 255 & s, o >>> 24 & 255, o >>> 16 & 255, o >>> 8 & 255, 255 & o])), a = 92, "audio" === e.type ? (i = yi(e, a), Kn(_i.traf, t, n, i)) : (r = pi(e), i = yi(e, r.length + a), Kn(_i.traf, t, n, i, r))
        }, ui = function(e) {
            return e.duration = e.duration || 4294967295, Kn(_i.trak, li(e), ci(e))
        }, vi = function(e) {
            var t = new Uint8Array([0, 0, 0, 0, (4278190080 & e.id) >> 24, (16711680 & e.id) >> 16, (65280 & e.id) >> 8, 255 & e.id, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1]);
            return "video" !== e.type && (t[t.length - 1] = 0), Kn(_i.trex, t)
        },
        function() {
            var e, t, n;
            n = function(e, t) {
                var n = 0,
                    i = 0,
                    r = 0,
                    a = 0;
                return e.length && (void 0 !== e[0].duration && (n = 1), void 0 !== e[0].size && (i = 2), void 0 !== e[0].flags && (r = 4), void 0 !== e[0].compositionTimeOffset && (a = 8)), [0, 0, n | i | r | a, 1, (4278190080 & e.length) >>> 24, (16711680 & e.length) >>> 16, (65280 & e.length) >>> 8, 255 & e.length, (4278190080 & t) >>> 24, (16711680 & t) >>> 16, (65280 & t) >>> 8, 255 & t]
            }, t = function(e, t) {
                var i, r, a, s;
                for (r = e.samples || [], t += 20 + 16 * r.length, i = n(r, t), s = 0; s < r.length; s++) a = r[s], i = i.concat([(4278190080 & a.duration) >>> 24, (16711680 & a.duration) >>> 16, (65280 & a.duration) >>> 8, 255 & a.duration, (4278190080 & a.size) >>> 24, (16711680 & a.size) >>> 16, (65280 & a.size) >>> 8, 255 & a.size, a.flags.isLeading << 2 | a.flags.dependsOn, a.flags.isDependedOn << 6 | a.flags.hasRedundancy << 4 | a.flags.paddingValue << 1 | a.flags.isNonSyncSample, 61440 & a.flags.degradationPriority, 15 & a.flags.degradationPriority, (4278190080 & a.compositionTimeOffset) >>> 24, (16711680 & a.compositionTimeOffset) >>> 16, (65280 & a.compositionTimeOffset) >>> 8, 255 & a.compositionTimeOffset]);
                return Kn(_i.trun, new Uint8Array(i))
            }, e = function(e, t) {
                var i, r, a, s;
                for (r = e.samples || [], t += 20 + 8 * r.length, i = n(r, t), s = 0; s < r.length; s++) a = r[s], i = i.concat([(4278190080 & a.duration) >>> 24, (16711680 & a.duration) >>> 16, (65280 & a.duration) >>> 8, 255 & a.duration, (4278190080 & a.size) >>> 24, (16711680 & a.size) >>> 16, (65280 & a.size) >>> 8, 255 & a.size]);
                return Kn(_i.trun, new Uint8Array(i))
            }, yi = function(n, i) {
                return "audio" === n.type ? e(n, i) : t(n, i)
            }
        }();
    var sr = {
            ftyp: ei,
            mdat: ti,
            moof: ri,
            moov: ai,
            initSegment: function(e) {
                var t, n = ei(),
                    i = ai(e);
                return t = new Uint8Array(n.byteLength + i.byteLength), t.set(n), t.set(i, n.byteLength), t
            }
        },
        or = function() {
            this.init = function() {
                var e = {};
                this.on = function(t, n) {
                    e[t] || (e[t] = []), e[t] = e[t].concat(n)
                }, this.off = function(t, n) {
                    var i;
                    return e[t] ? (i = e[t].indexOf(n), e[t] = e[t].slice(), e[t].splice(i, 1), i > -1) : !1
                }, this.trigger = function(t) {
                    var n, i, r, a;
                    if (n = e[t])
                        if (2 === arguments.length)
                            for (r = n.length, i = 0; r > i; ++i) n[i].call(this, arguments[1]);
                        else {
                            for (a = [], i = arguments.length, i = 1; i < arguments.length; ++i) a.push(arguments[i]);
                            for (r = n.length, i = 0; r > i; ++i) n[i].apply(this, a)
                        }
                }, this.dispose = function() {
                    e = {}
                }
            }
        };
    or.prototype.pipe = function(e) {
        return this.on("data", function(t) {
            e.push(t)
        }), this.on("done", function(t) {
            e.flush(t)
        }), e
    }, or.prototype.push = function(e) {
        this.trigger("data", e)
    }, or.prototype.flush = function(e) {
        this.trigger("done", e)
    };
    var ur = or,
        lr = function(e) {
            var t, n, i = [],
                r = [];
            for (i.byteLength = 0, t = 0; t < e.length; t++) n = e[t], "access_unit_delimiter_rbsp" === n.nalUnitType ? (i.length && (i.duration = n.dts - i.dts, r.push(i)), i = [n], i.byteLength = n.data.byteLength, i.pts = n.pts, i.dts = n.dts) : ("slice_layer_without_partitioning_rbsp_idr" === n.nalUnitType && (i.keyFrame = !0), i.duration = n.dts - i.dts, i.byteLength += n.data.byteLength, i.push(n));
            return r.length && (!i.duration || i.duration <= 0) && (i.duration = r[r.length - 1].duration), r.push(i), r
        },
        cr = function(e) {
            var t, n, i = [],
                r = [];
            for (i.byteLength = 0, i.nalCount = 0, i.duration = 0, i.pts = e[0].pts, i.dts = e[0].dts, r.byteLength = 0, r.nalCount = 0, r.duration = 0, r.pts = e[0].pts, r.dts = e[0].dts, t = 0; t < e.length; t++) n = e[t], n.keyFrame ? (i.length && (r.push(i), r.byteLength += i.byteLength, r.nalCount += i.nalCount, r.duration += i.duration), i = [n], i.nalCount = n.length, i.byteLength = n.byteLength, i.pts = n.pts, i.dts = n.dts, i.duration = n.duration) : (i.duration += n.duration, i.nalCount += n.length, i.byteLength += n.byteLength, i.push(n));
            return r.length && i.duration <= 0 && (i.duration = r[r.length - 1].duration), r.byteLength += i.byteLength, r.nalCount += i.nalCount, r.duration += i.duration, r.push(i), r
        },
        dr = function(e) {
            var t;
            return !e[0][0].keyFrame && e.length > 1 && (t = e.shift(), e.byteLength -= t.byteLength, e.nalCount -= t.nalCount, e[0][0].dts = t.dts, e[0][0].pts = t.pts, e[0][0].duration += t.duration), e
        },
        hr = function() {
            return {
                size: 0,
                flags: {
                    isLeading: 0,
                    dependsOn: 1,
                    isDependedOn: 0,
                    hasRedundancy: 0,
                    degradationPriority: 0,
                    isNonSyncSample: 1
                }
            }
        },
        pr = function(e, t) {
            var n = hr();
            return n.dataOffset = t, n.compositionTimeOffset = e.pts - e.dts, n.duration = e.duration, n.size = 4 * e.length, n.size += e.byteLength, e.keyFrame && (n.flags.dependsOn = 2, n.flags.isNonSyncSample = 0), n
        },
        fr = function(e, t) {
            var n, i, r, a, s, o = t || 0,
                u = [];
            for (n = 0; n < e.length; n++)
                for (a = e[n], i = 0; i < a.length; i++) s = a[i], r = pr(s, o), o += r.size, u.push(r);
            return u
        },
        mr = function(e) {
            var t, n, i, r, a, s, o = 0,
                u = e.byteLength,
                l = e.nalCount,
                c = u + 4 * l,
                d = new Uint8Array(c),
                h = new DataView(d.buffer);
            for (t = 0; t < e.length; t++)
                for (r = e[t], n = 0; n < r.length; n++)
                    for (a = r[n], i = 0; i < a.length; i++) s = a[i], h.setUint32(o, s.data.byteLength), o += 4, d.set(s.data, o), o += s.data.byteLength;
            return d
        },
        gr = {
            groupNalsIntoFrames: lr,
            groupFramesIntoGops: cr,
            extendFirstKeyFrame: dr,
            generateSampleTable: fr,
            concatenateNalData: mr
        },
        vr = 9e4,
        yr = function(e, t) {
            "number" == typeof t.pts && (void 0 === e.timelineStartInfo.pts && (e.timelineStartInfo.pts = t.pts), void 0 === e.minSegmentPts ? e.minSegmentPts = t.pts : e.minSegmentPts = Math.min(e.minSegmentPts, t.pts), void 0 === e.maxSegmentPts ? e.maxSegmentPts = t.pts : e.maxSegmentPts = Math.max(e.maxSegmentPts, t.pts)), "number" == typeof t.dts && (void 0 === e.timelineStartInfo.dts && (e.timelineStartInfo.dts = t.dts), void 0 === e.minSegmentDts ? e.minSegmentDts = t.dts : e.minSegmentDts = Math.min(e.minSegmentDts, t.dts), void 0 === e.maxSegmentDts ? e.maxSegmentDts = t.dts : e.maxSegmentDts = Math.max(e.maxSegmentDts, t.dts))
        },
        _r = function(e) {
            delete e.minSegmentDts, delete e.maxSegmentDts, delete e.minSegmentPts, delete e.maxSegmentPts
        },
        br = function(e, t) {
            var n, i, r = e.minSegmentDts;
            return t || (r -= e.timelineStartInfo.dts), n = e.timelineStartInfo.baseMediaDecodeTime, n += r, n = Math.max(0, n), "audio" === e.type && (i = e.samplerate / vr, n *= i, n = Math.floor(n)), n
        },
        Tr = {
            clearDtsInfo: _r,
            calculateTrackBaseMediaDecodeTime: br,
            collectDtsInfo: yr
        },
        Sr = 4,
        kr = 128,
        wr = function(e) {
            for (var t = 0, n = {
                payloadType: -1,
                payloadSize: 0
            }, i = 0, r = 0; t < e.byteLength && e[t] !== kr;) {
                for (; 255 === e[t];) i += 255, t++;
                for (i += e[t++]; 255 === e[t];) r += 255, t++;
                if (r += e[t++], !n.payload && i === Sr) {
                    n.payloadType = i, n.payloadSize = r, n.payload = e.subarray(t, t + r);
                    break
                }
                t += r, i = 0, r = 0
            }
            return n
        },
        Cr = function(e) {
            return 181 !== e.payload[0] ? null : 49 !== (e.payload[1] << 8 | e.payload[2]) ? null : "GA94" !== String.fromCharCode(e.payload[3], e.payload[4], e.payload[5], e.payload[6]) ? null : 3 !== e.payload[7] ? null : e.payload.subarray(8, e.payload.length - 1)
        },
        Er = function(e, t) {
            var n, i, r, a, s = [];
            if (!(64 & t[0])) return s;
            for (i = 31 & t[0], n = 0; i > n; n++) r = 3 * n, a = {
                type: 3 & t[r + 2],
                pts: e
            }, 4 & t[r + 2] && (a.ccData = t[r + 3] << 8 | t[r + 4], s.push(a));
            return s
        },
        Ar = function(e) {
            for (var t, n, i = e.byteLength, r = [], a = 1; i - 2 > a;) 0 === e[a] && 0 === e[a + 1] && 3 === e[a + 2] ? (r.push(a + 2), a += 2) : a++;
            if (0 === r.length) return e;
            t = i - r.length, n = new Uint8Array(t);
            var s = 0;
            for (a = 0; t > a; s++, a++) s === r[0] && (s++, r.shift()), n[a] = e[s];
            return n
        },
        Lr = {
            parseSei: wr,
            parseUserData: Cr,
            parseCaptionPackets: Er,
            discardEmulationPreventionBytes: Ar,
            USER_DATA_REGISTERED_ITU_T_T35: Sr
        },
        Ir = function zo() {
            zo.prototype.init.call(this), this.captionPackets_ = [], this.ccStreams_ = [new Mr(0, 0), new Mr(0, 1), new Mr(1, 0), new Mr(1, 1)], this.reset(), this.ccStreams_.forEach(function(e) {
                e.on("data", this.trigger.bind(this, "data")), e.on("done", this.trigger.bind(this, "done"))
            }, this)
        };
    Ir.prototype = new ur, Ir.prototype.push = function(e) {
        var t, n, i;
        if ("sei_rbsp" === e.nalUnitType && (t = Lr.parseSei(e.escapedRBSP), t.payloadType === Lr.USER_DATA_REGISTERED_ITU_T_T35 && (n = Lr.parseUserData(t)))) {
            if (e.dts < this.latestDts_) return void(this.ignoreNextEqualDts_ = !0);
            if (e.dts === this.latestDts_ && this.ignoreNextEqualDts_) return this.numSameDts_--, void(this.numSameDts_ || (this.ignoreNextEqualDts_ = !1));
            i = Lr.parseCaptionPackets(e.pts, n), this.captionPackets_ = this.captionPackets_.concat(i), this.latestDts_ !== e.dts && (this.numSameDts_ = 0), this.numSameDts_++, this.latestDts_ = e.dts
        }
    }, Ir.prototype.flush = function() {
        return this.captionPackets_.length ? (this.captionPackets_.forEach(function(e, t) {
            e.presortIndex = t
        }), this.captionPackets_.sort(function(e, t) {
            return e.pts === t.pts ? e.presortIndex - t.presortIndex : e.pts - t.pts
        }), this.captionPackets_.forEach(function(e) {
            e.type < 2 && this.dispatchCea608Packet(e)
        }, this), this.captionPackets_.length = 0, void this.ccStreams_.forEach(function(e) {
            e.flush()
        }, this)) : void this.ccStreams_.forEach(function(e) {
            e.flush()
        }, this)
    }, Ir.prototype.reset = function() {
        this.latestDts_ = null, this.ignoreNextEqualDts_ = !1, this.numSameDts_ = 0, this.activeCea608Channel_ = [null, null], this.ccStreams_.forEach(function(e) {
            e.reset()
        })
    }, Ir.prototype.dispatchCea608Packet = function(e) {
        this.setsChannel1Active(e) ? this.activeCea608Channel_[e.type] = 0 : this.setsChannel2Active(e) && (this.activeCea608Channel_[e.type] = 1), null !== this.activeCea608Channel_[e.type] && this.ccStreams_[(e.type << 1) + this.activeCea608Channel_[e.type]].push(e)
    }, Ir.prototype.setsChannel1Active = function(e) {
        return 4096 === (30720 & e.ccData)
    }, Ir.prototype.setsChannel2Active = function(e) {
        return 6144 === (30720 & e.ccData)
    };
    var Pr = {
            42: 225,
            92: 233,
            94: 237,
            95: 243,
            96: 250,
            123: 231,
            124: 247,
            125: 209,
            126: 241,
            127: 9608,
            304: 174,
            305: 176,
            306: 189,
            307: 191,
            308: 8482,
            309: 162,
            310: 163,
            311: 9834,
            312: 224,
            313: 160,
            314: 232,
            315: 226,
            316: 234,
            317: 238,
            318: 244,
            319: 251,
            544: 193,
            545: 201,
            546: 211,
            547: 218,
            548: 220,
            549: 252,
            550: 8216,
            551: 161,
            552: 42,
            553: 39,
            554: 8212,
            555: 169,
            556: 8480,
            557: 8226,
            558: 8220,
            559: 8221,
            560: 192,
            561: 194,
            562: 199,
            563: 200,
            564: 202,
            565: 203,
            566: 235,
            567: 206,
            568: 207,
            569: 239,
            570: 212,
            571: 217,
            572: 249,
            573: 219,
            574: 171,
            575: 187,
            800: 195,
            801: 227,
            802: 205,
            803: 204,
            804: 236,
            805: 210,
            806: 242,
            807: 213,
            808: 245,
            809: 123,
            810: 125,
            811: 92,
            812: 94,
            813: 95,
            814: 124,
            815: 126,
            816: 196,
            817: 228,
            818: 214,
            819: 246,
            820: 223,
            821: 165,
            822: 164,
            823: 9474,
            824: 197,
            825: 229,
            826: 216,
            827: 248,
            828: 9484,
            829: 9488,
            830: 9492,
            831: 9496
        },
        xr = function(e) {
            return null === e ? "" : (e = Pr[e] || e, String.fromCharCode(e))
        },
        Dr = 14,
        Ur = [4352, 4384, 4608, 4640, 5376, 5408, 5632, 5664, 5888, 5920, 4096, 4864, 4896, 5120, 5152],
        Or = function() {
            for (var e = [], t = Dr + 1; t--;) e.push("");
            return e
        },
        Mr = function Wo(e, t) {
            Wo.prototype.init.call(this), this.field_ = e || 0, this.dataChannel_ = t || 0, this.name_ = "CC" + ((this.field_ << 1 | this.dataChannel_) + 1), this.setConstants(), this.reset(), this.push = function(e) {
                var t, n, i, r, a;
                if (t = 32639 & e.ccData, t === this.lastControlCode_) return void(this.lastControlCode_ = null);
                if (4096 === (61440 & t) ? this.lastControlCode_ = t : t !== this.PADDING_ && (this.lastControlCode_ = null), i = t >>> 8, r = 255 & t, t !== this.PADDING_)
                    if (t === this.RESUME_CAPTION_LOADING_) this.mode_ = "popOn";
                    else if (t === this.END_OF_CAPTION_) this.mode_ = "popOn", this.clearFormatting(e.pts), this.flushDisplayed(e.pts), n = this.displayed_, this.displayed_ = this.nonDisplayed_, this.nonDisplayed_ = n, this.startPts_ = e.pts;
                else if (t === this.ROLL_UP_2_ROWS_) this.rollUpRows_ = 2, this.setRollUp(e.pts);
                else if (t === this.ROLL_UP_3_ROWS_) this.rollUpRows_ = 3, this.setRollUp(e.pts);
                else if (t === this.ROLL_UP_4_ROWS_) this.rollUpRows_ = 4, this.setRollUp(e.pts);
                else if (t === this.CARRIAGE_RETURN_) this.clearFormatting(e.pts), this.flushDisplayed(e.pts), this.shiftRowsUp_(), this.startPts_ = e.pts;
                else if (t === this.BACKSPACE_) "popOn" === this.mode_ ? this.nonDisplayed_[this.row_] = this.nonDisplayed_[this.row_].slice(0, -1) : this.displayed_[this.row_] = this.displayed_[this.row_].slice(0, -1);
                else if (t === this.ERASE_DISPLAYED_MEMORY_) this.flushDisplayed(e.pts), this.displayed_ = Or();
                else if (t === this.ERASE_NON_DISPLAYED_MEMORY_) this.nonDisplayed_ = Or();
                else if (t === this.RESUME_DIRECT_CAPTIONING_) "paintOn" !== this.mode_ && (this.flushDisplayed(e.pts), this.displayed_ = Or()), this.mode_ = "paintOn", this.startPts_ = e.pts;
                else if (this.isSpecialCharacter(i, r)) i = (3 & i) << 8, a = xr(i | r), this[this.mode_](e.pts, a), this.column_++;
                else if (this.isExtCharacter(i, r)) "popOn" === this.mode_ ? this.nonDisplayed_[this.row_] = this.nonDisplayed_[this.row_].slice(0, -1) : this.displayed_[this.row_] = this.displayed_[this.row_].slice(0, -1), i = (3 & i) << 8, a = xr(i | r), this[this.mode_](e.pts, a), this.column_++;
                else if (this.isMidRowCode(i, r)) this.clearFormatting(e.pts), this[this.mode_](e.pts, " "), this.column_++, 14 === (14 & r) && this.addFormatting(e.pts, ["i"]), 1 === (1 & r) && this.addFormatting(e.pts, ["u"]);
                else if (this.isOffsetControlCode(i, r)) this.column_ += 3 & r;
                else if (this.isPAC(i, r)) {
                    var s = Ur.indexOf(7968 & t);
                    "rollUp" === this.mode_ && this.setRollUp(e.pts, s), s !== this.row_ && (this.clearFormatting(e.pts), this.row_ = s), 1 & r && -1 === this.formatting_.indexOf("u") && this.addFormatting(e.pts, ["u"]), 16 === (16 & t) && (this.column_ = 4 * ((14 & t) >> 1)), this.isColorPAC(r) && 14 === (14 & r) && this.addFormatting(e.pts, ["i"])
                } else this.isNormalChar(i) && (0 === r && (r = null), a = xr(i), a += xr(r), this[this.mode_](e.pts, a), this.column_ += a.length)
            }
        };
    Mr.prototype = new ur, Mr.prototype.flushDisplayed = function(e) {
        var t = this.displayed_.map(function(e) {
            return e.trim()
        }).join("\n").replace(/^\n+|\n+$/g, "");
        t.length && this.trigger("data", {
            startPts: this.startPts_,
            endPts: e,
            text: t,
            stream: this.name_
        })
    }, Mr.prototype.reset = function() {
        this.mode_ = "popOn", this.topRow_ = 0, this.startPts_ = 0, this.displayed_ = Or(), this.nonDisplayed_ = Or(), this.lastControlCode_ = null, this.column_ = 0, this.row_ = Dr, this.rollUpRows_ = 2, this.formatting_ = []
    }, Mr.prototype.setConstants = function() {
        0 === this.dataChannel_ ? (this.BASE_ = 16, this.EXT_ = 17, this.CONTROL_ = (20 | this.field_) << 8, this.OFFSET_ = 23) : 1 === this.dataChannel_ && (this.BASE_ = 24, this.EXT_ = 25, this.CONTROL_ = (28 | this.field_) << 8, this.OFFSET_ = 31), this.PADDING_ = 0, this.RESUME_CAPTION_LOADING_ = 32 | this.CONTROL_, this.END_OF_CAPTION_ = 47 | this.CONTROL_, this.ROLL_UP_2_ROWS_ = 37 | this.CONTROL_, this.ROLL_UP_3_ROWS_ = 38 | this.CONTROL_, this.ROLL_UP_4_ROWS_ = 39 | this.CONTROL_, this.CARRIAGE_RETURN_ = 45 | this.CONTROL_, this.RESUME_DIRECT_CAPTIONING_ = 41 | this.CONTROL_, this.BACKSPACE_ = 33 | this.CONTROL_, this.ERASE_DISPLAYED_MEMORY_ = 44 | this.CONTROL_, this.ERASE_NON_DISPLAYED_MEMORY_ = 46 | this.CONTROL_
    }, Mr.prototype.isSpecialCharacter = function(e, t) {
        return e === this.EXT_ && t >= 48 && 63 >= t
    }, Mr.prototype.isExtCharacter = function(e, t) {
        return (e === this.EXT_ + 1 || e === this.EXT_ + 2) && t >= 32 && 63 >= t
    }, Mr.prototype.isMidRowCode = function(e, t) {
        return e === this.EXT_ && t >= 32 && 47 >= t
    }, Mr.prototype.isOffsetControlCode = function(e, t) {
        return e === this.OFFSET_ && t >= 33 && 35 >= t
    }, Mr.prototype.isPAC = function(e, t) {
        return e >= this.BASE_ && e < this.BASE_ + 8 && t >= 64 && 127 >= t
    }, Mr.prototype.isColorPAC = function(e) {
        return e >= 64 && 79 >= e || e >= 96 && 127 >= e
    }, Mr.prototype.isNormalChar = function(e) {
        return e >= 32 && 127 >= e
    }, Mr.prototype.setRollUp = function(e, t) {
        if ("rollUp" !== this.mode_ && (this.row_ = Dr, this.mode_ = "rollUp", this.flushDisplayed(e), this.nonDisplayed_ = Or(), this.displayed_ = Or()), void 0 !== t && t !== this.row_)
            for (var n = 0; n < this.rollUpRows_; n++) this.displayed_[t - n] = this.displayed_[this.row_ - n], this.displayed_[this.row_ - n] = "";
        void 0 === t && (t = this.row_), this.topRow_ = t - this.rollUpRows_ + 1
    }, Mr.prototype.addFormatting = function(e, t) {
        this.formatting_ = this.formatting_.concat(t);
        var n = t.reduce(function(e, t) {
            return e + "<" + t + ">"
        }, "");
        this[this.mode_](e, n)
    }, Mr.prototype.clearFormatting = function(e) {
        if (this.formatting_.length) {
            var t = this.formatting_.reverse().reduce(function(e, t) {
                return e + "</" + t + ">"
            }, "");
            this.formatting_ = [], this[this.mode_](e, t)
        }
    }, Mr.prototype.popOn = function(e, t) {
        var n = this.nonDisplayed_[this.row_];
        n += t, this.nonDisplayed_[this.row_] = n
    }, Mr.prototype.rollUp = function(e, t) {
        var n = this.displayed_[this.row_];
        n += t, this.displayed_[this.row_] = n
    }, Mr.prototype.shiftRowsUp_ = function() {
        var e;
        for (e = 0; e < this.topRow_; e++) this.displayed_[e] = "";
        for (e = this.row_ + 1; Dr + 1 > e; e++) this.displayed_[e] = "";
        for (e = this.topRow_; e < this.row_; e++) this.displayed_[e] = this.displayed_[e + 1];
        this.displayed_[this.row_] = ""
    }, Mr.prototype.paintOn = function(e, t) {
        var n = this.displayed_[this.row_];
        n += t, this.displayed_[this.row_] = n
    };
    var Rr = {
            CaptionStream: Ir,
            Cea608Stream: Mr
        },
        jr = {
            H264_STREAM_TYPE: 27,
            ADTS_STREAM_TYPE: 15,
            METADATA_STREAM_TYPE: 21
        },
        Nr = 8589934592,
        Br = 4294967296,
        Fr = function(e, t) {
            var n = 1;
            for (e > t && (n = -1); Math.abs(t - e) > Br;) e += n * Nr;
            return e
        },
        Vr = function Go(e) {
            var t, n;
            Go.prototype.init.call(this), this.type_ = e, this.push = function(e) {
                e.type === this.type_ && (void 0 === n && (n = e.dts), e.dts = Fr(e.dts, n), e.pts = Fr(e.pts, n), t = e.dts, this.trigger("data", e))
            }, this.flush = function() {
                n = t, this.trigger("done")
            }, this.discontinuity = function() {
                n = void 0, t = void 0
            }
        };
    Vr.prototype = new ur;
    var Hr, qr = {
            TimestampRolloverStream: Vr,
            handleRollover: Fr
        },
        zr = function(e, t, n) {
            var i, r = "";
            for (i = t; n > i; i++) r += "%" + ("00" + e[i].toString(16)).slice(-2);
            return r
        },
        Wr = function(e, t, n) {
            return decodeURIComponent(zr(e, t, n))
        },
        Gr = function(e, t, n) {
            return unescape(zr(e, t, n))
        },
        Xr = function(e) {
            return e[0] << 21 | e[1] << 14 | e[2] << 7 | e[3]
        },
        Yr = {
            TXXX: function(e) {
                var t;
                if (3 === e.data[0]) {
                    for (t = 1; t < e.data.length; t++)
                        if (0 === e.data[t]) {
                            e.description = Wr(e.data, 1, t), e.value = Wr(e.data, t + 1, e.data.length).replace(/\0*$/, "");
                            break
                        }
                    e.data = e.value
                }
            },
            WXXX: function(e) {
                var t;
                if (3 === e.data[0])
                    for (t = 1; t < e.data.length; t++)
                        if (0 === e.data[t]) {
                            e.description = Wr(e.data, 1, t), e.url = Wr(e.data, t + 1, e.data.length);
                            break
                        }
            },
            PRIV: function(e) {
                var t;
                for (t = 0; t < e.data.length; t++)
                    if (0 === e.data[t]) {
                        e.owner = Gr(e.data, 0, t);
                        break
                    }
                e.privateData = e.data.subarray(t + 1), e.data = e.privateData
            }
        };
    Hr = function(e) {
        var t, n = {
                debug: !(!e || !e.debug),
                descriptor: e && e.descriptor
            },
            i = 0,
            r = [],
            a = 0;
        if (Hr.prototype.init.call(this), this.dispatchType = jr.METADATA_STREAM_TYPE.toString(16), n.descriptor)
            for (t = 0; t < n.descriptor.length; t++) this.dispatchType += ("00" + n.descriptor[t].toString(16)).slice(-2);
        this.push = function(e) {
            var t, s, o, u, l, c;
            if ("timed-metadata" === e.type) {
                if (e.dataAlignmentIndicator && (a = 0, r.length = 0), 0 === r.length && (e.data.length < 10 || e.data[0] !== "I".charCodeAt(0) || e.data[1] !== "D".charCodeAt(0) || e.data[2] !== "3".charCodeAt(0))) return void(n.debug && console.log("Skipping unrecognized metadata packet"));
                if (r.push(e), a += e.data.byteLength, 1 === r.length && (i = Xr(e.data.subarray(6, 10)), i += 10), !(i > a)) {
                    for (t = {
                        data: new Uint8Array(i),
                        frames: [],
                        pts: r[0].pts,
                        dts: r[0].dts
                    }, l = 0; i > l;) t.data.set(r[0].data.subarray(0, i - l), l), l += r[0].data.byteLength, a -= r[0].data.byteLength, r.shift();
                    s = 10, 64 & t.data[5] && (s += 4, s += Xr(t.data.subarray(10, 14)), i -= Xr(t.data.subarray(16, 20)));
                    do {
                        if (o = Xr(t.data.subarray(s + 4, s + 8)), 1 > o) return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");
                        if (c = String.fromCharCode(t.data[s], t.data[s + 1], t.data[s + 2], t.data[s + 3]), u = {
                            id: c,
                            data: t.data.subarray(s + 10, s + o + 10)
                        }, u.key = u.id, Yr[u.id] && (Yr[u.id](u), "com.apple.streaming.transportStreamTimestamp" === u.owner)) {
                            var d = u.data,
                                h = (1 & d[3]) << 30 | d[4] << 22 | d[5] << 14 | d[6] << 6 | d[7] >>> 2;
                            h *= 4, h += 3 & d[7], u.timeStamp = h, void 0 === t.pts && void 0 === t.dts && (t.pts = u.timeStamp, t.dts = u.timeStamp), this.trigger("timestamp", u)
                        }
                        t.frames.push(u), s += 10, s += o
                    } while (i > s);
                    this.trigger("data", t)
                }
            }
        }
    }, Hr.prototype = new ur;
    var $r, Qr, Kr, Jr = Hr,
        Zr = qr.TimestampRolloverStream,
        ea = 188,
        ta = 71;
    $r = function() {
            var e = new Uint8Array(ea),
                t = 0;
            $r.prototype.init.call(this), this.push = function(n) {
                var i, r = 0,
                    a = ea;
                for (t ? (i = new Uint8Array(n.byteLength + t), i.set(e.subarray(0, t)), i.set(n, t), t = 0) : i = n; a < i.byteLength;) i[r] !== ta || i[a] !== ta ? (r++, a++) : (this.trigger("data", i.subarray(r, a)), r += ea, a += ea);
                r < i.byteLength && (e.set(i.subarray(r), 0), t = i.byteLength - r)
            }, this.flush = function() {
                t === ea && e[0] === ta && (this.trigger("data", e), t = 0), this.trigger("done")
            }
        }, $r.prototype = new ur, Qr = function() {
            var e, t, n, i;
            Qr.prototype.init.call(this), i = this, this.packetsWaitingForPmt = [], this.programMapTable = void 0, e = function(e, i) {
                var r = 0;
                i.payloadUnitStartIndicator && (r += e[r] + 1), "pat" === i.type ? t(e.subarray(r), i) : n(e.subarray(r), i)
            }, t = function(e, t) {
                t.section_number = e[7], t.last_section_number = e[8], i.pmtPid = (31 & e[10]) << 8 | e[11], t.pmtPid = i.pmtPid
            }, n = function(e, t) {
                var n, r, a, s;
                if (1 & e[5]) {
                    for (i.programMapTable = {
                        video: null,
                        audio: null,
                        "timed-metadata": {}
                    }, n = (15 & e[1]) << 8 | e[2], r = 3 + n - 4, a = (15 & e[10]) << 8 | e[11], s = 12 + a; r > s;) {
                        var o = e[s],
                            u = (31 & e[s + 1]) << 8 | e[s + 2];
                        o === jr.H264_STREAM_TYPE && null === i.programMapTable.video ? i.programMapTable.video = u : o === jr.ADTS_STREAM_TYPE && null === i.programMapTable.audio ? i.programMapTable.audio = u : o === jr.METADATA_STREAM_TYPE && (i.programMapTable["timed-metadata"][u] = o), s += ((15 & e[s + 3]) << 8 | e[s + 4]) + 5
                    }
                    t.programMapTable = i.programMapTable
                }
            }, this.push = function(t) {
                var n = {},
                    i = 4;
                if (n.payloadUnitStartIndicator = !!(64 & t[1]), n.pid = 31 & t[1], n.pid <<= 8, n.pid |= t[2], (48 & t[3]) >>> 4 > 1 && (i += t[i] + 1), 0 === n.pid) n.type = "pat", e(t.subarray(i), n), this.trigger("data", n);
                else if (n.pid === this.pmtPid)
                    for (n.type = "pmt", e(t.subarray(i), n), this.trigger("data", n); this.packetsWaitingForPmt.length;) this.processPes_.apply(this, this.packetsWaitingForPmt.shift());
                else void 0 === this.programMapTable ? this.packetsWaitingForPmt.push([t, i, n]) : this.processPes_(t, i, n)
            }, this.processPes_ = function(e, t, n) {
                n.pid === this.programMapTable.video ? n.streamType = jr.H264_STREAM_TYPE : n.pid === this.programMapTable.audio ? n.streamType = jr.ADTS_STREAM_TYPE : n.streamType = this.programMapTable["timed-metadata"][n.pid], n.type = "pes", n.data = e.subarray(t), this.trigger("data", n)
            }
        }, Qr.prototype = new ur, Qr.STREAM_TYPES = {
            h264: 27,
            adts: 15
        }, Kr = function() {
            var e = this,
                t = {
                    data: [],
                    size: 0
                },
                n = {
                    data: [],
                    size: 0
                },
                i = {
                    data: [],
                    size: 0
                },
                r = function(e, t) {
                    var n;
                    t.packetLength = 6 + (e[4] << 8 | e[5]), t.dataAlignmentIndicator = 0 !== (4 & e[6]), n = e[7], 192 & n && (t.pts = (14 & e[9]) << 27 | (255 & e[10]) << 20 | (254 & e[11]) << 12 | (255 & e[12]) << 5 | (254 & e[13]) >>> 3, t.pts *= 4, t.pts += (6 & e[13]) >>> 1, t.dts = t.pts, 64 & n && (t.dts = (14 & e[14]) << 27 | (255 & e[15]) << 20 | (254 & e[16]) << 12 | (255 & e[17]) << 5 | (254 & e[18]) >>> 3, t.dts *= 4, t.dts += (6 & e[18]) >>> 1)), t.data = e.subarray(9 + e[8])
                },
                a = function(t, n, i) {
                    var a, s = new Uint8Array(t.size),
                        o = {
                            type: n
                        },
                        u = 0,
                        l = 0,
                        c = !1;
                    if (t.data.length && !(t.size < 9)) {
                        for (o.trackId = t.data[0].pid, u = 0; u < t.data.length; u++) a = t.data[u], s.set(a.data, l), l += a.data.byteLength;
                        r(s, o), c = "video" === n || o.packetLength <= t.size, (i || c) && (t.size = 0, t.data.length = 0), c && e.trigger("data", o)
                    }
                };
            Kr.prototype.init.call(this), this.push = function(r) {
                ({
                    pat: function() {},
                    pes: function() {
                        var e, s;
                        switch (r.streamType) {
                            case jr.H264_STREAM_TYPE:
                            case jr.H264_STREAM_TYPE:
                                e = t, s = "video";
                                break;
                            case jr.ADTS_STREAM_TYPE:
                                e = n, s = "audio";
                                break;
                            case jr.METADATA_STREAM_TYPE:
                                e = i, s = "timed-metadata";
                                break;
                            default:
                                return
                        }
                        r.payloadUnitStartIndicator && a(e, s, !0), e.data.push(r), e.size += r.data.byteLength
                    },
                    pmt: function() {
                        var t = {
                                type: "metadata",
                                tracks: []
                            },
                            n = r.programMapTable;
                        null !== n.video && t.tracks.push({
                            timelineStartInfo: {
                                baseMediaDecodeTime: 0
                            },
                            id: +n.video,
                            codec: "avc",
                            type: "video"
                        }), null !== n.audio && t.tracks.push({
                            timelineStartInfo: {
                                baseMediaDecodeTime: 0
                            },
                            id: +n.audio,
                            codec: "adts",
                            type: "audio"
                        }), e.trigger("data", t)
                    }
                })[r.type]()
            }, this.flush = function() {
                a(t, "video"), a(n, "audio"), a(i, "timed-metadata"), this.trigger("done")
            }
        },
        Kr.prototype = new ur;
    var na = {
        PAT_PID: 0,
        MP2T_PACKET_LENGTH: ea,
        TransportPacketStream: $r,
        TransportParseStream: Qr,
        ElementaryStream: Kr,
        TimestampRolloverStream: Zr,
        CaptionStream: Rr.CaptionStream,
        Cea608Stream: Rr.Cea608Stream,
        MetadataStream: Jr
    };
    for (var ia in jr) jr.hasOwnProperty(ia) && (na[ia] = jr[ia]);
    var ra, aa = na,
        sa = [96e3, 88200, 64e3, 48e3, 44100, 32e3, 24e3, 22050, 16e3, 12e3, 11025, 8e3, 7350];
    ra = function() {
        var e;
        ra.prototype.init.call(this), this.push = function(t) {
            var n, i, r, a, s, o, u = 0,
                l = 0;
            if ("audio" === t.type)
                for (e ? (a = e, e = new Uint8Array(a.byteLength + t.data.byteLength), e.set(a), e.set(t.data, a.byteLength)) : e = t.data; u + 5 < e.length;)
                    if (255 === e[u] && 240 === (246 & e[u + 1])) {
                        if (i = 2 * (1 & ~e[u + 1]), n = (3 & e[u + 3]) << 11 | e[u + 4] << 3 | (224 & e[u + 5]) >> 5, s = 1024 * ((3 & e[u + 6]) + 1), o = 9e4 * s / sa[(60 & e[u + 2]) >>> 2], r = u + n, e.byteLength < r) return;
                        if (this.trigger("data", {
                            pts: t.pts + l * o,
                            dts: t.dts + l * o,
                            sampleCount: s,
                            audioobjecttype: (e[u + 2] >>> 6 & 3) + 1,
                            channelcount: (1 & e[u + 2]) << 2 | (192 & e[u + 3]) >>> 6,
                            samplerate: sa[(60 & e[u + 2]) >>> 2],
                            samplingfrequencyindex: (60 & e[u + 2]) >>> 2,
                            samplesize: 16,
                            data: e.subarray(u + 7 + i, r)
                        }), e.byteLength === r) return void(e = void 0);
                        l++, e = e.subarray(r)
                    } else u++
        }, this.flush = function() {
            this.trigger("done")
        }
    }, ra.prototype = new ur;
    var oa, ua = ra;
    oa = function(e) {
        var t = e.byteLength,
            n = 0,
            i = 0;
        this.length = function() {
            return 8 * t
        }, this.bitsAvailable = function() {
            return 8 * t + i
        }, this.loadWord = function() {
            var r = e.byteLength - t,
                a = new Uint8Array(4),
                s = Math.min(4, t);
            if (0 === s) throw new Error("no bytes available");
            a.set(e.subarray(r, r + s)), n = new DataView(a.buffer).getUint32(0), i = 8 * s, t -= s
        }, this.skipBits = function(e) {
            var r;
            i > e ? (n <<= e, i -= e) : (e -= i, r = Math.floor(e / 8), e -= 8 * r, t -= r, this.loadWord(), n <<= e, i -= e)
        }, this.readBits = function(e) {
            var r = Math.min(i, e),
                a = n >>> 32 - r;
            return i -= r, i > 0 ? n <<= r : t > 0 && this.loadWord(), r = e - r, r > 0 ? a << r | this.readBits(r) : a
        }, this.skipLeadingZeros = function() {
            var e;
            for (e = 0; i > e; ++e)
                if (0 !== (n & 2147483648 >>> e)) return n <<= e, i -= e, e;
            return this.loadWord(), e + this.skipLeadingZeros()
        }, this.skipUnsignedExpGolomb = function() {
            this.skipBits(1 + this.skipLeadingZeros())
        }, this.skipExpGolomb = function() {
            this.skipBits(1 + this.skipLeadingZeros())
        }, this.readUnsignedExpGolomb = function() {
            var e = this.skipLeadingZeros();
            return this.readBits(e + 1) - 1
        }, this.readExpGolomb = function() {
            var e = this.readUnsignedExpGolomb();
            return 1 & e ? 1 + e >>> 1 : -1 * (e >>> 1)
        }, this.readBoolean = function() {
            return 1 === this.readBits(1)
        }, this.readUnsignedByte = function() {
            return this.readBits(8)
        }, this.loadWord()
    };
    var la, ca, da, ha = oa;
    ca = function() {
        var e, t, n = 0;
        ca.prototype.init.call(this), this.push = function(i) {
            var r;
            for (t ? (r = new Uint8Array(t.byteLength + i.data.byteLength), r.set(t), r.set(i.data, t.byteLength), t = r) : t = i.data; n < t.byteLength - 3; n++)
                if (1 === t[n + 2]) {
                    e = n + 5;
                    break
                }
            for (; e < t.byteLength;) switch (t[e]) {
                case 0:
                    if (0 !== t[e - 1]) {
                        e += 2;
                        break
                    }
                    if (0 !== t[e - 2]) {
                        e++;
                        break
                    }
                    n + 3 !== e - 2 && this.trigger("data", t.subarray(n + 3, e - 2));
                    do e++; while (1 !== t[e] && e < t.length);
                    n = e - 2, e += 3;
                    break;
                case 1:
                    if (0 !== t[e - 1] || 0 !== t[e - 2]) {
                        e += 3;
                        break
                    }
                    this.trigger("data", t.subarray(n + 3, e - 2)), n = e - 2, e += 3;
                    break;
                default:
                    e += 3
            }
            t = t.subarray(n), e -= n, n = 0
        }, this.flush = function() {
            t && t.byteLength > 3 && this.trigger("data", t.subarray(n + 3)), t = null, n = 0, this.trigger("done")
        }
    }, ca.prototype = new ur, da = {
        100: !0,
        110: !0,
        122: !0,
        244: !0,
        44: !0,
        83: !0,
        86: !0,
        118: !0,
        128: !0,
        138: !0,
        139: !0,
        134: !0
    }, la = function() {
        var e, t, n, i, r, a, s, o = new ca;
        la.prototype.init.call(this), e = this, this.push = function(e) {
            "video" === e.type && (t = e.trackId, n = e.pts, i = e.dts, o.push(e))
        }, o.on("data", function(s) {
            var o = {
                trackId: t,
                pts: n,
                dts: i,
                data: s
            };
            switch (31 & s[0]) {
                case 5:
                    o.nalUnitType = "slice_layer_without_partitioning_rbsp_idr";
                    break;
                case 6:
                    o.nalUnitType = "sei_rbsp", o.escapedRBSP = r(s.subarray(1));
                    break;
                case 7:
                    o.nalUnitType = "seq_parameter_set_rbsp", o.escapedRBSP = r(s.subarray(1)), o.config = a(o.escapedRBSP);
                    break;
                case 8:
                    o.nalUnitType = "pic_parameter_set_rbsp";
                    break;
                case 9:
                    o.nalUnitType = "access_unit_delimiter_rbsp"
            }
            e.trigger("data", o)
        }), o.on("done", function() {
            e.trigger("done")
        }), this.flush = function() {
            o.flush()
        }, s = function(e, t) {
            var n, i, r = 8,
                a = 8;
            for (n = 0; e > n; n++) 0 !== a && (i = t.readExpGolomb(), a = (r + i + 256) % 256), r = 0 === a ? r : a
        }, r = function(e) {
            for (var t, n, i = e.byteLength, r = [], a = 1; i - 2 > a;) 0 === e[a] && 0 === e[a + 1] && 3 === e[a + 2] ? (r.push(a + 2), a += 2) : a++;
            if (0 === r.length) return e;
            t = i - r.length, n = new Uint8Array(t);
            var s = 0;
            for (a = 0; t > a; s++, a++) s === r[0] && (s++, r.shift()), n[a] = e[s];
            return n
        }, a = function(e) {
            var t, n, i, r, a, o, u, l, c, d, h, p, f, m, g = 0,
                v = 0,
                y = 0,
                _ = 0,
                b = 1;
            if (t = new ha(e), n = t.readUnsignedByte(), r = t.readUnsignedByte(), i = t.readUnsignedByte(), t.skipUnsignedExpGolomb(), da[n] && (a = t.readUnsignedExpGolomb(), 3 === a && t.skipBits(1), t.skipUnsignedExpGolomb(), t.skipUnsignedExpGolomb(), t.skipBits(1), t.readBoolean()))
                for (h = 3 !== a ? 8 : 12, m = 0; h > m; m++) t.readBoolean() && (6 > m ? s(16, t) : s(64, t));
            if (t.skipUnsignedExpGolomb(), o = t.readUnsignedExpGolomb(), 0 === o) t.readUnsignedExpGolomb();
            else if (1 === o)
                for (t.skipBits(1), t.skipExpGolomb(), t.skipExpGolomb(), u = t.readUnsignedExpGolomb(), m = 0; u > m; m++) t.skipExpGolomb();
            if (t.skipUnsignedExpGolomb(), t.skipBits(1), l = t.readUnsignedExpGolomb(), c = t.readUnsignedExpGolomb(), d = t.readBits(1), 0 === d && t.skipBits(1), t.skipBits(1), t.readBoolean() && (g = t.readUnsignedExpGolomb(), v = t.readUnsignedExpGolomb(), y = t.readUnsignedExpGolomb(), _ = t.readUnsignedExpGolomb()), t.readBoolean() && t.readBoolean()) {
                switch (f = t.readUnsignedByte()) {
                    case 1:
                        p = [1, 1];
                        break;
                    case 2:
                        p = [12, 11];
                        break;
                    case 3:
                        p = [10, 11];
                        break;
                    case 4:
                        p = [16, 11];
                        break;
                    case 5:
                        p = [40, 33];
                        break;
                    case 6:
                        p = [24, 11];
                        break;
                    case 7:
                        p = [20, 11];
                        break;
                    case 8:
                        p = [32, 11];
                        break;
                    case 9:
                        p = [80, 33];
                        break;
                    case 10:
                        p = [18, 11];
                        break;
                    case 11:
                        p = [15, 11];
                        break;
                    case 12:
                        p = [64, 33];
                        break;
                    case 13:
                        p = [160, 99];
                        break;
                    case 14:
                        p = [4, 3];
                        break;
                    case 15:
                        p = [3, 2];
                        break;
                    case 16:
                        p = [2, 1];
                        break;
                    case 255:
                        p = [t.readUnsignedByte() << 8 | t.readUnsignedByte(), t.readUnsignedByte() << 8 | t.readUnsignedByte()]
                }
                p && (b = p[0] / p[1])
            }
            return {
                profileIdc: n,
                levelIdc: i,
                profileCompatibility: r,
                width: Math.ceil((16 * (l + 1) - 2 * g - 2 * v) * b),
                height: (2 - d) * (c + 1) * 16 - 2 * y - 2 * _
            }
        }
    }, la.prototype = new ur;
    var pa, fa = {
        H264Stream: la,
        NalByteStream: ca
    };
    pa = function() {
        var e = new Uint8Array,
            t = 0;
        pa.prototype.init.call(this), this.setTimestamp = function(e) {
            t = e
        }, this.parseId3TagSize = function(e, t) {
            var n = e[t + 6] << 21 | e[t + 7] << 14 | e[t + 8] << 7 | e[t + 9],
                i = e[t + 5],
                r = (16 & i) >> 4;
            return r ? n + 20 : n + 10
        }, this.parseAdtsSize = function(e, t) {
            var n = (224 & e[t + 5]) >> 5,
                i = e[t + 4] << 3,
                r = 6144 & e[t + 3];
            return r | i | n
        }, this.push = function(n) {
            var i, r, a, s, o = 0,
                u = 0;
            for (e.length ? (s = e.length, e = new Uint8Array(n.byteLength + s), e.set(e.subarray(0, s)), e.set(n, s)) : e = n; e.length - u >= 3;)
                if (e[u] !== "I".charCodeAt(0) || e[u + 1] !== "D".charCodeAt(0) || e[u + 2] !== "3".charCodeAt(0))
                    if (e[u] & !0 && 240 === (240 & e[u + 1])) {
                        if (e.length - u < 7) break;
                        if (o = this.parseAdtsSize(e, u), o > e.length) break;
                        a = {
                            type: "audio",
                            data: e.subarray(u, u + o),
                            pts: t,
                            dts: t
                        }, this.trigger("data", a), u += o
                    } else u++;
            else {
                if (e.length - u < 10) break;
                if (o = this.parseId3TagSize(e, u), o > e.length) break;
                r = {
                    type: "timed-metadata",
                    data: e.subarray(u, u + o)
                }, this.trigger("data", r), u += o
            }
            i = e.length - u, e = i > 0 ? e.subarray(u) : new Uint8Array
        }
    }, pa.prototype = new ur;
    var ma, ga, va, ya, _a, ba, Ta = pa,
        Sa = [33, 16, 5, 32, 164, 27],
        ka = [33, 65, 108, 84, 1, 2, 4, 8, 168, 2, 4, 8, 17, 191, 252],
        wa = function(e) {
            for (var t = []; e--;) t.push(0);
            return t
        },
        Ca = function(e) {
            return Object.keys(e).reduce(function(t, n) {
                return t[n] = new Uint8Array(e[n].reduce(function(e, t) {
                    return e.concat(t)
                }, [])), t
            }, {})
        },
        Ea = {
            96e3: [Sa, [227, 64], wa(154), [56]],
            88200: [Sa, [231], wa(170), [56]],
            64e3: [Sa, [248, 192], wa(240), [56]],
            48e3: [Sa, [255, 192], wa(268), [55, 148, 128], wa(54), [112]],
            44100: [Sa, [255, 192], wa(268), [55, 163, 128], wa(84), [112]],
            32e3: [Sa, [255, 192], wa(268), [55, 234], wa(226), [112]],
            24e3: [Sa, [255, 192], wa(268), [55, 255, 128], wa(268), [111, 112], wa(126), [224]],
            16e3: [Sa, [255, 192], wa(268), [55, 255, 128], wa(268), [111, 255], wa(269), [223, 108], wa(195), [1, 192]],
            12e3: [ka, wa(268), [3, 127, 248], wa(268), [6, 255, 240], wa(268), [13, 255, 224], wa(268), [27, 253, 128], wa(259), [56]],
            11025: [ka, wa(268), [3, 127, 248], wa(268), [6, 255, 240], wa(268), [13, 255, 224], wa(268), [27, 255, 192], wa(268), [55, 175, 128], wa(108), [112]],
            8e3: [ka, wa(268), [3, 121, 16], wa(47), [7]]
        },
        Aa = Ca(Ea),
        La = 9e4;
    ma = function(e) {
        return e * La
    }, ga = function(e, t) {
        return e * t
    }, va = function(e) {
        return e / La
    }, ya = function(e, t) {
        return e / t
    }, _a = function(e, t) {
        return ma(ya(e, t))
    }, ba = function(e, t) {
        return ga(va(e), t)
    };
    var Ia, Pa, xa, Da, Ua, Oa, Ma, Ra = {
            secondsToVideoTs: ma,
            secondsToAudioTs: ga,
            videoTsToSeconds: va,
            audioTsToSeconds: ya,
            audioTsToVideoTs: _a,
            videoTsToAudioTs: ba
        },
        ja = fa.H264Stream,
        Na = ["audioobjecttype", "channelcount", "samplerate", "samplingfrequencyindex", "samplesize"],
        Ba = ["width", "height", "profileIdc", "levelIdc", "profileCompatibility"],
        Fa = 9e4;
    Ua = function(e) {
        return e[0] === "I".charCodeAt(0) && e[1] === "D".charCodeAt(0) && e[2] === "3".charCodeAt(0) ? !0 : !1
    }, Oa = function(e, t) {
        var n;
        if (e.length !== t.length) return !1;
        for (n = 0; n < e.length; n++)
            if (e[n] !== t[n]) return !1;
        return !0
    }, Ma = function(e) {
        var t, n, i = 0;
        for (t = 0; t < e.length; t++) n = e[t], i += n.data.byteLength;
        return i
    }, Pa = function(e, t) {
        var n = [],
            i = 0,
            r = 0,
            a = 0,
            s = 1 / 0;
        t = t || {}, Pa.prototype.init.call(this), this.push = function(t) {
            Tr.collectDtsInfo(e, t), e && Na.forEach(function(n) {
                e[n] = t[n]
            }), n.push(t)
        }, this.setEarliestDts = function(t) {
            r = t - e.timelineStartInfo.baseMediaDecodeTime
        }, this.setVideoBaseMediaDecodeTime = function(e) {
            s = e
        }, this.setAudioAppendStart = function(e) {
            a = e
        }, this.flush = function() {
            var r, a, s, o;
            return 0 === n.length ? void this.trigger("done", "AudioSegmentStream") : (r = this.trimAdtsFramesByEarliestDts_(n), e.baseMediaDecodeTime = Tr.calculateTrackBaseMediaDecodeTime(e, t.keepOriginalTimestamps), this.prefixWithSilence_(e, r), e.samples = this.generateSampleTable_(r), s = sr.mdat(this.concatenateFrameData_(r)), n = [], a = sr.moof(i, [e]), o = new Uint8Array(a.byteLength + s.byteLength), i++, o.set(a), o.set(s, a.byteLength), Tr.clearDtsInfo(e), this.trigger("data", {
                track: e,
                boxes: o
            }), void this.trigger("done", "AudioSegmentStream"))
        }, this.prefixWithSilence_ = function(e, t) {
            var n, i, r, o = 0,
                u = 0,
                l = 0,
                c = 0;
            if (t.length && (n = Ra.audioTsToVideoTs(e.baseMediaDecodeTime, e.samplerate), o = Math.ceil(Fa / (e.samplerate / 1024)), a && s && (u = n - Math.max(a, s), l = Math.floor(u / o), c = l * o), !(1 > l || c > Fa / 2))) {
                for (i = Aa[e.samplerate], i || (i = t[0].data), r = 0; l > r; r++) t.splice(r, 0, {
                    data: i
                });
                e.baseMediaDecodeTime -= Math.floor(Ra.videoTsToAudioTs(c, e.samplerate))
            }
        }, this.trimAdtsFramesByEarliestDts_ = function(t) {
            return e.minSegmentDts >= r ? t : (e.minSegmentDts = 1 / 0, t.filter(function(t) {
                return t.dts >= r ? (e.minSegmentDts = Math.min(e.minSegmentDts, t.dts), e.minSegmentPts = e.minSegmentDts, !0) : !1
            }))
        }, this.generateSampleTable_ = function(e) {
            var t, n, i = [];
            for (t = 0; t < e.length; t++) n = e[t], i.push({
                size: n.data.byteLength,
                duration: 1024
            });
            return i
        }, this.concatenateFrameData_ = function(e) {
            var t, n, i = 0,
                r = new Uint8Array(Ma(e));
            for (t = 0; t < e.length; t++) n = e[t], r.set(n.data, i), i += n.data.byteLength;
            return r
        }
    }, Pa.prototype = new ur, Ia = function(e, t) {
        var n, i, r = 0,
            a = [],
            s = [];
        t = t || {}, Ia.prototype.init.call(this), delete e.minPTS, this.gopCache_ = [], this.push = function(t) {
            Tr.collectDtsInfo(e, t), "seq_parameter_set_rbsp" !== t.nalUnitType || n || (n = t.config, e.sps = [t.data], Ba.forEach(function(t) {
                e[t] = n[t]
            }, this)), "pic_parameter_set_rbsp" !== t.nalUnitType || i || (i = t.data, e.pps = [t.data]), a.push(t)
        }, this.flush = function() {
            for (var n, i, o, u, l, c; a.length && "access_unit_delimiter_rbsp" !== a[0].nalUnitType;) a.shift();
            if (0 === a.length) return this.resetStream_(), void this.trigger("done", "VideoSegmentStream");
            if (n = gr.groupNalsIntoFrames(a), o = gr.groupFramesIntoGops(n), o[0][0].keyFrame || (i = this.getGopForFusion_(a[0], e), i ? (o.unshift(i), o.byteLength += i.byteLength, o.nalCount += i.nalCount, o.pts = i.pts, o.dts = i.dts, o.duration += i.duration) : o = gr.extendFirstKeyFrame(o)), s.length) {
                var d;
                if (d = t.alignGopsAtEnd ? this.alignGopsAtEnd_(o) : this.alignGopsAtStart_(o), !d) return this.gopCache_.unshift({
                    gop: o.pop(),
                    pps: e.pps,
                    sps: e.sps
                }), this.gopCache_.length = Math.min(6, this.gopCache_.length), a = [], this.resetStream_(), void this.trigger("done", "VideoSegmentStream");
                Tr.clearDtsInfo(e), o = d
            }
            Tr.collectDtsInfo(e, o), e.samples = gr.generateSampleTable(o), l = sr.mdat(gr.concatenateNalData(o)), e.baseMediaDecodeTime = Tr.calculateTrackBaseMediaDecodeTime(e, t.keepOriginalTimestamps), this.trigger("processedGopsInfo", o.map(function(e) {
                return {
                    pts: e.pts,
                    dts: e.dts,
                    byteLength: e.byteLength
                }
            })), this.gopCache_.unshift({
                gop: o.pop(),
                pps: e.pps,
                sps: e.sps
            }), this.gopCache_.length = Math.min(6, this.gopCache_.length), a = [], this.trigger("baseMediaDecodeTime", e.baseMediaDecodeTime), this.trigger("timelineStartInfo", e.timelineStartInfo), u = sr.moof(r, [e]), c = new Uint8Array(u.byteLength + l.byteLength), r++, c.set(u), c.set(l, u.byteLength), this.trigger("data", {
                track: e,
                boxes: c
            }), this.resetStream_(), this.trigger("done", "VideoSegmentStream")
        }, this.resetStream_ = function() {
            Tr.clearDtsInfo(e), n = void 0, i = void 0
        }, this.getGopForFusion_ = function(t) {
            var n, i, r, a, s, o = 45e3,
                u = 1e4,
                l = 1 / 0;
            for (s = 0; s < this.gopCache_.length; s++) a = this.gopCache_[s], r = a.gop, e.pps && Oa(e.pps[0], a.pps[0]) && e.sps && Oa(e.sps[0], a.sps[0]) && (r.dts < e.timelineStartInfo.dts || (n = t.dts - r.dts - r.duration, n >= -u && o >= n && (!i || l > n) && (i = a, l = n)));
            return i ? i.gop : null
        }, this.alignGopsAtStart_ = function(e) {
            var t, n, i, r, a, o, u, l;
            for (a = e.byteLength, o = e.nalCount, u = e.duration, t = n = 0; t < s.length && n < e.length && (i = s[t], r = e[n], i.pts !== r.pts);) r.pts > i.pts ? t++ : (n++, a -= r.byteLength, o -= r.nalCount, u -= r.duration);
            return 0 === n ? e : n === e.length ? null : (l = e.slice(n), l.byteLength = a, l.duration = u, l.nalCount = o, l.pts = l[0].pts, l.dts = l[0].dts, l)
        }, this.alignGopsAtEnd_ = function(e) {
            var t, n, i, r, a, o;
            for (t = s.length - 1, n = e.length - 1, a = null, o = !1; t >= 0 && n >= 0;) {
                if (i = s[t], r = e[n], i.pts === r.pts) {
                    o = !0;
                    break
                }
                i.pts > r.pts ? t-- : (t === s.length - 1 && (a = n), n--)
            }
            if (!o && null === a) return null;
            var u;
            if (u = o ? n : a, 0 === u) return e;
            var l = e.slice(u),
                c = l.reduce(function(e, t) {
                    return e.byteLength += t.byteLength, e.duration += t.duration, e.nalCount += t.nalCount, e
                }, {
                    byteLength: 0,
                    duration: 0,
                    nalCount: 0
                });
            return l.byteLength = c.byteLength, l.duration = c.duration, l.nalCount = c.nalCount, l.pts = l[0].pts, l.dts = l[0].dts, l
        }, this.alignGopsWith = function(e) {
            s = e
        }
    }, Ia.prototype = new ur, Da = function(e, t) {
        this.numberOfTracks = 0, this.metadataStream = t, "undefined" != typeof e.remux ? this.remuxTracks = !!e.remux : this.remuxTracks = !0, this.pendingTracks = [], this.videoTrack = null, this.pendingBoxes = [], this.pendingCaptions = [], this.pendingMetadata = [], this.pendingBytes = 0, this.emittedTracks = 0, Da.prototype.init.call(this), this.push = function(e) {
            return e.text ? this.pendingCaptions.push(e) : e.frames ? this.pendingMetadata.push(e) : (this.pendingTracks.push(e.track), this.pendingBoxes.push(e.boxes), this.pendingBytes += e.boxes.byteLength, "video" === e.track.type && (this.videoTrack = e.track), void("audio" === e.track.type && (this.audioTrack = e.track)))
        }
    }, Da.prototype = new ur, Da.prototype.flush = function(e) {
        var t, n, i, r, a = 0,
            s = {
                captions: [],
                captionStreams: {},
                metadata: [],
                info: {}
            },
            o = 0;
        if (this.pendingTracks.length < this.numberOfTracks) {
            if ("VideoSegmentStream" !== e && "AudioSegmentStream" !== e) return;
            if (this.remuxTracks) return;
            if (0 === this.pendingTracks.length) return this.emittedTracks++, void(this.emittedTracks >= this.numberOfTracks && (this.trigger("done"), this.emittedTracks = 0))
        }
        for (this.videoTrack ? (o = this.videoTrack.timelineStartInfo.pts, Ba.forEach(function(e) {
            s.info[e] = this.videoTrack[e]
        }, this)) : this.audioTrack && (o = this.audioTrack.timelineStartInfo.pts, Na.forEach(function(e) {
            s.info[e] = this.audioTrack[e]
        }, this)), 1 === this.pendingTracks.length ? s.type = this.pendingTracks[0].type : s.type = "combined", this.emittedTracks += this.pendingTracks.length, i = sr.initSegment(this.pendingTracks), s.initSegment = new Uint8Array(i.byteLength), s.initSegment.set(i), s.data = new Uint8Array(this.pendingBytes), r = 0; r < this.pendingBoxes.length; r++) s.data.set(this.pendingBoxes[r], a), a += this.pendingBoxes[r].byteLength;
        for (r = 0; r < this.pendingCaptions.length; r++) t = this.pendingCaptions[r], t.startTime = t.startPts - o, t.startTime /= 9e4, t.endTime = t.endPts - o, t.endTime /= 9e4, s.captionStreams[t.stream] = !0, s.captions.push(t);
        for (r = 0; r < this.pendingMetadata.length; r++) n = this.pendingMetadata[r], n.cueTime = n.pts - o, n.cueTime /= 9e4, s.metadata.push(n);
        s.metadata.dispatchType = this.metadataStream.dispatchType, this.pendingTracks.length = 0, this.videoTrack = null, this.pendingBoxes.length = 0, this.pendingCaptions.length = 0, this.pendingBytes = 0, this.pendingMetadata.length = 0, this.trigger("data", s), this.emittedTracks >= this.numberOfTracks && (this.trigger("done"), this.emittedTracks = 0)
    }, xa = function(e) {
        var t, n, i = this,
            r = !0;
        xa.prototype.init.call(this), e = e || {}, this.baseMediaDecodeTime = e.baseMediaDecodeTime || 0, this.transmuxPipeline_ = {}, this.setupAacPipeline = function() {
            var t = {};
            this.transmuxPipeline_ = t, t.type = "aac", t.metadataStream = new aa.MetadataStream, t.aacStream = new Ta, t.audioTimestampRolloverStream = new aa.TimestampRolloverStream("audio"), t.timedMetadataTimestampRolloverStream = new aa.TimestampRolloverStream("timed-metadata"), t.adtsStream = new ua, t.coalesceStream = new Da(e, t.metadataStream), t.headOfPipeline = t.aacStream, t.aacStream.pipe(t.audioTimestampRolloverStream).pipe(t.adtsStream), t.aacStream.pipe(t.timedMetadataTimestampRolloverStream).pipe(t.metadataStream).pipe(t.coalesceStream), t.metadataStream.on("timestamp", function(e) {
                t.aacStream.setTimestamp(e.timeStamp)
            }), t.aacStream.on("data", function(r) {
                "timed-metadata" !== r.type || t.audioSegmentStream || (n = n || {
                    timelineStartInfo: {
                        baseMediaDecodeTime: i.baseMediaDecodeTime
                    },
                    codec: "adts",
                    type: "audio"
                }, t.coalesceStream.numberOfTracks++, t.audioSegmentStream = new Pa(n, e), t.adtsStream.pipe(t.audioSegmentStream).pipe(t.coalesceStream))
            }), t.coalesceStream.on("data", this.trigger.bind(this, "data")), t.coalesceStream.on("done", this.trigger.bind(this, "done"))
        }, this.setupTsPipeline = function() {
            var r = {};
            this.transmuxPipeline_ = r, r.type = "ts", r.metadataStream = new aa.MetadataStream, r.packetStream = new aa.TransportPacketStream, r.parseStream = new aa.TransportParseStream, r.elementaryStream = new aa.ElementaryStream, r.videoTimestampRolloverStream = new aa.TimestampRolloverStream("video"), r.audioTimestampRolloverStream = new aa.TimestampRolloverStream("audio"), r.timedMetadataTimestampRolloverStream = new aa.TimestampRolloverStream("timed-metadata"), r.adtsStream = new ua, r.h264Stream = new ja, r.captionStream = new aa.CaptionStream, r.coalesceStream = new Da(e, r.metadataStream), r.headOfPipeline = r.packetStream, r.packetStream.pipe(r.parseStream).pipe(r.elementaryStream), r.elementaryStream.pipe(r.videoTimestampRolloverStream).pipe(r.h264Stream), r.elementaryStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream), r.elementaryStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream), r.h264Stream.pipe(r.captionStream).pipe(r.coalesceStream), r.elementaryStream.on("data", function(a) {
                var s;
                if ("metadata" === a.type) {
                    for (s = a.tracks.length; s--;) t || "video" !== a.tracks[s].type ? n || "audio" !== a.tracks[s].type || (n = a.tracks[s], n.timelineStartInfo.baseMediaDecodeTime = i.baseMediaDecodeTime) : (t = a.tracks[s], t.timelineStartInfo.baseMediaDecodeTime = i.baseMediaDecodeTime);
                    t && !r.videoSegmentStream && (r.coalesceStream.numberOfTracks++, r.videoSegmentStream = new Ia(t, e), r.videoSegmentStream.on("timelineStartInfo", function(e) {
                        n && (n.timelineStartInfo = e, r.audioSegmentStream.setEarliestDts(e.dts))
                    }), r.videoSegmentStream.on("processedGopsInfo", i.trigger.bind(i, "gopInfo")), r.videoSegmentStream.on("baseMediaDecodeTime", function(e) {
                        n && r.audioSegmentStream.setVideoBaseMediaDecodeTime(e)
                    }), r.h264Stream.pipe(r.videoSegmentStream).pipe(r.coalesceStream)), n && !r.audioSegmentStream && (r.coalesceStream.numberOfTracks++, r.audioSegmentStream = new Pa(n, e), r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream))
                }
            }), r.coalesceStream.on("data", this.trigger.bind(this, "data")), r.coalesceStream.on("done", this.trigger.bind(this, "done"))
        }, this.setBaseMediaDecodeTime = function(e) {
            var i = this.transmuxPipeline_;
            this.baseMediaDecodeTime = e, n && (n.timelineStartInfo.dts = void 0, n.timelineStartInfo.pts = void 0, Tr.clearDtsInfo(n), n.timelineStartInfo.baseMediaDecodeTime = e, i.audioTimestampRolloverStream && i.audioTimestampRolloverStream.discontinuity()), t && (i.videoSegmentStream && (i.videoSegmentStream.gopCache_ = [], i.videoTimestampRolloverStream.discontinuity()), t.timelineStartInfo.dts = void 0, t.timelineStartInfo.pts = void 0, Tr.clearDtsInfo(t), i.captionStream.reset(), t.timelineStartInfo.baseMediaDecodeTime = e), i.timedMetadataTimestampRolloverStream && i.timedMetadataTimestampRolloverStream.discontinuity()
        }, this.setAudioAppendStart = function(e) {
            n && this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)
        }, this.alignGopsWith = function(e) {
            t && this.transmuxPipeline_.videoSegmentStream && this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)
        }, this.push = function(e) {
            if (r) {
                var t = Ua(e);
                t && "aac" !== this.transmuxPipeline_.type ? this.setupAacPipeline() : t || "ts" === this.transmuxPipeline_.type || this.setupTsPipeline(), r = !1
            }
            this.transmuxPipeline_.headOfPipeline.push(e)
        }, this.flush = function() {
            r = !0, this.transmuxPipeline_.headOfPipeline.flush()
        }, this.resetCaptions = function() {
            this.transmuxPipeline_.captionStream && this.transmuxPipeline_.captionStream.reset()
        }
    }, xa.prototype = new ur;
    var Va, Ha, qa = {
            Transmuxer: xa,
            VideoSegmentStream: Ia,
            AudioSegmentStream: Pa,
            AUDIO_PROPERTIES: Na,
            VIDEO_PROPERTIES: Ba
        },
        za = Ui.parseType,
        Wa = function(e) {
            return new Date(1e3 * e - 20828448e5)
        },
        Ga = function(e) {
            return {
                isLeading: (12 & e[0]) >>> 2,
                dependsOn: 3 & e[0],
                isDependedOn: (192 & e[1]) >>> 6,
                hasRedundancy: (48 & e[1]) >>> 4,
                paddingValue: (14 & e[1]) >>> 1,
                isNonSyncSample: 1 & e[1],
                degradationPriority: e[2] << 8 | e[3]
            }
        },
        Xa = function(e) {
            var t, n, i = new DataView(e.buffer, e.byteOffset, e.byteLength),
                r = [];
            for (t = 0; t + 4 < e.length; t += n)
                if (n = i.getUint32(t), t += 4, 0 >= n) r.push("<span style='color:red;'>MALFORMED DATA</span>");
                else switch (31 & e[t]) {
                    case 1:
                        r.push("slice_layer_without_partitioning_rbsp");
                        break;
                    case 5:
                        r.push("slice_layer_without_partitioning_rbsp_idr");
                        break;
                    case 6:
                        r.push("sei_rbsp");
                        break;
                    case 7:
                        r.push("seq_parameter_set_rbsp");
                        break;
                    case 8:
                        r.push("pic_parameter_set_rbsp");
                        break;
                    case 9:
                        r.push("access_unit_delimiter_rbsp");
                        break;
                    default:
                        r.push("UNKNOWN NAL - " + e[t] & 31)
                }
                return r
        },
        Ya = {
            avc1: function(e) {
                var t = new DataView(e.buffer, e.byteOffset, e.byteLength);
                return {
                    dataReferenceIndex: t.getUint16(6),
                    width: t.getUint16(24),
                    height: t.getUint16(26),
                    horizresolution: t.getUint16(28) + t.getUint16(30) / 16,
                    vertresolution: t.getUint16(32) + t.getUint16(34) / 16,
                    frameCount: t.getUint16(40),
                    depth: t.getUint16(74),
                    config: Va(e.subarray(78, e.byteLength))
                }
            },
            avcC: function(e) {
                var t, n, i, r, a = new DataView(e.buffer, e.byteOffset, e.byteLength),
                    s = {
                        configurationVersion: e[0],
                        avcProfileIndication: e[1],
                        profileCompatibility: e[2],
                        avcLevelIndication: e[3],
                        lengthSizeMinusOne: 3 & e[4],
                        sps: [],
                        pps: []
                    },
                    o = 31 & e[5];
                for (i = 6, r = 0; o > r; r++) n = a.getUint16(i), i += 2, s.sps.push(new Uint8Array(e.subarray(i, i + n))), i += n;
                for (t = e[i], i++, r = 0; t > r; r++) n = a.getUint16(i), i += 2, s.pps.push(new Uint8Array(e.subarray(i, i + n))), i += n;
                return s
            },
            btrt: function(e) {
                var t = new DataView(e.buffer, e.byteOffset, e.byteLength);
                return {
                    bufferSizeDB: t.getUint32(0),
                    maxBitrate: t.getUint32(4),
                    avgBitrate: t.getUint32(8)
                }
            },
            esds: function(e) {
                return {
                    version: e[0],
                    flags: new Uint8Array(e.subarray(1, 4)),
                    esId: e[6] << 8 | e[7],
                    streamPriority: 31 & e[8],
                    decoderConfig: {
                        objectProfileIndication: e[11],
                        streamType: e[12] >>> 2 & 63,
                        bufferSize: e[13] << 16 | e[14] << 8 | e[15],
                        maxBitrate: e[16] << 24 | e[17] << 16 | e[18] << 8 | e[19],
                        avgBitrate: e[20] << 24 | e[21] << 16 | e[22] << 8 | e[23],
                        decoderConfigDescriptor: {
                            tag: e[24],
                            length: e[25],
                            audioObjectType: e[26] >>> 3 & 31,
                            samplingFrequencyIndex: (7 & e[26]) << 1 | e[27] >>> 7 & 1,
                            channelConfiguration: e[27] >>> 3 & 15
                        }
                    }
                }
            },
            ftyp: function(e) {
                for (var t = new DataView(e.buffer, e.byteOffset, e.byteLength), n = {
                    majorBrand: za(e.subarray(0, 4)),
                    minorVersion: t.getUint32(4),
                    compatibleBrands: []
                }, i = 8; i < e.byteLength;) n.compatibleBrands.push(za(e.subarray(i, i + 4))), i += 4;
                return n
            },
            dinf: function(e) {
                return {
                    boxes: Va(e)
                }
            },
            dref: function(e) {
                return {
                    version: e[0],
                    flags: new Uint8Array(e.subarray(1, 4)),
                    dataReferences: Va(e.subarray(8))
                }
            },
            hdlr: function(e) {
                var t = new DataView(e.buffer, e.byteOffset, e.byteLength),
                    n = {
                        version: t.getUint8(0),
                        flags: new Uint8Array(e.subarray(1, 4)),
                        handlerType: za(e.subarray(8, 12)),
                        name: ""
                    },
                    i = 8;
                for (i = 24; i < e.byteLength; i++) {
                    if (0 === e[i]) {
                        i++;
                        break
                    }
                    n.name += String.fromCharCode(e[i])
                }
                return n.name = decodeURIComponent(escape(n.name)), n
            },
            mdat: function(e) {
                return {
                    byteLength: e.byteLength,
                    nals: Xa(e)
                }
            },
            mdhd: function(e) {
                var t, n = new DataView(e.buffer, e.byteOffset, e.byteLength),
                    i = 4,
                    r = {
                        version: n.getUint8(0),
                        flags: new Uint8Array(e.subarray(1, 4)),
                        language: ""
                    };
                return 1 === r.version ? (i += 4, r.creationTime = Wa(n.getUint32(i)), i += 8, r.modificationTime = Wa(n.getUint32(i)), i += 4, r.timescale = n.getUint32(i), i += 8, r.duration = n.getUint32(i)) : (r.creationTime = Wa(n.getUint32(i)), i += 4, r.modificationTime = Wa(n.getUint32(i)), i += 4, r.timescale = n.getUint32(i), i += 4, r.duration = n.getUint32(i)), i += 4, t = n.getUint16(i), r.language += String.fromCharCode((t >> 10) + 96), r.language += String.fromCharCode(((992 & t) >> 5) + 96), r.language += String.fromCharCode((31 & t) + 96), r
            },
            mdia: function(e) {
                return {
                    boxes: Va(e)
                }
            },
            mfhd: function(e) {
                return {
                    version: e[0],
                    flags: new Uint8Array(e.subarray(1, 4)),
                    sequenceNumber: e[4] << 24 | e[5] << 16 | e[6] << 8 | e[7]
                }
            },
            minf: function(e) {
                return {
                    boxes: Va(e)
                }
            },
            mp4a: function(e) {
                var t = new DataView(e.buffer, e.byteOffset, e.byteLength),
                    n = {
                        dataReferenceIndex: t.getUint16(6),
                        channelcount: t.getUint16(16),
                        samplesize: t.getUint16(18),
                        samplerate: t.getUint16(24) + t.getUint16(26) / 65536
                    };
                return e.byteLength > 28 && (n.streamDescriptor = Va(e.subarray(28))[0]), n
            },
            moof: function(e) {
                return {
                    boxes: Va(e)
                }
            },
            moov: function(e) {
                return {
                    boxes: Va(e)
                }
            },
            mvex: function(e) {
                return {
                    boxes: Va(e)
                }
            },
            mvhd: function(e) {
                var t = new DataView(e.buffer, e.byteOffset, e.byteLength),
                    n = 4,
                    i = {
                        version: t.getUint8(0),
                        flags: new Uint8Array(e.subarray(1, 4))
                    };
                return 1 === i.version ? (n += 4, i.creationTime = Wa(t.getUint32(n)), n += 8, i.modificationTime = Wa(t.getUint32(n)), n += 4, i.timescale = t.getUint32(n), n += 8, i.duration = t.getUint32(n)) : (i.creationTime = Wa(t.getUint32(n)), n += 4, i.modificationTime = Wa(t.getUint32(n)), n += 4, i.timescale = t.getUint32(n), n += 4, i.duration = t.getUint32(n)), n += 4, i.rate = t.getUint16(n) + t.getUint16(n + 2) / 16, n += 4, i.volume = t.getUint8(n) + t.getUint8(n + 1) / 8, n += 2, n += 2, n += 8, i.matrix = new Uint32Array(e.subarray(n, n + 36)), n += 36, n += 24, i.nextTrackId = t.getUint32(n), i
            },
            pdin: function(e) {
                var t = new DataView(e.buffer, e.byteOffset, e.byteLength);
                return {
                    version: t.getUint8(0),
                    flags: new Uint8Array(e.subarray(1, 4)),
                    rate: t.getUint32(4),
                    initialDelay: t.getUint32(8)
                }
            },
            sdtp: function(e) {
                var t, n = {
                    version: e[0],
                    flags: new Uint8Array(e.subarray(1, 4)),
                    samples: []
                };
                for (t = 4; t < e.byteLength; t++) n.samples.push({
                    dependsOn: (48 & e[t]) >> 4,
                    isDependedOn: (12 & e[t]) >> 2,
                    hasRedundancy: 3 & e[t]
                });
                return n
            },
            sidx: function(e) {
                var t, n = new DataView(e.buffer, e.byteOffset, e.byteLength),
                    i = {
                        version: e[0],
                        flags: new Uint8Array(e.subarray(1, 4)),
                        references: [],
                        referenceId: n.getUint32(4),
                        timescale: n.getUint32(8),
                        earliestPresentationTime: n.getUint32(12),
                        firstOffset: n.getUint32(16)
                    },
                    r = n.getUint16(22);
                for (t = 24; r; t += 12, r--) i.references.push({
                    referenceType: (128 & e[t]) >>> 7,
                    referencedSize: 2147483647 & n.getUint32(t),
                    subsegmentDuration: n.getUint32(t + 4),
                    startsWithSap: !!(128 & e[t + 8]),
                    sapType: (112 & e[t + 8]) >>> 4,
                    sapDeltaTime: 268435455 & n.getUint32(t + 8)
                });
                return i
            },
            smhd: function(e) {
                return {
                    version: e[0],
                    flags: new Uint8Array(e.subarray(1, 4)),
                    balance: e[4] + e[5] / 256
                }
            },
            stbl: function(e) {
                return {
                    boxes: Va(e)
                }
            },
            stco: function(e) {
                var t, n = new DataView(e.buffer, e.byteOffset, e.byteLength),
                    i = {
                        version: e[0],
                        flags: new Uint8Array(e.subarray(1, 4)),
                        chunkOffsets: []
                    },
                    r = n.getUint32(4);
                for (t = 8; r; t += 4, r--) i.chunkOffsets.push(n.getUint32(t));
                return i
            },
            stsc: function(e) {
                var t, n = new DataView(e.buffer, e.byteOffset, e.byteLength),
                    i = n.getUint32(4),
                    r = {
                        version: e[0],
                        flags: new Uint8Array(e.subarray(1, 4)),
                        sampleToChunks: []
                    };
                for (t = 8; i; t += 12, i--) r.sampleToChunks.push({
                    firstChunk: n.getUint32(t),
                    samplesPerChunk: n.getUint32(t + 4),
                    sampleDescriptionIndex: n.getUint32(t + 8)
                });
                return r
            },
            stsd: function(e) {
                return {
                    version: e[0],
                    flags: new Uint8Array(e.subarray(1, 4)),
                    sampleDescriptions: Va(e.subarray(8))
                }
            },
            stsz: function(e) {
                var t, n = new DataView(e.buffer, e.byteOffset, e.byteLength),
                    i = {
                        version: e[0],
                        flags: new Uint8Array(e.subarray(1, 4)),
                        sampleSize: n.getUint32(4),
                        entries: []
                    };
                for (t = 12; t < e.byteLength; t += 4) i.entries.push(n.getUint32(t));
                return i
            },
            stts: function(e) {
                var t, n = new DataView(e.buffer, e.byteOffset, e.byteLength),
                    i = {
                        version: e[0],
                        flags: new Uint8Array(e.subarray(1, 4)),
                        timeToSamples: []
                    },
                    r = n.getUint32(4);
                for (t = 8; r; t += 8, r--) i.timeToSamples.push({
                    sampleCount: n.getUint32(t),
                    sampleDelta: n.getUint32(t + 4)
                });
                return i
            },
            styp: function(e) {
                return Ya.ftyp(e)
            },
            tfdt: function(e) {
                var t = {
                    version: e[0],
                    flags: new Uint8Array(e.subarray(1, 4)),
                    baseMediaDecodeTime: e[4] << 24 | e[5] << 16 | e[6] << 8 | e[7]
                };
                return 1 === t.version && (t.baseMediaDecodeTime *= Math.pow(2, 32), t.baseMediaDecodeTime += e[8] << 24 | e[9] << 16 | e[10] << 8 | e[11]), t
            },
            tfhd: function(e) {
                var t, n = new DataView(e.buffer, e.byteOffset, e.byteLength),
                    i = {
                        version: e[0],
                        flags: new Uint8Array(e.subarray(1, 4)),
                        trackId: n.getUint32(4)
                    },
                    r = 1 & i.flags[2],
                    a = 2 & i.flags[2],
                    s = 8 & i.flags[2],
                    o = 16 & i.flags[2],
                    u = 32 & i.flags[2],
                    l = 65536 & i.flags[0],
                    c = 131072 & i.flags[0];
                return t = 8, r && (t += 4, i.baseDataOffset = n.getUint32(12), t += 4), a && (i.sampleDescriptionIndex = n.getUint32(t), t += 4), s && (i.defaultSampleDuration = n.getUint32(t), t += 4), o && (i.defaultSampleSize = n.getUint32(t), t += 4), u && (i.defaultSampleFlags = n.getUint32(t)), l && (i.durationIsEmpty = !0), !r && c && (i.baseDataOffsetIsMoof = !0), i
            },
            tkhd: function(e) {
                var t = new DataView(e.buffer, e.byteOffset, e.byteLength),
                    n = 4,
                    i = {
                        version: t.getUint8(0),
                        flags: new Uint8Array(e.subarray(1, 4))
                    };
                return 1 === i.version ? (n += 4, i.creationTime = Wa(t.getUint32(n)), n += 8, i.modificationTime = Wa(t.getUint32(n)), n += 4, i.trackId = t.getUint32(n), n += 4, n += 8, i.duration = t.getUint32(n)) : (i.creationTime = Wa(t.getUint32(n)), n += 4, i.modificationTime = Wa(t.getUint32(n)), n += 4, i.trackId = t.getUint32(n), n += 4, n += 4, i.duration = t.getUint32(n)), n += 4, n += 8, i.layer = t.getUint16(n), n += 2, i.alternateGroup = t.getUint16(n), n += 2, i.volume = t.getUint8(n) + t.getUint8(n + 1) / 8, n += 2, n += 2, i.matrix = new Uint32Array(e.subarray(n, n + 36)), n += 36, i.width = t.getUint16(n) + t.getUint16(n + 2) / 16, n += 4, i.height = t.getUint16(n) + t.getUint16(n + 2) / 16, i
            },
            traf: function(e) {
                return {
                    boxes: Va(e)
                }
            },
            trak: function(e) {
                return {
                    boxes: Va(e)
                }
            },
            trex: function(e) {
                var t = new DataView(e.buffer, e.byteOffset, e.byteLength);
                return {
                    version: e[0],
                    flags: new Uint8Array(e.subarray(1, 4)),
                    trackId: t.getUint32(4),
                    defaultSampleDescriptionIndex: t.getUint32(8),
                    defaultSampleDuration: t.getUint32(12),
                    defaultSampleSize: t.getUint32(16),
                    sampleDependsOn: 3 & e[20],
                    sampleIsDependedOn: (192 & e[21]) >> 6,
                    sampleHasRedundancy: (48 & e[21]) >> 4,
                    samplePaddingValue: (14 & e[21]) >> 1,
                    sampleIsDifferenceSample: !!(1 & e[21]),
                    sampleDegradationPriority: t.getUint16(22)
                }
            },
            trun: function(e) {
                var t, n = {
                        version: e[0],
                        flags: new Uint8Array(e.subarray(1, 4)),
                        samples: []
                    },
                    i = new DataView(e.buffer, e.byteOffset, e.byteLength),
                    r = 1 & n.flags[2],
                    a = 4 & n.flags[2],
                    s = 1 & n.flags[1],
                    o = 2 & n.flags[1],
                    u = 4 & n.flags[1],
                    l = 8 & n.flags[1],
                    c = i.getUint32(4),
                    d = 8;
                for (r && (n.dataOffset = i.getInt32(d), d += 4), a && c && (t = {
                    flags: Ga(e.subarray(d, d + 4))
                }, d += 4, s && (t.duration = i.getUint32(d), d += 4), o && (t.size = i.getUint32(d), d += 4), l && (t.compositionTimeOffset = i.getUint32(d), d += 4), n.samples.push(t), c--); c--;) t = {}, s && (t.duration = i.getUint32(d), d += 4), o && (t.size = i.getUint32(d), d += 4), u && (t.flags = Ga(e.subarray(d, d + 4)), d += 4), l && (t.compositionTimeOffset = i.getUint32(d), d += 4), n.samples.push(t);
                return n
            },
            "url ": function(e) {
                return {
                    version: e[0],
                    flags: new Uint8Array(e.subarray(1, 4))
                }
            },
            vmhd: function(e) {
                var t = new DataView(e.buffer, e.byteOffset, e.byteLength);
                return {
                    version: e[0],
                    flags: new Uint8Array(e.subarray(1, 4)),
                    graphicsmode: t.getUint16(4),
                    opcolor: new Uint16Array([t.getUint16(6), t.getUint16(8), t.getUint16(10)])
                }
            }
        };
    Va = function(e) {
        for (var t, n, i, r, a, s = 0, o = [], u = new ArrayBuffer(e.length), l = new Uint8Array(u), c = 0; c < e.length; ++c) l[c] = e[c];
        for (t = new DataView(u); s < e.byteLength;) n = t.getUint32(s), i = za(e.subarray(s + 4, s + 8)), r = n > 1 ? s + n : e.byteLength, a = (Ya[i] || function(e) {
            return {
                data: e
            }
        })(e.subarray(s + 8, r)), a.size = n, a.type = i, o.push(a), s = r;
        return o
    }, Ha = function(e, t) {
        var n;
        return t = t || 0, n = new Array(2 * t + 1).join(" "), e.map(function(e, i) {
            return n + e.type + "\n" + Object.keys(e).filter(function(e) {
                return "type" !== e && "boxes" !== e
            }).map(function(t) {
                var i = n + "  " + t + ": ",
                    r = e[t];
                if (r instanceof Uint8Array || r instanceof Uint32Array) {
                    var a = Array.prototype.slice.call(new Uint8Array(r.buffer, r.byteOffset, r.byteLength)).map(function(e) {
                        return " " + ("00" + e.toString(16)).slice(-2)
                    }).join("").match(/.{1,24}/g);
                    return a ? 1 === a.length ? i + "<" + a.join("").slice(1) + ">" : i + "<\n" + a.map(function(e) {
                        return n + "  " + e
                    }).join("\n") + "\n" + n + "  >" : i + "<>"
                }
                return i + JSON.stringify(r, null, 2).split("\n").map(function(e, t) {
                    return 0 === t ? e : n + "  " + e
                }).join("\n")
            }).join("\n") + (e.boxes ? "\n" + Ha(e.boxes, t + 1) : "")
        }).join("\n")
    };
    var $a = {
            inspect: Va,
            textify: Ha,
            parseTfdt: Ya.tfdt,
            parseHdlr: Ya.hdlr,
            parseTfhd: Ya.tfhd,
            parseTrun: Ya.trun
        },
        Qa = Lr.discardEmulationPreventionBytes,
        Ka = Rr.CaptionStream,
        Ja = function(e, t) {
            for (var n = e, i = 0; i < t.length; i++) {
                var r = t[i];
                if (n < r.size) return r;
                n -= r.size
            }
            return null
        },
        Za = function(e, t, n) {
            var i, r, a, s, o = new DataView(e.buffer, e.byteOffset, e.byteLength),
                u = [];
            for (r = 0; r + 4 < e.length; r += a)
                if (a = o.getUint32(r), r += 4, !(0 >= a)) switch (31 & e[r]) {
                    case 6:
                        var l = e.subarray(r + 1, r + 1 + a),
                            c = Ja(r, t);
                        i = {
                            nalUnitType: "sei_rbsp",
                            size: a,
                            data: l,
                            escapedRBSP: Qa(l),
                            trackId: n
                        }, c ? (i.pts = c.pts, i.dts = c.dts, s = c) : (i.pts = s.pts, i.dts = s.dts), u.push(i)
                }
                return u
        },
        es = function(e, t, n) {
            var i = t,
                r = n.defaultSampleDuration || 0,
                a = n.defaultSampleSize || 0,
                s = n.trackId,
                o = [];
            return e.forEach(function(e) {
                var t = $a.parseTrun(e),
                    n = t.samples;
                n.forEach(function(e) {
                    void 0 === e.duration && (e.duration = r), void 0 === e.size && (e.size = a), e.trackId = s, e.dts = i, void 0 === e.compositionTimeOffset && (e.compositionTimeOffset = 0), e.pts = i + e.compositionTimeOffset, i += e.duration
                }), o = o.concat(n)
            }), o
        },
        ts = function(e, t) {
            var n = Ui.findBox(e, ["moof", "traf"]),
                i = Ui.findBox(e, ["mdat"]),
                r = {},
                a = [];
            return i.forEach(function(e, t) {
                var i = n[t];
                a.push({
                    mdat: e,
                    traf: i
                })
            }), a.forEach(function(e) {
                var n, i, a = e.mdat,
                    s = e.traf,
                    o = Ui.findBox(s, ["tfhd"]),
                    u = $a.parseTfhd(o[0]),
                    l = u.trackId,
                    c = Ui.findBox(s, ["tfdt"]),
                    d = c.length > 0 ? $a.parseTfdt(c[0]).baseMediaDecodeTime : 0,
                    h = Ui.findBox(s, ["trun"]);
                t === l && h.length > 0 && (n = es(h, d, u), i = Za(a, n, l), r[l] || (r[l] = []), r[l] = r[l].concat(i))
            }), r
        },
        ns = function(e, t, n) {
            var i;
            return t ? (i = ts(e, t), {
                seiNals: i[t],
                timescale: n
            }) : null
        },
        is = function() {
            var e, t, n, i, r, a = !1;
            this.isInitialized = function() {
                return a
            }, this.init = function() {
                e = new Ka, a = !0, e.on("data", function(e) {
                    e.startTime = e.startPts / i, e.endTime = e.endPts / i, r.captions.push(e), r.captionStreams[e.stream] = !0
                })
            }, this.isNewInit = function(e, t) {
                return e && 0 === e.length || t && "object" == typeof t && 0 === Object.keys(t).length ? !1 : n !== e[0] || i !== t[n]
            }, this.parse = function(e, a, s) {
                var o;
                if (!this.isInitialized()) return null;
                if (!a || !s) return null;
                if (this.isNewInit(a, s)) n = a[0], i = s[n];
                else if (!n || !i) return t.push(e), null;
                for (; t.length > 0;) {
                    var u = t.shift();
                    this.parse(u, a, s)
                }
                return o = ns(e, n, i), null !== o && o.seiNals ? (this.pushNals(o.seiNals), this.flushStream(), r) : null
            }, this.pushNals = function(t) {
                return this.isInitialized() && t && 0 !== t.length ? void t.forEach(function(t) {
                    e.push(t)
                }) : null
            }, this.flushStream = function() {
                return this.isInitialized() ? void e.flush() : null
            }, this.clearParsedCaptions = function() {
                r.captions = [], r.captionStreams = {}
            }, this.resetCaptionStream = function() {
                return this.isInitialized() ? void e.reset() : null
            }, this.clearAllCaptions = function() {
                this.clearParsedCaptions(), this.resetCaptionStream()
            }, this.reset = function() {
                t = [], n = null, i = null, r ? this.clearParsedCaptions() : r = {
                    captions: [],
                    captionStreams: {}
                }, this.resetCaptionStream()
            }, this.reset()
        },
        rs = is,
        as = {
            generator: sr,
            probe: Ui,
            Transmuxer: qa.Transmuxer,
            AudioSegmentStream: qa.AudioSegmentStream,
            VideoSegmentStream: qa.VideoSegmentStream,
            CaptionParser: rs
        },
        ss = as.CaptionParser,
        os = 500,
        us = function(e, t, n) {
            if (!e || !t) return !1;
            var i = e.segments,
                r = n === i.length;
            return e.endList && "open" === t.readyState && r
        },
        ls = function(e) {
            return "number" == typeof e && isFinite(e)
        },
        cs = function(e, t, n) {
            return "main" === e && t && n ? n.containsAudio || n.containsVideo ? t.containsVideo && !n.containsVideo ? "Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest." : !t.containsVideo && n.containsVideo ? "Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest." : null : "Neither audio nor video found in segment." : null
        },
        ds = function(e, t, n) {
            var i = void 0;
            return i = e.length && e.start(0) > 0 && e.start(0) < t ? e.start(0) : t - 30, Math.min(i, t - n)
        },
        hs = function(e) {
            var t = e.segment,
                n = t.start,
                i = t.end,
                r = e.playlist,
                a = r.mediaSequence,
                s = r.id,
                o = r.segments,
                u = void 0 === o ? [] : o,
                l = e.mediaIndex,
                c = e.timeline;
            return ["appending [" + l + "] of [" + a + ", " + (a + u.length) + "] from playlist [" + s + "]", "[" + n + " => " + i + "] in timeline [" + c + "]"].join(" ")
        },
        ps = function(e) {
            function n(e) {
                x(this, n);
                var t = M(this, (n.__proto__ || Object.getPrototypeOf(n)).call(this));
                if (!e) throw new TypeError("Initialization settings are required");
                if ("function" != typeof e.currentTime) throw new TypeError("No currentTime getter specified");
                if (!e.mediaSource) throw new TypeError("No MediaSource specified");
                return t.bandwidth = e.bandwidth, t.throughput = {
                    rate: 0,
                    count: 0
                }, t.roundTrip = NaN, t.resetStats_(), t.mediaIndex = null, t.hasPlayed_ = e.hasPlayed, t.currentTime_ = e.currentTime, t.seekable_ = e.seekable, t.seeking_ = e.seeking, t.duration_ = e.duration, t.mediaSource_ = e.mediaSource, t.hls_ = e.hls, t.loaderType_ = e.loaderType, t.startingMedia_ = void 0, t.segmentMetadataTrack_ = e.segmentMetadataTrack, t.goalBufferLength_ = e.goalBufferLength, t.sourceType_ = e.sourceType, t.inbandTextTracks_ = e.inbandTextTracks, t.state_ = "INIT", t.checkBufferTimeout_ = null, t.error_ = void 0, t.currentTimeline_ = -1, t.pendingSegment_ = null, t.mimeType_ = null, t.sourceUpdater_ = null, t.xhrOptions_ = null, t.activeInitSegmentId_ = null, t.initSegments_ = {}, t.captionParser_ = new ss, t.decrypter_ = e.decrypter, t.syncController_ = e.syncController, t.syncPoint_ = {
                    segmentIndex: 0,
                    time: 0
                }, t.syncController_.on("syncinfoupdate", function() {
                    return t.trigger("syncinfoupdate")
                }), t.mediaSource_.addEventListener("sourceopen", function() {
                    return t.ended_ = !1
                }), t.fetchAtBuffer_ = !1, t.logger_ = Wn("SegmentLoader[" + t.loaderType_ + "]"), Object.defineProperty(t, "state", {
                    get: function() {
                        return this.state_
                    },
                    set: function(e) {
                        e !== this.state_ && (this.logger_(this.state_ + " -> " + e), this.state_ = e)
                    }
                }), t
            }
            return O(n, e), D(n, [{
                key: "resetStats_",
                value: function() {
                    this.mediaBytesTransferred = 0, this.mediaRequests = 0, this.mediaRequestsAborted = 0, this.mediaRequestsTimedout = 0, this.mediaRequestsErrored = 0, this.mediaTransferDuration = 0, this.mediaSecondsLoaded = 0
                }
            }, {
                key: "dispose",
                value: function() {
                    this.state = "DISPOSED", this.pause(), this.abort_(), this.sourceUpdater_ && this.sourceUpdater_.dispose(), this.resetStats_(), this.captionParser_.reset()
                }
            }, {
                key: "abort",
                value: function() {
                    return "WAITING" !== this.state ? void(this.pendingSegment_ && (this.pendingSegment_ = null)) : (this.abort_(), this.state = "READY", void(this.paused() || this.monitorBuffer_()))
                }
            }, {
                key: "abort_",
                value: function() {
                    this.pendingSegment_ && this.pendingSegment_.abortRequests(), this.pendingSegment_ = null
                }
            }, {
                key: "error",
                value: function(e) {
                    return "undefined" != typeof e && (this.error_ = e), this.pendingSegment_ = null, this.error_
                }
            }, {
                key: "endOfStream",
                value: function() {
                    this.ended_ = !0, this.pause(), this.trigger("ended")
                }
            }, {
                key: "buffered_",
                value: function() {
                    return this.sourceUpdater_ ? this.sourceUpdater_.buffered() : t.createTimeRanges()
                }
            }, {
                key: "initSegment",
                value: function(e) {
                    var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : !1;
                    if (!e) return null;
                    var n = je(e),
                        i = this.initSegments_[n];
                    return t && !i && e.bytes && (this.initSegments_[n] = i = {
                        resolvedUri: e.resolvedUri,
                        byterange: e.byterange,
                        bytes: e.bytes,
                        timescales: e.timescales,
                        videoTrackIds: e.videoTrackIds
                    }), i || e
                }
            }, {
                key: "couldBeginLoading_",
                value: function() {
                    return this.playlist_ && (this.sourceUpdater_ || this.mimeType_ && "INIT" === this.state) && !this.paused()
                }
            }, {
                key: "load",
                value: function() {
                    return this.monitorBuffer_(), this.playlist_ ? (this.syncController_.setDateTimeMapping(this.playlist_), "INIT" === this.state && this.couldBeginLoading_() ? this.init_() : void(!this.couldBeginLoading_() || "READY" !== this.state && "INIT" !== this.state || (this.state = "READY"))) : void 0
                }
            }, {
                key: "init_",
                value: function() {
                    return this.state = "READY", this.sourceUpdater_ = new Gn(this.mediaSource_, this.mimeType_, this.loaderType_, this.sourceBufferEmitter_), this.resetEverything(), this.monitorBuffer_()
                }
            }, {
                key: "playlist",
                value: function(e) {
                    var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
                    if (e) {
                        var n = this.playlist_,
                            i = this.pendingSegment_;
                        this.playlist_ = e, this.xhrOptions_ = t, this.hasPlayed_() || (e.syncInfo = {
                            mediaSequence: e.mediaSequence,
                            time: 0
                        });
                        var r = n ? n.id : null;
                        if (this.logger_("playlist update [" + r + " => " + e.id + "]"), this.trigger("syncinfoupdate"), "INIT" === this.state && this.couldBeginLoading_()) return this.init_();
                        if (!n || n.uri !== e.uri) return void(null !== this.mediaIndex && this.resyncLoader());
                        var a = e.mediaSequence - n.mediaSequence;
                        this.logger_("live window shift [" + a + "]"), null !== this.mediaIndex && (this.mediaIndex -= a), i && (i.mediaIndex -= a, i.mediaIndex >= 0 && (i.segment = e.segments[i.mediaIndex])), this.syncController_.saveExpiredSegmentInfo(n, e)
                    }
                }
            }, {
                key: "pause",
                value: function() {
                    this.checkBufferTimeout_ && (_.clearTimeout(this.checkBufferTimeout_), this.checkBufferTimeout_ = null)
                }
            }, {
                key: "paused",
                value: function() {
                    return null === this.checkBufferTimeout_
                }
            }, {
                key: "mimeType",
                value: function(e, t) {
                    this.mimeType_ || (this.mimeType_ = e, this.sourceBufferEmitter_ = t, "INIT" === this.state && this.couldBeginLoading_() && this.init_())
                }
            }, {
                key: "resetEverything",
                value: function(e) {
                    this.ended_ = !1, this.resetLoader(), this.remove(0, this.duration_(), e), this.captionParser_.clearAllCaptions(), this.trigger("reseteverything")
                }
            }, {
                key: "resetLoader",
                value: function() {
                    this.fetchAtBuffer_ = !1, this.resyncLoader()
                }
            }, {
                key: "resyncLoader",
                value: function() {
                    this.mediaIndex = null, this.syncPoint_ = null, this.abort()
                }
            }, {
                key: "remove",
                value: function(e, t, n) {
                    if (this.sourceUpdater_ && this.sourceUpdater_.remove(e, t, n), Je(e, t, this.segmentMetadataTrack_), this.inbandTextTracks_)
                        for (var i in this.inbandTextTracks_) Je(e, t, this.inbandTextTracks_[i])
                }
            }, {
                key: "monitorBuffer_",
                value: function() {
                    this.checkBufferTimeout_ && _.clearTimeout(this.checkBufferTimeout_), this.checkBufferTimeout_ = _.setTimeout(this.monitorBufferTick_.bind(this), 1)
                }
            }, {
                key: "monitorBufferTick_",
                value: function() {
                    "READY" === this.state && this.fillBuffer_(), this.checkBufferTimeout_ && _.clearTimeout(this.checkBufferTimeout_), this.checkBufferTimeout_ = _.setTimeout(this.monitorBufferTick_.bind(this), os)
                }
            }, {
                key: "fillBuffer_",
                value: function() {
                    if (!this.sourceUpdater_.updating()) {
                        this.syncPoint_ || (this.syncPoint_ = this.syncController_.getSyncPoint(this.playlist_, this.duration_(), this.currentTimeline_, this.currentTime_()));
                        var e = this.checkBuffer_(this.buffered_(), this.playlist_, this.mediaIndex, this.hasPlayed_(), this.currentTime_(), this.syncPoint_);
                        if (e) {
                            var t = us(this.playlist_, this.mediaSource_, e.mediaIndex);
                            return t ? void this.endOfStream() : void((e.mediaIndex !== this.playlist_.segments.length - 1 || "ended" !== this.mediaSource_.readyState || this.seeking_()) && ((e.timeline !== this.currentTimeline_ || null !== e.startOfSegment && e.startOfSegment < this.sourceUpdater_.timestampOffset()) && (this.syncController_.reset(), e.timestampOffset = e.startOfSegment, this.captionParser_.clearAllCaptions()), this.loadSegment_(e)))
                        }
                    }
                }
            }, {
                key: "checkBuffer_",
                value: function(e, t, n, i, r, a) {
                    var s = 0,
                        o = void 0;
                    e.length && (s = e.end(e.length - 1));
                    var u = Math.max(0, s - r);
                    if (!t.segments.length) return null;
                    if (u >= this.goalBufferLength_()) return null;
                    if (!i && u >= 1) return null;
                    if (null === a) return n = this.getSyncSegmentCandidate_(t), this.generateSegmentInfo_(t, n, null, !0);
                    if (null !== n) {
                        var l = t.segments[n];
                        return o = l && l.end ? l.end : s, this.generateSegmentInfo_(t, n + 1, o, !1)
                    }
                    if (this.fetchAtBuffer_) {
                        var c = ve.getMediaInfoForTime(t, s, a.segmentIndex, a.time);
                        n = c.mediaIndex, o = c.startTime
                    } else {
                        var d = ve.getMediaInfoForTime(t, r, a.segmentIndex, a.time);
                        n = d.mediaIndex, o = d.startTime
                    }
                    return this.generateSegmentInfo_(t, n, o, !1)
                }
            }, {
                key: "getSyncSegmentCandidate_",
                value: function(e) {
                    var t = this;
                    if (-1 === this.currentTimeline_) return 0;
                    var n = e.segments.map(function(e, t) {
                        return {
                            timeline: e.timeline,
                            segmentIndex: t
                        }
                    }).filter(function(e) {
                        return e.timeline === t.currentTimeline_
                    });
                    return n.length ? n[Math.min(n.length - 1, 1)].segmentIndex : Math.max(e.segments.length - 1, 0)
                }
            }, {
                key: "generateSegmentInfo_",
                value: function(e, t, n, i) {
                    if (0 > t || t >= e.segments.length) return null;
                    var r = e.segments[t];
                    return {
                        requestId: "segment-loader-" + Math.random(),
                        uri: r.resolvedUri,
                        mediaIndex: t,
                        isSyncRequest: i,
                        startOfSegment: n,
                        playlist: e,
                        bytes: null,
                        encryptedBytes: null,
                        timestampOffset: null,
                        timeline: r.timeline,
                        duration: r.duration,
                        segment: r
                    }
                }
            }, {
                key: "abortRequestEarly_",
                value: function(e) {
                    if (this.hls_.tech_.paused() || !this.xhrOptions_.timeout || !this.playlist_.attributes.BANDWIDTH) return !1;
                    if (Date.now() - (e.firstBytesReceivedAt || Date.now()) < 1e3) return !1;
                    var t = this.currentTime_(),
                        n = e.bandwidth,
                        i = this.pendingSegment_.duration,
                        r = ve.estimateSegmentRequestTime(i, n, this.playlist_, e.bytesReceived),
                        a = $e(this.buffered_(), t, this.hls_.tech_.playbackRate()) - 1;
                    if (a >= r) return !1;
                    var s = tr({
                        master: this.hls_.playlists.master,
                        currentTime: t,
                        bandwidth: n,
                        duration: this.duration_(),
                        segmentDuration: i,
                        timeUntilRebuffer: a,
                        currentTimeline: this.currentTimeline_,
                        syncController: this.syncController_
                    });
                    if (s) {
                        var o = r - a,
                            u = o - s.rebufferingImpact,
                            l = .5;
                        return He >= a && (l = 1), !s.playlist || s.playlist.uri === this.playlist_.uri || l > u ? !1 : (this.bandwidth = s.playlist.attributes.BANDWIDTH * Xn.BANDWIDTH_VARIANCE + 1, this.abort(), this.trigger("earlyabort"), !0)
                    }
                }
            }, {
                key: "handleProgress_",
                value: function(e, t) {
                    this.pendingSegment_ && t.requestId === this.pendingSegment_.requestId && !this.abortRequestEarly_(t.stats) && this.trigger("progress")
                }
            }, {
                key: "loadSegment_",
                value: function(e) {
                    this.state = "WAITING", this.pendingSegment_ = e, this.trimBackBuffer_(e), e.abortRequests = Yi(this.hls_.xhr, this.xhrOptions_, this.decrypter_, this.captionParser_, this.createSimplifiedSegmentObj_(e), this.handleProgress_.bind(this), this.segmentRequestFinished_.bind(this))
                }
            }, {
                key: "trimBackBuffer_",
                value: function(e) {
                    var t = ds(this.seekable_(), this.currentTime_(), this.playlist_.targetDuration || 10);
                    t > 0 && this.remove(0, t)
                }
            }, {
                key: "createSimplifiedSegmentObj_",
                value: function(e) {
                    var t = e.segment,
                        n = {
                            resolvedUri: t.resolvedUri,
                            byterange: t.byterange,
                            requestId: e.requestId
                        };
                    if (t.key) {
                        var i = t.key.iv || new Uint32Array([0, 0, 0, e.mediaIndex + e.playlist.mediaSequence]);
                        n.key = {
                            resolvedUri: t.key.resolvedUri,
                            iv: i
                        }
                    }
                    return t.map && (n.map = this.initSegment(t.map)), n
                }
            }, {
                key: "segmentRequestFinished_",
                value: function(e, t) {
                    if (this.mediaRequests += 1, t.stats && (this.mediaBytesTransferred += t.stats.bytesReceived, this.mediaTransferDuration += t.stats.roundTripTime), !this.pendingSegment_) return void(this.mediaRequestsAborted += 1);
                    if (t.requestId === this.pendingSegment_.requestId) {
                        if (e) return this.pendingSegment_ = null, this.state = "READY", e.code === Oi.ABORTED ? void(this.mediaRequestsAborted += 1) : (this.pause(), e.code === Oi.TIMEOUT ? (this.mediaRequestsTimedout += 1, this.bandwidth = 1, this.roundTrip = NaN, void this.trigger("bandwidthupdate")) : (this.mediaRequestsErrored += 1, this.error(e), void this.trigger("error")));
                        this.bandwidth = t.stats.bandwidth, this.roundTrip = t.stats.roundTripTime, t.map && (t.map = this.initSegment(t.map, !0)), this.processSegmentResponse_(t)
                    }
                }
            }, {
                key: "processSegmentResponse_",
                value: function(e) {
                    var t = this.pendingSegment_;
                    t.bytes = e.bytes, e.map && (t.segment.map.bytes = e.map.bytes), t.endOfAllRequests = e.endOfAllRequests, e.fmp4Captions && (ir(this.inbandTextTracks_, this.hls_.tech_, e.captionStreams), rr({
                        inbandTextTracks: this.inbandTextTracks_,
                        captionArray: e.fmp4Captions,
                        timestampOffset: 0
                    }), this.captionParser_.clearParsedCaptions()), this.handleSegment_()
                }
            }, {
                key: "handleSegment_",
                value: function() {
                    var e = this;
                    if (!this.pendingSegment_) return void(this.state = "READY");
                    var t = this.pendingSegment_,
                        n = t.segment,
                        i = this.syncController_.probeSegmentInfo(t);
                    "undefined" == typeof this.startingMedia_ && i && (i.containsAudio || i.containsVideo) && (this.startingMedia_ = {
                        containsAudio: i.containsAudio,
                        containsVideo: i.containsVideo
                    });
                    var r = cs(this.loaderType_, this.startingMedia_, i);
                    if (r) return this.error({
                        message: r,
                        blacklistDuration: 1 / 0
                    }), void this.trigger("error");
                    if (t.isSyncRequest) return this.trigger("syncinfoupdate"), this.pendingSegment_ = null, void(this.state = "READY");
                    null !== t.timestampOffset && t.timestampOffset !== this.sourceUpdater_.timestampOffset() && (this.sourceUpdater_.timestampOffset(t.timestampOffset), this.trigger("timestampoffset"));
                    var a = this.syncController_.mappingForTimeline(t.timeline);
                    if (null !== a && this.trigger({
                        type: "segmenttimemapping",
                        mapping: a
                    }), this.state = "APPENDING", n.map) {
                        var s = je(n.map);
                        if (!this.activeInitSegmentId_ || this.activeInitSegmentId_ !== s) {
                            var o = this.initSegment(n.map);
                            this.sourceUpdater_.appendBuffer(o.bytes, function() {
                                e.activeInitSegmentId_ = s
                            })
                        }
                    }
                    t.byteLength = t.bytes.byteLength, "number" == typeof n.start && "number" == typeof n.end ? this.mediaSecondsLoaded += n.end - n.start : this.mediaSecondsLoaded += n.duration, this.logger_(hs(t)), this.sourceUpdater_.appendBuffer(t.bytes, this.handleUpdateEnd_.bind(this))
                }
            }, {
                key: "handleUpdateEnd_",
                value: function() {
                    if (!this.pendingSegment_) return this.state = "READY", void(this.paused() || this.monitorBuffer_());
                    var e = this.pendingSegment_,
                        t = e.segment,
                        n = null !== this.mediaIndex;
                    if (this.pendingSegment_ = null, this.recordThroughput_(e), this.addSegmentMetadataCue_(e), this.state = "READY", this.mediaIndex = e.mediaIndex, this.fetchAtBuffer_ = !0, this.currentTimeline_ = e.timeline, this.trigger("syncinfoupdate"), t.end && this.currentTime_() - t.end > 3 * e.playlist.targetDuration) return void this.resetEverything();
                    n && this.trigger("bandwidthupdate"), this.trigger("progress");
                    var i = us(e.playlist, this.mediaSource_, e.mediaIndex + 1);
                    i && this.endOfStream(), this.paused() || this.monitorBuffer_()
                }
            }, {
                key: "recordThroughput_",
                value: function(e) {
                    var t = this.throughput.rate,
                        n = Date.now() - e.endOfAllRequests + 1,
                        i = Math.floor(e.byteLength / n * 8 * 1e3);
                    this.throughput.rate += (i - t) / ++this.throughput.count
                }
            }, {
                key: "addSegmentMetadataCue_",
                value: function(e) {
                    if (this.segmentMetadataTrack_) {
                        var t = e.segment,
                            n = t.start,
                            i = t.end;
                        if (ls(n) && ls(i)) {
                            Je(n, i, this.segmentMetadataTrack_);
                            var r = _.WebKitDataCue || _.VTTCue,
                                a = {
                                    bandwidth: e.playlist.attributes.BANDWIDTH,
                                    resolution: e.playlist.attributes.RESOLUTION,
                                    codecs: e.playlist.attributes.CODECS,
                                    byteLength: e.byteLength,
                                    uri: e.uri,
                                    timeline: e.timeline,
                                    playlist: e.playlist.uri,
                                    start: n,
                                    end: i
                                },
                                s = JSON.stringify(a),
                                o = new r(n, i, s);
                            o.value = a, this.segmentMetadataTrack_.addCue(o)
                        }
                    }
                }
            }]), n
        }(t.EventTarget),
        fs = function(e) {
            return decodeURIComponent(escape(String.fromCharCode.apply(null, e)))
        },
        ms = new Uint8Array("\n\n".split("").map(function(e) {
            return e.charCodeAt(0)
        })),
        gs = function(e) {
            function n(e) {
                var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
                x(this, n);
                var i = M(this, (n.__proto__ || Object.getPrototypeOf(n)).call(this, e, t));
                return i.mediaSource_ = null, i.subtitlesTrack_ = null, i
            }
            return O(n, e), D(n, [{
                key: "buffered_",
                value: function() {
                    if (!this.subtitlesTrack_ || !this.subtitlesTrack_.cues.length) return t.createTimeRanges();
                    var e = this.subtitlesTrack_.cues,
                        n = e[0].startTime,
                        i = e[e.length - 1].startTime;
                    return t.createTimeRanges([
                        [n, i]
                    ])
                }
            }, {
                key: "initSegment",
                value: function(e) {
                    var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : !1;
                    if (!e) return null;
                    var n = je(e),
                        i = this.initSegments_[n];
                    if (t && !i && e.bytes) {
                        var r = ms.byteLength + e.bytes.byteLength,
                            a = new Uint8Array(r);
                        a.set(e.bytes), a.set(ms, e.bytes.byteLength), this.initSegments_[n] = i = {
                            resolvedUri: e.resolvedUri,
                            byterange: e.byterange,
                            bytes: a
                        }
                    }
                    return i || e
                }
            }, {
                key: "couldBeginLoading_",
                value: function() {
                    return this.playlist_ && this.subtitlesTrack_ && !this.paused()
                }
            }, {
                key: "init_",
                value: function() {
                    return this.state = "READY", this.resetEverything(), this.monitorBuffer_()
                }
            }, {
                key: "track",
                value: function(e) {
                    return "undefined" == typeof e ? this.subtitlesTrack_ : (this.subtitlesTrack_ = e, "INIT" === this.state && this.couldBeginLoading_() && this.init_(), this.subtitlesTrack_)
                }
            }, {
                key: "remove",
                value: function(e, t) {
                    Je(e, t, this.subtitlesTrack_)
                }
            }, {
                key: "fillBuffer_",
                value: function() {
                    var e = this;
                    this.syncPoint_ || (this.syncPoint_ = this.syncController_.getSyncPoint(this.playlist_, this.duration_(), this.currentTimeline_, this.currentTime_()));
                    var t = this.checkBuffer_(this.buffered_(), this.playlist_, this.mediaIndex, this.hasPlayed_(), this.currentTime_(), this.syncPoint_);
                    if (t = this.skipEmptySegments_(t)) {
                        if (null === this.syncController_.timestampOffsetForTimeline(t.timeline)) {
                            var n = function() {
                                e.state = "READY", e.paused() || e.monitorBuffer_()
                            };
                            return this.syncController_.one("timestampoffset", n), void(this.state = "WAITING_ON_TIMELINE")
                        }
                        this.loadSegment_(t)
                    }
                }
            }, {
                key: "skipEmptySegments_",
                value: function(e) {
                    for (; e && e.segment.empty;) e = this.generateSegmentInfo_(e.playlist, e.mediaIndex + 1, e.startOfSegment + e.duration, e.isSyncRequest);
                    return e
                }
            }, {
                key: "handleSegment_",
                value: function() {
                    var e = this;
                    if (!this.pendingSegment_ || !this.subtitlesTrack_) return void(this.state = "READY");
                    this.state = "APPENDING";
                    var t = this.pendingSegment_,
                        n = t.segment;
                    if ("function" != typeof _.WebVTT && this.subtitlesTrack_ && this.subtitlesTrack_.tech_) {
                        var i = function() {
                            e.handleSegment_()
                        };
                        return this.state = "WAITING_ON_VTTJS", this.subtitlesTrack_.tech_.one("vttjsloaded", i), void this.subtitlesTrack_.tech_.one("vttjserror", function() {
                            e.subtitlesTrack_.tech_.off("vttjsloaded", i), e.error({
                                message: "Error loading vtt.js"
                            }), e.state = "READY", e.pause(), e.trigger("error")
                        })
                    }
                    n.requested = !0;
                    try {
                        this.parseVTTCues_(t)
                    } catch (r) {
                        return this.error({
                            message: r.message
                        }), this.state = "READY", this.pause(), this.trigger("error")
                    }
                    return this.updateTimeMapping_(t, this.syncController_.timelines[t.timeline], this.playlist_), t.isSyncRequest ? (this.trigger("syncinfoupdate"), this.pendingSegment_ = null, void(this.state = "READY")) : (t.byteLength = t.bytes.byteLength, this.mediaSecondsLoaded += n.duration, t.cues.length && this.remove(t.cues[0].endTime, t.cues[t.cues.length - 1].endTime), t.cues.forEach(function(t) {
                        e.subtitlesTrack_.addCue(t)
                    }), void this.handleUpdateEnd_())
                }
            }, {
                key: "parseVTTCues_",
                value: function(e) {
                    var n = void 0,
                        i = !1;
                    "function" == typeof _.TextDecoder ? n = new _.TextDecoder("utf8") : (n = _.WebVTT.StringDecoder(), i = !0);
                    var r = new _.WebVTT.Parser(_, _.vttjs, n);
                    if (e.cues = [], e.timestampmap = {
                        MPEGTS: 0,
                        LOCAL: 0
                    }, r.oncue = e.cues.push.bind(e.cues), r.ontimestampmap = function(t) {
                        return e.timestampmap = t
                    }, r.onparsingerror = function(e) {
                        t.log.warn("Error encountered when parsing cues: " + e.message)
                    }, e.segment.map) {
                        var a = e.segment.map.bytes;
                        i && (a = fs(a)), r.parse(a)
                    }
                    var s = e.bytes;
                    i && (s = fs(s)), r.parse(s), r.flush()
                }
            }, {
                key: "updateTimeMapping_",
                value: function(e, t, n) {
                    var i = e.segment;
                    if (t) {
                        if (!e.cues.length) return void(i.empty = !0);
                        var r = e.timestampmap,
                            a = r.MPEGTS / 9e4 - r.LOCAL + t.mapping;
                        if (e.cues.forEach(function(e) {
                            e.startTime += a, e.endTime += a
                        }), !n.syncInfo) {
                            var s = e.cues[0].startTime,
                                o = e.cues[e.cues.length - 1].startTime;
                            n.syncInfo = {
                                mediaSequence: n.mediaSequence + e.mediaIndex,
                                time: Math.min(s, o - i.duration)
                            }
                        }
                    }
                }
            }]), n
        }(ps),
        vs = function(e, t) {
            for (var n = e.cues, i = 0; i < n.length; i++) {
                var r = n[i];
                if (t >= r.adStartTime && t <= r.adEndTime) return r
            }
            return null
        },
        ys = function(e, t) {
            var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0;
            if (e.segments)
                for (var i = n, r = void 0, a = 0; a < e.segments.length; a++) {
                    var s = e.segments[a];
                    if (r || (r = vs(t, i + s.duration / 2)), r) {
                        if ("cueIn" in s) {
                            r.endTime = i, r.adEndTime = i, i += s.duration, r = null;
                            continue
                        }
                        if (i < r.endTime) {
                            i += s.duration;
                            continue
                        }
                        r.endTime += s.duration
                    } else if ("cueOut" in s && (r = new _.VTTCue(i, i + s.duration, s.cueOut), r.adStartTime = i, r.adEndTime = i + parseFloat(s.cueOut), t.addCue(r)), "cueOutCont" in s) {
                        var o = void 0,
                            u = void 0,
                            l = s.cueOutCont.split("/").map(parseFloat),
                            c = R(l, 2);
                        o = c[0], u = c[1], r = new _.VTTCue(i, i + s.duration, ""), r.adStartTime = i - o, r.adEndTime = r.adStartTime + u, t.addCue(r)
                    }
                    i += s.duration
                }
        },
        _s = function(e) {
            var t = 31 & e[1];
            return t <<= 8, t |= e[2]
        },
        bs = function(e) {
            return !!(64 & e[1])
        },
        Ts = function(e) {
            var t = 0;
            return (48 & e[3]) >>> 4 > 1 && (t += e[4] + 1), t
        },
        Ss = function(e, t) {
            var n = _s(e);
            return 0 === n ? "pat" : n === t ? "pmt" : t ? "pes" : null
        },
        ks = function(e) {
            var t = bs(e),
                n = 4 + Ts(e);
            return t && (n += e[n] + 1), (31 & e[n + 10]) << 8 | e[n + 11]
        },
        ws = function(e) {
            var t = {},
                n = bs(e),
                i = 4 + Ts(e);
            if (n && (i += e[i] + 1), 1 & e[i + 5]) {
                var r, a, s;
                r = (15 & e[i + 1]) << 8 | e[i + 2], a = 3 + r - 4, s = (15 & e[i + 10]) << 8 | e[i + 11];
                for (var o = 12 + s; a > o;) {
                    var u = i + o;
                    t[(31 & e[u + 1]) << 8 | e[u + 2]] = e[u], o += ((15 & e[u + 3]) << 8 | e[u + 4]) + 5
                }
                return t
            }
        },
        Cs = function(e, t) {
            var n = _s(e),
                i = t[n];
            switch (i) {
                case jr.H264_STREAM_TYPE:
                    return "video";
                case jr.ADTS_STREAM_TYPE:
                    return "audio";
                case jr.METADATA_STREAM_TYPE:
                    return "timed-metadata";
                default:
                    return null
            }
        },
        Es = function(e) {
            var t = bs(e);
            if (!t) return null;
            var n = 4 + Ts(e);
            if (n >= e.byteLength) return null;
            var i, r = null;
            return i = e[n + 7], 192 & i && (r = {}, r.pts = (14 & e[n + 9]) << 27 | (255 & e[n + 10]) << 20 | (254 & e[n + 11]) << 12 | (255 & e[n + 12]) << 5 | (254 & e[n + 13]) >>> 3, r.pts *= 4, r.pts += (6 & e[n + 13]) >>> 1, r.dts = r.pts, 64 & i && (r.dts = (14 & e[n + 14]) << 27 | (255 & e[n + 15]) << 20 | (254 & e[n + 16]) << 12 | (255 & e[n + 17]) << 5 | (254 & e[n + 18]) >>> 3, r.dts *= 4, r.dts += (6 & e[n + 18]) >>> 1)), r
        },
        As = function(e) {
            switch (e) {
                case 5:
                    return "slice_layer_without_partitioning_rbsp_idr";
                case 6:
                    return "sei_rbsp";
                case 7:
                    return "seq_parameter_set_rbsp";
                case 8:
                    return "pic_parameter_set_rbsp";
                case 9:
                    return "access_unit_delimiter_rbsp";
                default:
                    return null
            }
        },
        Ls = function(e) {
            for (var t, n = 4 + Ts(e), i = e.subarray(n), r = 0, a = 0, s = !1; a < i.byteLength - 3; a++)
                if (1 === i[a + 2]) {
                    r = a + 5;
                    break
                }
            for (; r < i.byteLength;) switch (i[r]) {
                case 0:
                    if (0 !== i[r - 1]) {
                        r += 2;
                        break
                    }
                    if (0 !== i[r - 2]) {
                        r++;
                        break
                    }
                    a + 3 !== r - 2 && (t = As(31 & i[a + 3]), "slice_layer_without_partitioning_rbsp_idr" === t && (s = !0));
                    do r++; while (1 !== i[r] && r < i.length);
                    a = r - 2, r += 3;
                    break;
                case 1:
                    if (0 !== i[r - 1] || 0 !== i[r - 2]) {
                        r += 3;
                        break
                    }
                    t = As(31 & i[a + 3]), "slice_layer_without_partitioning_rbsp_idr" === t && (s = !0), a = r - 2, r += 3;
                    break;
                default:
                    r += 3
            }
            return i = i.subarray(a), r -= a, a = 0, i && i.byteLength > 3 && (t = As(31 & i[a + 3]), "slice_layer_without_partitioning_rbsp_idr" === t && (s = !0)), s
        },
        Is = {
            parseType: Ss,
            parsePat: ks,
            parsePmt: ws,
            parsePayloadUnitStartIndicator: bs,
            parsePesType: Cs,
            parsePesTime: Es,
            videoPacketContainsKeyFrame: Ls
        },
        Ps = [96e3, 88200, 64e3, 48e3, 44100, 32e3, 24e3, 22050, 16e3, 12e3, 11025, 8e3, 7350],
        xs = function(e) {
            return e[0] << 21 | e[1] << 14 | e[2] << 7 | e[3]
        },
        Ds = function(e, t, n) {
            var i, r = "";
            for (i = t; n > i; i++) r += "%" + ("00" + e[i].toString(16)).slice(-2);
            return r
        },
        Us = function(e, t, n) {
            return unescape(Ds(e, t, n))
        },
        Os = function(e, t) {
            var n = e[t + 6] << 21 | e[t + 7] << 14 | e[t + 8] << 7 | e[t + 9],
                i = e[t + 5],
                r = (16 & i) >> 4;
            return r ? n + 20 : n + 10
        },
        Ms = function(e, t) {
            var n = (224 & e[t + 5]) >> 5,
                i = e[t + 4] << 3,
                r = 6144 & e[t + 3];
            return r | i | n
        },
        Rs = function(e, t) {
            return e[t] === "I".charCodeAt(0) && e[t + 1] === "D".charCodeAt(0) && e[t + 2] === "3".charCodeAt(0) ? "timed-metadata" : e[t] & !0 && 240 === (240 & e[t + 1]) ? "audio" : null
        },
        js = function(e) {
            for (var t = 0; t + 5 < e.length;) {
                if (255 === e[t] && 240 === (246 & e[t + 1])) return Ps[(60 & e[t + 2]) >>> 2];
                t++
            }
            return null
        },
        Ns = function(e) {
            var t, n, i, r;
            t = 10, 64 & e[5] && (t += 4, t += xs(e.subarray(10, 14)));
            do {
                if (n = xs(e.subarray(t + 4, t + 8)), 1 > n) return null;
                if (r = String.fromCharCode(e[t], e[t + 1], e[t + 2], e[t + 3]), "PRIV" === r) {
                    i = e.subarray(t + 10, t + n + 10);
                    for (var a = 0; a < i.byteLength; a++)
                        if (0 === i[a]) {
                            var s = Us(i, 0, a);
                            if ("com.apple.streaming.transportStreamTimestamp" === s) {
                                var o = i.subarray(a + 1),
                                    u = (1 & o[3]) << 30 | o[4] << 22 | o[5] << 14 | o[6] << 6 | o[7] >>> 2;
                                return u *= 4, u += 3 & o[7]
                            }
                            break
                        }
                }
                t += 10, t += n
            } while (t < e.byteLength);
            return null
        },
        Bs = {
            parseId3TagSize: Os,
            parseAdtsSize: Ms,
            parseType: Rs,
            parseSampleRate: js,
            parseAacTimestamp: Ns
        },
        Fs = qr.handleRollover,
        Vs = {};
    Vs.ts = Is, Vs.aac = Bs;
    var Hs = 9e4,
        qs = 188,
        zs = 71,
        Ws = function(e) {
            return e[0] === "I".charCodeAt(0) && e[1] === "D".charCodeAt(0) && e[2] === "3".charCodeAt(0) ? !0 : !1
        },
        Gs = function(e, t) {
            for (var n, i, r = 0, a = qs; a < e.byteLength;)
                if (e[r] !== zs || e[a] !== zs) r++, a++;
                else {
                    switch (n = e.subarray(r, a), i = Vs.ts.parseType(n, t.pid)) {
                        case "pat":
                            t.pid || (t.pid = Vs.ts.parsePat(n));
                            break;
                        case "pmt":
                            t.table || (t.table = Vs.ts.parsePmt(n))
                    }
                    if (t.pid && t.table) return;
                    r += qs, a += qs
                }
        },
        Xs = function(e, t, n) {
            for (var i, r, a, s, o, u = 0, l = qs, c = !1; l < e.byteLength;)
                if (e[u] !== zs || e[l] !== zs) u++, l++;
                else {
                    switch (i = e.subarray(u, l), r = Vs.ts.parseType(i, t.pid)) {
                        case "pes":
                            a = Vs.ts.parsePesType(i, t.table), s = Vs.ts.parsePayloadUnitStartIndicator(i), "audio" === a && s && (o = Vs.ts.parsePesTime(i), o && (o.type = "audio", n.audio.push(o), c = !0))
                    }
                    if (c) break;
                    u += qs, l += qs
                }
            for (l = e.byteLength, u = l - qs, c = !1; u >= 0;)
                if (e[u] !== zs || e[l] !== zs) u--, l--;
                else {
                    switch (i = e.subarray(u, l), r = Vs.ts.parseType(i, t.pid)) {
                        case "pes":
                            a = Vs.ts.parsePesType(i, t.table), s = Vs.ts.parsePayloadUnitStartIndicator(i), "audio" === a && s && (o = Vs.ts.parsePesTime(i), o && (o.type = "audio", n.audio.push(o), c = !0))
                    }
                    if (c) break;
                    u -= qs, l -= qs
                }
        },
        Ys = function(e, t, n) {
            for (var i, r, a, s, o, u, l, c, d = 0, h = qs, p = !1, f = {
                data: [],
                size: 0
            }; h < e.byteLength;)
                if (e[d] !== zs || e[h] !== zs) d++, h++;
                else {
                    switch (i = e.subarray(d, h), r = Vs.ts.parseType(i, t.pid)) {
                        case "pes":
                            if (a = Vs.ts.parsePesType(i, t.table), s = Vs.ts.parsePayloadUnitStartIndicator(i), "video" === a && (s && !p && (o = Vs.ts.parsePesTime(i), o && (o.type = "video", n.video.push(o), p = !0)), !n.firstKeyFrame)) {
                                if (s && 0 !== f.size) {
                                    for (u = new Uint8Array(f.size), l = 0; f.data.length;) c = f.data.shift(), u.set(c, l), l += c.byteLength;
                                    Vs.ts.videoPacketContainsKeyFrame(u) && (n.firstKeyFrame = Vs.ts.parsePesTime(u), n.firstKeyFrame.type = "video"), f.size = 0
                                }
                                f.data.push(i), f.size += i.byteLength
                            }
                    }
                    if (p && n.firstKeyFrame) break;
                    d += qs, h += qs
                }
            for (h = e.byteLength, d = h - qs, p = !1; d >= 0;)
                if (e[d] !== zs || e[h] !== zs) d--, h--;
                else {
                    switch (i = e.subarray(d, h), r = Vs.ts.parseType(i, t.pid)) {
                        case "pes":
                            a = Vs.ts.parsePesType(i, t.table), s = Vs.ts.parsePayloadUnitStartIndicator(i), "video" === a && s && (o = Vs.ts.parsePesTime(i), o && (o.type = "video", n.video.push(o), p = !0))
                    }
                    if (p) break;
                    d -= qs, h -= qs
                }
        },
        $s = function(e, t) {
            if (e.audio && e.audio.length) {
                var n = t;
                "undefined" == typeof n && (n = e.audio[0].dts), e.audio.forEach(function(e) {
                    e.dts = Fs(e.dts, n), e.pts = Fs(e.pts, n), e.dtsTime = e.dts / Hs, e.ptsTime = e.pts / Hs
                })
            }
            if (e.video && e.video.length) {
                var i = t;
                if ("undefined" == typeof i && (i = e.video[0].dts), e.video.forEach(function(e) {
                    e.dts = Fs(e.dts, i), e.pts = Fs(e.pts, i), e.dtsTime = e.dts / Hs, e.ptsTime = e.pts / Hs
                }), e.firstKeyFrame) {
                    var r = e.firstKeyFrame;
                    r.dts = Fs(r.dts, i), r.pts = Fs(r.pts, i), r.dtsTime = r.dts / Hs, r.ptsTime = r.dts / Hs
                }
            }
        },
        Qs = function(e) {
            for (var t, n = !1, i = 0, r = null, a = null, s = 0, o = 0; e.length - o >= 3;) {
                var u = Vs.aac.parseType(e, o);
                switch (u) {
                    case "timed-metadata":
                        if (e.length - o < 10) {
                            n = !0;
                            break
                        }
                        if (s = Vs.aac.parseId3TagSize(e, o), s > e.length) {
                            n = !0;
                            break
                        }
                        null === a && (t = e.subarray(o, o + s), a = Vs.aac.parseAacTimestamp(t)), o += s;
                        break;
                    case "audio":
                        if (e.length - o < 7) {
                            n = !0;
                            break
                        }
                        if (s = Vs.aac.parseAdtsSize(e, o), s > e.length) {
                            n = !0;
                            break
                        }
                        null === r && (t = e.subarray(o, o + s), r = Vs.aac.parseSampleRate(t)), i++, o += s;
                        break;
                    default:
                        o++
                }
                if (n) return null
            }
            if (null === r || null === a) return null;
            var l = Hs / r,
                c = {
                    audio: [{
                        type: "audio",
                        dts: a,
                        pts: a
                    }, {
                        type: "audio",
                        dts: a + 1024 * i * l,
                        pts: a + 1024 * i * l
                    }]
                };
            return c
        },
        Ks = function(e) {
            var t = {
                    pid: null,
                    table: null
                },
                n = {};
            Gs(e, t);
            for (var i in t.table)
                if (t.table.hasOwnProperty(i)) {
                    var r = t.table[i];
                    switch (r) {
                        case jr.H264_STREAM_TYPE:
                            n.video = [], Ys(e, t, n), 0 === n.video.length && delete n.video;
                            break;
                        case jr.ADTS_STREAM_TYPE:
                            n.audio = [], Xs(e, t, n), 0 === n.audio.length && delete n.audio
                    }
                }
            return n
        },
        Js = function(e, t) {
            var n, i = Ws(e);
            return n = i ? Qs(e) : Ks(e), n && (n.audio || n.video) ? ($s(n, t), n) : null
        },
        Zs = {
            inspect: Js
        },
        eo = Zs.inspect,
        to = [{
            name: "VOD",
            run: function(e, t, n, i, r) {
                if (n !== 1 / 0) {
                    var a = {
                        time: 0,
                        segmentIndex: 0
                    };
                    return a
                }
                return null
            }
        }, {
            name: "ProgramDateTime",
            run: function(e, t, n, i, r) {
                if (!e.datetimeToDisplayTime) return null;
                var a = t.segments || [],
                    s = null,
                    o = null;
                r = r || 0;
                for (var u = 0; u < a.length; u++) {
                    var l = a[u];
                    if (l.dateTimeObject) {
                        var c = l.dateTimeObject.getTime() / 1e3,
                            d = c + e.datetimeToDisplayTime,
                            h = Math.abs(r - d);
                        if (null !== o && h > o) break;
                        o = h, s = {
                            time: d,
                            segmentIndex: u
                        }
                    }
                }
                return s
            }
        }, {
            name: "Segment",
            run: function(e, t, n, i, r) {
                var a = t.segments || [],
                    s = null,
                    o = null;
                r = r || 0;
                for (var u = 0; u < a.length; u++) {
                    var l = a[u];
                    if (l.timeline === i && "undefined" != typeof l.start) {
                        var c = Math.abs(r - l.start);
                        if (null !== o && c > o) break;
                        (!s || null === o || o >= c) && (o = c, s = {
                            time: l.start,
                            segmentIndex: u
                        })
                    }
                }
                return s
            }
        }, {
            name: "Discontinuity",
            run: function(e, t, n, i, r) {
                var a = null;
                if (r = r || 0, t.discontinuityStarts && t.discontinuityStarts.length)
                    for (var s = null, o = 0; o < t.discontinuityStarts.length; o++) {
                        var u = t.discontinuityStarts[o],
                            l = t.discontinuitySequence + o + 1,
                            c = e.discontinuities[l];
                        if (c) {
                            var d = Math.abs(r - c.time);
                            if (null !== s && d > s) break;
                            (!a || null === s || s >= d) && (s = d, a = {
                                time: c.time,
                                segmentIndex: u
                            })
                        }
                    }
                return a
            }
        }, {
            name: "Playlist",
            run: function(e, t, n, i, r) {
                if (t.syncInfo) {
                    var a = {
                        time: t.syncInfo.time,
                        segmentIndex: t.syncInfo.mediaSequence - t.mediaSequence
                    };
                    return a
                }
                return null
            }
        }],
        no = function(e) {
            function t() {
                x(this, t);
                var e = M(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                return e.inspectCache_ = void 0, e.timelines = [], e.discontinuities = [], e.datetimeToDisplayTime = null, e.logger_ = Wn("SyncController"), e
            }
            return O(t, e), D(t, [{
                key: "getSyncPoint",
                value: function(e, t, n, i) {
                    var r = this.runStrategies_(e, t, n, i);
                    return r.length ? this.selectSyncPoint_(r, {
                        key: "time",
                        value: i
                    }) : null
                }
            }, {
                key: "getExpiredTime",
                value: function(e, t) {
                    if (!e || !e.segments) return null;
                    var n = this.runStrategies_(e, t, e.discontinuitySequence, 0);
                    if (!n.length) return null;
                    var i = this.selectSyncPoint_(n, {
                        key: "segmentIndex",
                        value: 0
                    });
                    return i.segmentIndex > 0 && (i.time *= -1), Math.abs(i.time + Z(e, i.segmentIndex, 0))
                }
            }, {
                key: "runStrategies_",
                value: function(e, t, n, i) {
                    for (var r = [], a = 0; a < to.length; a++) {
                        var s = to[a],
                            o = s.run(this, e, t, n, i);
                        o && (o.strategy = s.name,
                            r.push({
                                strategy: s.name,
                                syncPoint: o
                            }))
                    }
                    return r
                }
            }, {
                key: "selectSyncPoint_",
                value: function(e, t) {
                    for (var n = e[0].syncPoint, i = Math.abs(e[0].syncPoint[t.key] - t.value), r = e[0].strategy, a = 1; a < e.length; a++) {
                        var s = Math.abs(e[a].syncPoint[t.key] - t.value);
                        i > s && (i = s, n = e[a].syncPoint, r = e[a].strategy)
                    }
                    return this.logger_("syncPoint for [" + t.key + ": " + t.value + "] chosen with strategy" + (" [" + r + "]: [time:" + n.time + ",") + (" segmentIndex:" + n.segmentIndex + "]")), n
                }
            }, {
                key: "saveExpiredSegmentInfo",
                value: function(e, t) {
                    for (var n = t.mediaSequence - e.mediaSequence, i = n - 1; i >= 0; i--) {
                        var r = e.segments[i];
                        if (r && "undefined" != typeof r.start) {
                            t.syncInfo = {
                                mediaSequence: e.mediaSequence + i,
                                time: r.start
                            }, this.logger_("playlist refresh sync: [time:" + t.syncInfo.time + "," + (" mediaSequence: " + t.syncInfo.mediaSequence + "]")), this.trigger("syncinfoupdate");
                            break
                        }
                    }
                }
            }, {
                key: "setDateTimeMapping",
                value: function(e) {
                    if (!this.datetimeToDisplayTime && e.segments && e.segments.length && e.segments[0].dateTimeObject) {
                        var t = e.segments[0].dateTimeObject.getTime() / 1e3;
                        this.datetimeToDisplayTime = -t
                    }
                }
            }, {
                key: "reset",
                value: function() {
                    this.inspectCache_ = void 0
                }
            }, {
                key: "probeSegmentInfo",
                value: function(e) {
                    var t = e.segment,
                        n = e.playlist,
                        i = void 0;
                    return i = t.map ? this.probeMp4Segment_(e) : this.probeTsSegment_(e), i && this.calculateSegmentTimeMapping_(e, i) && (this.saveDiscontinuitySyncInfo_(e), n.syncInfo || (n.syncInfo = {
                        mediaSequence: n.mediaSequence + e.mediaIndex,
                        time: t.start
                    })), i
                }
            }, {
                key: "probeMp4Segment_",
                value: function(e) {
                    var t = e.segment,
                        n = Ui.timescale(t.map.bytes),
                        i = Ui.startTime(n, e.bytes);
                    return null !== e.timestampOffset && (e.timestampOffset -= i), {
                        start: i,
                        end: i + t.duration
                    }
                }
            }, {
                key: "probeTsSegment_",
                value: function(e) {
                    var t = eo(e.bytes, this.inspectCache_),
                        n = void 0,
                        i = void 0;
                    return t ? (t.video && 2 === t.video.length ? (this.inspectCache_ = t.video[1].dts, n = t.video[0].dtsTime, i = t.video[1].dtsTime) : t.audio && 2 === t.audio.length && (this.inspectCache_ = t.audio[1].dts, n = t.audio[0].dtsTime, i = t.audio[1].dtsTime), {
                        start: n,
                        end: i,
                        containsVideo: t.video && 2 === t.video.length,
                        containsAudio: t.audio && 2 === t.audio.length
                    }) : null
                }
            }, {
                key: "timestampOffsetForTimeline",
                value: function(e) {
                    return "undefined" == typeof this.timelines[e] ? null : this.timelines[e].time
                }
            }, {
                key: "mappingForTimeline",
                value: function(e) {
                    return "undefined" == typeof this.timelines[e] ? null : this.timelines[e].mapping
                }
            }, {
                key: "calculateSegmentTimeMapping_",
                value: function(e, t) {
                    var n = e.segment,
                        i = this.timelines[e.timeline];
                    if (null !== e.timestampOffset) i = {
                        time: e.startOfSegment,
                        mapping: e.startOfSegment - t.start
                    }, this.timelines[e.timeline] = i, this.trigger("timestampoffset"), this.logger_("time mapping for timeline " + e.timeline + ": " + ("[time: " + i.time + "] [mapping: " + i.mapping + "]")), n.start = e.startOfSegment, n.end = t.end + i.mapping;
                    else {
                        if (!i) return !1;
                        n.start = t.start + i.mapping, n.end = t.end + i.mapping
                    }
                    return !0
                }
            }, {
                key: "saveDiscontinuitySyncInfo_",
                value: function(e) {
                    var t = e.playlist,
                        n = e.segment;
                    if (n.discontinuity) this.discontinuities[n.timeline] = {
                        time: n.start,
                        accuracy: 0
                    };
                    else if (t.discontinuityStarts && t.discontinuityStarts.length)
                        for (var i = 0; i < t.discontinuityStarts.length; i++) {
                            var r = t.discontinuityStarts[i],
                                a = t.discontinuitySequence + i + 1,
                                s = r - e.mediaIndex,
                                o = Math.abs(s);
                            if (!this.discontinuities[a] || this.discontinuities[a].accuracy > o) {
                                var u = void 0;
                                u = 0 > s ? n.start - Z(t, e.mediaIndex, r) : n.end + Z(t, e.mediaIndex + 1, r), this.discontinuities[a] = {
                                    time: u,
                                    accuracy: o
                                }
                            }
                        }
                }
            }]), t
        }(t.EventTarget),
        io = new r("./decrypter-worker.worker.js", function(e, t) {
            var n = this;
            (function() {
                function e(e) {
                    return e.subarray(0, e.byteLength - e[e.byteLength - 1])
                }
                var t = function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    },
                    i = function() {
                        function e(e, t) {
                            for (var n = 0; n < t.length; n++) {
                                var i = t[n];
                                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                            }
                        }
                        return function(t, n, i) {
                            return n && e(t.prototype, n), i && e(t, i), t
                        }
                    }(),
                    r = function(e, t) {
                        if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                        e.prototype = Object.create(t && t.prototype, {
                            constructor: {
                                value: e,
                                enumerable: !1,
                                writable: !0,
                                configurable: !0
                            }
                        }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
                    },
                    a = function(e, t) {
                        if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return !t || "object" != typeof t && "function" != typeof t ? e : t
                    },
                    s = function() {
                        var e = [
                                [
                                    [],
                                    [],
                                    [],
                                    [],
                                    []
                                ],
                                [
                                    [],
                                    [],
                                    [],
                                    [],
                                    []
                                ]
                            ],
                            t = e[0],
                            n = e[1],
                            i = t[4],
                            r = n[4],
                            a = void 0,
                            s = void 0,
                            o = void 0,
                            u = [],
                            l = [],
                            c = void 0,
                            d = void 0,
                            h = void 0,
                            p = void 0,
                            f = void 0,
                            m = void 0;
                        for (a = 0; 256 > a; a++) l[(u[a] = a << 1 ^ 283 * (a >> 7)) ^ a] = a;
                        for (s = o = 0; !i[s]; s ^= c || 1, o = l[o] || 1)
                            for (p = o ^ o << 1 ^ o << 2 ^ o << 3 ^ o << 4, p = p >> 8 ^ 255 & p ^ 99, i[s] = p, r[p] = s, h = u[d = u[c = u[s]]], m = 16843009 * h ^ 65537 * d ^ 257 * c ^ 16843008 * s, f = 257 * u[p] ^ 16843008 * p, a = 0; 4 > a; a++) t[a][s] = f = f << 24 ^ f >>> 8, n[a][p] = m = m << 24 ^ m >>> 8;
                        for (a = 0; 5 > a; a++) t[a] = t[a].slice(0), n[a] = n[a].slice(0);
                        return e
                    },
                    o = null,
                    u = function() {
                        function e(n) {
                            t(this, e), o || (o = s()), this._tables = [
                                [o[0][0].slice(), o[0][1].slice(), o[0][2].slice(), o[0][3].slice(), o[0][4].slice()],
                                [o[1][0].slice(), o[1][1].slice(), o[1][2].slice(), o[1][3].slice(), o[1][4].slice()]
                            ];
                            var i = void 0,
                                r = void 0,
                                a = void 0,
                                u = void 0,
                                l = void 0,
                                c = this._tables[0][4],
                                d = this._tables[1],
                                h = n.length,
                                p = 1;
                            if (4 !== h && 6 !== h && 8 !== h) throw new Error("Invalid aes key size");
                            for (u = n.slice(0), l = [], this._key = [u, l], i = h; 4 * h + 28 > i; i++) a = u[i - 1], (i % h === 0 || 8 === h && i % h === 4) && (a = c[a >>> 24] << 24 ^ c[a >> 16 & 255] << 16 ^ c[a >> 8 & 255] << 8 ^ c[255 & a], i % h === 0 && (a = a << 8 ^ a >>> 24 ^ p << 24, p = p << 1 ^ 283 * (p >> 7))), u[i] = u[i - h] ^ a;
                            for (r = 0; i; r++, i--) a = u[3 & r ? i : i - 4], 4 >= i || 4 > r ? l[r] = a : l[r] = d[0][c[a >>> 24]] ^ d[1][c[a >> 16 & 255]] ^ d[2][c[a >> 8 & 255]] ^ d[3][c[255 & a]]
                        }
                        return e.prototype.decrypt = function(e, t, n, i, r, a) {
                            var s = this._key[1],
                                o = e ^ s[0],
                                u = i ^ s[1],
                                l = n ^ s[2],
                                c = t ^ s[3],
                                d = void 0,
                                h = void 0,
                                p = void 0,
                                f = s.length / 4 - 2,
                                m = void 0,
                                g = 4,
                                v = this._tables[1],
                                y = v[0],
                                _ = v[1],
                                b = v[2],
                                T = v[3],
                                S = v[4];
                            for (m = 0; f > m; m++) d = y[o >>> 24] ^ _[u >> 16 & 255] ^ b[l >> 8 & 255] ^ T[255 & c] ^ s[g], h = y[u >>> 24] ^ _[l >> 16 & 255] ^ b[c >> 8 & 255] ^ T[255 & o] ^ s[g + 1], p = y[l >>> 24] ^ _[c >> 16 & 255] ^ b[o >> 8 & 255] ^ T[255 & u] ^ s[g + 2], c = y[c >>> 24] ^ _[o >> 16 & 255] ^ b[u >> 8 & 255] ^ T[255 & l] ^ s[g + 3], g += 4, o = d, u = h, l = p;
                            for (m = 0; 4 > m; m++) r[(3 & -m) + a] = S[o >>> 24] << 24 ^ S[u >> 16 & 255] << 16 ^ S[l >> 8 & 255] << 8 ^ S[255 & c] ^ s[g++], d = o, o = u, u = l, l = c, c = d
                        }, e
                    }(),
                    l = function() {
                        function e() {
                            t(this, e), this.listeners = {}
                        }
                        return e.prototype.on = function(e, t) {
                            this.listeners[e] || (this.listeners[e] = []), this.listeners[e].push(t)
                        }, e.prototype.off = function(e, t) {
                            if (!this.listeners[e]) return !1;
                            var n = this.listeners[e].indexOf(t);
                            return this.listeners[e].splice(n, 1), n > -1
                        }, e.prototype.trigger = function(e) {
                            var t = this.listeners[e];
                            if (t)
                                if (2 === arguments.length)
                                    for (var n = t.length, i = 0; n > i; ++i) t[i].call(this, arguments[1]);
                                else
                                    for (var r = Array.prototype.slice.call(arguments, 1), a = t.length, s = 0; a > s; ++s) t[s].apply(this, r)
                        }, e.prototype.dispose = function() {
                            this.listeners = {}
                        }, e.prototype.pipe = function(e) {
                            this.on("data", function(t) {
                                e.push(t)
                            })
                        }, e
                    }(),
                    c = function(e) {
                        function n() {
                            t(this, n);
                            var i = a(this, e.call(this, l));
                            return i.jobs = [], i.delay = 1, i.timeout_ = null, i
                        }
                        return r(n, e), n.prototype.processJob_ = function() {
                            this.jobs.shift()(), this.jobs.length ? this.timeout_ = setTimeout(this.processJob_.bind(this), this.delay) : this.timeout_ = null
                        }, n.prototype.push = function(e) {
                            this.jobs.push(e), this.timeout_ || (this.timeout_ = setTimeout(this.processJob_.bind(this), this.delay))
                        }, n
                    }(l),
                    d = function(e) {
                        return e << 24 | (65280 & e) << 8 | (16711680 & e) >> 8 | e >>> 24
                    },
                    h = function(e, t, n) {
                        var i = new Int32Array(e.buffer, e.byteOffset, e.byteLength >> 2),
                            r = new u(Array.prototype.slice.call(t)),
                            a = new Uint8Array(e.byteLength),
                            s = new Int32Array(a.buffer),
                            o = void 0,
                            l = void 0,
                            c = void 0,
                            h = void 0,
                            p = void 0,
                            f = void 0,
                            m = void 0,
                            g = void 0,
                            v = void 0;
                        for (o = n[0], l = n[1], c = n[2], h = n[3], v = 0; v < i.length; v += 4) p = d(i[v]), f = d(i[v + 1]), m = d(i[v + 2]), g = d(i[v + 3]), r.decrypt(p, f, m, g, s, v), s[v] = d(s[v] ^ o), s[v + 1] = d(s[v + 1] ^ l), s[v + 2] = d(s[v + 2] ^ c), s[v + 3] = d(s[v + 3] ^ h), o = p, l = f, c = m, h = g;
                        return a
                    },
                    p = function() {
                        function n(i, r, a, s) {
                            t(this, n);
                            var o = n.STEP,
                                u = new Int32Array(i.buffer),
                                l = new Uint8Array(i.byteLength),
                                h = 0;
                            for (this.asyncStream_ = new c, this.asyncStream_.push(this.decryptChunk_(u.subarray(h, h + o), r, a, l)), h = o; h < u.length; h += o) a = new Uint32Array([d(u[h - 4]), d(u[h - 3]), d(u[h - 2]), d(u[h - 1])]), this.asyncStream_.push(this.decryptChunk_(u.subarray(h, h + o), r, a, l));
                            this.asyncStream_.push(function() {
                                s(null, e(l))
                            })
                        }
                        return n.prototype.decryptChunk_ = function(e, t, n, i) {
                            return function() {
                                var r = h(e, t, n);
                                i.set(r, e.byteOffset)
                            }
                        }, i(n, null, [{
                            key: "STEP",
                            get: function() {
                                return 32e3
                            }
                        }]), n
                    }(),
                    f = function(e) {
                        var t = {};
                        return Object.keys(e).forEach(function(n) {
                            var i = e[n];
                            ArrayBuffer.isView(i) ? t[n] = {
                                bytes: i.buffer,
                                byteOffset: i.byteOffset,
                                byteLength: i.byteLength
                            } : t[n] = i
                        }), t
                    },
                    m = function(e) {
                        e.onmessage = function(t) {
                            var n = t.data,
                                i = new Uint8Array(n.encrypted.bytes, n.encrypted.byteOffset, n.encrypted.byteLength),
                                r = new Uint32Array(n.key.bytes, n.key.byteOffset, n.key.byteLength / 4),
                                a = new Uint32Array(n.iv.bytes, n.iv.byteOffset, n.iv.byteLength / 4);
                            new p(i, r, a, function(t, i) {
                                e.postMessage(f({
                                    source: n.source,
                                    decrypted: i
                                }), [i.buffer])
                            })
                        }
                    },
                    g = new m(n);
                return g
            })()
        }),
        ro = function(e) {
            var t = e["default"] ? "main" : "alternative";
            return e.characteristics && e.characteristics.indexOf("public.accessibility.describes-video") >= 0 && (t = "main-desc"), t
        },
        ao = function(e, t) {
            e.abort(), e.pause(), t && t.activePlaylistLoader && (t.activePlaylistLoader.pause(), t.activePlaylistLoader = null)
        },
        so = function(e, t) {
            t.activePlaylistLoader = e, e.load()
        },
        oo = function(e, t) {
            return function() {
                var n = t.segmentLoaders,
                    i = n[e],
                    r = n.main,
                    a = t.mediaTypes[e],
                    s = a.activeTrack(),
                    o = a.activeGroup(s),
                    u = a.activePlaylistLoader;
                if (ao(i, a), o) {
                    if (!o.playlistLoader) return void(u && r.resetEverything());
                    i.resyncLoader(), so(o.playlistLoader, a)
                }
            }
        },
        uo = function(e, t) {
            return function() {
                var n = t.segmentLoaders,
                    i = n[e],
                    r = n.main,
                    a = t.mediaTypes[e],
                    s = a.activeTrack(),
                    o = a.activeGroup(s),
                    u = a.activePlaylistLoader;
                if (ao(i, a), o) {
                    if (!o.playlistLoader) return void r.resetEverything();
                    if (u === o.playlistLoader) return void so(o.playlistLoader, a);
                    i.track && i.track(s), i.resetEverything(), so(o.playlistLoader, a)
                }
            }
        },
        lo = {
            AUDIO: function(e, n) {
                return function() {
                    var i = n.segmentLoaders[e],
                        r = n.mediaTypes[e],
                        a = n.blacklistCurrentPlaylist;
                    ao(i, r);
                    var s = r.activeTrack(),
                        o = r.activeGroup(),
                        u = (o.filter(function(e) {
                            return e["default"]
                        })[0] || o[0]).id,
                        l = r.tracks[u];
                    if (s === l) return void a({
                        message: "Problem encountered loading the default audio track."
                    });
                    t.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");
                    for (var c in r.tracks) r.tracks[c].enabled = r.tracks[c] === l;
                    r.onTrackChanged()
                }
            },
            SUBTITLES: function(e, n) {
                return function() {
                    var i = n.segmentLoaders[e],
                        r = n.mediaTypes[e];
                    t.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."), ao(i, r);
                    var a = r.activeTrack();
                    a && (a.mode = "disabled"), r.onTrackChanged()
                }
            }
        },
        co = {
            AUDIO: function(e, t, n) {
                if (t) {
                    var i = n.tech,
                        r = n.requestOptions,
                        a = n.segmentLoaders[e];
                    t.on("loadedmetadata", function() {
                        var e = t.media();
                        a.playlist(e, r), (!i.paused() || e.endList && "none" !== i.preload()) && a.load()
                    }), t.on("loadedplaylist", function() {
                        a.playlist(t.media(), r), i.paused() || a.load()
                    }), t.on("error", lo[e](e, n))
                }
            },
            SUBTITLES: function(e, t, n) {
                var i = n.tech,
                    r = n.requestOptions,
                    a = n.segmentLoaders[e],
                    s = n.mediaTypes[e];
                t.on("loadedmetadata", function() {
                    var e = t.media();
                    a.playlist(e, r), a.track(s.activeTrack()), (!i.paused() || e.endList && "none" !== i.preload()) && a.load()
                }), t.on("loadedplaylist", function() {
                    a.playlist(t.media(), r), i.paused() || a.load()
                }), t.on("error", lo[e](e, n))
            }
        },
        ho = function(e, t) {
            return function(n) {
                return n.attributes[e] === t
            }
        },
        po = function(e) {
            return function(t) {
                return t.resolvedUri === e
            }
        },
        fo = {
            AUDIO: function(e, n) {
                var i = n.hls,
                    r = n.sourceType,
                    a = n.segmentLoaders[e],
                    s = n.requestOptions.withCredentials,
                    o = n.master,
                    u = o.mediaGroups,
                    l = o.playlists,
                    c = n.mediaTypes[e],
                    d = c.groups,
                    h = c.tracks,
                    p = n.masterPlaylistLoader;
                u[e] && 0 !== Object.keys(u[e]).length || (u[e] = {
                    main: {
                        "default": {
                            "default": !0
                        }
                    }
                });
                for (var f in u[e]) {
                    d[f] || (d[f] = []);
                    var m = l.filter(ho(e, f));
                    for (var g in u[e][f]) {
                        var v = u[e][f][g],
                            y = m.filter(po(v.resolvedUri));
                        y.length && delete v.resolvedUri;
                        var _ = void 0;
                        if (_ = v.resolvedUri ? new X(v.resolvedUri, i, s) : v.playlists && "dash" === r ? new zn(v.playlists[0], i, s, p) : null, v = t.mergeOptions({
                            id: g,
                            playlistLoader: _
                        }, v), co[e](e, v.playlistLoader, n), d[f].push(v), "undefined" == typeof h[g]) {
                            var b = new t.AudioTrack({
                                id: g,
                                kind: ro(v),
                                enabled: !1,
                                language: v.language,
                                "default": v["default"],
                                label: g
                            });
                            h[g] = b
                        }
                    }
                }
                a.on("error", lo[e](e, n))
            },
            SUBTITLES: function(e, n) {
                var i = n.tech,
                    r = n.hls,
                    a = n.sourceType,
                    s = n.segmentLoaders[e],
                    o = n.requestOptions.withCredentials,
                    u = n.master.mediaGroups,
                    l = n.mediaTypes[e],
                    c = l.groups,
                    d = l.tracks,
                    h = n.masterPlaylistLoader;
                for (var p in u[e]) {
                    c[p] || (c[p] = []);
                    for (var f in u[e][p])
                        if (!u[e][p][f].forced) {
                            var m = u[e][p][f],
                                g = void 0;
                            if ("hls" === a ? g = new X(m.resolvedUri, r, o) : "dash" === a && (g = new zn(m.playlists[0], r, o, h)), m = t.mergeOptions({
                                id: f,
                                playlistLoader: g
                            }, m), co[e](e, m.playlistLoader, n), c[p].push(m), "undefined" == typeof d[f]) {
                                var v = i.addRemoteTextTrack({
                                    id: f,
                                    kind: "subtitles",
                                    "default": m["default"] && m.autoselect,
                                    language: m.language,
                                    label: f
                                }, !1).track;
                                d[f] = v
                            }
                        }
                }
                s.on("error", lo[e](e, n))
            },
            "CLOSED-CAPTIONS": function(e, n) {
                var i = n.tech,
                    r = n.master.mediaGroups,
                    a = n.mediaTypes[e],
                    s = a.groups,
                    o = a.tracks;
                for (var u in r[e]) {
                    s[u] || (s[u] = []);
                    for (var l in r[e][u]) {
                        var c = r[e][u][l];
                        if (c.instreamId.match(/CC\d/) && (s[u].push(t.mergeOptions({
                            id: l
                        }, c)), "undefined" == typeof o[l])) {
                            var d = i.addRemoteTextTrack({
                                id: c.instreamId,
                                kind: "captions",
                                "default": c["default"] && c.autoselect,
                                language: c.language,
                                label: l
                            }, !1).track;
                            o[l] = d
                        }
                    }
                }
            }
        },
        mo = function(e, t) {
            return function(n) {
                var i = t.masterPlaylistLoader,
                    r = t.mediaTypes[e].groups,
                    a = i.media();
                if (!a) return null;
                var s = null;
                return a.attributes[e] && (s = r[a.attributes[e]]), s = s || r.main, "undefined" == typeof n ? s : null === n ? null : s.filter(function(e) {
                    return e.id === n.id
                })[0] || null
            }
        },
        go = {
            AUDIO: function(e, t) {
                return function() {
                    var n = t.mediaTypes[e].tracks;
                    for (var i in n)
                        if (n[i].enabled) return n[i];
                    return null
                }
            },
            SUBTITLES: function(e, t) {
                return function() {
                    var n = t.mediaTypes[e].tracks;
                    for (var i in n)
                        if ("showing" === n[i].mode) return n[i];
                    return null
                }
            }
        },
        vo = function(e) {
            ["AUDIO", "SUBTITLES", "CLOSED-CAPTIONS"].forEach(function(t) {
                fo[t](t, e)
            });
            var t = e.mediaTypes,
                n = e.masterPlaylistLoader,
                i = e.tech,
                r = e.hls;
            ["AUDIO", "SUBTITLES"].forEach(function(n) {
                t[n].activeGroup = mo(n, e), t[n].activeTrack = go[n](n, e), t[n].onGroupChanged = oo(n, e), t[n].onTrackChanged = uo(n, e)
            });
            var a = t.AUDIO.activeGroup(),
                s = (a.filter(function(e) {
                    return e["default"]
                })[0] || a[0]).id;
            t.AUDIO.tracks[s].enabled = !0, t.AUDIO.onTrackChanged(), n.on("mediachange", function() {
                ["AUDIO", "SUBTITLES"].forEach(function(e) {
                    return t[e].onGroupChanged()
                })
            });
            var o = function() {
                t.AUDIO.onTrackChanged(), i.trigger({
                    type: "usage",
                    name: "hls-audio-change"
                })
            };
            i.audioTracks().addEventListener("change", o), i.remoteTextTracks().addEventListener("change", t.SUBTITLES.onTrackChanged), r.on("dispose", function() {
                i.audioTracks().removeEventListener("change", o), i.remoteTextTracks().removeEventListener("change", t.SUBTITLES.onTrackChanged)
            }), i.clearTracks("audio");
            for (var u in t.AUDIO.tracks) i.audioTracks().addTrack(t.AUDIO.tracks[u])
        },
        yo = function() {
            var e = {};
            return ["AUDIO", "SUBTITLES", "CLOSED-CAPTIONS"].forEach(function(t) {
                e[t] = {
                    groups: {},
                    tracks: {},
                    activePlaylistLoader: null,
                    activeGroup: l,
                    activeTrack: l,
                    onGroupChanged: l,
                    onTrackChanged: l
                }
            }), e
        },
        _o = 120,
        bo = void 0,
        To = ["mediaRequests", "mediaRequestsAborted", "mediaRequestsTimedout", "mediaRequestsErrored", "mediaTransferDuration", "mediaBytesTransferred"],
        So = function(e) {
            return this.audioSegmentLoader_[e] + this.mainSegmentLoader_[e]
        },
        ko = function(e) {
            function n(e) {
                x(this, n);
                var i = M(this, (n.__proto__ || Object.getPrototypeOf(n)).call(this)),
                    r = e.url,
                    a = e.withCredentials,
                    s = e.tech,
                    o = e.bandwidth,
                    u = e.externHls,
                    l = e.useCueTags,
                    c = e.blacklistDuration,
                    d = e.enableLowInitialPlaylist,
                    h = e.sourceType,
                    p = e.seekTo;
                if (!r) throw new Error("A non-empty playlist URL is required");
                bo = u, i.withCredentials = a, i.tech_ = s, i.hls_ = s.hls, i.seekTo_ = p, i.sourceType_ = h, i.useCueTags_ = l, i.blacklistDuration = c, i.enableLowInitialPlaylist = d, i.useCueTags_ && (i.cueTagsTrack_ = i.tech_.addTextTrack("metadata", "ad-cues"), i.cueTagsTrack_.inBandMetadataTrackDispatchType = ""), i.requestOptions_ = {
                    withCredentials: i.withCredentials,
                    timeout: null
                }, i.mediaTypes_ = yo(), i.mediaSource = new t.MediaSource, i.mediaSource.addEventListener("sourceopen", i.handleSourceOpen_.bind(i)), i.seekable_ = t.createTimeRanges(), i.hasPlayed_ = function() {
                    return !1
                }, i.syncController_ = new no(e), i.segmentMetadataTrack_ = s.addRemoteTextTrack({
                    kind: "metadata",
                    label: "segment-metadata"
                }, !1).track, i.decrypter_ = new io, i.inbandTextTracks_ = {};
                var f = {
                    hls: i.hls_,
                    mediaSource: i.mediaSource,
                    currentTime: i.tech_.currentTime.bind(i.tech_),
                    seekable: function() {
                        return i.seekable()
                    },
                    seeking: function() {
                        return i.tech_.seeking()
                    },
                    duration: function() {
                        return i.mediaSource.duration
                    },
                    hasPlayed: function() {
                        return i.hasPlayed_()
                    },
                    goalBufferLength: function() {
                        return i.goalBufferLength()
                    },
                    bandwidth: o,
                    syncController: i.syncController_,
                    decrypter: i.decrypter_,
                    sourceType: i.sourceType_,
                    inbandTextTracks: i.inbandTextTracks_
                };
                return i.masterPlaylistLoader_ = "dash" === i.sourceType_ ? new zn(r, i.hls_, i.withCredentials) : new X(r, i.hls_, i.withCredentials), i.setupMasterPlaylistLoaderListeners_(), i.mainSegmentLoader_ = new ps(t.mergeOptions(f, {
                    segmentMetadataTrack: i.segmentMetadataTrack_,
                    loaderType: "main"
                }), e), i.audioSegmentLoader_ = new ps(t.mergeOptions(f, {
                    loaderType: "audio"
                }), e), i.subtitleSegmentLoader_ = new gs(t.mergeOptions(f, {
                    loaderType: "vtt"
                }), e), i.setupSegmentLoaderListeners_(), To.forEach(function(e) {
                    i[e + "_"] = So.bind(i, e)
                }), i.logger_ = Wn("MPC"), i.masterPlaylistLoader_.load(), i
            }
            return O(n, e), D(n, [{
                key: "setupMasterPlaylistLoaderListeners_",
                value: function() {
                    var e = this;
                    this.masterPlaylistLoader_.on("loadedmetadata", function() {
                        var n = e.masterPlaylistLoader_.media(),
                            i = 1.5 * e.masterPlaylistLoader_.targetDuration * 1e3;
                        ge(e.masterPlaylistLoader_.master, e.masterPlaylistLoader_.media()) ? e.requestOptions_.timeout = 0 : e.requestOptions_.timeout = i, n.endList && "none" !== e.tech_.preload() && (e.mainSegmentLoader_.playlist(n, e.requestOptions_), e.mainSegmentLoader_.load()), vo({
                            sourceType: e.sourceType_,
                            segmentLoaders: {
                                AUDIO: e.audioSegmentLoader_,
                                SUBTITLES: e.subtitleSegmentLoader_,
                                main: e.mainSegmentLoader_
                            },
                            tech: e.tech_,
                            requestOptions: e.requestOptions_,
                            masterPlaylistLoader: e.masterPlaylistLoader_,
                            hls: e.hls_,
                            master: e.master(),
                            mediaTypes: e.mediaTypes_,
                            blacklistCurrentPlaylist: e.blacklistCurrentPlaylist.bind(e)
                        }), e.triggerPresenceUsage_(e.master(), n);
                        try {
                            e.setupSourceBuffers_()
                        } catch (r) {
                            return t.log.warn("Failed to create SourceBuffers", r), e.mediaSource.endOfStream("decode")
                        }
                        e.setupFirstPlay(), e.trigger("selectedinitialmedia")
                    }), this.masterPlaylistLoader_.on("loadedplaylist", function() {
                        var t = e.masterPlaylistLoader_.media();
                        if (!t) {
                            e.excludeUnsupportedVariants_();
                            var n = void 0;
                            return e.enableLowInitialPlaylist && (n = e.selectInitialPlaylist()), n || (n = e.selectPlaylist()), e.initialMedia_ = n, void e.masterPlaylistLoader_.media(e.initialMedia_)
                        }
                        if (e.useCueTags_ && e.updateAdCues_(t), e.mainSegmentLoader_.playlist(t, e.requestOptions_), e.updateDuration(), e.tech_.paused() || (e.mainSegmentLoader_.load(), e.audioSegmentLoader_ && e.audioSegmentLoader_.load()), !t.endList) {
                            var i = function() {
                                var t = e.seekable();
                                0 !== t.length && e.mediaSource.addSeekableRange_(t.start(0), t.end(0))
                            };
                            if (e.duration() !== 1 / 0) {
                                var r = function a() {
                                    e.duration() === 1 / 0 ? i() : e.tech_.one("durationchange", a)
                                };
                                e.tech_.one("durationchange", r)
                            } else i()
                        }
                    }), this.masterPlaylistLoader_.on("error", function() {
                        e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)
                    }), this.masterPlaylistLoader_.on("mediachanging", function() {
                        e.mainSegmentLoader_.abort(), e.mainSegmentLoader_.pause()
                    }), this.masterPlaylistLoader_.on("mediachange", function() {
                        var t = e.masterPlaylistLoader_.media(),
                            n = 1.5 * e.masterPlaylistLoader_.targetDuration * 1e3;
                        ge(e.masterPlaylistLoader_.master, e.masterPlaylistLoader_.media()) ? e.requestOptions_.timeout = 0 : e.requestOptions_.timeout = n, e.mainSegmentLoader_.playlist(t, e.requestOptions_), e.mainSegmentLoader_.load(), e.tech_.trigger({
                            type: "mediachange",
                            bubbles: !0
                        })
                    }), this.masterPlaylistLoader_.on("playlistunchanged", function() {
                        var t = e.masterPlaylistLoader_.media(),
                            n = e.stuckAtPlaylistEnd_(t);
                        n && (e.blacklistCurrentPlaylist({
                            message: "Playlist no longer updating."
                        }), e.tech_.trigger("playliststuck"))
                    }), this.masterPlaylistLoader_.on("renditiondisabled", function() {
                        e.tech_.trigger({
                            type: "usage",
                            name: "hls-rendition-disabled"
                        })
                    }), this.masterPlaylistLoader_.on("renditionenabled", function() {
                        e.tech_.trigger({
                            type: "usage",
                            name: "hls-rendition-enabled"
                        })
                    })
                }
            }, {
                key: "triggerPresenceUsage_",
                value: function(e, t) {
                    var n = e.mediaGroups || {},
                        i = !0,
                        r = Object.keys(n.AUDIO);
                    for (var a in n.AUDIO)
                        for (var s in n.AUDIO[a]) {
                            var o = n.AUDIO[a][s];
                            o.uri || (i = !1)
                        }
                    i && this.tech_.trigger({
                        type: "usage",
                        name: "hls-demuxed"
                    }), Object.keys(n.SUBTITLES).length && this.tech_.trigger({
                        type: "usage",
                        name: "hls-webvtt"
                    }), bo.Playlist.isAes(t) && this.tech_.trigger({
                        type: "usage",
                        name: "hls-aes"
                    }), bo.Playlist.isFmp4(t) && this.tech_.trigger({
                        type: "usage",
                        name: "hls-fmp4"
                    }), r.length && Object.keys(n.AUDIO[r[0]]).length > 1 && this.tech_.trigger({
                        type: "usage",
                        name: "hls-alternate-audio"
                    }), this.useCueTags_ && this.tech_.trigger({
                        type: "usage",
                        name: "hls-playlist-cue-tags"
                    })
                }
            }, {
                key: "setupSegmentLoaderListeners_",
                value: function() {
                    var e = this;
                    this.mainSegmentLoader_.on("bandwidthupdate", function() {
                        var t = e.selectPlaylist(),
                            n = e.masterPlaylistLoader_.media(),
                            i = e.tech_.buffered(),
                            r = i.length ? i.end(i.length - 1) - e.tech_.currentTime() : 0,
                            a = e.bufferLowWaterLine();
                        (!n.endList || e.duration() < Xn.MAX_BUFFER_LOW_WATER_LINE || t.attributes.BANDWIDTH < n.attributes.BANDWIDTH || r >= a) && e.masterPlaylistLoader_.media(t), e.tech_.trigger("bandwidthupdate")
                    }), this.mainSegmentLoader_.on("progress", function() {
                        e.trigger("progress")
                    }), this.mainSegmentLoader_.on("error", function() {
                        e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())
                    }), this.mainSegmentLoader_.on("syncinfoupdate", function() {
                        e.onSyncInfoUpdate_()
                    }), this.mainSegmentLoader_.on("timestampoffset", function() {
                        e.tech_.trigger({
                            type: "usage",
                            name: "hls-timestamp-offset"
                        })
                    }), this.audioSegmentLoader_.on("syncinfoupdate", function() {
                        e.onSyncInfoUpdate_()
                    }), this.mainSegmentLoader_.on("ended", function() {
                        e.onEndOfStream()
                    }), this.mainSegmentLoader_.on("earlyabort", function() {
                        e.blacklistCurrentPlaylist({
                            message: "Aborted early because there isn't enough bandwidth to complete the request without rebuffering."
                        }, _o)
                    }), this.mainSegmentLoader_.on("reseteverything", function() {
                        e.tech_.trigger("hls-reset")
                    }), this.mainSegmentLoader_.on("segmenttimemapping", function(t) {
                        e.tech_.trigger({
                            type: "hls-segment-time-mapping",
                            mapping: t.mapping
                        })
                    }), this.audioSegmentLoader_.on("ended", function() {
                        e.onEndOfStream()
                    })
                }
            }, {
                key: "mediaSecondsLoaded_",
                value: function() {
                    return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded + this.mainSegmentLoader_.mediaSecondsLoaded)
                }
            }, {
                key: "load",
                value: function() {
                    this.mainSegmentLoader_.load(), this.mediaTypes_.AUDIO.activePlaylistLoader && this.audioSegmentLoader_.load(), this.mediaTypes_.SUBTITLES.activePlaylistLoader && this.subtitleSegmentLoader_.load()
                }
            }, {
                key: "smoothQualityChange_",
                value: function() {
                    var e = this.selectPlaylist();
                    e !== this.masterPlaylistLoader_.media() && (this.masterPlaylistLoader_.media(e), this.mainSegmentLoader_.resetLoader())
                }
            }, {
                key: "fastQualityChange_",
                value: function() {
                    var e = this,
                        n = this.selectPlaylist();
                    n !== this.masterPlaylistLoader_.media() && (this.masterPlaylistLoader_.media(n), this.mainSegmentLoader_.resetEverything(function() {
                        t.browser.IE_VERSION || t.browser.IS_EDGE ? e.tech_.setCurrentTime(e.tech_.currentTime() + .04) : e.tech_.setCurrentTime(e.tech_.currentTime())
                    }))
                }
            }, {
                key: "play",
                value: function() {
                    if (!this.setupFirstPlay()) {
                        this.tech_.ended() && this.seekTo_(0), this.hasPlayed_() && this.load();
                        var e = this.tech_.seekable();
                        return this.tech_.duration() === 1 / 0 && this.tech_.currentTime() < e.start(0) ? this.seekTo_(e.end(e.length - 1)) : void 0
                    }
                }
            }, {
                key: "setupFirstPlay",
                value: function() {
                    var e = this,
                        n = this.masterPlaylistLoader_.media();
                    if (!n || this.tech_.paused() || this.hasPlayed_()) return !1;
                    if (!n.endList) {
                        var i = this.seekable();
                        if (!i.length) return !1;
                        if (t.browser.IE_VERSION && 0 === this.tech_.readyState()) return this.tech_.one("loadedmetadata", function() {
                            e.trigger("firstplay"), e.seekTo_(i.end(0)), e.hasPlayed_ = function() {
                                return !0
                            }
                        }), !1;
                        this.trigger("firstplay"), this.seekTo_(i.end(0))
                    }
                    return this.hasPlayed_ = function() {
                        return !0
                    }, this.load(), !0
                }
            }, {
                key: "handleSourceOpen_",
                value: function() {
                    try {
                        this.setupSourceBuffers_()
                    } catch (e) {
                        return t.log.warn("Failed to create Source Buffers", e), this.mediaSource.endOfStream("decode")
                    }
                    if (this.tech_.autoplay()) {
                        var n = this.tech_.play();
                        "undefined" != typeof n && "function" == typeof n.then && n.then(null, function(e) {})
                    }
                    this.trigger("sourceopen")
                }
            }, {
                key: "onEndOfStream",
                value: function() {
                    var e = this.mainSegmentLoader_.ended_;
                    this.mediaTypes_.AUDIO.activePlaylistLoader && (e = !this.mainSegmentLoader_.startingMedia_ || this.mainSegmentLoader_.startingMedia_.containsVideo ? e && this.audioSegmentLoader_.ended_ : this.audioSegmentLoader_.ended_), e && this.mediaSource.endOfStream()
                }
            }, {
                key: "stuckAtPlaylistEnd_",
                value: function(e) {
                    var t = this.seekable();
                    if (!t.length) return !1;
                    var n = this.syncController_.getExpiredTime(e, this.mediaSource.duration);
                    if (null === n) return !1;
                    var i = bo.Playlist.playlistEnd(e, n),
                        r = this.tech_.currentTime(),
                        a = this.tech_.buffered();
                    if (!a.length) return qe >= i - r;
                    var s = a.end(a.length - 1);
                    return qe >= s - r && qe >= i - s
                }
            }, {
                key: "blacklistCurrentPlaylist",
                value: function() {
                    var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
                        n = arguments[1],
                        i = void 0,
                        r = void 0;
                    if (i = e.playlist || this.masterPlaylistLoader_.media(), n = n || e.blacklistDuration || this.blacklistDuration, !i) {
                        this.error = e;
                        try {
                            return this.mediaSource.endOfStream("network")
                        } catch (a) {
                            return this.trigger("error")
                        }
                    }
                    var s = 1 === this.masterPlaylistLoader_.master.playlists.filter(ce).length;
                    return s ? (t.log.warn("Problem encountered with the current HLS playlist. Trying again since it is the final playlist."), this.tech_.trigger("retryplaylist"), this.masterPlaylistLoader_.load(s)) : (i.excludeUntil = Date.now() + 1e3 * n, this.tech_.trigger("blacklistplaylist"), this.tech_.trigger({
                        type: "usage",
                        name: "hls-rendition-blacklisted"
                    }), r = this.selectPlaylist(), t.log.warn("Problem encountered with the current HLS playlist." + (e.message ? " " + e.message : "") + " Switching to another playlist."), this.masterPlaylistLoader_.media(r))
                }
            }, {
                key: "pauseLoading",
                value: function() {
                    this.mainSegmentLoader_.pause(), this.mediaTypes_.AUDIO.activePlaylistLoader && this.audioSegmentLoader_.pause(), this.mediaTypes_.SUBTITLES.activePlaylistLoader && this.subtitleSegmentLoader_.pause()
                }
            }, {
                key: "setCurrentTime",
                value: function(e) {
                    var t = We(this.tech_.buffered(), e);
                    return this.masterPlaylistLoader_ && this.masterPlaylistLoader_.media() && this.masterPlaylistLoader_.media().segments ? t && t.length ? e : (this.mainSegmentLoader_.resetEverything(), this.mainSegmentLoader_.abort(), this.mediaTypes_.AUDIO.activePlaylistLoader && (this.audioSegmentLoader_.resetEverything(), this.audioSegmentLoader_.abort()), this.mediaTypes_.SUBTITLES.activePlaylistLoader && (this.subtitleSegmentLoader_.resetEverything(), this.subtitleSegmentLoader_.abort()), void this.load()) : 0
                }
            }, {
                key: "duration",
                value: function() {
                    return this.masterPlaylistLoader_ ? this.mediaSource ? this.mediaSource.duration : bo.Playlist.duration(this.masterPlaylistLoader_.media()) : 0
                }
            }, {
                key: "seekable",
                value: function() {
                    return this.seekable_
                }
            }, {
                key: "onSyncInfoUpdate_",
                value: function() {
                    var e = void 0,
                        n = void 0;
                    if (this.masterPlaylistLoader_) {
                        var i = this.masterPlaylistLoader_.media();
                        if (i) {
                            var r = this.syncController_.getExpiredTime(i, this.mediaSource.duration);
                            if (null !== r && (e = bo.Playlist.seekable(i, r), 0 !== e.length)) {
                                if (this.mediaTypes_.AUDIO.activePlaylistLoader) {
                                    if (i = this.mediaTypes_.AUDIO.activePlaylistLoader.media(), r = this.syncController_.getExpiredTime(i, this.mediaSource.duration), null === r) return;
                                    if (n = bo.Playlist.seekable(i, r), 0 === n.length) return
                                }
                                n ? n.start(0) > e.end(0) || e.start(0) > n.end(0) ? this.seekable_ = e : this.seekable_ = t.createTimeRanges([
                                    [n.start(0) > e.start(0) ? n.start(0) : e.start(0), n.end(0) < e.end(0) ? n.end(0) : e.end(0)]
                                ]) : this.seekable_ = e, this.logger_("seekable updated [" + Ye(this.seekable_) + "]"), this.tech_.trigger("seekablechanged")
                            }
                        }
                    }
                }
            }, {
                key: "updateDuration",
                value: function() {
                    var e = this,
                        t = this.mediaSource.duration,
                        n = bo.Playlist.duration(this.masterPlaylistLoader_.media()),
                        i = this.tech_.buffered(),
                        r = function a() {
                            e.mediaSource.duration = n, e.tech_.trigger("durationchange"), e.mediaSource.removeEventListener("sourceopen", a)
                        };
                    i.length > 0 && (n = Math.max(n, i.end(i.length - 1))), t !== n && ("open" !== this.mediaSource.readyState ? this.mediaSource.addEventListener("sourceopen", r) : r())
                }
            }, {
                key: "dispose",
                value: function() {
                    var e = this;
                    this.decrypter_.terminate(), this.masterPlaylistLoader_.dispose(), this.mainSegmentLoader_.dispose(), ["AUDIO", "SUBTITLES"].forEach(function(t) {
                        var n = e.mediaTypes_[t].groups;
                        for (var i in n) n[i].forEach(function(e) {
                            e.playlistLoader && e.playlistLoader.dispose()
                        })
                    }), this.audioSegmentLoader_.dispose(), this.subtitleSegmentLoader_.dispose()
                }
            }, {
                key: "master",
                value: function() {
                    return this.masterPlaylistLoader_.master
                }
            }, {
                key: "media",
                value: function() {
                    return this.masterPlaylistLoader_.media() || this.initialMedia_
                }
            }, {
                key: "setupSourceBuffers_",
                value: function() {
                    var e = this.masterPlaylistLoader_.media(),
                        t = void 0;
                    if (e && "open" === this.mediaSource.readyState) {
                        if (t = Tt(this.masterPlaylistLoader_.master, e), t.length < 1) return this.error = "No compatible SourceBuffer configuration for the variant stream:" + e.resolvedUri, this.mediaSource.endOfStream("decode");
                        this.configureLoaderMimeTypes_(t), this.excludeIncompatibleVariants_(e)
                    }
                }
            }, {
                key: "configureLoaderMimeTypes_",
                value: function(e) {
                    var n = e.length > 1 && -1 === e[0].indexOf(",") && e[0] !== e[1] ? new t.EventTarget : null;
                    this.mainSegmentLoader_.mimeType(e[0], n), e[1] && this.audioSegmentLoader_.mimeType(e[1], n)
                }
            }, {
                key: "excludeUnsupportedVariants_",
                value: function() {
                    this.master().playlists.forEach(function(e) {
                        e.attributes.CODECS && _.MediaSource && _.MediaSource.isTypeSupported && !_.MediaSource.isTypeSupported('video/mp4; codecs="' + gt(e.attributes.CODECS) + '"') && (e.excludeUntil = 1 / 0)
                    })
                }
            }, {
                key: "excludeIncompatibleVariants_",
                value: function(e) {
                    var t = 2,
                        n = null,
                        i = void 0;
                    e.attributes.CODECS && (i = mt(e.attributes.CODECS), n = i.videoCodec, t = i.codecCount), this.master().playlists.forEach(function(e) {
                        var i = {
                            codecCount: 2,
                            videoCodec: null
                        };
                        e.attributes.CODECS && (i = mt(e.attributes.CODECS)), i.codecCount !== t && (e.excludeUntil = 1 / 0), i.videoCodec !== n && (e.excludeUntil = 1 / 0)
                    })
                }
            }, {
                key: "updateAdCues_",
                value: function(e) {
                    var t = 0,
                        n = this.seekable();
                    n.length && (t = n.start(0)), ys(e, this.cueTagsTrack_, t)
                }
            }, {
                key: "goalBufferLength",
                value: function() {
                    var e = this.tech_.currentTime(),
                        t = Xn.GOAL_BUFFER_LENGTH,
                        n = Xn.GOAL_BUFFER_LENGTH_RATE,
                        i = Math.max(t, Xn.MAX_GOAL_BUFFER_LENGTH);
                    return Math.min(t + e * n, i)
                }
            }, {
                key: "bufferLowWaterLine",
                value: function() {
                    var e = this.tech_.currentTime(),
                        t = Xn.BUFFER_LOW_WATER_LINE,
                        n = Xn.BUFFER_LOW_WATER_LINE_RATE,
                        i = Math.max(t, Xn.MAX_BUFFER_LOW_WATER_LINE);
                    return Math.min(t + e * n, i)
                }
            }]), n
        }(t.EventTarget),
        wo = function(e, t, n) {
            return function(i) {
                var r = e.master.playlists[t],
                    a = le(r),
                    s = ce(r);
                return "undefined" == typeof i ? s : (i ? delete r.disabled : r.disabled = !0, i === s || a || (n(), i ? e.trigger("renditionenabled") : e.trigger("renditiondisabled")), i)
            }
        },
        Co = function Xo(e, t, n) {
            x(this, Xo);
            var i = e.masterPlaylistController_,
                r = e.options_.smoothQualityChange,
                a = r ? "smooth" : "fast",
                s = i[a + "QualityChange_"].bind(i);
            if (t.attributes.RESOLUTION) {
                var o = t.attributes.RESOLUTION;
                this.width = o.width, this.height = o.height
            }
            this.bandwidth = t.attributes.BANDWIDTH, this.id = n, this.enabled = wo(e.playlists, t.uri, s)
        },
        Eo = function(e) {
            var t = e.playlists;
            e.representations = function() {
                return t.master.playlists.filter(function(e) {
                    return !le(e)
                }).map(function(t, n) {
                    return new Co(e, t, t.uri)
                })
            }
        },
        Ao = ["seeking", "seeked", "pause", "playing", "error"],
        Lo = function() {
            function e(t) {
                var n = this;
                x(this, e), this.tech_ = t.tech, this.seekable = t.seekable, this.seekTo = t.seekTo, this.consecutiveUpdates = 0, this.lastRecordedTime = null, this.timer_ = null, this.checkCurrentTimeTimeout_ = null, this.logger_ = Wn("PlaybackWatcher"), this.logger_("initialize");
                var i = function() {
                        return n.monitorCurrentTime_()
                    },
                    r = function() {
                        return n.techWaiting_()
                    },
                    a = function() {
                        return n.cancelTimer_()
                    },
                    s = function() {
                        return n.fixesBadSeeks_()
                    };
                this.tech_.on("seekablechanged", s), this.tech_.on("waiting", r), this.tech_.on(Ao, a), this.tech_.on("canplay", i), this.dispose = function() {
                    n.logger_("dispose"), n.tech_.off("seekablechanged", s),
                        n.tech_.off("waiting", r), n.tech_.off(Ao, a), n.tech_.off("canplay", i), n.checkCurrentTimeTimeout_ && _.clearTimeout(n.checkCurrentTimeTimeout_), n.cancelTimer_()
                }
            }
            return D(e, [{
                key: "monitorCurrentTime_",
                value: function() {
                    this.checkCurrentTime_(), this.checkCurrentTimeTimeout_ && _.clearTimeout(this.checkCurrentTimeTimeout_), this.checkCurrentTimeTimeout_ = _.setTimeout(this.monitorCurrentTime_.bind(this), 250)
                }
            }, {
                key: "checkCurrentTime_",
                value: function() {
                    if (this.tech_.seeking() && this.fixesBadSeeks_()) return this.consecutiveUpdates = 0, void(this.lastRecordedTime = this.tech_.currentTime());
                    if (!this.tech_.paused() && !this.tech_.seeking()) {
                        var e = this.tech_.currentTime(),
                            t = this.tech_.buffered();
                        return this.lastRecordedTime === e && (!t.length || e + qe >= t.end(t.length - 1)) ? this.techWaiting_() : void(this.consecutiveUpdates >= 5 && e === this.lastRecordedTime ? (this.consecutiveUpdates++, this.waiting_()) : e === this.lastRecordedTime ? this.consecutiveUpdates++ : (this.consecutiveUpdates = 0, this.lastRecordedTime = e))
                    }
                }
            }, {
                key: "cancelTimer_",
                value: function() {
                    this.consecutiveUpdates = 0, this.timer_ && (this.logger_("cancelTimer_"), clearTimeout(this.timer_)), this.timer_ = null
                }
            }, {
                key: "fixesBadSeeks_",
                value: function() {
                    var e = this.tech_.seeking(),
                        t = this.seekable(),
                        n = this.tech_.currentTime(),
                        i = void 0;
                    if (e && this.afterSeekableWindow_(t, n)) {
                        var r = t.end(t.length - 1);
                        i = r
                    }
                    if (e && this.beforeSeekableWindow_(t, n)) {
                        var a = t.start(0);
                        i = a + qe
                    }
                    return "undefined" != typeof i ? (this.logger_("Trying to seek outside of seekable at time " + n + " with " + ("seekable range " + Ye(t) + ". Seeking to ") + (i + ".")), this.seekTo(i), !0) : !1
                }
            }, {
                key: "waiting_",
                value: function() {
                    if (!this.techWaiting_()) {
                        var e = this.tech_.currentTime(),
                            t = this.tech_.buffered(),
                            n = We(t, e);
                        return n.length && e + 3 <= n.end(0) ? (this.cancelTimer_(), this.seekTo(e), this.logger_("Stopped at " + e + " while inside a buffered region " + ("[" + n.start(0) + " -> " + n.end(0) + "]. Attempting to resume ") + "playback by seeking to the current time."), void this.tech_.trigger({
                            type: "usage",
                            name: "hls-unknown-waiting"
                        })) : void 0
                    }
                }
            }, {
                key: "techWaiting_",
                value: function() {
                    var e = this.seekable(),
                        t = this.tech_.currentTime();
                    if (this.tech_.seeking() && this.fixesBadSeeks_()) return !0;
                    if (this.tech_.seeking() || null !== this.timer_) return !0;
                    if (this.beforeSeekableWindow_(e, t)) {
                        var n = e.end(e.length - 1);
                        return this.logger_("Fell out of live window at time " + t + ". Seeking to live point (seekable end) " + n), this.cancelTimer_(), this.seekTo(n), this.tech_.trigger({
                            type: "usage",
                            name: "hls-live-resync"
                        }), !0
                    }
                    var i = this.tech_.buffered(),
                        r = Ge(i, t);
                    if (this.videoUnderflow_(r, i, t)) return this.cancelTimer_(), this.seekTo(t), this.tech_.trigger({
                        type: "usage",
                        name: "hls-video-underflow"
                    }), !0;
                    if (r.length > 0) {
                        var a = r.start(0) - t;
                        return this.logger_("Stopped at " + t + ", setting timer for " + a + ", seeking to " + r.start(0)), this.timer_ = setTimeout(this.skipTheGap_.bind(this), 1e3 * a, t), !0
                    }
                    return !1
                }
            }, {
                key: "afterSeekableWindow_",
                value: function(e, t) {
                    return e.length && t > e.end(e.length - 1) + qe ? !0 : !1
                }
            }, {
                key: "beforeSeekableWindow_",
                value: function(e, t) {
                    return e.length && e.start(0) > 0 && t < e.start(0) - qe ? !0 : !1
                }
            }, {
                key: "videoUnderflow_",
                value: function(e, t, n) {
                    if (0 === e.length) {
                        var i = this.gapFromVideoUnderflow_(t, n);
                        if (i) return this.logger_("Encountered a gap in video from " + i.start + " to " + i.end + ". Seeking to current time " + n), !0
                    }
                    return !1
                }
            }, {
                key: "skipTheGap_",
                value: function(e) {
                    var t = this.tech_.buffered(),
                        n = this.tech_.currentTime(),
                        i = Ge(t, n);
                    this.cancelTimer_(), 0 !== i.length && n === e && (this.logger_("skipTheGap_:", "currentTime:", n, "scheduled currentTime:", e, "nextRange start:", i.start(0)), this.seekTo(i.start(0) + He), this.tech_.trigger({
                        type: "usage",
                        name: "hls-gap-skip"
                    }))
                }
            }, {
                key: "gapFromVideoUnderflow_",
                value: function(e, t) {
                    for (var n = Xe(e), i = 0; i < n.length; i++) {
                        var r = n.start(i),
                            a = n.end(i);
                        if (4 > t - r && t - r > 2) return {
                            start: r,
                            end: a
                        }
                    }
                    return null
                }
            }]), e
        }(),
        Io = {
            errorInterval: 30,
            getSource: function(e) {
                var t = this.tech({
                        IWillNotUseThisInPlugins: !0
                    }),
                    n = t.currentSource_;
                return e(n)
            }
        },
        Po = function Yo(e, n) {
            var i = 0,
                r = 0,
                a = t.mergeOptions(Io, n);
            e.ready(function() {
                e.trigger({
                    type: "usage",
                    name: "hls-error-reload-initialized"
                })
            });
            var s = function() {
                    r && e.currentTime(r)
                },
                o = function(t) {
                    null !== t && void 0 !== t && (r = e.duration() !== 1 / 0 && e.currentTime() || 0, e.one("loadedmetadata", s), e.src(t), e.trigger({
                        type: "usage",
                        name: "hls-error-reload"
                    }), e.play())
                },
                u = function() {
                    return Date.now() - i < 1e3 * a.errorInterval ? void e.trigger({
                        type: "usage",
                        name: "hls-error-reload-canceled"
                    }) : a.getSource && "function" == typeof a.getSource ? (i = Date.now(), a.getSource.call(e, o)) : void t.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")
                },
                l = function d() {
                    e.off("loadedmetadata", s), e.off("error", u), e.off("dispose", d)
                },
                c = function(t) {
                    l(), Yo(e, t)
                };
            e.on("error", u), e.on("dispose", l), e.reloadSourceOnError = c
        },
        xo = function(e) {
            Po(this, e)
        },
        Do = "1.4.1";
    t.use("*", function(e) {
        return {
            setSource: function(e, t) {
                t(null, e)
            },
            setCurrentTime: function(t) {
                return e.vhs && e.currentSource().src === e.vhs.source_.src && e.vhs.setCurrentTime(t), t
            },
            play: function() {
                e.vhs && e.currentSource().src === e.vhs.source_.src && e.vhs.setCurrentTime(e.currentTime())
            }
        }
    });
    var Uo = {
        PlaylistLoader: X,
        Playlist: ve,
        Decrypter: De,
        AsyncStream: Ie,
        decrypt: xe,
        utils: Ve,
        STANDARD_PLAYLIST_SELECTOR: er,
        INITIAL_PLAYLIST_SELECTOR: nr,
        comparePlaylistBandwidth: Ki,
        comparePlaylistResolution: Ji,
        xhr: be()
    };
    ["GOAL_BUFFER_LENGTH", "MAX_GOAL_BUFFER_LENGTH", "GOAL_BUFFER_LENGTH_RATE", "BUFFER_LOW_WATER_LINE", "MAX_BUFFER_LOW_WATER_LINE", "BUFFER_LOW_WATER_LINE_RATE", "BANDWIDTH_VARIANCE"].forEach(function(e) {
        Object.defineProperty(Uo, e, {
            get: function() {
                return t.log.warn("using Hls." + e + " is UNSAFE be sure you know what you are doing"), Xn[e]
            },
            set: function(n) {
                return t.log.warn("using Hls." + e + " is UNSAFE be sure you know what you are doing"), "number" != typeof n || 0 > n ? void t.log.warn("value of Hls." + e + " must be greater than or equal to 0") : void(Xn[e] = n)
            }
        })
    });
    var Oo = function(e) {
            var t = /^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i;
            if (t.test(e)) return "hls";
            var n = /^application\/dash\+xml/i;
            return n.test(e) ? "dash" : null
        },
        Mo = function(e, t) {
            for (var n = t.media(), i = -1, r = 0; r < e.length; r++)
                if (e[r].id === n.uri) {
                    i = r;
                    break
                }
            e.selectedIndex_ = i, e.trigger({
                selectedIndex: i,
                type: "change"
            })
        },
        Ro = function(e, t) {
            t.representations().forEach(function(t) {
                e.addQualityLevel(t)
            }), Mo(e, t.playlists)
        };
    Uo.canPlaySource = function() {
        return t.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")
    };
    var jo = function(e, n, i) {
            if (!e) return e;
            var r = {};
            for (var a in e) r[a] = {
                audioContentType: 'audio/mp4; codecs="' + i.attributes.CODECS + '"',
                videoContentType: 'video/mp4; codecs="' + n.attributes.CODECS + '"'
            }, n.contentProtection && n.contentProtection[a] && n.contentProtection[a].pssh && (r[a].pssh = n.contentProtection[a].pssh), "string" == typeof e[a] && (r[a].url = e[a]);
            return t.mergeOptions(e, r)
        },
        No = function(e) {
            if ("dash" === e.options_.sourceType) {
                var n = t.players[e.tech_.options_.playerId];
                if (n.eme) {
                    var i = jo(e.source_.keySystems, e.playlists.media(), e.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader.media());
                    i && (n.currentSource().keySystems = i, n.eme.initializeMediaKeys && n.eme.initializeMediaKeys())
                }
            }
        };
    Uo.supportsNativeHls = function() {
        var e = v.createElement("video");
        if (!t.getTech("Html5").isSupported()) return !1;
        var n = ["application/vnd.apple.mpegurl", "audio/mpegurl", "audio/x-mpegurl", "application/x-mpegurl", "video/x-mpegurl", "video/mpegurl", "application/mpegurl"];
        return n.some(function(t) {
            return /maybe|probably/i.test(e.canPlayType(t))
        })
    }(), Uo.supportsNativeDash = function() {
        return t.getTech("Html5").isSupported() ? /maybe|probably/i.test(v.createElement("video").canPlayType("application/dash+xml")) : !1
    }(), Uo.supportsTypeNatively = function(e) {
        return "hls" === e ? Uo.supportsNativeHls : "dash" === e ? Uo.supportsNativeDash : !1
    }, Uo.isSupported = function() {
        return t.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")
    };
    var Bo = t.getComponent("Component"),
        Fo = function(e) {
            function n(e, i, r) {
                x(this, n);
                var a = M(this, (n.__proto__ || Object.getPrototypeOf(n)).call(this, i, r.hls));
                if (i.options_ && i.options_.playerId) {
                    var s = t(i.options_.playerId);
                    s.hasOwnProperty("hls") || Object.defineProperty(s, "hls", {
                        get: function() {
                            return t.log.warn("player.hls is deprecated. Use player.tech().hls instead."), i.trigger({
                                type: "usage",
                                name: "hls-player-access"
                            }), a
                        }
                    }), s.vhs = a, s.dash = a
                }
                if (a.tech_ = i, a.source_ = e, a.stats = {}, a.setOptions_(), a.options_.overrideNative && i.overrideNativeAudioTracks && i.overrideNativeVideoTracks) i.overrideNativeAudioTracks(!0), i.overrideNativeVideoTracks(!0);
                else if (a.options_.overrideNative && (i.featuresNativeVideoTracks || i.featuresNativeAudioTracks)) throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");
                return a.on(v, ["fullscreenchange", "webkitfullscreenchange", "mozfullscreenchange", "MSFullscreenChange"], function(e) {
                    var t = v.fullscreenElement || v.webkitFullscreenElement || v.mozFullScreenElement || v.msFullscreenElement;
                    t && t.contains(a.tech_.el()) && a.masterPlaylistController_.smoothQualityChange_()
                }), a.on(a.tech_, "seeking", function() {
                    this.tech_.seeking() && 0 === this.tech_.currentTime() && this.tech_.player_.loop() && this.setCurrentTime(0)
                }), a.on(a.tech_, "error", function() {
                    this.masterPlaylistController_ && this.masterPlaylistController_.pauseLoading()
                }), a.on(a.tech_, "play", a.play), a
            }
            return O(n, e), D(n, [{
                key: "setOptions_",
                value: function() {
                    var e = this;
                    this.options_.withCredentials = this.options_.withCredentials || !1, this.options_.limitRenditionByPlayerDimensions = this.options_.limitRenditionByPlayerDimensions === !1 ? !1 : !0, this.options_.smoothQualityChange = this.options_.smoothQualityChange || !1, "number" != typeof this.options_.blacklistDuration && (this.options_.blacklistDuration = 300), "number" != typeof this.options_.bandwidth && (this.options_.bandwidth = Xn.INITIAL_BANDWIDTH), this.options_.enableLowInitialPlaylist = this.options_.enableLowInitialPlaylist && this.options_.bandwidth === Xn.INITIAL_BANDWIDTH, ["withCredentials", "limitRenditionByPlayerDimensions", "bandwidth", "smoothQualityChange"].forEach(function(t) {
                        "undefined" != typeof e.source_[t] && (e.options_[t] = e.source_[t])
                    }), this.bandwidth = this.options_.bandwidth, this.limitRenditionByPlayerDimensions = this.options_.limitRenditionByPlayerDimensions
                }
            }, {
                key: "src",
                value: function(e, n) {
                    var i = this;
                    e && (this.setOptions_(), this.options_.url = this.source_.src, this.options_.tech = this.tech_, this.options_.externHls = Uo, this.options_.sourceType = Oo(n), this.options_.seekTo = function(e) {
                        i.tech_.setCurrentTime(e), i.setCurrentTime(e)
                    }, this.masterPlaylistController_ = new ko(this.options_), this.playbackWatcher_ = new Lo(t.mergeOptions(this.options_, {
                        seekable: function() {
                            return i.seekable()
                        }
                    })), this.masterPlaylistController_.on("error", function() {
                        var e = t.players[i.tech_.options_.playerId];
                        e.error(i.masterPlaylistController_.error)
                    }), this.masterPlaylistController_.selectPlaylist = this.selectPlaylist ? this.selectPlaylist.bind(this) : Uo.STANDARD_PLAYLIST_SELECTOR.bind(this), this.masterPlaylistController_.selectInitialPlaylist = Uo.INITIAL_PLAYLIST_SELECTOR.bind(this), this.playlists = this.masterPlaylistController_.masterPlaylistLoader_, this.mediaSource = this.masterPlaylistController_.mediaSource, Object.defineProperties(this, {
                        selectPlaylist: {
                            get: function() {
                                return this.masterPlaylistController_.selectPlaylist
                            },
                            set: function(e) {
                                this.masterPlaylistController_.selectPlaylist = e.bind(this)
                            }
                        },
                        throughput: {
                            get: function() {
                                return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate
                            },
                            set: function(e) {
                                this.masterPlaylistController_.mainSegmentLoader_.throughput.rate = e, this.masterPlaylistController_.mainSegmentLoader_.throughput.count = 1
                            }
                        },
                        bandwidth: {
                            get: function() {
                                return this.masterPlaylistController_.mainSegmentLoader_.bandwidth
                            },
                            set: function(e) {
                                this.masterPlaylistController_.mainSegmentLoader_.bandwidth = e, this.masterPlaylistController_.mainSegmentLoader_.throughput = {
                                    rate: 0,
                                    count: 0
                                }
                            }
                        },
                        systemBandwidth: {
                            get: function() {
                                var e = 1 / (this.bandwidth || 1),
                                    t = void 0;
                                t = this.throughput > 0 ? 1 / this.throughput : 0;
                                var n = Math.floor(1 / (e + t));
                                return n
                            },
                            set: function() {
                                t.log.error('The "systemBandwidth" property is read-only')
                            }
                        }
                    }), Object.defineProperties(this.stats, {
                        bandwidth: {
                            get: function() {
                                return i.bandwidth || 0
                            },
                            enumerable: !0
                        },
                        mediaRequests: {
                            get: function() {
                                return i.masterPlaylistController_.mediaRequests_() || 0
                            },
                            enumerable: !0
                        },
                        mediaRequestsAborted: {
                            get: function() {
                                return i.masterPlaylistController_.mediaRequestsAborted_() || 0
                            },
                            enumerable: !0
                        },
                        mediaRequestsTimedout: {
                            get: function() {
                                return i.masterPlaylistController_.mediaRequestsTimedout_() || 0
                            },
                            enumerable: !0
                        },
                        mediaRequestsErrored: {
                            get: function() {
                                return i.masterPlaylistController_.mediaRequestsErrored_() || 0
                            },
                            enumerable: !0
                        },
                        mediaTransferDuration: {
                            get: function() {
                                return i.masterPlaylistController_.mediaTransferDuration_() || 0
                            },
                            enumerable: !0
                        },
                        mediaBytesTransferred: {
                            get: function() {
                                return i.masterPlaylistController_.mediaBytesTransferred_() || 0
                            },
                            enumerable: !0
                        },
                        mediaSecondsLoaded: {
                            get: function() {
                                return i.masterPlaylistController_.mediaSecondsLoaded_() || 0
                            },
                            enumerable: !0
                        },
                        buffered: {
                            get: function() {
                                return Qe(i.tech_.buffered())
                            },
                            enumerable: !0
                        },
                        currentTime: {
                            get: function() {
                                return i.tech_.currentTime()
                            },
                            enumerable: !0
                        },
                        currentSource: {
                            get: function() {
                                return i.tech_.currentSource_
                            },
                            enumerable: !0
                        },
                        currentTech: {
                            get: function() {
                                return i.tech_.name_
                            },
                            enumerable: !0
                        },
                        duration: {
                            get: function() {
                                return i.tech_.duration()
                            },
                            enumerable: !0
                        },
                        master: {
                            get: function() {
                                return i.playlists.master
                            },
                            enumerable: !0
                        },
                        playerDimensions: {
                            get: function() {
                                return i.tech_.currentDimensions()
                            },
                            enumerable: !0
                        },
                        seekable: {
                            get: function() {
                                return Qe(i.tech_.seekable())
                            },
                            enumerable: !0
                        },
                        timestamp: {
                            get: function() {
                                return Date.now()
                            },
                            enumerable: !0
                        },
                        videoPlaybackQuality: {
                            get: function() {
                                return i.tech_.getVideoPlaybackQuality()
                            },
                            enumerable: !0
                        }
                    }), this.tech_.one("canplay", this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)), this.masterPlaylistController_.on("selectedinitialmedia", function() {
                        Eo(i), No(i)
                    }), this.on(this.masterPlaylistController_, "progress", function() {
                        this.tech_.trigger("progress")
                    }), this.tech_.ready(function() {
                        return i.setupQualityLevels_()
                    }), this.tech_.el() && this.tech_.src(t.URL.createObjectURL(this.masterPlaylistController_.mediaSource)))
                }
            }, {
                key: "setupQualityLevels_",
                value: function() {
                    var e = this,
                        n = t.players[this.tech_.options_.playerId];
                    n && n.qualityLevels && (this.qualityLevels_ = n.qualityLevels(), this.masterPlaylistController_.on("selectedinitialmedia", function() {
                        Ro(e.qualityLevels_, e)
                    }), this.playlists.on("mediachange", function() {
                        Mo(e.qualityLevels_, e.playlists)
                    }))
                }
            }, {
                key: "play",
                value: function() {
                    this.masterPlaylistController_.play()
                }
            }, {
                key: "setCurrentTime",
                value: function(e) {
                    this.masterPlaylistController_.setCurrentTime(e)
                }
            }, {
                key: "duration",
                value: function() {
                    return this.masterPlaylistController_.duration()
                }
            }, {
                key: "seekable",
                value: function() {
                    return this.masterPlaylistController_.seekable()
                }
            }, {
                key: "dispose",
                value: function() {
                    this.playbackWatcher_ && this.playbackWatcher_.dispose(), this.masterPlaylistController_ && this.masterPlaylistController_.dispose(), this.qualityLevels_ && this.qualityLevels_.dispose(), U(n.prototype.__proto__ || Object.getPrototypeOf(n.prototype), "dispose", this).call(this)
                }
            }]), n
        }(Bo),
        Vo = {
            name: "videojs-http-streaming",
            VERSION: Do,
            canHandleSource: function(e) {
                var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
                    i = t.mergeOptions(t.options, n);
                return Vo.canPlayType(e.type, i)
            },
            handleSource: function(e, n) {
                var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {},
                    r = t.mergeOptions(t.options, i);
                return n.hls = new Fo(e, n, r), n.hls.xhr = be(), n.hls.src(e.src, e.type), n.hls
            },
            canPlayType: function(e) {
                var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
                    i = t.mergeOptions(t.options, n),
                    r = i.hls.overrideNative,
                    a = Oo(e),
                    s = a && (!Uo.supportsTypeNatively(a) || r);
                return s ? "maybe" : ""
            }
        };
    ("undefined" == typeof t.MediaSource || "undefined" == typeof t.URL) && (t.MediaSource = Mt, t.URL = Rt), Mt.supportsNativeMediaSources() && t.getTech("Html5").registerSourceHandler(Vo, 0), t.HlsHandler = Fo, t.HlsSourceHandler = Vo, t.Hls = Uo, t.use || t.registerComponent("Hls", Uo), t.options.hls = t.options.hls || {}, t.registerPlugin ? t.registerPlugin("reloadSourceOnError", xo) : t.plugin("reloadSourceOnError", xo), e.Hls = Uo, e.HlsHandler = Fo, e.HlsSourceHandler = Vo, e.emeKeySystems = jo, e.simpleTypeFromSourceType = Oo, Object.defineProperty(e, "__esModule", {
        value: !0
    })
}),
function(e) {
    if ("object" == typeof exports && "undefined" != typeof module) module.exports = e();
    else if ("function" == typeof define && define.amd) define("vastvpaid", [], e);
    else {
        var t;
        t = "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : this, t.videojsContribHls = e()
    }
}(function() {
    var e;
    return function t(e, n, i) {
        function r(s, o) {
            if (!n[s]) {
                if (!e[s]) {
                    var u = "function" == typeof require && require;
                    if (!o && u) return u(s, !0);
                    if (a) return a(s, !0);
                    var l = new Error("Cannot find module '" + s + "'");
                    throw l.code = "MODULE_NOT_FOUND", l
                }
                var c = n[s] = {
                    exports: {}
                };
                e[s][0].call(c.exports, function(t) {
                    var n = e[s][1][t];
                    return r(n ? n : t)
                }, c, c.exports, t, e, n, i)
            }
            return n[s].exports
        }
        for (var a = "function" == typeof require && require, s = 0; s < i.length; s++) r(i[s]);
        return r
    }({
        1: [
            function(e, t, n) {
                "use strict";

                function i(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }
                Object.defineProperty(n, "__esModule", {
                    value: !0
                });
                var r = function() {
                        function e(e, t) {
                            for (var n = 0; n < t.length; n++) {
                                var i = t[n];
                                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                            }
                        }
                        return function(t, n, i) {
                            return n && e(t.prototype, n), i && e(t, i), t
                        }
                    }(),
                    a = n.IVPAIDAdUnit = function() {
                        function e() {
                            i(this, e)
                        }
                        return r(e, [{
                            key: "handshakeVersion",
                            value: function() {
                                arguments.length <= 0 || void 0 === arguments[0] ? "2.0" : arguments[0], arguments.length <= 1 || void 0 === arguments[1] ? void 0 : arguments[1]
                            }
                        }, {
                            key: "initAd",
                            value: function(e, t, n, i) {
                                arguments.length <= 4 || void 0 === arguments[4] ? {
                                    AdParameters: ""
                                } : arguments[4], arguments.length <= 5 || void 0 === arguments[5] ? {
                                    flashVars: ""
                                } : arguments[5], arguments.length <= 6 || void 0 === arguments[6] ? void 0 : arguments[6]
                            }
                        }, {
                            key: "resizeAd",
                            value: function(e, t, n) {
                                arguments.length <= 3 || void 0 === arguments[3] ? void 0 : arguments[3]
                            }
                        }, {
                            key: "startAd",
                            value: function() {
                                arguments.length <= 0 || void 0 === arguments[0] ? void 0 : arguments[0]
                            }
                        }, {
                            key: "stopAd",
                            value: function() {
                                arguments.length <= 0 || void 0 === arguments[0] ? void 0 : arguments[0]
                            }
                        }, {
                            key: "pauseAd",
                            value: function() {
                                arguments.length <= 0 || void 0 === arguments[0] ? void 0 : arguments[0]
                            }
                        }, {
                            key: "resumeAd",
                            value: function() {
                                arguments.length <= 0 || void 0 === arguments[0] ? void 0 : arguments[0]
                            }
                        }, {
                            key: "expandAd",
                            value: function() {
                                arguments.length <= 0 || void 0 === arguments[0] ? void 0 : arguments[0]
                            }
                        }, {
                            key: "collapseAd",
                            value: function() {
                                arguments.length <= 0 || void 0 === arguments[0] ? void 0 : arguments[0]
                            }
                        }, {
                            key: "skipAd",
                            value: function() {
                                arguments.length <= 0 || void 0 === arguments[0] ? void 0 : arguments[0]
                            }
                        }, {
                            key: "getAdLinear",
                            value: function(e) {}
                        }, {
                            key: "getAdWidth",
                            value: function(e) {}
                        }, {
                            key: "getAdHeight",
                            value: function(e) {}
                        }, {
                            key: "getAdExpanded",
                            value: function(e) {}
                        }, {
                            key: "getAdSkippableState",
                            value: function(e) {}
                        }, {
                            key: "getAdRemainingTime",
                            value: function(e) {}
                        }, {
                            key: "getAdDuration",
                            value: function(e) {}
                        }, {
                            key: "setAdVolume",
                            value: function(e) {
                                arguments.length <= 1 || void 0 === arguments[1] ? void 0 : arguments[1]
                            }
                        }, {
                            key: "getAdVolume",
                            value: function(e) {}
                        }, {
                            key: "getAdCompanions",
                            value: function(e) {}
                        }, {
                            key: "getAdIcons",
                            value: function(e) {}
                        }]), e
                    }();
                Object.defineProperty(a, "EVENTS", {
                    writable: !1,
                    configurable: !1,
                    value: ["AdLoaded", "AdStarted", "AdStopped", "AdSkipped", "AdSkippableStateChange", "AdSizeChange", "AdLinearChange", "AdDurationChange", "AdExpandedChange", "AdRemainingTimeChange", "AdVolumeChange", "AdImpression", "AdVideoStart", "AdVideoFirstQuartile", "AdVideoMidpoint", "AdVideoThirdQuartile", "AdVideoComplete", "AdClickThru", "AdInteraction", "AdUserAcceptInvitation", "AdUserMinimize", "AdUserClose", "AdPaused", "AdPlaying", "AdLog", "AdError"]
                })
            }, {}
        ],
        2: [
            function(e, t, n) {
                "use strict";

                function i(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }

                function r(e, t) {
                    if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                    return !t || "object" !== ("undefined" == typeof t ? "undefined" : s(t)) && "function" != typeof t ? e : t
                }

                function a(e, t) {
                    if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + ("undefined" == typeof t ? "undefined" : s(t)));
                    e.prototype = Object.create(t && t.prototype, {
                        constructor: {
                            value: e,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
                }
                var s = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                    return typeof e
                } : function(e) {
                    return e && "function" == typeof Symbol && e.constructor === Symbol ? "symbol" : typeof e
                };
                Object.defineProperty(n, "__esModule", {
                    value: !0
                });
                var o = function() {
                        function e(e, t) {
                            for (var n = 0; n < t.length; n++) {
                                var i = t[n];
                                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                            }
                        }
                        return function(t, n, i) {
                            return n && e(t.prototype, n), i && e(t, i), t
                        }
                    }(),
                    u = e("./IVPAIDAdUnit").IVPAIDAdUnit,
                    l = Object.getOwnPropertyNames(u.prototype).filter(function(e) {
                        return -1 === ["constructor"].indexOf(e)
                    });
                n.VPAIDAdUnit = function(e) {
                    function t(e) {
                        i(this, t);
                        var n = r(this, Object.getPrototypeOf(t).call(this));
                        return n._destroyed = !1, n._flash = e, n
                    }
                    return a(t, e), o(t, [{
                        key: "_destroy",
                        value: function() {
                            var e = this;
                            this._destroyed = !0, l.forEach(function(t) {
                                e._flash.removeCallbackByMethodName(t)
                            }), u.EVENTS.forEach(function(t) {
                                e._flash.offEvent(t)
                            }), this._flash = null
                        }
                    }, {
                        key: "isDestroyed",
                        value: function() {
                            return this._destroyed
                        }
                    }, {
                        key: "on",
                        value: function(e, t) {
                            this._flash.on(e, t)
                        }
                    }, {
                        key: "off",
                        value: function(e, t) {
                            this._flash.off(e, t)
                        }
                    }, {
                        key: "handshakeVersion",
                        value: function() {
                            var e = arguments.length <= 0 || void 0 === arguments[0] ? "2.0" : arguments[0],
                                t = arguments.length <= 1 || void 0 === arguments[1] ? void 0 : arguments[1];
                            this._flash.callFlashMethod("handshakeVersion", [e], t)
                        }
                    }, {
                        key: "initAd",
                        value: function(e, t, n, i) {
                            var r = arguments.length <= 4 || void 0 === arguments[4] ? {
                                    AdParameters: ""
                                } : arguments[4],
                                a = arguments.length <= 5 || void 0 === arguments[5] ? {
                                    flashVars: ""
                                } : arguments[5],
                                s = arguments.length <= 6 || void 0 === arguments[6] ? void 0 : arguments[6];
                            this._flash.setSize(e, t), r = r || {
                                AdParameters: ""
                            }, a = a || {
                                flashVars: ""
                            }, this._flash.callFlashMethod("initAd", [this._flash.getWidth(), this._flash.getHeight(), n, i, r.AdParameters || "", a.flashVars || ""], s)
                        }
                    }, {
                        key: "resizeAd",
                        value: function(e, t, n) {
                            var i = arguments.length <= 3 || void 0 === arguments[3] ? void 0 : arguments[3];
                            this._flash.setSize(e, t), this._flash.callFlashMethod("resizeAd", [this._flash.getWidth(), this._flash.getHeight(), n], i)
                        }
                    }, {
                        key: "startAd",
                        value: function() {
                            var e = arguments.length <= 0 || void 0 === arguments[0] ? void 0 : arguments[0];
                            this._flash.callFlashMethod("startAd", [], e)
                        }
                    }, {
                        key: "stopAd",
                        value: function() {
                            var e = arguments.length <= 0 || void 0 === arguments[0] ? void 0 : arguments[0];
                            this._flash.callFlashMethod("stopAd", [], e)
                        }
                    }, {
                        key: "pauseAd",
                        value: function() {
                            var e = arguments.length <= 0 || void 0 === arguments[0] ? void 0 : arguments[0];
                            this._flash.callFlashMethod("pauseAd", [], e)
                        }
                    }, {
                        key: "resumeAd",
                        value: function() {
                            var e = arguments.length <= 0 || void 0 === arguments[0] ? void 0 : arguments[0];
                            this._flash.callFlashMethod("resumeAd", [], e)
                        }
                    }, {
                        key: "expandAd",
                        value: function() {
                            var e = arguments.length <= 0 || void 0 === arguments[0] ? void 0 : arguments[0];
                            this._flash.callFlashMethod("expandAd", [], e)
                        }
                    }, {
                        key: "collapseAd",
                        value: function() {
                            var e = arguments.length <= 0 || void 0 === arguments[0] ? void 0 : arguments[0];
                            this._flash.callFlashMethod("collapseAd", [], e)
                        }
                    }, {
                        key: "skipAd",
                        value: function() {
                            var e = arguments.length <= 0 || void 0 === arguments[0] ? void 0 : arguments[0];
                            this._flash.callFlashMethod("skipAd", [], e)
                        }
                    }, {
                        key: "getAdLinear",
                        value: function(e) {
                            this._flash.callFlashMethod("getAdLinear", [], e)
                        }
                    }, {
                        key: "getAdWidth",
                        value: function(e) {
                            this._flash.callFlashMethod("getAdWidth", [], e)
                        }
                    }, {
                        key: "getAdHeight",
                        value: function(e) {
                            this._flash.callFlashMethod("getAdHeight", [], e)
                        }
                    }, {
                        key: "getAdExpanded",
                        value: function(e) {
                            this._flash.callFlashMethod("getAdExpanded", [], e)
                        }
                    }, {
                        key: "getAdSkippableState",
                        value: function(e) {
                            this._flash.callFlashMethod("getAdSkippableState", [], e)
                        }
                    }, {
                        key: "getAdRemainingTime",
                        value: function(e) {
                            this._flash.callFlashMethod("getAdRemainingTime", [], e)
                        }
                    }, {
                        key: "getAdDuration",
                        value: function(e) {
                            this._flash.callFlashMethod("getAdDuration", [], e)
                        }
                    }, {
                        key: "setAdVolume",
                        value: function(e) {
                            var t = arguments.length <= 1 || void 0 === arguments[1] ? void 0 : arguments[1];
                            this._flash.callFlashMethod("setAdVolume", [e], t)
                        }
                    }, {
                        key: "getAdVolume",
                        value: function(e) {
                            this._flash.callFlashMethod("getAdVolume", [], e)
                        }
                    }, {
                        key: "getAdCompanions",
                        value: function(e) {
                            this._flash.callFlashMethod("getAdCompanions", [], e)
                        }
                    }, {
                        key: "getAdIcons",
                        value: function(e) {
                            this._flash.callFlashMethod("getAdIcons", [], e)
                        }
                    }]), t
                }(u)
            }, {
                "./IVPAIDAdUnit": 1
            }
        ],
        3: [
            function(e, t, n) {
                "use strict";

                function i(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }

                function r() {
                    if (this._destroyed) throw new Error("VPAIDFlashToJS is destroyed!")
                }

                function a() {
                    this._loadLater && (this.loadAdUnit(this._loadLater.url, this._loadLater.callback), delete this._loadLater)
                }

                function s(e, t) {
                    var n = arguments.length <= 2 || void 0 === arguments[2] ? !1 : arguments[2];
                    Object.defineProperty(y, e, {
                        writable: n,
                        configurable: !1,
                        value: t
                    })
                }
                var o = function() {
                        function e(e, t) {
                            for (var n = 0; n < t.length; n++) {
                                var i = t[n];
                                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                            }
                        }
                        return function(t, n, i) {
                            return n && e(t.prototype, n), i && e(t, i), t
                        }
                    }(),
                    u = e("swfobject"),
                    l = e("./jsFlashBridge").JSFlashBridge,
                    c = e("./VPAIDAdUnit").VPAIDAdUnit,
                    d = e("./utils").noop,
                    h = e("./utils").callbackTimeout,
                    p = e("./utils").isPositiveInt,
                    f = e("./utils").createElementWithID,
                    m = e("./utils").unique("vpaid"),
                    g = (e("./flashTester.js").createFlashTester, "10.1.0"),
                    v = {
                        isSupported: function() {
                            return !0
                        }
                    },
                    y = function() {
                        function e(t, n) {
                            function r(e) {
                                return setTimeout(function() {
                                    n(new Error(e))
                                }, 0), y
                            }
                            var s = arguments.length <= 2 || void 0 === arguments[2] ? {
                                    data: "VPAIDFlash.swf",
                                    width: 800,
                                    height: 400
                                } : arguments[2],
                                o = this,
                                c = arguments.length <= 3 || void 0 === arguments[3] ? {
                                    wmode: "transparent",
                                    salign: "tl",
                                    align: "left",
                                    allowScriptAccess: "always",
                                    scale: "noScale",
                                    allowFullScreen: "true",
                                    quality: "high"
                                } : arguments[3],
                                v = arguments.length <= 4 || void 0 === arguments[4] ? {
                                    debug: !1,
                                    timeout: 1e4
                                } : arguments[4];
                            i(this, e);
                            var y = this;
                            if (this._vpaidParentEl = t, this._flashID = m(), this._destroyed = !1, n = n || d, s.width = p(s.width, 800), s.height = p(s.height, 400), f(t, this._flashID, !0), c.movie = s.data, c.FlashVars = "flashid=" + this._flashID + "&handler=" + l.VPAID_FLASH_HANDLER + "&debug=" + v.debug + "&salign=" + c.salign, !e.isSupported()) return r("user don't support flash or doesn't have the minimum required version of flash " + g);
                            if (this.el = u.createSWF(s, c, this._flashID), !this.el) return r("swfobject failed to create object in element");
                            var _ = h(v.timeout, function(e, t) {
                                a.call(o), n(e, t)
                            }, function() {
                                n("vpaid flash load timeout " + v.timeout)
                            });
                            this._flash = new l(this.el, s.data, this._flashID, s.width, s.height, _)
                        }
                        return o(e, [{
                            key: "destroy",
                            value: function() {
                                this._destroyAdUnit(), this._flash && (this._flash.destroy(), this._flash = null), this.el = null, this._destroyed = !0
                            }
                        }, {
                            key: "isDestroyed",
                            value: function() {
                                return this._destroyed
                            }
                        }, {
                            key: "_destroyAdUnit",
                            value: function() {
                                delete this._loadLater, this._adUnitLoad && (this._adUnitLoad = null, this._flash.removeCallback(this._adUnitLoad)), this._adUnit && (this._adUnit._destroy(), this._adUnit = null)
                            }
                        }, {
                            key: "loadAdUnit",
                            value: function(e, t) {
                                var n = this;
                                r.call(this), this._adUnit && this._destroyAdUnit(), this._flash.isReady() ? (this._adUnitLoad = function(e, i) {
                                    e || (n._adUnit = new c(n._flash)), n._adUnitLoad = null, t(e, n._adUnit)
                                }, this._flash.callFlashMethod("loadAdUnit", [e], this._adUnitLoad)) : this._loadLater = {
                                    url: e,
                                    callback: t
                                }
                            }
                        }, {
                            key: "unloadAdUnit",
                            value: function() {
                                var e = arguments.length <= 0 || void 0 === arguments[0] ? void 0 : arguments[0];
                                r.call(this), this._destroyAdUnit(), this._flash.callFlashMethod("unloadAdUnit", [], e)
                            }
                        }, {
                            key: "getFlashID",
                            value: function() {
                                return r.call(this), this._flash.getFlashID()
                            }
                        }, {
                            key: "getFlashURL",
                            value: function() {
                                return r.call(this), this._flash.getFlashURL()
                            }
                        }]), e
                    }();
                s("isSupported", function() {
                    return !0
                }, !0), s("runFlashTest", function(e) {
                    v = !0
                }), y.swfobject = u, t.exports = y
            }, {
                "./VPAIDAdUnit": 2,
                "./flashTester.js": 4,
                "./jsFlashBridge": 5,
                "./utils": 8,
                swfobject: 14
            }
        ],
        4: [
            function(e, t, n) {
                "use strict";

                function i(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }
                Object.defineProperty(n, "__esModule", {
                    value: !0
                });
                var r = function() {
                        function e(e, t) {
                            for (var n = 0; n < t.length; n++) {
                                var i = t[n];
                                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                            }
                        }
                        return function(t, n, i) {
                            return n && e(t.prototype, n), i && e(t, i), t
                        }
                    }(),
                    a = e("swfobject"),
                    s = "vpaid_video_flash_tester",
                    o = "vpaid_video_flash_tester_el",
                    u = e("./jsFlashBridge").JSFlashBridge,
                    l = e("./utils"),
                    c = e("./registry").MultipleValuesRegistry,
                    d = function() {
                        function e(t) {
                            var n = this,
                                r = arguments.length <= 1 || void 0 === arguments[1] ? {
                                    data: "VPAIDFlash.swf",
                                    width: 800,
                                    height: 400
                                } : arguments[1];
                            i(this, e), this.parentEl = l.createElementWithID(t, o), l.hideFlashEl(this.parentEl);
                            var s = {};
                            s.movie = r.data, s.FlashVars = "flashid=" + o + "&handler=" + u.VPAID_FLASH_HANDLER, s.allowScriptAccess = "always", this.el = a.createSWF(r, s, o), this._handlers = new c, this._isSupported = !1, this.el && (l.hideFlashEl(this.el), this._flash = new u(this.el, r.data, o, r.width, r.height, function() {
                                var e = !0;
                                n._isSupported = e, n._handlers.get("change").forEach(function(t) {
                                    setTimeout(function() {
                                        t("change", e)
                                    }, 0)
                                })
                            }))
                        }
                        return r(e, [{
                            key: "isSupported",
                            value: function() {
                                return this._isSupported
                            }
                        }, {
                            key: "on",
                            value: function(e, t) {
                                this._handlers.add(e, t)
                            }
                        }]), e
                    }();
                n.createFlashTester = function(e, t) {
                    return window[s] || (window[s] = new d(e, t)), window[s]
                }
            }, {
                "./jsFlashBridge": 5,
                "./registry": 7,
                "./utils": 8,
                swfobject: 14
            }
        ],
        5: [
            function(e, t, n) {
                "use strict";

                function i(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }

                function r(e, t, n) {
                    var i = this;
                    setTimeout(function() {
                        var r = i._callbacks.get(e);
                        r && (i._callbacks.remove(e), r(t, n))
                    }, 0)
                }
                Object.defineProperty(n, "__esModule", {
                    value: !0
                });
                var a = function() {
                        function e(e, t) {
                            for (var n = 0; n < t.length; n++) {
                                var i = t[n];
                                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                            }
                        }
                        return function(t, n, i) {
                            return n && e(t.prototype, n), i && e(t, i), t
                        }
                    }(),
                    s = e("./utils").unique,
                    o = e("./utils").isPositiveInt,
                    u = e("./utils").stringEndsWith,
                    l = e("./registry").SingleValueRegistry,
                    c = e("./registry").MultipleValuesRegistry,
                    d = e("./jsFlashBridgeRegistry"),
                    h = "vpaid_video_flash_handler",
                    p = "AdError",
                    f = n.JSFlashBridge = function() {
                        function e(t, n, r, a, o, u) {
                            i(this, e), this._el = t, this._flashID = r, this._flashURL = n, this._width = a, this._height = o, this._handlers = new c, this._callbacks = new l, this._uniqueMethodIdentifier = s(this._flashID), this._ready = !1, this._handShakeHandler = u, d.addInstance(this._flashID, this)
                        }
                        return a(e, [{
                            key: "on",
                            value: function(e, t) {
                                this._handlers.add(e, t)
                            }
                        }, {
                            key: "off",
                            value: function(e, t) {
                                return this._handlers.remove(e, t)
                            }
                        }, {
                            key: "offEvent",
                            value: function(e) {
                                return this._handlers.removeByKey(e)
                            }
                        }, {
                            key: "offAll",
                            value: function() {
                                return this._handlers.removeAll()
                            }
                        }, {
                            key: "callFlashMethod",
                            value: function(e) {
                                var t = arguments.length <= 1 || void 0 === arguments[1] ? [] : arguments[1],
                                    n = arguments.length <= 2 || void 0 === arguments[2] ? void 0 : arguments[2],
                                    i = "";
                                n && (i = this._uniqueMethodIdentifier() + "_" + e, this._callbacks.add(i, n));
                                try {
                                    this._el[e]([i].concat(t))
                                } catch (a) {
                                    n ? r.call(this, i, a) : this._trigger(p, a)
                                }
                            }
                        }, {
                            key: "removeCallback",
                            value: function(e) {
                                return this._callbacks.removeByValue(e)
                            }
                        }, {
                            key: "removeCallbackByMethodName",
                            value: function(e) {
                                var t = this;
                                this._callbacks.filterKeys(function(t) {
                                    return u(t, e)
                                }).forEach(function(e) {
                                    t._callbacks.remove(e)
                                })
                            }
                        }, {
                            key: "removeAllCallbacks",
                            value: function() {
                                return this._callbacks.removeAll()
                            }
                        }, {
                            key: "_trigger",
                            value: function(e, t) {
                                var n = this;
                                this._handlers.get(e).forEach(function(i) {
                                    "AdClickThru" === e ? i(t) : setTimeout(function() {
                                        n._handlers.get(e).length > 0 && i(t)
                                    }, 0)
                                })
                            }
                        }, {
                            key: "_callCallback",
                            value: function(e, t, n, i) {
                                var a = this._callbacks.get(t);
                                return a ? void r.call(this, t, n, i) : void(n && "" === t && this.trigger(p, n))
                            }
                        }, {
                            key: "_handShake",
                            value: function(e, t) {
                                this._ready = !0, this._handShakeHandler && (this._handShakeHandler(e, t), delete this._handShakeHandler)
                            }
                        }, {
                            key: "getSize",
                            value: function() {
                                return {
                                    width: this._width,
                                    height: this._height
                                }
                            }
                        }, {
                            key: "setSize",
                            value: function(e, t) {
                                this._width = o(e, this._width), this._height = o(t, this._height),
                                    this._el.setAttribute("width", this._width), this._el.setAttribute("height", this._height)
                            }
                        }, {
                            key: "getWidth",
                            value: function() {
                                return this._width
                            }
                        }, {
                            key: "setWidth",
                            value: function(e) {
                                this.setSize(e, this._height)
                            }
                        }, {
                            key: "getHeight",
                            value: function() {
                                return this._height
                            }
                        }, {
                            key: "setHeight",
                            value: function(e) {
                                this.setSize(this._width, e)
                            }
                        }, {
                            key: "getFlashID",
                            value: function() {
                                return this._flashID
                            }
                        }, {
                            key: "getFlashURL",
                            value: function() {
                                return this._flashURL
                            }
                        }, {
                            key: "isReady",
                            value: function() {
                                return this._ready
                            }
                        }, {
                            key: "destroy",
                            value: function() {
                                this.offAll(), this.removeAllCallbacks(), d.removeInstanceByID(this._flashID), this._el.parentElement && this._el.parentElement.removeChild(this._el)
                            }
                        }]), e
                    }();
                Object.defineProperty(f, "VPAID_FLASH_HANDLER", {
                    writable: !1,
                    configurable: !1,
                    value: h
                }), window[h] = function(e, t, n, i, r, a) {
                    var s = d.getInstanceByID(e);
                    s && ("handShake" === n ? s._handShake(r, a) : "event" !== t ? s._callCallback(n, i, r, a) : s._trigger(n, a))
                }
            }, {
                "./jsFlashBridgeRegistry": 6,
                "./registry": 7,
                "./utils": 8
            }
        ],
        6: [
            function(e, t, n) {
                "use strict";
                var i = e("./registry").SingleValueRegistry,
                    r = new i,
                    a = {};
                Object.defineProperty(a, "addInstance", {
                    writable: !1,
                    configurable: !1,
                    value: function(e, t) {
                        r.add(e, t)
                    }
                }), Object.defineProperty(a, "getInstanceByID", {
                    writable: !1,
                    configurable: !1,
                    value: function(e) {
                        return r.get(e)
                    }
                }), Object.defineProperty(a, "removeInstanceByID", {
                    writable: !1,
                    configurable: !1,
                    value: function(e) {
                        return r.remove(e)
                    }
                }), t.exports = a
            }, {
                "./registry": 7
            }
        ],
        7: [
            function(e, t, n) {
                "use strict";

                function i(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }
                Object.defineProperty(n, "__esModule", {
                    value: !0
                });
                var r = function() {
                    function e(e, t) {
                        for (var n = 0; n < t.length; n++) {
                            var i = t[n];
                            i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                        }
                    }
                    return function(t, n, i) {
                        return n && e(t.prototype, n), i && e(t, i), t
                    }
                }();
                n.MultipleValuesRegistry = function() {
                    function e() {
                        i(this, e), this._registries = {}
                    }
                    return r(e, [{
                        key: "add",
                        value: function(e, t) {
                            this._registries[e] || (this._registries[e] = []), -1 === this._registries[e].indexOf(t) && this._registries[e].push(t)
                        }
                    }, {
                        key: "get",
                        value: function(e) {
                            return this._registries[e] || []
                        }
                    }, {
                        key: "filterKeys",
                        value: function(e) {
                            return Object.keys(this._registries).filter(e)
                        }
                    }, {
                        key: "findByValue",
                        value: function(e) {
                            var t = this,
                                n = Object.keys(this._registries).filter(function(n) {
                                    return -1 !== t._registries[n].indexOf(e)
                                });
                            return n
                        }
                    }, {
                        key: "remove",
                        value: function(e, t) {
                            if (this._registries[e]) {
                                var n = this._registries[e].indexOf(t);
                                if (!(0 > n)) return this._registries[e].splice(n, 1)
                            }
                        }
                    }, {
                        key: "removeByKey",
                        value: function(e) {
                            var t = this._registries[e];
                            return delete this._registries[e], t
                        }
                    }, {
                        key: "removeByValue",
                        value: function(e) {
                            var t = this,
                                n = this.findByValue(e);
                            return n.map(function(n) {
                                return t.remove(n, e)
                            })
                        }
                    }, {
                        key: "removeAll",
                        value: function() {
                            var e = this._registries;
                            return this._registries = {}, e
                        }
                    }, {
                        key: "size",
                        value: function() {
                            return Object.keys(this._registries).length
                        }
                    }]), e
                }(), n.SingleValueRegistry = function() {
                    function e() {
                        i(this, e), this._registries = {}
                    }
                    return r(e, [{
                        key: "add",
                        value: function(e, t) {
                            this._registries[e] = t
                        }
                    }, {
                        key: "get",
                        value: function(e) {
                            return this._registries[e]
                        }
                    }, {
                        key: "filterKeys",
                        value: function(e) {
                            return Object.keys(this._registries).filter(e)
                        }
                    }, {
                        key: "findByValue",
                        value: function(e) {
                            var t = this,
                                n = Object.keys(this._registries).filter(function(n) {
                                    return t._registries[n] === e
                                });
                            return n
                        }
                    }, {
                        key: "remove",
                        value: function(e) {
                            var t = this._registries[e];
                            return delete this._registries[e], t
                        }
                    }, {
                        key: "removeByValue",
                        value: function(e) {
                            var t = this,
                                n = this.findByValue(e);
                            return n.map(function(e) {
                                return t.remove(e)
                            })
                        }
                    }, {
                        key: "removeAll",
                        value: function() {
                            var e = this._registries;
                            return this._registries = {}, e
                        }
                    }, {
                        key: "size",
                        value: function() {
                            return Object.keys(this._registries).length
                        }
                    }]), e
                }()
            }, {}
        ],
        8: [
            function(e, t, n) {
                "use strict";

                function i(e) {
                    var t = -1;
                    return function(n) {
                        return e + "_" + ++t
                    }
                }

                function r() {}

                function a(e, t, n) {
                    var i = setTimeout(function() {
                        t = r, n()
                    }, e);
                    return function() {
                        clearTimeout(i), t.apply(this, arguments)
                    }
                }

                function s(e, t) {
                    var n = arguments.length <= 2 || void 0 === arguments[2] ? !1 : arguments[2],
                        i = document.createElement("div");
                    return i.id = t, n && (e.innerHTML = ""), e.appendChild(i), i
                }

                function o(e, t) {
                    return !isNaN(parseFloat(e)) && isFinite(e) && e > 0 ? e : t
                }

                function u(e, t) {
                    return c.call(e, t)
                }

                function l(e) {
                    e.style.position = "absolute", e.style.left = "-1px", e.style.top = "-1px", e.style.width = "1px", e.style.height = "1px"
                }
                Object.defineProperty(n, "__esModule", {
                    value: !0
                }), n.unique = i, n.noop = r, n.callbackTimeout = a, n.createElementWithID = s, n.isPositiveInt = o, n.stringEndsWith = u, n.hideFlashEl = l;
                var c = function() {
                    return String.prototype.endsWith ? String.prototype.endsWith : function(e, t) {
                        var n = this.toString();
                        (void 0 === t || t > n.length) && (t = n.length), t -= e.length;
                        var i = n.indexOf(e, t);
                        return -1 !== i && i === t
                    }
                }()
            }, {}
        ],
        9: [
            function(e, t, n) {
                "use strict";

                function i(e, t, n) {}

                function r(e, t, n) {
                    Object.defineProperty(e, t, {
                        writable: !1,
                        configurable: !1,
                        value: n
                    })
                }
                var a = ["handshakeVersion", "initAd", "startAd", "stopAd", "skipAd", "resizeAd", "pauseAd", "resumeAd", "expandAd", "collapseAd", "subscribe", "unsubscribe"],
                    s = ["AdLoaded", "AdStarted", "AdStopped", "AdSkipped", "AdSkippableStateChange", "AdSizeChange", "AdLinearChange", "AdDurationChange", "AdExpandedChange", "AdRemainingTimeChange", "AdVolumeChange", "AdImpression", "AdVideoStart", "AdVideoFirstQuartile", "AdVideoMidpoint", "AdVideoThirdQuartile", "AdVideoComplete", "AdClickThru", "AdInteraction", "AdUserAcceptInvitation", "AdUserMinimize", "AdUserClose", "AdPaused", "AdPlaying", "AdLog", "AdError"],
                    o = ["getAdLinear", "getAdWidth", "getAdHeight", "getAdExpanded", "getAdSkippableState", "getAdRemainingTime", "getAdDuration", "getAdVolume", "getAdCompanions", "getAdIcons"],
                    u = ["setAdVolume"];
                i.prototype.handshakeVersion = function(e, t) {}, i.prototype.initAd = function(e, t, n, i, r, a, s) {}, i.prototype.startAd = function(e) {}, i.prototype.stopAd = function(e) {}, i.prototype.skipAd = function(e) {}, i.prototype.resizeAd = function(e, t, n, i) {}, i.prototype.pauseAd = function(e) {}, i.prototype.resumeAd = function(e) {}, i.prototype.expandAd = function(e) {}, i.prototype.collapseAd = function(e) {}, i.prototype.subscribe = function(e, t, n) {}, i.prototype.unsubscribe = function(e, t) {}, i.prototype.getAdLinear = function(e) {}, i.prototype.getAdWidth = function(e) {}, i.prototype.getAdHeight = function(e) {}, i.prototype.getAdExpanded = function(e) {}, i.prototype.getAdSkippableState = function(e) {}, i.prototype.getAdRemainingTime = function(e) {}, i.prototype.getAdDuration = function(e) {}, i.prototype.getAdVolume = function(e) {}, i.prototype.getAdCompanions = function(e) {}, i.prototype.getAdIcons = function(e) {}, i.prototype.setAdVolume = function(e, t) {}, r(i, "METHODS", a), r(i, "GETTERS", o), r(i, "SETTERS", u), r(i, "EVENTS", s);
                var l = a.filter(function(e) {
                    return -1 === ["skipAd"].indexOf(e)
                });
                r(i, "checkVPAIDInterface", function(e) {
                    var t = l.every(function(t) {
                        return "function" == typeof e[t]
                    });
                    return t
                }), t.exports = i
            }, {}
        ],
        10: [
            function(e, t, n) {
                "use strict";

                function i(e, t, n, i) {
                    this._isValid = c(e), this._isValid && (this._creative = e, this._el = t, this._videoEl = n, this._iframe = i, this._subscribers = new l, r.call(this))
                }

                function r() {
                    if (f.forEach(function(e) {
                        this._creative.subscribe(s.bind(this, e), e)
                    }.bind(this)), this._creative.subscribe(a.bind(this), p), this._videoEl) {
                        var e = this._iframe.contentDocument.documentElement,
                            t = this._videoEl;
                        e.addEventListener("click", function(n) {
                            n.target === e && t.click()
                        })
                    }
                }

                function a(e, t, n) {
                    this._subscribers.triggerSync(p, {
                        url: e,
                        id: t,
                        playerHandles: n
                    })
                }

                function s(e) {
                    this._subscribers.trigger(e, Array.prototype.slice(arguments, 1))
                }

                function o(e, t, n, i) {
                    e ? e(n, i) : n && t.trigger(h, n)
                }
                var u = e("./IVPAIDAdUnit"),
                    l = e("./subscriber"),
                    c = u.checkVPAIDInterface,
                    d = e("./utils"),
                    h = (u.METHODS, "AdError"),
                    p = "AdClickThru",
                    f = u.EVENTS.filter(function(e) {
                        return e != p
                    });
                i.prototype = Object.create(u.prototype), i.prototype.isValidVPAIDAd = function() {
                    return this._isValid
                }, u.METHODS.forEach(function(e) {
                    var t = ["subscribe", "unsubscribe", "initAd"]; - 1 === t.indexOf(e) && (i.prototype[e] = function() {
                        var t = u.prototype[e].length,
                            n = Array.prototype.slice.call(arguments),
                            i = t === n.length ? n.pop() : void 0;
                        setTimeout(function() {
                            var t, r = null;
                            try {
                                t = this._creative[e].apply(this._creative, n)
                            } catch (a) {
                                r = a
                            }
                            o(i, this._subscribers, r, t)
                        }.bind(this), 0)
                    })
                }), i.prototype.initAd = function(e, t, n, i, r, a, s) {
                    r = r || {}, a = d.extend({
                        slot: this._el,
                        videoSlot: this._videoEl
                    }, a || {}), setTimeout(function() {
                        var u;
                        try {
                            this._creative.initAd(e, t, n, i, r, a)
                        } catch (l) {
                            u = l
                        }
                        o(s, this._subscribers, u)
                    }.bind(this), 0)
                }, i.prototype.subscribe = function(e, t, n) {
                    this._subscribers.subscribe(t, e, n)
                }, i.prototype.unsubscribe = function(e, t) {
                    this._subscribers.unsubscribe(t, e)
                }, i.prototype.on = i.prototype.subscribe, i.prototype.off = i.prototype.unsubscribe, u.GETTERS.forEach(function(e) {
                    i.prototype[e] = function(t) {
                        setTimeout(function() {
                            var n, i = null;
                            try {
                                n = this._creative[e]()
                            } catch (r) {
                                i = r
                            }
                            o(t, this._subscribers, i, n)
                        }.bind(this), 0)
                    }
                }), i.prototype.setAdVolume = function(e, t) {
                    setTimeout(function() {
                        var n, i = null;
                        try {
                            this._creative.setAdVolume(e), n = this._creative.getAdVolume()
                        } catch (r) {
                            i = r
                        }
                        i || (i = d.validate(n === e, "failed to apply volume: " + e)), o(t, this._subscribers, i, n)
                    }.bind(this), 0)
                }, i.prototype._destroy = function() {
                    this.stopAd(), this._subscribers.unsubscribeAll()
                }, t.exports = i
            }, {
                "./IVPAIDAdUnit": 9,
                "./subscriber": 12,
                "./utils": 13
            }
        ],
        11: [
            function(e, t, n) {
                "use strict";

                function i(e, t, n, i) {
                    n = n || {}, this._id = p(), this._destroyed = !1, this._frameContainer = h.createElementInEl(e, "div"), this._videoEl = t, this._vpaidOptions = i || {
                        timeout: 1e4
                    }, this._templateConfig = {
                        template: n.template || m,
                        extraOptions: n.extraOptions || {}
                    }
                }

                function r(e) {
                    var t = this[e];
                    t && (t.remove(), delete this[e])
                }

                function a() {
                    o.call(this), delete this._adUnit
                }

                function s() {
                    o.call(this), l.call(this)
                }

                function o() {
                    r.call(this, "_frame"), u.call(this)
                }

                function u() {
                    this._onLoad && (window.removeEventListener("message", this._onLoad), h.clearCallbackTimeout(this._onLoad), delete this._onLoad)
                }

                function l() {
                    this._adUnit && (this._adUnit.stopAd(), delete this._adUnit)
                }

                function c() {
                    if (this._destroyed) throw new Error("VPAIDHTML5Client already destroyed!")
                }

                function d() {
                    return window.location.origin ? window.location.origin : window.location.protocol + "//" + window.location.hostname + (window.location.port ? ":" + window.location.port : "")
                }
                var h = e("./utils"),
                    p = h.unique("vpaidIframe"),
                    f = e("./VPAIDAdUnit"),
                    m = '<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"></head><body style="margin:0;padding:0"><div class="ad-element"></div><script type="text/javascript" src="{{iframeURL_JS}}"></script><script type="text/javascript">window.parent.postMessage(\'{"event": "ready", "id": "{{iframeID}}"}\', \'{{origin}}\');</script></body></html>',
                    g = "AdStopped";
                i.prototype.destroy = function() {
                    this._destroyed || (this._destroyed = !0, s.call(this))
                }, i.prototype.isDestroyed = function() {
                    return this._destroyed
                }, i.prototype.loadAdUnit = function(e, t) {
                    function n(e) {
                        if (e.origin === d()) {
                            var n = JSON.parse(e.data);
                            if (n.id === r.getID()) {
                                var i, s, o;
                                if (r._frame.contentWindow ? (o = r._frame.contentWindow.getVPAIDAd, s = h.validate("function" == typeof o, "the ad didn't return a function to create an ad")) : s = "the iframe is not anymore in the DOM tree", !s) {
                                    var l = r._frame.contentWindow.document.querySelector(".ad-element");
                                    i = new f(o(), l, r._videoEl, r._frame), i.subscribe(g, a.bind(r)), s = h.validate(i.isValidVPAIDAd(), "the add is not fully complaint with VPAID specification")
                                }
                                return r._adUnit = i, u.call(r), t(s, s ? null : i), !0
                            }
                        }
                    }

                    function i() {
                        t("timeout", null)
                    }
                    c.call(this), s.call(this);
                    var r = this,
                        o = h.createIframeWithContent(this._frameContainer, this._templateConfig.template, h.extend({
                            iframeURL_JS: e,
                            iframeID: this.getID(),
                            origin: d()
                        }, this._templateConfig.extraOptions));
                    this._frame = o, this._onLoad = h.callbackTimeout(this._vpaidOptions.timeout, n.bind(this), i.bind(this)), window.addEventListener("message", this._onLoad)
                }, i.prototype.unloadAdUnit = function() {
                    s.call(this)
                }, i.prototype.getID = function() {
                    return this._id
                }, t.exports = i, window.VPAIDHTML5Client = i
            }, {
                "./VPAIDAdUnit": 10,
                "./utils": 13
            }
        ],
        12: [
            function(e, t, n) {
                "use strict";

                function i() {
                    this._subscribers = {}
                }
                i.prototype.subscribe = function(e, t, n) {
                    this.isHandlerAttached(e, t) || this.get(t).push({
                        handler: e,
                        context: n,
                        eventName: t
                    })
                }, i.prototype.unsubscribe = function(e, t) {
                    this._subscribers[t] = this.get(t).filter(function(t) {
                        return e !== t.handler
                    })
                }, i.prototype.unsubscribeAll = function() {
                    this._subscribers = {}
                }, i.prototype.trigger = function(e, t) {
                    var n = this,
                        i = this.get(e).concat(this.get("*"));
                    i.forEach(function(e) {
                        setTimeout(function() {
                            n.isHandlerAttached(e.handler, e.eventName) && e.handler.call(e.context, t)
                        }, 0)
                    })
                }, i.prototype.triggerSync = function(e, t) {
                    var n = this.get(e).concat(this.get("*"));
                    n.forEach(function(e) {
                        e.handler.call(e.context, t)
                    })
                }, i.prototype.get = function(e) {
                    return this._subscribers[e] || (this._subscribers[e] = []), this._subscribers[e]
                }, i.prototype.isHandlerAttached = function(e, t) {
                    return this.get(t).some(function(t) {
                        return e === t.handler
                    })
                }, t.exports = i
            }, {}
        ],
        13: [
            function(e, t, n) {
                "use strict";

                function i() {}

                function r(e, t) {
                    return e ? null : new Error(t)
                }

                function a(e) {
                    var t = f[e];
                    t && (clearTimeout(t), delete f[e])
                }

                function s(e, t, n) {
                    var r, s;
                    return s = setTimeout(function() {
                        t = i, delete s[r], n()
                    }, e), r = function() {
                        t.apply(this, arguments) && a(r)
                    }, f[r] = s, r
                }

                function o(e, t, n) {
                    var i = document.createElement(t);
                    return n && (i.id = n), e.appendChild(i), i
                }

                function u(e, t, n) {
                    var i = l(e, null, n.zIndex);
                    if (d(i, c(t, n))) return i
                }

                function l(e, t, n) {
                    var i = document.createElement("iframe");
                    return i.src = t || "about:blank", i.marginWidth = "0", i.marginHeight = "0", i.frameBorder = "0", i.width = "100%", i.height = "100%", i.style.position = "absolute", i.style.left = "0", i.style.top = "0", i.style.margin = "0px", i.style.padding = "0px", i.style.border = "none", n && (i.style.zIndex = n), i.setAttribute("SCROLLING", "NO"), e.innerHTML = "", e.appendChild(i), i
                }

                function c(e, t) {
                    return Object.keys(t).forEach(function(n) {
                        var i = "object" == typeof i ? JSON.stringify(t[n]) : t[n];
                        e = e.replace(new RegExp("{{" + n + "}}", "g"), i)
                    }), e
                }

                function d(e, t) {
                    var n = e.contentWindow && e.contentWindow.document;
                    return n ? (n.write(t), !0) : !1
                }

                function h(e, t) {
                    return Object.keys(t).forEach(function(n) {
                        e[n] = t[n]
                    }), e
                }

                function p(e) {
                    var t = -1;
                    return function() {
                        return e + "_" + ++t
                    }
                }
                var f = {};
                t.exports = {
                    noop: i,
                    validate: r,
                    clearCallbackTimeout: a,
                    callbackTimeout: s,
                    createElementInEl: o,
                    createIframeWithContent: u,
                    createIframe: l,
                    simpleTemplate: c,
                    setIframeContent: d,
                    extend: h,
                    unique: p
                }
            }, {}
        ],
        14: [
            function(t, n, i) {
                ! function(t, i) {
                    "function" == typeof e && e.amd ? e(i) : "object" == typeof n && n.exports ? n.exports = i() : t.swfobject = i()
                }(this, function() {
                    function e() {
                        if (!W && document.getElementsByTagName("body")[0]) {
                            try {
                                var e, t = v("span");
                                t.style.display = "none", e = N.getElementsByTagName("body")[0].appendChild(t), e.parentNode.removeChild(e), e = null, t = null
                            } catch (n) {
                                return
                            }
                            W = !0;
                            for (var i = V.length, r = 0; i > r; r++) V[r]()
                        }
                    }

                    function t(e) {
                        W ? e() : V[V.length] = e
                    }

                    function n(e) {
                        if (typeof j.addEventListener !== P) j.addEventListener("load", e, !1);
                        else if (typeof N.addEventListener !== P) N.addEventListener("load", e, !1);
                        else if (typeof j.attachEvent !== P) _(j, "onload", e);
                        else if ("function" == typeof j.onload) {
                            var t = j.onload;
                            j.onload = function() {
                                t(), e()
                            }
                        } else j.onload = e
                    }

                    function i() {
                        var e = N.getElementsByTagName("body")[0],
                            t = v(x);
                        t.setAttribute("style", "visibility: hidden;"), t.setAttribute("type", O);
                        var n = e.appendChild(t);
                        if (n) {
                            var i = 0;
                            ! function a() {
                                if (typeof n.GetVariable !== P) try {
                                    var s = n.GetVariable("$version");
                                    s && (s = s.split(" ")[1].split(","), $.pv = [y(s[0]), y(s[1]), y(s[2])])
                                } catch (o) {
                                    $.pv = [8, 0, 0]
                                } else if (10 > i) return i++, void setTimeout(a, 10);
                                e.removeChild(t), n = null, r()
                            }()
                        } else r()
                    }

                    function r() {
                        var e = H.length;
                        if (e > 0)
                            for (var t = 0; e > t; t++) {
                                var n = H[t].id,
                                    i = H[t].callbackFn,
                                    r = {
                                        success: !1,
                                        id: n
                                    };
                                if ($.pv[0] > 0) {
                                    var l = g(n);
                                    if (l)
                                        if (!b(H[t].swfVersion) || $.wk && $.wk < 312)
                                            if (H[t].expressInstall && s()) {
                                                var c = {};
                                                c.data = H[t].expressInstall, c.width = l.getAttribute("width") || "0", c.height = l.getAttribute("height") || "0", l.getAttribute("class") && (c.styleclass = l.getAttribute("class")), l.getAttribute("align") && (c.align = l.getAttribute("align"));
                                                for (var d = {}, h = l.getElementsByTagName("param"), p = h.length, f = 0; p > f; f++) "movie" !== h[f].getAttribute("name").toLowerCase() && (d[h[f].getAttribute("name")] = h[f].getAttribute("value"));
                                                o(c, d, n, i)
                                            } else u(l), i && i(r);
                                    else S(n, !0), i && (r.success = !0, r.ref = a(n), r.id = n, i(r))
                                } else if (S(n, !0), i) {
                                    var m = a(n);
                                    m && typeof m.SetVariable !== P && (r.success = !0, r.ref = m, r.id = m.id), i(r)
                                }
                            }
                    }

                    function a(e) {
                        var t = null,
                            n = g(e);
                        return n && "OBJECT" === n.nodeName.toUpperCase() && (t = typeof n.SetVariable !== P ? n : n.getElementsByTagName(x)[0] || n), t
                    }

                    function s() {
                        return !G && b("6.0.65") && ($.win || $.mac) && !($.wk && $.wk < 312)
                    }

                    function o(e, t, n, i) {
                        var r = g(n);
                        if (n = m(n), G = !0, E = i || null, A = {
                            success: !1,
                            id: n
                        }, r) {
                            "OBJECT" === r.nodeName.toUpperCase() ? (w = l(r), C = null) : (w = r, C = n), e.id = M, (typeof e.width === P || !/%$/.test(e.width) && y(e.width) < 310) && (e.width = "310"), (typeof e.height === P || !/%$/.test(e.height) && y(e.height) < 137) && (e.height = "137");
                            var a = $.ie ? "ActiveX" : "PlugIn",
                                s = "MMredirectURL=" + encodeURIComponent(j.location.toString().replace(/&/g, "%26")) + "&MMplayerType=" + a + "&MMdoctitle=" + encodeURIComponent(N.title.slice(0, 47) + " - Flash Player Installation");
                            if (typeof t.flashvars !== P ? t.flashvars += "&" + s : t.flashvars = s, $.ie && 4 != r.readyState) {
                                var o = v("div");
                                n += "SWFObjectNew", o.setAttribute("id", n), r.parentNode.insertBefore(o, r), r.style.display = "none", p(r)
                            }
                            d(e, t, n)
                        }
                    }

                    function u(e) {
                        if ($.ie && 4 != e.readyState) {
                            e.style.display = "none";
                            var t = v("div");
                            e.parentNode.insertBefore(t, e), t.parentNode.replaceChild(l(e), t), p(e)
                        } else e.parentNode.replaceChild(l(e), e)
                    }

                    function l(e) {
                        var t = v("div");
                        if ($.win && $.ie) t.innerHTML = e.innerHTML;
                        else {
                            var n = e.getElementsByTagName(x)[0];
                            if (n) {
                                var i = n.childNodes;
                                if (i)
                                    for (var r = i.length, a = 0; r > a; a++) 1 == i[a].nodeType && "PARAM" === i[a].nodeName || 8 == i[a].nodeType || t.appendChild(i[a].cloneNode(!0))
                            }
                        }
                        return t
                    }

                    function c(e, t) {
                        var n = v("div");
                        return n.innerHTML = "<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='" + e + "'>" + t + "</object>", n.firstChild
                    }

                    function d(e, t, n) {
                        var i, r = g(n);
                        if (n = m(n), $.wk && $.wk < 312) return i;
                        if (r) {
                            var a, s, o, u = v($.ie ? "div" : x);
                            typeof e.id === P && (e.id = n);
                            for (o in t) t.hasOwnProperty(o) && "movie" !== o.toLowerCase() && h(u, o, t[o]);
                            $.ie && (u = c(e.data, u.innerHTML));
                            for (a in e) e.hasOwnProperty(a) && (s = a.toLowerCase(), "styleclass" === s ? u.setAttribute("class", e[a]) : "classid" !== s && "data" !== s && u.setAttribute(a, e[a]));
                            $.ie ? q[q.length] = e.id : (u.setAttribute("type", O), u.setAttribute("data", e.data)), r.parentNode.replaceChild(u, r), i = u
                        }
                        return i
                    }

                    function h(e, t, n) {
                        var i = v("param");
                        i.setAttribute("name", t), i.setAttribute("value", n), e.appendChild(i)
                    }

                    function p(e) {
                        var t = g(e);
                        t && "OBJECT" === t.nodeName.toUpperCase() && ($.ie ? (t.style.display = "none", function n() {
                            if (4 == t.readyState) {
                                for (var e in t) "function" == typeof t[e] && (t[e] = null);
                                t.parentNode.removeChild(t)
                            } else setTimeout(n, 10)
                        }()) : t.parentNode.removeChild(t))
                    }

                    function f(e) {
                        return e && e.nodeType && 1 === e.nodeType
                    }

                    function m(e) {
                        return f(e) ? e.id : e
                    }

                    function g(e) {
                        if (f(e)) return e;
                        var t = null;
                        try {
                            t = N.getElementById(e)
                        } catch (n) {}
                        return t
                    }

                    function v(e) {
                        return N.createElement(e)
                    }

                    function y(e) {
                        return parseInt(e, 10)
                    }

                    function _(e, t, n) {
                        e.attachEvent(t, n), z[z.length] = [e, t, n]
                    }

                    function b(e) {
                        e += "";
                        var t = $.pv,
                            n = e.split(".");
                        return n[0] = y(n[0]), n[1] = y(n[1]) || 0, n[2] = y(n[2]) || 0, t[0] > n[0] || t[0] == n[0] && t[1] > n[1] || t[0] == n[0] && t[1] == n[1] && t[2] >= n[2] ? !0 : !1
                    }

                    function T(e, t, n, i) {
                        var r = N.getElementsByTagName("head")[0];
                        if (r) {
                            var a = "string" == typeof n ? n : "screen";
                            if (i && (L = null, I = null), !L || I != a) {
                                var s = v("style");
                                s.setAttribute("type", "text/css"), s.setAttribute("media", a), L = r.appendChild(s), $.ie && typeof N.styleSheets !== P && N.styleSheets.length > 0 && (L = N.styleSheets[N.styleSheets.length - 1]), I = a
                            }
                            L && (typeof L.addRule !== P ? L.addRule(e, t) : typeof N.createTextNode !== P && L.appendChild(N.createTextNode(e + " {" + t + "}")))
                        }
                    }

                    function S(e, t) {
                        if (X) {
                            var n = t ? "visible" : "hidden",
                                i = g(e);
                            W && i ? i.style.visibility = n : "string" == typeof e && T("#" + e, "visibility:" + n)
                        }
                    }

                    function k(e) {
                        var t = /[\\\"<>\.;]/,
                            n = null !== t.exec(e);
                        return n && typeof encodeURIComponent !== P ? encodeURIComponent(e) : e
                    }
                    var w, C, E, A, L, I, P = "undefined",
                        x = "object",
                        D = "Shockwave Flash",
                        U = "ShockwaveFlash.ShockwaveFlash",
                        O = "application/x-shockwave-flash",
                        M = "SWFObjectExprInst",
                        R = "onreadystatechange",
                        j = window,
                        N = document,
                        B = navigator,
                        F = !1,
                        V = [],
                        H = [],
                        q = [],
                        z = [],
                        W = !1,
                        G = !1,
                        X = !0,
                        Y = !1,
                        $ = function() {
                            var e = typeof N.getElementById !== P && typeof N.getElementsByTagName !== P && typeof N.createElement !== P,
                                t = B.userAgent.toLowerCase(),
                                n = B.platform.toLowerCase(),
                                i = n ? /win/.test(n) : /win/.test(t),
                                r = n ? /mac/.test(n) : /mac/.test(t),
                                a = /webkit/.test(t) ? parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/, "$1")) : !1,
                                s = "Microsoft Internet Explorer" === B.appName,
                                o = [0, 0, 0],
                                u = null;
                            if (typeof B.plugins !== P && typeof B.plugins[D] === x) u = B.plugins[D].description, u && typeof B.mimeTypes !== P && B.mimeTypes[O] && B.mimeTypes[O].enabledPlugin && (F = !0, s = !1, u = u.replace(/^.*\s+(\S+\s+\S+$)/, "$1"), o[0] = y(u.replace(/^(.*)\..*$/, "$1")), o[1] = y(u.replace(/^.*\.(.*)\s.*$/, "$1")), o[2] = /[a-zA-Z]/.test(u) ? y(u.replace(/^.*[a-zA-Z]+(.*)$/, "$1")) : 0);
                            else if (typeof j.ActiveXObject !== P) try {
                                var l = new ActiveXObject(U);
                                l && (u = l.GetVariable("$version"), u && (s = !0, u = u.split(" ")[1].split(","), o = [y(u[0]), y(u[1]), y(u[2])]))
                            } catch (c) {}
                            return {
                                w3: e,
                                pv: o,
                                wk: a,
                                ie: s,
                                win: i,
                                mac: r
                            }
                        }();
                    (function() {
                        $.w3 && ((typeof N.readyState !== P && ("complete" === N.readyState || "interactive" === N.readyState) || typeof N.readyState === P && (N.getElementsByTagName("body")[0] || N.body)) && e(), W || (typeof N.addEventListener !== P && N.addEventListener("DOMContentLoaded", e, !1), $.ie && (N.attachEvent(R, function t() {
                            "complete" === N.readyState && (N.detachEvent(R, t), e())
                        }), j == top && ! function n() {
                            if (!W) {
                                try {
                                    N.documentElement.doScroll("left")
                                } catch (t) {
                                    return void setTimeout(n, 0)
                                }
                                e()
                            }
                        }()), $.wk && ! function i() {
                            return W ? void 0 : /loaded|complete/.test(N.readyState) ? void e() : void setTimeout(i, 0)
                        }()))
                    })();
                    V[0] = function() {
                        F ? i() : r()
                    };
                    (function() {
                        $.ie && window.attachEvent("onunload", function() {
                            for (var e = z.length, t = 0; e > t; t++) z[t][0].detachEvent(z[t][1], z[t][2]);
                            for (var n = q.length, i = 0; n > i; i++) p(q[i]);
                            for (var r in $) $[r] = null;
                            $ = null;
                            for (var a in swfobject) swfobject[a] = null;
                            swfobject = null
                        })
                    })();
                    return {
                        registerObject: function(e, t, n, i) {
                            if ($.w3 && e && t) {
                                var r = {};
                                r.id = e, r.swfVersion = t, r.expressInstall = n, r.callbackFn = i, H[H.length] = r, S(e, !1)
                            } else i && i({
                                success: !1,
                                id: e
                            })
                        },
                        getObjectById: function(e) {
                            return $.w3 ? a(e) : void 0
                        },
                        embedSWF: function(e, n, i, r, a, u, l, c, h, p) {
                            var f = m(n),
                                g = {
                                    success: !1,
                                    id: f
                                };
                            $.w3 && !($.wk && $.wk < 312) && e && n && i && r && a ? (S(f, !1), t(function() {
                                i += "", r += "";
                                var t = {};
                                if (h && typeof h === x)
                                    for (var m in h) t[m] = h[m];
                                t.data = e, t.width = i, t.height = r;
                                var v = {};
                                if (c && typeof c === x)
                                    for (var y in c) v[y] = c[y];
                                if (l && typeof l === x)
                                    for (var _ in l)
                                        if (l.hasOwnProperty(_)) {
                                            var T = Y ? encodeURIComponent(_) : _,
                                                k = Y ? encodeURIComponent(l[_]) : l[_];
                                            typeof v.flashvars !== P ? v.flashvars += "&" + T + "=" + k : v.flashvars = T + "=" + k
                                        }
                                if (b(a)) {
                                    var w = d(t, v, n);
                                    t.id == f && S(f, !0), g.success = !0, g.ref = w, g.id = w.id
                                } else {
                                    if (u && s()) return t.data = u, void o(t, v, n, p);
                                    S(f, !0)
                                }
                                p && p(g)
                            })) : p && p(g)
                        },
                        switchOffAutoHideShow: function() {
                            X = !1
                        },
                        enableUriEncoding: function(e) {
                            Y = typeof e === P ? !0 : e
                        },
                        ua: $,
                        getFlashPlayerVersion: function() {
                            return {
                                major: $.pv[0],
                                minor: $.pv[1],
                                release: $.pv[2]
                            }
                        },
                        hasFlashPlayerVersion: b,
                        createSWF: function(e, t, n) {
                            return $.w3 ? d(e, t, n) : void 0
                        },
                        showExpressInstall: function(e, t, n, i) {
                            $.w3 && s() && o(e, t, n, i)
                        },
                        removeSWF: function(e) {
                            $.w3 && p(e)
                        },
                        createCSS: function(e, t, n, i) {
                            $.w3 && T(e, t, n, i)
                        },
                        addDomLoadEvent: t,
                        addLoadEvent: n,
                        getQueryParamValue: function(e) {
                            var t = N.location.search || N.location.hash;
                            if (t) {
                                if (/\?/.test(t) && (t = t.split("?")[1]), !e) return k(t);
                                for (var n = t.split("&"), i = 0; i < n.length; i++)
                                    if (n[i].substring(0, n[i].indexOf("=")) == e) return k(n[i].substring(n[i].indexOf("=") + 1))
                            }
                            return ""
                        },
                        expressInstallCallback: function() {
                            if (G) {
                                var e = g(M);
                                e && w && (e.parentNode.replaceChild(w, e), C && (S(C, !0), $.ie && (w.style.display = "block")), E && E(A)), G = !1
                            }
                        },
                        version: "2.3"
                    }
                })
            }, {}
        ],
        15: [
            function(e, t, n) {
                "use strict";

                function i(e) {
                    return this instanceof i ? void this.initialize(e) : new i(e)
                }
                var r = e("./InLine"),
                    a = e("./Wrapper");
                i.prototype.initialize = function(e) {
                    this.id = e.attr("id"), this.sequence = e.attr("sequence"), e.inLine && (this.inLine = new r(e.inLine)), e.wrapper && (this.wrapper = new a(e.wrapper))
                }, t.exports = i
            }, {
                "./InLine": 18,
                "./Wrapper": 28
            }
        ],
        16: [
            function(e, t, n) {
                "use strict";

                function i(e) {
                    function t(e) {
                        var t = [];
                        return a.isDefined(e) && (e = a.isArray(e) ? e : [e], e.forEach(function(e) {
                            t.push(new r(e))
                        })), t
                    }
                    if (!(this instanceof i)) return new i(e);
                    o.info("<Companion> found companion ad"), o.debug("<Companion>  companionJTree:", e), this.creativeType = s.attr(e.staticResource, "creativeType"), this.staticResource = s.keyValue(e.staticResource), o.info("<Companion>  creativeType: " + this.creativeType), o.info("<Companion>  staticResource: " + this.staticResource);
                    var n = null;
                    s.keyValue(e.HTMLResource) ? n = s.keyValue(e.HTMLResource) : s.keyValue(e.hTMLResource) && (n = s.keyValue(e.hTMLResource)), null !== n && o.info("<Companion> found html resource", n), this.htmlResource = n;
                    var u = null;
                    s.keyValue(e.IFrameResource) ? u = s.keyValue(e.IFrameResource) : s.keyValue(e.iFrameresource) && (u = s.keyValue(e.iFrameresource)), null !== u && o.info("<Companion> found iframe resource", u), this.iframeResource = u, this.id = s.attr(e, "id"), this.width = s.attr(e, "width"), this.height = s.attr(e, "height"), this.expandedWidth = s.attr(e, "expandedWidth"), this.expandedHeight = s.attr(e, "expandedHeight"), this.scalable = s.attr(e, "scalable"), this.maintainAspectRatio = s.attr(e, "maintainAspectRatio"), this.minSuggestedDuration = s.attr(e, "minSuggestedDuration"), this.apiFramework = s.attr(e, "apiFramework"), this.companionClickThrough = s.keyValue(e.companionClickThrough), this.trackingEvents = t(e.trackingEvents && e.trackingEvents.tracking), o.info("<Companion>  companionClickThrough: " + this.companionClickThrough)
                }
                var r = e("./TrackingEvent"),
                    a = e("../../utils/utilityFunctions"),
                    s = e("../../utils/xml"),
                    o = e("../../utils/consoleLogger");
                t.exports = i
            }, {
                "../../utils/consoleLogger": 41,
                "../../utils/utilityFunctions": 47,
                "../../utils/xml": 48,
                "./TrackingEvent": 21
            }
        ],
        17: [
            function(e, t, n) {
                "use strict";

                function i(e) {
                    if (!(this instanceof i)) return new i(e);
                    if (this.id = e.attr("id"), this.sequence = e.attr("sequence"), this.adId = e.attr("adId"), this.apiFramework = e.attr("apiFramework"), e.linear && (this.linear = new r(e.linear)), e.companionAds) {
                        var t = [],
                            n = e.companionAds && e.companionAds.companion;
                        s.isDefined(n) && (n = s.isArray(n) ? n : [n], n.forEach(function(e) {
                            t.push(new a(e))
                        })), this.companionAds = t
                    }
                }
                var r = e("./Linear"),
                    a = e("./Companion"),
                    s = e("../../utils/utilityFunctions");
                i.prototype.isSupported = function() {
                    return this.linear ? this.linear.isSupported() : !0
                }, i.parseCreatives = function(e) {
                    var t, n = [];
                    return s.isDefined(e) && s.isDefined(e.creative) && (t = s.isArray(e.creative) ? e.creative : [e.creative], t.forEach(function(e) {
                        n.push(new i(e))
                    })), n
                }, t.exports = i
            }, {
                "../../utils/utilityFunctions": 47,
                "./Companion": 16,
                "./Linear": 19
            }
        ],
        18: [
            function(e, t, n) {
                "use strict";

                function i(e) {
                    function t(e) {
                        return e ? s.transformArray(s.isArray(e) ? e : [e], function(e) {
                            return s.isNotEmptyString(e.keyValue) ? {
                                uri: e.keyValue,
                                type: e.attr("type")
                            } : void 0
                        }) : []
                    }
                    return this instanceof i ? (this.adTitle = o.keyValue(e.adTitle), this.adSystem = o.keyValue(e.adSystem), this.impressions = r.parseImpressions(e.impression), this.creatives = a.parseCreatives(e.creatives), this.description = o.keyValue(e.description), this.advertiser = o.keyValue(e.advertiser), this.surveys = t(e.survey), this.error = o.keyValue(e.error), this.pricing = o.keyValue(e.pricing), void(this.extensions = e.extensions)) : new i(e)
                }
                var r = e("./vastUtil"),
                    a = e("./Creative"),
                    s = e("../../utils/utilityFunctions"),
                    o = e("../../utils/xml");
                i.prototype.isSupported = function() {
                    var e, t;
                    if (0 === this.creatives.length) return !1;
                    for (e = 0, t = this.creatives.length; t > e; e += 1)
                        if (!this.creatives[e].isSupported()) return !1;
                    return !0
                }, t.exports = i
            }, {
                "../../utils/utilityFunctions": 47,
                "../../utils/xml": 48,
                "./Creative": 17,
                "./vastUtil": 30
            }
        ],
        19: [
            function(e, t, n) {
                "use strict";

                function i(e) {
                    function t(e, t) {
                        var n = [];
                        return o.isDefined(e) && (e = o.isArray(e) ? e : [e], e.forEach(function(e) {
                            n.push(new r(e, t))
                        })), n
                    }

                    function n(e) {
                        var t = [];
                        return o.isDefined(e) && (e = o.isArray(e) ? e : [e], e.forEach(function(e) {
                            t.push(new a(e))
                        })), t
                    }
                    return this instanceof i ? (this.duration = u.duration(l.keyValue(e.duration)), this.mediaFiles = n(e.mediaFiles && e.mediaFiles.mediaFile), this.trackingEvents = t(e.trackingEvents && e.trackingEvents.tracking, this.duration), this.skipoffset = u.offset(l.attr(e, "skipoffset"), this.duration), e.videoClicks && (this.videoClicks = new s(e.videoClicks)), void(e.adParameters && (this.adParameters = l.keyValue(e.adParameters), l.attr(e.adParameters, "xmlEncoded") && (this.adParameters = l.decode(this.adParameters))))) : new i(e)
                }
                var r = e("./TrackingEvent"),
                    a = e("./MediaFile"),
                    s = e("./VideoClicks"),
                    o = e("../../utils/utilityFunctions"),
                    u = e("./parsers"),
                    l = e("../../utils/xml");
                i.prototype.isSupported = function() {
                    var e, t;
                    for (e = 0, t = this.mediaFiles.length; t > e; e += 1)
                        if (this.mediaFiles[e].isSupported()) return !0;
                    return !1
                }, t.exports = i
            }, {
                "../../utils/utilityFunctions": 47,
                "../../utils/xml": 48,
                "./MediaFile": 20,
                "./TrackingEvent": 21,
                "./VideoClicks": 27,
                "./parsers": 29
            }
        ],
        20: [
            function(e, t, n) {
                "use strict";

                function i(e) {
                    if (!(this instanceof i)) return new i(e);
                    this.src = r.keyValue(e);
                    for (var t = 0; t < s.length; t++) {
                        var n = s[t];
                        this[n] = e.attr(n)
                    }
                }
                var r = e("../../utils/xml"),
                    a = e("./vastUtil"),
                    s = ["delivery", "type", "width", "height", "codec", "id", "bitrate", "minBitrate", "maxBitrate", "scalable", "maintainAspectRatio", "apiFramework"];
                i.prototype.isSupported = function() {
                    return a.isVPAID(this) ? !!a.findSupportedVPAIDTech(this.type) : "video/x-flv" === this.type ? a.isFlashSupported() : !0
                }, t.exports = i
            }, {
                "../../utils/xml": 48,
                "./vastUtil": 30
            }
        ],
        21: [
            function(e, t, n) {
                "use strict";

                function i(e, t) {
                    return this instanceof i ? (this.name = e.attr("event"), this.uri = a.keyValue(e), void("progress" === this.name && (this.offset = r.offset(e.attr("offset"), t)))) : new i(e, t)
                }
                var r = e("./parsers"),
                    a = e("../../utils/xml");
                t.exports = i
            }, {
                "../../utils/xml": 48,
                "./parsers": 29
            }
        ],
        22: [
            function(e, t, n) {
                "use strict";

                function i(e) {
                    if (!(this instanceof i)) return new i(e);
                    var t = {
                        WRAPPER_LIMIT: 5
                    };
                    e = e || {}, this.settings = c.extend({}, e, t), this.errorURLMacros = []
                }
                var r = e("./Ad"),
                    a = e("./VASTError"),
                    s = e("./VASTResponse"),
                    o = e("./vastUtil"),
                    u = e("../../utils/async"),
                    l = e("../../utils/http").http,
                    c = e("../../utils/utilityFunctions"),
                    d = e("../../utils/xml"),
                    h = e("../../utils/consoleLogger");
                i.prototype.getVASTResponse = function(e, t) {
                    function n(e, t) {
                        try {
                            var n = r._buildVASTResponse(e);
                            t(null, n)
                        } catch (i) {
                            t(i)
                        }
                    }

                    function i(e, t) {
                        return e ? c.isFunction(t) ? void 0 : new a("on VASTClient.getVASTResponse, missing callback function") : new a("on VASTClient.getVASTResponse, missing ad tag URL")
                    }
                    var r = this,
                        s = i(e, t);
                    if (s) {
                        if (c.isFunction(t)) return t(s);
                        throw s
                    }
                    u.waterfall([this._getVASTAd.bind(this, e), n], t)
                }, i.prototype._getVASTAd = function(e, t) {
                    function n(e, t) {
                        var n = m._requestVASTXml.bind(m, e);
                        u.waterfall([n, i], t)
                    }

                    function i(e, t) {
                        var n;
                        try {
                            n = d.toJXONTree(e), h.debug("built JXONTree from VAST response:", n), c.isArray(n.ad) ? n.ads = n.ad : n.ad ? n.ads = [n.ad] : n.ads = [], t(s(n), n)
                        } catch (i) {
                            t(new a("on VASTClient.getVASTAd.buildVastWaterfall, error parsing xml", 100), null)
                        }
                    }

                    function s(e) {
                        var t = d.attr(e, "version");
                        return e.ad ? t && 3 != t && 2 != t ? new a('on VASTClient.getVASTAd.validateVASTTree, not supported VAST version "' + t + '"', 102) : null : new a("on VASTClient.getVASTAd.validateVASTTree, no Ad in VAST tree", 303)
                    }

                    function o(e, t, n) {
                        return t.length >= m.WRAPPER_LIMIT ? n(new a("on VASTClient.getVASTAd.getAd, players wrapper limit reached (the limit is " + m.WRAPPER_LIMIT + ")", 302), t) : void u.waterfall([
                            function(t) {
                                c.isString(e) ? f(e, t) : t(null, e)
                            },
                            l
                        ], function(e, i) {
                            return i && t.push(i), e ? n(e, t) : i.wrapper ? o(i.wrapper.VASTAdTagURI, t, n) : n(null, t)
                        })
                    }

                    function l(e, t) {
                        try {
                            var n = new r(e);
                            t(p(n), n)
                        } catch (i) {
                            t(new a("on VASTClient.getVASTAd.buildAd, error parsing xml", 100), null)
                        }
                    }

                    function p(e) {
                        var t = e.wrapper,
                            n = e.inLine,
                            i = "on VASTClient.getVASTAd.validateAd, ";
                        return n && t ? new a(i + "InLine and Wrapper both found on the same Ad", 101) : n || t ? n && !n.isSupported() ? new a(i + "could not find MediaFile that is supported by this video player", 403) : t && !t.VASTAdTagURI ? new a(i + "missing 'VASTAdTagURI' in wrapper", 101) : null : new a(i + "nor wrapper nor inline elements found on the Ad", 101)
                    }

                    function f(e, t) {
                        m._requestVASTXml(e, function(e, n) {
                            if (e) return t(e);
                            try {
                                var i = d.toJXONTree(n);
                                t(s(i), i.ad)
                            } catch (r) {
                                t(new a("on VASTClient.getVASTAd.requestVASTAd, error parsing xml", 100))
                            }
                        })
                    }
                    var m = this;
                    n(e, function(e, n) {
                        function i(e, n) {
                            e ? (m._trackError(e, n), r.length > 0 ? o(r.shift(), [], i) : t(e, n)) : t(null, n)
                        }
                        var r = n && c.isArray(n.ads) ? n.ads : null;
                        return e ? (m._trackError(e, r), t(e, r)) : void o(r.shift(), [], i);
                    })
                }, i.prototype._requestVASTXml = function(e, t) {
                    function n(e, n, i) {
                        if (e) {
                            var r = c.isDefined(i) ? "on VASTClient.requestVastXML, HTTP request error with status '" + i + "'" : "on VASTClient.requestVastXML, Error getting the the VAST XML with he passed adTagXML fn";
                            return t(new a(r, 301), null)
                        }
                        t(null, n)
                    }
                    try {
                        c.isFunction(e) ? e(n) : (h.info("requesting adTagUrl: " + e), l.get(e, n, {
                            withCredentials: !0
                        }))
                    } catch (i) {
                        t(i)
                    }
                }, i.prototype._buildVASTResponse = function(e) {
                    function t(e, t) {
                        t.forEach(function(t) {
                            e.addAd(t)
                        })
                    }

                    function n(e) {
                        var t = e.trackingEvents.progress;
                        if (!e.hasLinear()) throw new a("on VASTClient._buildVASTResponse, Received an Ad type that is not supported", 200);
                        if (void 0 === e.duration) throw new a("on VASTClient._buildVASTResponse, Missing duration field in VAST response", 101);
                        t && t.forEach(function(e) {
                            if (!c.isNumber(e.offset)) throw new a("on VASTClient._buildVASTResponse, missing or wrong offset attribute on progress tracking event", 101)
                        })
                    }
                    var i = new s;
                    return t(i, e), n(i), i
                }, i.prototype._trackError = function(e, t) {
                    function n(e) {
                        e.wrapper && e.wrapper.error && i.push(e.wrapper.error), e.inLine && e.inLine.error && i.push(e.inLine.error)
                    }
                    if (c.isArray(t) && 0 !== t.length) {
                        var i = [];
                        t.forEach(n), o.track(i, {
                            ERRORCODE: e.code || 900
                        })
                    }
                }, t.exports = i
            }, {
                "../../utils/async": 40,
                "../../utils/consoleLogger": 41,
                "../../utils/http": 43,
                "../../utils/utilityFunctions": 47,
                "../../utils/xml": 48,
                "./Ad": 15,
                "./VASTError": 23,
                "./VASTResponse": 25,
                "./vastUtil": 30
            }
        ],
        23: [
            function(e, t, n) {
                "use strict";

                function i(e, t) {
                    this.message = "VAST Error: " + (e || ""), t && (this.code = t)
                }
                i.prototype = new Error, i.prototype.name = "VAST Error", t.exports = i
            }, {}
        ],
        24: [
            function(e, t, n) {
                "use strict";

                function i(e) {
                    return this instanceof i ? void(this.player = e) : new i(e)
                }
                var r = e("./VASTResponse"),
                    a = e("./VASTError"),
                    s = e("./VASTTracker"),
                    o = e("./vastUtil"),
                    u = e("../../utils/async"),
                    l = e("../../utils/dom"),
                    c = e("../../utils/playerUtils"),
                    d = e("../../utils/utilityFunctions"),
                    h = e("../../utils/consoleLogger");
                i.prototype.playAd = function(e, t) {
                    var n = this;
                    return t = t || d.noop, e instanceof r ? (u.waterfall([
                        function(t) {
                            t(null, e)
                        },
                        this._selectAdSource.bind(this), this._createVASTTracker.bind(this), this._addClickThrough.bind(this), this._addSkipButton.bind(this), this._setupEvents.bind(this), this._playSelectedAd.bind(this)
                    ], function(e, i) {
                        e && i && n._trackError(e, i), t(e, i)
                    }), this._adUnit = {
                        _src: null,
                        type: "VAST",
                        pauseAd: function() {
                            n.player.pause(!0)
                        },
                        resumeAd: function() {
                            n.player.play(!0)
                        },
                        isPaused: function() {
                            return n.player.paused(!0)
                        },
                        getSrc: function() {
                            return this._src
                        }
                    }, this._adUnit) : t(new a("On VASTIntegrator, missing required VASTResponse"))
                }, i.prototype._selectAdSource = function(e, t) {
                    var n, i = l.getDimension(this.player.el()).width;
                    return e.mediaFiles.sort(function(e, t) {
                        var n = Math.abs(i - e.width),
                            r = Math.abs(i - t.width);
                        return n - r
                    }), (n = this.player.selectSource(e.mediaFiles).source) ? (h.info("selected source: ", n), this._adUnit && (this._adUnit._src = n), t(null, n, e)) : void t(new a("Could not find Ad mediafile supported by this player", 403), e)
                }, i.prototype._createVASTTracker = function(e, t, n) {
                    try {
                        n(null, e, new s(e.src, t), t)
                    } catch (i) {
                        n(i, t)
                    }
                }, i.prototype._setupEvents = function(e, t, n, i) {
                    function r() {
                        h.off("fullscreenchange", a), h.off("vast.adStart", u), h.off("pause", s), h.off("timeupdate", o), h.off("volumechange", l)
                    }

                    function a() {
                        h.isFullscreen() ? t.trackFullscreen() : t.trackExitFullscreen()
                    }

                    function s() {
                        Math.abs(h.duration() - h.currentTime()) < 2 || (t.trackPause(), c.once(h, ["play", "vast.adEnd", "vast.adsCancel"], function(e) {
                            "play" === e.type && t.trackResume()
                        }))
                    }

                    function o() {
                        var e = 1e3 * h.currentTime();
                        t.trackProgress(e)
                    }

                    function u() {
                        t.trackImpressions(), t.trackCreativeView()
                    }

                    function l() {
                        var e = h.muted();
                        e ? t.trackMute() : d && t.trackUnmute(), d = e
                    }
                    var d, h = this.player;
                    return h.on("fullscreenchange", a), h.on("vast.adStart", u), h.on("pause", s), h.on("timeupdate", o), h.on("volumechange", l), c.once(h, ["vast.adEnd", "vast.adsCancel"], r), c.once(h, ["vast.adEnd", "vast.adsCancel", "vast.adSkip"], function(e) {
                        "vast.adEnd" === e.type && t.trackComplete()
                    }), i(null, e, n)
                }, i.prototype._addSkipButton = function(e, t, n, i) {
                    function r(e, t) {
                        function n() {
                            e.off("timeupdate", r), l.remove(i)
                        }
                        var i = a(e),
                            r = s.bind(u, i, t, e);
                        e.el().appendChild(i), e.on("timeupdate", r), c.once(e, ["vast.adEnd", "vast.adsCancel"], n)
                    }

                    function a(e) {
                        var n = window.document.createElement("div");
                        return l.addClass(n, "vast-skip-button"), n.onclick = function(i) {
                            return l.hasClass(n, "enabled") ? (t.trackSkip(), e.trigger("vast.adSkip")) : window.open("https://ani.gamer.com.tw/animePay.php"), void 0 === window.Event.prototype.stopPropagation ? !1 : void i.stopPropagation()
                        }, n
                    }

                    function s(e, t, n) {
                        var i = Math.ceil(t - n.currentTime());
                        i > 0 ? e.innerHTML = "廣告 " + d.toFixedDigits(i, 2) + " 秒，如何消除廣告 ？" : l.hasClass(e, "enabled") || (l.addClass(e, "enabled"), e.innerHTML = "點此跳過廣告")
                    }
                    var o, u = this;
                    d.isNumber(n.skipoffset) && (o = n.skipoffset / 1e3, r(this.player, o)), i(null, e, t, n)
                }, i.prototype._addClickThrough = function(e, t, n, i) {
                    function r(e, t, n) {
                        var i = window.document.createElement("a"),
                            r = n.clickThrough;
                        return l.addClass(i, "vast-blocker"), i.href = s(r, e), d.isString(r) && (i.target = "_blank"), i.onclick = function(n) {
                            return e.paused() ? (e.play(), void 0 !== window.Event.prototype.stopPropagation && n.stopPropagation(), !1) : (e.pause(), void t.trackClick())
                        }, i
                    }

                    function a(e, t, n) {
                        e.href = s(t.clickThrough, n)
                    }

                    function s(t, n) {
                        var i = {
                            ASSETURI: e.src,
                            CONTENTPLAYHEAD: o.formatProgress(1e3 * n.currentTime())
                        };
                        return t ? o.parseURLMacro(t, i) : "#"
                    }

                    function u() {
                        h.off("timeupdate", f), l.remove(p)
                    }
                    var h = this.player,
                        p = r(h, t, n),
                        f = a.bind(this, p, n, h);
                    return h.el().insertBefore(p, h.controlBar.el()), h.on("timeupdate", f), c.once(h, ["vast.adEnd", "vast.adsCancel"], u), i(null, e, t, n)
                }, i.prototype._playSelectedAd = function(e, t, n) {
                    function i() {
                        c.once(r, ["playing", "vast.adsCancel"], function(e) {
                            function i(e) {
                                "ended" === e.type && r.duration() - r.currentTime() > 3 || (r.off("ended", i), r.off("vast.adsCancel", i), r.off("vast.adSkip", i), ("ended" === e.type || "vast.adSkip" === e.type) && n(null, t))
                            }
                            "vast.adsCancel" !== e.type && (h.debug("<VASTIntegrator._playSelectedAd/playAd> got playing event; triggering vast.adStart..."), r.trigger("vast.adStart"), r.on("ended", i), r.on("vast.adsCancel", i), r.on("vast.adSkip", i))
                        }), h.debug("<VASTIntegrator._playSelectedAd/playAd> calling player.play()..."), r.play()
                    }
                    var r = this.player;
                    r.preload("auto"), r.src(e), r.play(), h.debug("<VASTIntegrator._playSelectedAd> waiting for durationchange to play the ad..."), c.once(r, ["durationchange", "error", "vast.adsCancel"], function(e) {
                        "durationchange" === e.type ? (h.debug("<VASTIntegrator._playSelectedAd> got durationchange; calling playAd()"), i()) : "error" === e.type && n(new a("on VASTIntegrator, Player is unable to play the Ad", 400), t)
                    })
                }, i.prototype._trackError = function(e, t) {
                    o.track(t.errorURLMacros, {
                        ERRORCODE: e.code || 900
                    })
                }, t.exports = i
            }, {
                "../../utils/async": 40,
                "../../utils/consoleLogger": 41,
                "../../utils/dom": 42,
                "../../utils/playerUtils": 45,
                "../../utils/utilityFunctions": 47,
                "./VASTError": 23,
                "./VASTResponse": 25,
                "./VASTTracker": 26,
                "./vastUtil": 30
            }
        ],
        25: [
            function(e, t, n) {
                "use strict";

                function i() {
                    return this instanceof i ? (this._linearAdded = !1, this.ads = [], this.errorURLMacros = [], this.impressions = [], this.clickTrackings = [], this.customClicks = [], this.trackingEvents = {}, this.mediaFiles = [], this.clickThrough = void 0, this.adTitle = "", this.duration = void 0, void(this.skipoffset = void 0)) : new i
                }

                function r(e, t) {
                    t.forEach(function(t) {
                        e.push(t)
                    })
                }
                var a = e("./Ad"),
                    s = e("./VideoClicks"),
                    o = e("./Linear"),
                    u = e("./InLine"),
                    l = e("./Wrapper"),
                    c = e("../../utils/utilityFunctions"),
                    d = e("../../utils/xml");
                window.InLine__A = u, i.prototype.addAd = function(e) {
                    var t, n;
                    e instanceof a && (t = e.inLine, n = e.wrapper, this.ads.push(e), t && this._addInLine(t), n && this._addWrapper(n))
                }, i.prototype._addErrorTrackUrl = function(e) {
                    var t = e instanceof d.JXONTree ? d.keyValue(e) : e;
                    t && this.errorURLMacros.push(t)
                }, i.prototype._addImpressions = function(e) {
                    c.isArray(e) && r(this.impressions, e)
                }, i.prototype._addClickThrough = function(e) {
                    c.isNotEmptyString(e) && (this.clickThrough = e)
                }, i.prototype._addClickTrackings = function(e) {
                    c.isArray(e) && r(this.clickTrackings, e)
                }, i.prototype._addCustomClicks = function(e) {
                    c.isArray(e) && r(this.customClicks, e)
                }, i.prototype._addTrackingEvents = function(e) {
                    var t = this.trackingEvents;
                    e && (e = c.isArray(e) ? e : [e], e.forEach(function(e) {
                        t[e.name] || (t[e.name] = []), t[e.name].push(e)
                    }))
                }, i.prototype._addTitle = function(e) {
                    c.isNotEmptyString(e) && (this.adTitle = e)
                }, i.prototype._addDuration = function(e) {
                    c.isNumber(e) && (this.duration = e)
                }, i.prototype._addVideoClicks = function(e) {
                    e instanceof s && (this._addClickThrough(e.clickThrough), this._addClickTrackings(e.clickTrackings), this._addCustomClicks(e.customClicks))
                }, i.prototype._addMediaFiles = function(e) {
                    c.isArray(e) && r(this.mediaFiles, e)
                }, i.prototype._addSkipoffset = function(e) {
                    e && (this.skipoffset = e)
                }, i.prototype._addAdParameters = function(e) {
                    e && (this.adParameters = e)
                }, i.prototype._addLinear = function(e) {
                    e instanceof o && (this._addDuration(e.duration), this._addTrackingEvents(e.trackingEvents), this._addVideoClicks(e.videoClicks), this._addMediaFiles(e.mediaFiles), this._addSkipoffset(e.skipoffset), this._addAdParameters(e.adParameters), this._linearAdded = !0)
                }, i.prototype._addInLine = function(e) {
                    var t = this;
                    e instanceof u && (this._addTitle(e.adTitle), this._addErrorTrackUrl(e.error), this._addImpressions(e.impressions), e.creatives.forEach(function(e) {
                        e.linear && t._addLinear(e.linear)
                    }))
                }, i.prototype._addWrapper = function(e) {
                    var t = this;
                    e instanceof l && (this._addErrorTrackUrl(e.error), this._addImpressions(e.impressions), e.creatives.forEach(function(e) {
                        var n = e.linear;
                        n && (t._addVideoClicks(n.videoClicks), t.clickThrough = void 0, t._addTrackingEvents(n.trackingEvents))
                    }))
                }, i.prototype.hasLinear = function() {
                    return this._linearAdded
                }, t.exports = i
            }, {
                "../../utils/utilityFunctions": 47,
                "../../utils/xml": 48,
                "./Ad": 15,
                "./InLine": 18,
                "./Linear": 19,
                "./VideoClicks": 27,
                "./Wrapper": 28
            }
        ],
        26: [
            function(e, t, n) {
                "use strict";

                function i(e, t) {
                    return this instanceof i ? (this.sanityCheck(e, t), void this.initialize(e, t)) : new i(e, t)
                }
                var r = e("./VASTError"),
                    a = e("./VASTResponse"),
                    s = e("./vastUtil"),
                    o = e("../../utils/utilityFunctions");
                i.prototype.initialize = function(e, t) {
                    this.response = t, this.assetURI = e, this.progress = 0, this.quartiles = {
                        firstQuartile: {
                            tracked: !1,
                            time: Math.round(25 * t.duration) / 100
                        },
                        midpoint: {
                            tracked: !1,
                            time: Math.round(50 * t.duration) / 100
                        },
                        thirdQuartile: {
                            tracked: !1,
                            time: Math.round(75 * t.duration) / 100
                        }
                    }
                }, i.prototype.sanityCheck = function(e, t) {
                    if (!o.isString(e) || o.isEmptyString(e)) throw new r("on VASTTracker constructor, missing required the URI of the ad asset being played");
                    if (!(t instanceof a)) throw new r("on VASTTracker constructor, missing required VAST response")
                }, i.prototype.trackURLs = function(e, t) {
                    o.isArray(e) && e.length > 0 && (t = o.extend({
                        ASSETURI: this.assetURI,
                        CONTENTPLAYHEAD: s.formatProgress(this.progress)
                    }, t || {}), s.track(e, t))
                }, i.prototype.trackEvent = function(e, t) {
                    function n(e) {
                        var t;
                        return e && (t = [], e.forEach(function(e) {
                            t.push(e.uri)
                        })), t
                    }
                    this.trackURLs(n(this.response.trackingEvents[e])), t && (this.response.trackingEvents[e] = void 0)
                }, i.prototype.trackProgress = function(e) {
                    function t(t, n) {
                        var i = 3e3;
                        return t > e && Math.abs(n - t) > i
                    }

                    function n(e, t, n) {
                        h[e] && n && l.push({
                            name: e,
                            trackOnce: !!t
                        })
                    }

                    function i(e) {
                        function t(e, t) {
                            var a = i[e];
                            r(a, t) && (a.tracked = !0, n(e, c, !0))
                        }
                        var i = u.quartiles,
                            a = u.quartiles.firstQuartile,
                            s = u.quartiles.midpoint,
                            o = u.quartiles.thirdQuartile;
                        a.tracked ? s.tracked ? o.tracked || t("thirdQuartile", e) : t("midpoint", e) : t("firstQuartile", e)
                    }

                    function r(e, t) {
                        var n = e.time;
                        return t >= n && n + 5e3 >= t
                    }

                    function a(e) {
                        if (o.isArray(h.progress)) {
                            var t = [];
                            h.progress.forEach(function(n) {
                                n.offset <= e ? u.trackURLs([n.uri]) : t.push(n)
                            }), h.progress = t
                        }
                    }

                    function s() {
                        l.forEach(function(e) {
                            u.trackEvent(e.name, e.trackOnce)
                        })
                    }
                    var u = this,
                        l = [],
                        c = !0,
                        d = !1,
                        h = this.response.trackingEvents;
                    o.isNumber(e) && (n("start", c, e > 0), n("rewind", d, t(this.progress, e)), i(e), a(e), s(), this.progress = e)
                }, ["rewind", "fullscreen", "exitFullscreen", "pause", "resume", "mute", "unmute", "acceptInvitation", "acceptInvitationLinear", "collapse", "expand"].forEach(function(e) {
                    i.prototype["track" + o.capitalize(e)] = function() {
                        this.trackEvent(e)
                    }
                }), ["start", "skip", "close", "closeLinear"].forEach(function(e) {
                    i.prototype["track" + o.capitalize(e)] = function() {
                        this.trackEvent(e, !0)
                    }
                }), ["firstQuartile", "midpoint", "thirdQuartile"].forEach(function(e) {
                    i.prototype["track" + o.capitalize(e)] = function() {
                        this.quartiles[e].tracked = !0, this.trackEvent(e, !0)
                    }
                }), i.prototype.trackComplete = function() {
                    this.quartiles.thirdQuartile.tracked && this.trackEvent("complete", !0)
                }, i.prototype.trackErrorWithCode = function(e) {
                    o.isNumber(e) && this.trackURLs(this.response.errorURLMacros, {
                        ERRORCODE: e
                    })
                }, i.prototype.trackImpressions = function() {
                    this.trackURLs(this.response.impressions)
                }, i.prototype.trackCreativeView = function() {
                    this.trackEvent("creativeView")
                }, i.prototype.trackClick = function() {
                    this.trackURLs(this.response.clickTrackings)
                }, t.exports = i
            }, {
                "../../utils/utilityFunctions": 47,
                "./VASTError": 23,
                "./VASTResponse": 25,
                "./vastUtil": 30
            }
        ],
        27: [
            function(e, t, n) {
                "use strict";

                function i(e) {
                    function t(e) {
                        var t = [];
                        return e && (e = r.isArray(e) ? e : [e], e.forEach(function(e) {
                            t.push(a.keyValue(e))
                        })), t
                    }
                    return this instanceof i ? (this.clickThrough = a.keyValue(e.clickThrough), this.clickTrackings = t(e.clickTracking), void(this.customClicks = t(e.customClick))) : new i(e)
                }
                var r = e("../../utils/utilityFunctions"),
                    a = e("../../utils/xml");
                t.exports = i
            }, {
                "../../utils/utilityFunctions": 47,
                "../../utils/xml": 48
            }
        ],
        28: [
            function(e, t, n) {
                "use strict";

                function i(e) {
                    return this instanceof i ? (this.adSystem = o.keyValue(e.adSystem), this.impressions = r.parseImpressions(e.impression), this.VASTAdTagURI = o.keyValue(e.vASTAdTagURI), this.creatives = a.parseCreatives(e.creatives), this.error = o.keyValue(e.error), this.extensions = e.extensions, this.followAdditionalWrappers = s.isDefined(o.attr(e, "followAdditionalWrappers")) ? o.attr(e, "followAdditionalWrappers") : !0, this.allowMultipleAds = o.attr(e, "allowMultipleAds"), void(this.fallbackOnNoAd = o.attr(e, "fallbackOnNoAd"))) : new i(e)
                }
                var r = e("./vastUtil"),
                    a = e("./Creative"),
                    s = e("../../utils/utilityFunctions"),
                    o = e("../../utils/xml");
                t.exports = i
            }, {
                "../../utils/utilityFunctions": 47,
                "../../utils/xml": 48,
                "./Creative": 17,
                "./vastUtil": 30
            }
        ],
        29: [
            function(e, t, n) {
                "use strict";
                var i = e("../../utils/utilityFunctions"),
                    r = /(\d\d):(\d\d):(\d\d)(\.(\d\d\d))?/,
                    a = {
                        duration: function(e) {
                            function t(e) {
                                return 60 * parseInt(e, 10) * 60 * 1e3
                            }

                            function n(e) {
                                return 60 * parseInt(e, 10) * 1e3
                            }

                            function a(e) {
                                return 1e3 * parseInt(e, 10)
                            }
                            var s, o;
                            return i.isString(e) && (s = e.match(r), s && (o = t(s[1]) + n(s[2]) + a(s[3]) + parseInt(s[5] || 0))), isNaN(o) ? null : o
                        },
                        offset: function(e, t) {
                            function n(e) {
                                var t = /^\d+(\.\d+)?%$/g;
                                return t.test(e)
                            }

                            function i(e, t) {
                                return t ? r(t, parseFloat(e.replace("%", ""))) : null
                            }

                            function r(e, t) {
                                return e * t / 100
                            }
                            return n(e) ? i(e, t) : a.duration(e)
                        }
                    };
                t.exports = a
            }, {
                "../../utils/utilityFunctions": 47
            }
        ],
        30: [
            function(e, t, n) {
                "use strict";
                var i = e("../../utils/utilityFunctions"),
                    r = e("../vpaid/VPAIDHTML5Tech"),
                    a = e("../vpaid/VPAIDFlashTech"),
                    s = e("VPAIDFLASHClient/js/VPAIDFLASHClient"),
                    o = {
                        track: function(e, t) {
                            var n = o.parseURLMacros(e, t),
                                i = [];
                            return n.forEach(function(e) {
                                var t = new Image;
                                t.src = e, i.push(t)
                            }), i
                        },
                        parseURLMacros: function(e, t) {
                            var n = [];
                            return t = t || {}, t.CACHEBUSTING || (t.CACHEBUSTING = Math.round(1e10 * Math.random())), e.forEach(function(e) {
                                n.push(o._parseURLMacro(e, t))
                            }), n
                        },
                        parseURLMacro: function(e, t) {
                            return t = t || {}, t.CACHEBUSTING || (t.CACHEBUSTING = Math.round(1e10 * Math.random())), o._parseURLMacro(e, t)
                        },
                        _parseURLMacro: function(e, t) {
                            return t = t || {}, i.forEach(t, function(t, n) {
                                e = e.replace(new RegExp("\\[" + n + "\\]", "gm"), t)
                            }), e
                        },
                        parseDuration: function(e) {
                            function t(e) {
                                return 60 * parseInt(e, 10) * 60 * 1e3
                            }

                            function n(e) {
                                return 60 * parseInt(e, 10) * 1e3
                            }

                            function r(e) {
                                return 1e3 * parseInt(e, 10)
                            }
                            var a, s, o = /(\d\d):(\d\d):(\d\d)(\.(\d\d\d))?/;
                            return i.isString(e) && (a = e.match(o), a && (s = t(a[1]) + n(a[2]) + r(a[3]) + parseInt(a[5] || 0))), isNaN(s) ? null : s
                        },
                        parseImpressions: function(e) {
                            return e ? (e = i.isArray(e) ? e : [e], i.transformArray(e, function(e) {
                                return i.isNotEmptyString(e.keyValue) ? e.keyValue : void 0
                            })) : []
                        },
                        formatProgress: function(e) {
                            var t, n, r, a;
                            return t = e / 36e5, t = Math.floor(t), n = e / 6e4 % 60, n = Math.floor(n), r = e / 1e3 % 60, r = Math.floor(r), a = e % 1e3, i.toFixedDigits(t, 2) + ":" + i.toFixedDigits(n, 2) + ":" + i.toFixedDigits(r, 2) + "." + i.toFixedDigits(a, 3)
                        },
                        parseOffset: function(e, t) {
                            function n(e) {
                                var t = /^\d+(\.\d+)?%$/g;
                                return t.test(e)
                            }

                            function i(e, t) {
                                return t ? r(t, parseFloat(e.replace("%", ""))) : null
                            }

                            function r(e, t) {
                                return e * t / 100
                            }
                            return n(e) ? i(e, t) : o.parseDuration(e)
                        },
                        VPAID_techs: [a, r],
                        isVPAID: function(e) {
                            return !!e && "VPAID" === e.apiFramework
                        },
                        findSupportedVPAIDTech: function(e) {
                            var t, n, i;
                            for (t = 0, n = this.VPAID_techs.length; n > t; t += 1)
                                if (i = this.VPAID_techs[t], i.supports(e)) return i;
                            return null
                        },
                        isFlashSupported: function() {
                            return s.isSupported()
                        },
                        runFlashSupportCheck: function(e) {
                            s.runFlashTest({
                                data: e
                            })
                        }
                    };
                t.exports = o
            }, {
                "../../utils/utilityFunctions": 47,
                "../vpaid/VPAIDFlashTech": 32,
                "../vpaid/VPAIDHTML5Tech": 33,
                "VPAIDFLASHClient/js/VPAIDFLASHClient": 3
            }
        ],
        31: [
            function(e, t, n) {
                "use strict";

                function i(e, t) {
                    function n(e, t) {
                        if (!e || !i.checkVPAIDInterface(e)) throw new r("on VPAIDAdUnitWrapper, the passed VPAID adUnit does not fully implement the VPAID interface");
                        if (!a.isObject(t)) throw new r("on VPAIDAdUnitWrapper, expected options hash  but got '" + t + "'");
                        if (!("responseTimeout" in t && a.isNumber(t.responseTimeout))) throw new r("on VPAIDAdUnitWrapper, expected responseTimeout in options")
                    }
                    return this instanceof i ? (n(e, t), this.options = a.extend({}, t), void(this._adUnit = e)) : new i(e, t)
                }
                var r = e("../vast/VASTError"),
                    a = e("../../utils/utilityFunctions");
                i.checkVPAIDInterface = function(e) {
                    function t(e) {
                        return a.isFunction(e.subscribe) || a.isFunction(e.addEventListener) || a.isFunction(e.on)
                    }

                    function n(e) {
                        return a.isFunction(e.unsubscribe) || a.isFunction(e.removeEventListener) || a.isFunction(e.off)
                    }
                    for (var i = ["handshakeVersion", "initAd", "startAd", "stopAd", "resizeAd", "pauseAd", "expandAd", "collapseAd"], r = 0, s = i.length; s > r; r++)
                        if (!e || !a.isFunction(e[i[r]])) return !1;
                    return t(e) && n(e)
                }, i.prototype.adUnitAsyncCall = function() {
                    function e(e, t, n) {
                        if (!a.isString(e) || !a.isFunction(n[e])) throw new r("on VPAIDAdUnitWrapper.adUnitAsyncCall, invalid method name");
                        if (!a.isFunction(t)) throw new r("on VPAIDAdUnitWrapper.adUnitAsyncCall, missing callback")
                    }

                    function t() {
                        return function() {
                            n && clearTimeout(n), o.apply(this, arguments)
                        }
                    }
                    var n, i = a.arrayLikeObjToArray(arguments),
                        s = i.shift(),
                        o = i.pop();
                    e(s, o, this._adUnit), i.push(t()), this._adUnit[s].apply(this._adUnit, i), n = setTimeout(function() {
                        n = null, o(new r("on VPAIDAdUnitWrapper, timeout while waiting for a response on call '" + s + "'")), o = a.noop
                    }, this.options.responseTimeout)
                }, i.prototype.on = function(e, t) {
                    var n = this._adUnit.addEventListener || this._adUnit.subscribe || this._adUnit.on;
                    n.call(this._adUnit, e, t)
                }, i.prototype.off = function(e, t) {
                    var n = this._adUnit.removeEventListener || this._adUnit.unsubscribe || this._adUnit.off;
                    n.call(this._adUnit, e, t)
                }, i.prototype.waitForEvent = function(e, t, n) {
                    function i(e, t) {
                        if (!a.isString(e)) throw new r("on VPAIDAdUnitWrapper.waitForEvent, missing evt name");
                        if (!a.isFunction(t)) throw new r("on VPAIDAdUnitWrapper.waitForEvent, missing callback")
                    }

                    function s() {
                        var e = a.arrayLikeObjToArray(arguments);
                        o && (clearTimeout(o), o = null), e.unshift(null), t.apply(n, e)
                    }
                    var o;
                    i(e, t), n = n || null, this.on(e, s), o = setTimeout(function() {
                        t(new r("on VPAIDAdUnitWrapper.waitForEvent, timeout while waiting for event '" + e + "'")), o = null, t = a.noop
                    }, this.options.responseTimeout)
                }, i.prototype.handshakeVersion = function(e, t) {
                    this.adUnitAsyncCall("handshakeVersion", e, t)
                }, i.prototype.initAd = function(e, t, n, i, r, a) {
                    this.waitForEvent("AdLoaded", a), this._adUnit.initAd(e, t, n, i, r)
                }, i.prototype.resizeAd = function(e, t, n, i) {
                    this.adUnitAsyncCall("resizeAd", e, t, n, i)
                }, i.prototype.startAd = function(e) {
                    this.waitForEvent("AdStarted", e), this._adUnit.startAd()
                }, i.prototype.stopAd = function(e) {
                    this.waitForEvent("AdStopped", e), this._adUnit.stopAd()
                }, i.prototype.pauseAd = function(e) {
                    this.waitForEvent("AdPaused", e), this._adUnit.pauseAd()
                }, i.prototype.resumeAd = function(e) {
                    this.waitForEvent("AdPlaying", e), this._adUnit.resumeAd()
                }, i.prototype.expandAd = function(e) {
                    this.waitForEvent("AdExpandedChange", e), this._adUnit.expandAd()
                }, i.prototype.collapseAd = function(e) {
                    this.waitForEvent("AdExpandedChange", e), this._adUnit.collapseAd()
                }, i.prototype.skipAd = function(e) {
                    this.waitForEvent("AdSkipped", e), this._adUnit.skipAd()
                }, ["adLinear", "adWidth", "adHeight", "adExpanded", "adSkippableState", "adRemainingTime", "adDuration", "adVolume", "adCompanions", "adIcons"].forEach(function(e) {
                    var t = "get" + a.capitalize(e);
                    i.prototype[t] = function(e) {
                        this.adUnitAsyncCall(t, e)
                    }
                }), i.prototype.setAdVolume = function(e, t) {
                    this.adUnitAsyncCall("setAdVolume", e, t)
                }, t.exports = i
            }, {
                "../../utils/utilityFunctions": 47,
                "../vast/VASTError": 23
            }
        ],
        32: [
            function(e, t, n) {
                "use strict";

                function i(e, t) {
                    function n(e) {
                        if (!e || !o.isString(e.src)) throw new a("on VPAIDFlashTech, invalid MediaFile")
                    }
                    return this instanceof i ? (n(e), this.name = "vpaid-flash", this.mediaFile = e, this.containerEl = null, this.vpaidFlashClient = null, void(this.settings = t)) : new i(e)
                }
                var r = e("../../utils/mimetypes"),
                    a = e("../vast/VASTError"),
                    s = e("VPAIDFLASHClient/js/VPAIDFLASHClient"),
                    o = e("../../utils/utilityFunctions"),
                    u = e("../../utils/dom"),
                    l = e("../../utils/consoleLogger");
                i.VPAIDFLASHClient = s, i.supports = function(e) {
                    return r.flash.indexOf(e) > -1 && i.VPAIDFLASHClient.isSupported()
                }, i.prototype.loadAdUnit = function(e, t, n) {
                    function r(e, t) {
                        if (!u.isDomElement(e)) throw new a("on VPAIDFlashTech.loadAdUnit, invalid dom container element");
                        if (!o.isFunction(t)) throw new a("on VPAIDFlashTech.loadAdUnit, missing valid callback")
                    }
                    var s = this,
                        c = this.settings && this.settings.vpaidFlashLoaderPath ? {
                            data: this.settings.vpaidFlashLoaderPath
                        } : void 0;
                    r(e, n), this.containerEl = e, l.debug("<VPAIDFlashTech.loadAdUnit> loading VPAIDFLASHClient with opts:", c), this.vpaidFlashClient = new i.VPAIDFLASHClient(e, function(e) {
                        return e ? n(e) : (l.info("<VPAIDFlashTech.loadAdUnit> calling VPAIDFLASHClient.loadAdUnit(); that.mediaFile:", s.mediaFile), void s.vpaidFlashClient.loadAdUnit(s.mediaFile.src, n))
                    }, c)
                }, i.prototype.unloadAdUnit = function() {
                    if (this.vpaidFlashClient) {
                        try {
                            this.vpaidFlashClient.destroy()
                        } catch (e) {
                            l.error("VAST ERROR: trying to unload the VPAID adunit")
                        }
                        this.vpaidFlashClient = null
                    }
                    this.containerEl && (u.remove(this.containerEl), this.containerEl = null)
                }, t.exports = i
            }, {
                "../../utils/consoleLogger": 41,
                "../../utils/dom": 42,
                "../../utils/mimetypes": 44,
                "../../utils/utilityFunctions": 47,
                "../vast/VASTError": 23,
                "VPAIDFLASHClient/js/VPAIDFLASHClient": 3
            }
        ],
        33: [
            function(e, t, n) {
                "use strict";

                function i(e) {
                    function t(e) {
                        if (!e || !o.isString(e.src)) throw new a(i.INVALID_MEDIA_FILE)
                    }
                    return this instanceof i ? (t(e), this.name = "vpaid-html5", this.containerEl = null, this.videoEl = null, this.vpaidHTMLClient = null, void(this.mediaFile = e)) : new i(e)
                }
                var r = e("../../utils/mimetypes"),
                    a = e("../vast/VASTError"),
                    s = e("VPAIDHTML5Client/js/VPAIDHTML5Client"),
                    o = e("../../utils/utilityFunctions"),
                    u = e("../../utils/dom"),
                    l = e("../../utils/consoleLogger");
                i.VPAIDHTML5Client = s, i.supports = function(e) {
                    return !o.isOldIE() && r.html5.indexOf(e) > -1
                }, i.prototype.loadAdUnit = function(e, t, n) {
                    function r(e, t, n) {
                        if (!u.isDomElement(e)) throw new a(i.INVALID_DOM_CONTAINER_EL);
                        if (!u.isDomElement(t) || "video" !== t.tagName.toLowerCase()) throw new a(i.INVALID_DOM_CONTAINER_EL);
                        if (!o.isFunction(n)) throw new a(i.MISSING_CALLBACK)
                    }
                    r(e, t, n), this.containerEl = e, this.videoEl = t, this.vpaidHTMLClient = new i.VPAIDHTML5Client(e, t, {}), this.vpaidHTMLClient.loadAdUnit(this.mediaFile.src, n)
                }, i.prototype.unloadAdUnit = function() {
                    if (this.vpaidHTMLClient) {
                        try {
                            this.vpaidHTMLClient.destroy()
                        } catch (e) {
                            l.error("VAST ERROR: trying to unload the VPAID adunit")
                        }
                        this.vpaidHTMLClient = null
                    }
                    this.containerEl && (u.remove(this.containerEl), this.containerEl = null)
                };
                var c = "on VPAIDHTML5Tech";
                i.INVALID_MEDIA_FILE = c + ", invalid MediaFile", i.INVALID_DOM_CONTAINER_EL = c + ", invalid container HtmlElement", i.INVALID_DOM_VIDEO_EL = c + ", invalid HTMLVideoElement", i.MISSING_CALLBACK = c + ", missing valid callback", t.exports = i
            }, {
                "../../utils/consoleLogger": 41,
                "../../utils/dom": 42,
                "../../utils/mimetypes": 44,
                "../../utils/utilityFunctions": 47,
                "../vast/VASTError": 23,
                "VPAIDHTML5Client/js/VPAIDHTML5Client": 11
            }
        ],
        34: [
            function(e, t, n) {
                "use strict";

                function i(e, t) {
                    function n() {
                        var t = document.createElement("div");
                        return p.addClass(t, "VPAID-container"), e.el().insertBefore(t, e.controlBar.el()), t
                    }
                    return this instanceof i ? (this.VIEW_MODE = {
                        NORMAL: "normal",
                        FULLSCREEN: "fullscreen",
                        THUMBNAIL: "thumbnail"
                    }, this.player = e, this.containerEl = n(e), this.options = {
                        responseTimeout: 5e3,
                        VPAID_VERSION: "2.0"
                    }, void(this.settings = t)) : new i(e)
                }

                function r(e, t, n) {
                    var i = e.el().querySelector(".vjs-tech"),
                        r = p.getDimension(i),
                        s = e.isFullscreen() ? n.FULLSCREEN : n.NORMAL;
                    t.resizeAd(r.width, r.height, s, a)
                }

                function a(e) {
                    e && g.error("ERROR: " + e.message, e)
                }
                var s = e("../../utils/mimetypes"),
                    o = e("../vast/VASTError"),
                    u = e("../vast/VASTResponse"),
                    l = e("../vast/VASTTracker"),
                    c = e("../vast/vastUtil"),
                    d = e("./VPAIDAdUnitWrapper"),
                    h = e("../../utils/async"),
                    p = e("../../utils/dom"),
                    f = e("../../utils/playerUtils"),
                    m = e("../../utils/utilityFunctions"),
                    g = e("../../utils/consoleLogger");
                i.prototype.playAd = function(e, t) {
                    function n(e, n, i) {
                        e && i && a._trackError(i, e.code), s.trigger("vpaid.adEnd"), t(e, i)
                    }

                    function i() {
                        s.trigger("vpaid.adEnd")
                    }

                    function r() {
                        l && l.unloadAdUnit(), p.removeClass(s.el(), "vjs-vpaid-ad")
                    }
                    if (!(e instanceof u)) return t(new o("on VASTIntegrator.playAd, missing required VASTResponse"));
                    var a = this,
                        s = this.player;
                    g.debug("<VPAIDIntegrator.playAd> looking for supported tech...");
                    var l = this._findSupportedTech(e, this.settings);
                    if (t = t || m.noop, this._adUnit = null, p.addClass(s.el(), "vjs-vpaid-ad"), s.on("vast.adsCancel", i), s.one("vpaid.adEnd", function() {
                        s.off("vast.adsCancel", i), r()
                    }), l) g.info("<VPAIDIntegrator.playAd> found tech: ", l), h.waterfall([
                        function(t) {
                            t(null, l, e)
                        },
                        this._loadAdUnit.bind(this), this._playAdUnit.bind(this), this._finishPlaying.bind(this)
                    ], n), this._adUnit = {
                        _paused: !0,
                        type: "VPAID",
                        pauseAd: function() {
                            s.trigger("vpaid.pauseAd"), s.pause(!0)
                        },
                        resumeAd: function() {
                            s.trigger("vpaid.resumeAd")
                        },
                        isPaused: function() {
                            return this._paused
                        },
                        getSrc: function() {
                            return l.mediaFile
                        }
                    };
                    else {
                        g.debug("<VPAIDIntegrator.playAd> could not find suitable tech");
                        var c = new o("on VPAIDIntegrator.playAd, could not find a supported mediaFile", 403);
                        n(c, this._adUnit, e)
                    }
                    return this._adUnit
                }, i.prototype._findSupportedTech = function(e, t) {
                    if (!(e instanceof u)) return null;
                    var n, i, r, a, o, l = e.mediaFiles.filter(c.isVPAID),
                        d = t && t.preferredTech,
                        h = [];
                    for (n = 0, i = l.length; i > n; n += 1)
                        if (r = l[n], a = c.findSupportedVPAIDTech(r.type)) {
                            if (o = d ? r.type === d || s[d] && s[d].indexOf(r.type) > -1 : !1) return new a(r, t);
                            h.push({
                                mediaFile: r,
                                tech: a
                            })
                        }
                    if (h.length) {
                        var p = h[0];
                        return new p.tech(p.mediaFile, t)
                    }
                    return null
                }, i.prototype._createVPAIDAdUnitWrapper = function(e, t, n) {
                    return new d(e, {
                        src: t,
                        responseTimeout: n
                    })
                }, i.prototype._loadAdUnit = function(e, t, n) {
                    var i = this,
                        r = this.player,
                        a = r.el().querySelector(".vjs-tech"),
                        s = this.settings.responseTimeout || this.options.responseTimeout;
                    e.loadAdUnit(this.containerEl, a, function(a, o) {
                        if (a) return n(a, o, t);
                        try {
                            var u = i._createVPAIDAdUnitWrapper(o, e.mediaFile.src, s),
                                l = "vjs-" + e.name + "-ad";
                            p.addClass(r.el(), l), r.one("vpaid.adEnd", function() {
                                p.removeClass(r.el(), l)
                            }), n(null, u, t)
                        } catch (c) {
                            n(c, o, t)
                        }
                    })
                }, i.prototype._playAdUnit = function(e, t, n) {
                    h.waterfall([
                        function(n) {
                            n(null, e, t)
                        },
                        this._handshake.bind(this), this._initAd.bind(this), this._setupEvents.bind(this), this._addSkipButton.bind(this), this._linkPlayerControls.bind(this), this._startAd.bind(this)
                    ], n)
                }, i.prototype._handshake = function(e, t, n) {
                    function i(e) {
                        var t = r(e);
                        return t >= 1 && 2 >= t
                    }

                    function r(e) {
                        var t = e.split(".");
                        return parseInt(t[0], 10)
                    }
                    e.handshakeVersion(this.options.VPAID_VERSION, function(r, a) {
                        return r ? n(r, e, t) : a && i(a) ? n(null, e, t) : n(new o('on VPAIDIntegrator._handshake, unsupported version "' + a + '"'), e, t)
                    })
                }, i.prototype._initAd = function(e, t, n) {
                    var i = this.player.el().querySelector(".vjs-tech"),
                        r = p.getDimension(i);
                    e.initAd(r.width, r.height, this.VIEW_MODE.NORMAL, -1, {
                        AdParameters: t.adParameters || ""
                    }, function(i) {
                        n(i, e, t)
                    })
                }, i.prototype._createVASTTracker = function(e, t) {
                    return new l(e, t)
                }, i.prototype._setupEvents = function(e, t, n) {
                    function i() {
                        h._adUnit && h._adUnit.isPaused() && (h._adUnit._paused = !1), d.trigger("play")
                    }

                    function a() {
                        h._adUnit && (h._adUnit._paused = !0), d.trigger("pause")
                    }

                    function s() {
                        e.pauseAd(m.noop)
                    }

                    function o() {
                        e.resumeAd(m.noop)
                    }
                    var u = e.options.src,
                        l = this._createVASTTracker(u, t),
                        d = this.player,
                        h = this;
                    e.on("AdSkipped", function() {
                        d.trigger("vpaid.AdSkipped"), l.trackSkip()
                    }), e.on("AdImpression", function() {
                        d.trigger("vpaid.AdImpression"), l.trackImpressions()
                    }), e.on("AdStarted", function() {
                        d.trigger("vpaid.AdStarted"), l.trackCreativeView(), i()
                    }), e.on("AdVideoStart", function() {
                        d.trigger("vpaid.AdVideoStart"), l.trackStart(), i()
                    }), e.on("AdPlaying", function() {
                        d.trigger("vpaid.AdPlaying"), l.trackResume(), i()
                    }), e.on("AdPaused", function() {
                        d.trigger("vpaid.AdPaused"), l.trackPause(), a()
                    }), e.on("AdVideoFirstQuartile", function() {
                        d.trigger("vpaid.AdVideoFirstQuartile"), l.trackFirstQuartile()
                    }), e.on("AdVideoMidpoint", function() {
                        d.trigger("vpaid.AdVideoMidpoint"), l.trackMidpoint()
                    }), e.on("AdVideoThirdQuartile", function() {
                        d.trigger("vpaid.AdVideoThirdQuartile"), l.trackThirdQuartile()
                    }), e.on("AdVideoComplete", function() {
                        d.trigger("vpaid.AdVideoComplete"), l.trackComplete()
                    }), e.on("AdClickThru", function(n) {
                        function i(t) {
                            var n = {
                                ASSETURI: e.options.src,
                                CONTENTPLAYHEAD: 0
                            };
                            return t ? c.parseURLMacro(t, n) : null
                        }
                        d.trigger("vpaid.AdClickThru");
                        var r = n.url,
                            a = n.playerHandles,
                            s = m.isNotEmptyString(r) ? r : i(t.clickThrough);
                        l.trackClick(), a && s && window.open(s, "_blank")
                    }), e.on("AdUserAcceptInvitation", function() {
                        d.trigger("vpaid.AdUserAcceptInvitation"), l.trackAcceptInvitation(), l.trackAcceptInvitationLinear()
                    }), e.on("AdUserClose", function() {
                        d.trigger("vpaid.AdUserClose"), l.trackClose(), l.trackCloseLinear()
                    }), e.on("AdUserMinimize", function() {
                        d.trigger("vpaid.AdUserMinimize"), l.trackCollapse()
                    }), e.on("AdError", function() {
                        d.trigger("vpaid.AdError"), l.trackErrorWithCode(901)
                    }), e.on("AdVolumeChange", function() {
                        d.trigger("vpaid.AdVolumeChange");
                        var t = d.volume();
                        e.getAdVolume(function(e, n) {
                            t !== n && (0 === n && t > 0 && l.trackMute(), n > 0 && 0 === t && l.trackUnmute(), d.volume(n))
                        })
                    });
                    var f = r.bind(this, d, e, this.VIEW_MODE),
                        g = m.throttle(f, 100),
                        v = this.settings.autoResize;
                    v && (p.addEventListener(window, "resize", g), p.addEventListener(window, "orientationchange", g)), d.on("vast.resize", f), d.on("vpaid.pauseAd", s), d.on("vpaid.resumeAd", o), d.one("vpaid.adEnd", function() {
                        d.off("vast.resize", f), d.off("vpaid.pauseAd", s), d.off("vpaid.resumeAd", o), v && (p.removeEventListener(window, "resize", g), p.removeEventListener(window, "orientationchange", g))
                    }), n(null, e, t)
                }, i.prototype._addSkipButton = function(e, t, n) {
                    function i() {
                        u.trigger("vpaid.AdSkippableStateChange"), e.getAdSkippableState(function(e, t) {
                            t ? o || r(u) : a(u)
                        })
                    }

                    function r(e) {
                        o = s(e)
                    }

                    function a() {
                        p.remove(o), o = null
                    }

                    function s() {
                        var t = window.document.createElement("div");
                        return p.addClass(t, "vast-skip-button"), p.addClass(t, "enabled"), t.innerHTML = "Skip ad", t.onclick = function(t) {
                            return e.skipAd(m.noop), void 0 === window.Event.prototype.stopPropagation ? !1 : void t.stopPropagation()
                        }, t
                    }
                    var o, u = this.player;
                    e.on("AdSkippableStateChange", i), f.once(u, ["vast.adEnd", "vast.adsCancel"], a), n(null, e, t)
                }, i.prototype._linkPlayerControls = function(e, t, n) {
                    function i(e, t) {
                        function n() {
                            var n = e.muted() ? 0 : e.volume();
                            t.setAdVolume(n, a)
                        }

                        function i() {
                            e.trigger("vpaid.AdVolumeChange");
                            var n = e.volume();
                            t.getAdVolume(function(t, i) {
                                t ? a(t) : n !== i && e.volume(i)
                            })
                        }
                        e.on("volumechange", n), t.on("AdVolumeChange", i), e.one("vpaid.adEnd", function() {
                            e.off("volumechange", n)
                        })
                    }

                    function s(e, t, n) {
                        var i = r.bind(o, e, t, n);
                        e.on("fullscreenchange", i), e.one("vpaid.adEnd", function() {
                            e.off("fullscreenchange", i)
                        })
                    }
                    var o = this;
                    i(this.player, e), s(this.player, e, this.VIEW_MODE), n(null, e, t)
                }, i.prototype._startAd = function(e, t, n) {
                    var i = this.player;
                    e.startAd(function(r) {
                        r || i.trigger("vast.adStart"), n(r, e, t)
                    })
                }, i.prototype._finishPlaying = function(e, t, n) {
                    function i(i) {
                        n(i, e, t)
                    }
                    var r = this.player;
                    e.on("AdStopped", function() {
                        r.trigger("vpaid.AdStopped"), i(null)
                    }), e.on("AdError", function(e) {
                        var t = e ? e.message : "on VPAIDIntegrator, error while waiting for the adUnit to finish playing";
                        i(new o(t))
                    })
                }, i.prototype._trackError = function(e, t) {
                    c.track(e.errorURLMacros, {
                        ERRORCODE: t || 901
                    })
                }, t.exports = i
            }, {
                "../../utils/async": 40,
                "../../utils/consoleLogger": 41,
                "../../utils/dom": 42,
                "../../utils/mimetypes": 44,
                "../../utils/playerUtils": 45,
                "../../utils/utilityFunctions": 47,
                "../vast/VASTError": 23,
                "../vast/VASTResponse": 25,
                "../vast/VASTTracker": 26,
                "../vast/vastUtil": 30,
                "./VPAIDAdUnitWrapper": 31
            }
        ],
        35: [
            function(e, t, n) {
                "use strict";
                var i = e("../../utils/dom"),
                    r = document.createElement("div"),
                    a = function(e) {
                        return {
                            init: function(t, n) {
                                n.el = r, e.call(this, t, n), setTimeout(function() {
                                    var e = t.controlBar && (t.controlBar.getChild("timerControls") || t.controlBar.getChild("currentTimeDisplay"));
                                    e && t.controlBar.el().insertBefore(r, e.el()), i.removeClass(r, "vjs-label-hidden")
                                }, 0)
                            },
                            el: function() {
                                return r
                            }
                        }
                    };
                t.exports = a
            }, {
                "../../utils/dom": 42
            }
        ],
        36: [
            function(e, t, n) {
                "use strict";
                var i = videojs.getComponent("Component"),
                    r = e("./ads-label")(i);
                videojs.registerComponent("AdsLabel", videojs.extend(i, r))
            }, {
                "./ads-label": 35
            }
        ],
        37: [
            function(e, t, n) {
                "use strict";
                var i = document.createElement("div"),
                    r = function(e) {
                        return {
                            init: function(t, n) {
                                n.el = i, i.className = "vjs-black-poster", e.call(this, t, n);
                                var r = t.getChild("posterImage");
                                setTimeout(function() {
                                    r && t && t.el() && t.el().insertBefore(i, r.el())
                                }, 0)
                            },
                            el: function() {
                                return i
                            }
                        }
                    };
                t.exports = r
            }, {}
        ],
        38: [
            function(e, t, n) {
                "use strict";
                var i = videojs.getComponent("Component"),
                    r = e("./black-poster")(i);
                videojs.registerComponent("BlackPoster", videojs.extend(i, r))
            }, {
                "./black-poster": 37
            }
        ],
        39: [
            function(e, t, n) {
                "use strict";
                var i = e("../ads/vast/VASTClient"),
                    r = e("../ads/vast/VASTError"),
                    a = e("../ads/vast/vastUtil"),
                    s = e("../ads/vast/VASTIntegrator"),
                    o = e("../ads/vpaid/VPAIDIntegrator"),
                    u = e("../utils/async"),
                    l = e("../utils/dom"),
                    c = e("../utils/playerUtils"),
                    d = e("../utils/utilityFunctions"),
                    h = e("../utils/consoleLogger");
                t.exports = function(e) {
                    function t() {
                        function e() {
                            _.vast && _.vast.adUnit && (_.vast.adUnit = null)
                        }

                        function t() {
                            n(), y && (c.restorePlayerSnapshot(_, y), y = null)
                        }

                        function n() {
                            c.once(_, ["playing", "vast.reset", "vast.firstPlay"], function(e) {
                                "playing" === e.type && (_.trigger("vast.contentStart"), c.once(_, ["ended", "vast.reset", "vast.firstPlay"], function(e) {
                                    "ended" === e.type && _.trigger("vast.contentEnd")
                                }))
                            })
                        }

                        function i(e) {
                            return k.adsEnabled ? e(null) : void e(new r("Ads are not enabled"))
                        }

                        function a(e) {
                            s() ? (y = c.getPlayerSnapshot(_), _.pause(), h(), _.paused() ? e(null) : c.once(_, ["playing"], function() {
                                _.pause(), e(null)
                            })) : e(new r("video content has been playing before preroll ad"))
                        }

                        function s() {
                            return !d.isIPhone() || _.currentTime() <= k.iosPrerollCancelTimeout
                        }

                        function o(e) {
                            function t() {
                                n && (clearTimeout(n), n = null)
                            }
                            var n;
                            T = !1;
                            var i = (new Date).getTime();
                            n = setTimeout(function() {
                                var e = (new Date).getTime();
                                console.log("timeout: " + (e - i) / 1e3 + "sec"), g(new r("timeout while waiting for the video to start playing", 402))
                            }, k.adCancelTimeout), c.once(_, ["vast.adStart", "vast.adsCancel"], t), e(null)
                        }

                        function h() {
                            l.addClass(_.el(), "vjs-vast-ad-loading"), c.once(_, ["vast.adStart", "vast.adsCancel"], f)
                        }

                        function f() {
                            setTimeout(function() {
                                l.removeClass(_.el(), "vjs-vast-ad-loading")
                            }, 100)
                        }
                        c.removeNativePoster(_), c.once(_, ["vast.adsCancel", "vast.adEnd"], function() {
                            e(), t()
                        }), u.waterfall([i, a, o, p], function(e, t) {
                            e ? g(e, t) : _.trigger("vast.adEnd")
                        })
                    }

                    function n() {
                        _.trigger("vast.adsCancel"), T = !0
                    }

                    function p(e) {
                        u.waterfall([f, m], e)
                    }

                    function f(e) {
                        b.getVASTResponse(k.adTagUrl ? k.adTagUrl() : k.adTagXML, e)
                    }

                    function m(e, t) {
                        function n() {
                            u || _.controlBar.getChild("AdsLabel") || _.controlBar.addChild("AdsLabel")
                        }

                        function i() {
                            _.controlBar.removeChild("AdsLabel"), u = !0
                        }

                        function r() {
                            function e() {
                                _.duration() - r > i && (_.pause(!0), _.play(!0), _.currentTime(r))
                            }

                            function t() {
                                var e = _.currentTime(),
                                    t = Math.abs(e - r);
                                t > i ? (a += 1, a >= 2 && _.pause(!0), _.currentTime(r)) : r = e
                            }

                            function n() {
                                _.off("timeupdate", t), _.off("ended", e)
                            }
                            var i = 3,
                                r = 0,
                                a = 0;
                            _.on("timeupdate", t), _.on("ended", e), c.once(_, ["vast.adEnd", "vast.adsCancel", "vast.adError"], n)
                        }
                        if (!T) {
                            var a = v(e) ? new o(_, k) : new s(_),
                                u = !1;
                            c.once(_, ["vast.adStart", "vast.adsCancel"], function(e) {
                                "vast.adStart" === e.type && n()
                            }), c.once(_, ["vast.adEnd", "vast.adsCancel"], i), d.isIDevice() && r(), _.vast.vastResponse = e, h.debug("calling adIntegrator.playAd() with vastResponse:", e), _.vast.adUnit = a.playAd(e, t)
                        }
                    }

                    function g(e, t) {
                        _.trigger({
                            type: "vast.adError",
                            error: e
                        }), n(), h.error("AD ERROR:", e.message, e, t)
                    }

                    function v(e) {
                        var t, n, i = e.mediaFiles;
                        for (t = 0, n = i.length; n > t; t++)
                            if (a.isVPAID(i[t])) return !0;
                        return !1
                    }
                    var y, _ = this,
                        b = new i,
                        T = !1,
                        S = {
                            timeout: 500,
                            iosPrerollCancelTimeout: 2e3,
                            adCancelTimeout: 3e3,
                            playAdAlways: !1,
                            adsEnabled: !0,
                            autoResize: !0,
                            vpaidFlashLoaderPath: "/VPAIDFlash.swf",
                            verbosity: 0
                        },
                        k = d.extend({}, S, e || {});
                    return d.isUndefined(k.adTagUrl) && d.isDefined(k.url) && (k.adTagUrl = k.url), d.isString(k.adTagUrl) && (k.adTagUrl = d.echoFn(k.adTagUrl)), d.isDefined(k.adTagXML) && !d.isFunction(k.adTagXML) ? g(new r("on VideoJS VAST plugin, the passed adTagXML option does not contain a function")) : d.isDefined(k.adTagUrl) || d.isFunction(k.adTagXML) ? (h.setVerbosity(k.verbosity), a.runFlashSupportCheck(k.vpaidFlashLoaderPath), c.prepareForAds(_), k.playAdAlways && _.on("vast.contentEnd", function() {
                        setTimeout(function() {
                            _.trigger("vast.reset")
                        }, 0)
                    }), _.on("vast.firstPlay", t), _.on("vast.reset", function() {
                        y = null, n()
                    }), _.vast = {
                        isEnabled: function() {
                            return k.adsEnabled
                        },
                        enable: function() {
                            k.adsEnabled = !0
                        },
                        disable: function() {
                            k.adsEnabled = !1
                        }
                    }, _.vast) : g(new r("on VideoJS VAST plugin, missing adTagUrl on options object"))
                }
            }, {
                "../ads/vast/VASTClient": 22,
                "../ads/vast/VASTError": 23,
                "../ads/vast/VASTIntegrator": 24,
                "../ads/vast/vastUtil": 30,
                "../ads/vpaid/VPAIDIntegrator": 34,
                "../utils/async": 40,
                "../utils/consoleLogger": 41,
                "../utils/dom": 42,
                "../utils/playerUtils": 45,
                "../utils/utilityFunctions": 47
            }
        ],
        40: [
            function(e, t, n) {
                var i = e("./utilityFunctions"),
                    r = {};
                r.setImmediate = function(e) {
                    setTimeout(e, 0)
                }, r.iterator = function(e) {
                    var t = function(n) {
                        var i = function() {
                            return e.length && e[n].apply(null, arguments), i.next()
                        };
                        return i.next = function() {
                            return n < e.length - 1 ? t(n + 1) : null
                        }, i
                    };
                    return t(0)
                }, r.waterfall = function(e, t) {
                    if (t = t || function() {}, !i.isArray(e)) {
                        var n = new Error("First argument to waterfall must be an array of functions");
                        return t(n)
                    }
                    if (!e.length) return t();
                    var a = function(e) {
                        return function(n) {
                            if (n) t.apply(null, arguments), t = function() {};
                            else {
                                var i = Array.prototype.slice.call(arguments, 1),
                                    s = e.next();
                                s ? i.push(a(s)) : i.push(t), r.setImmediate(function() {
                                    e.apply(null, i)
                                })
                            }
                        }
                    };
                    a(r.iterator(e))()
                }, r.when = function(e, t) {
                    if (!i.isFunction(t)) throw new Error("async.when error: missing callback argument");
                    var n = i.isFunction(e) ? e : function() {
                        return !!e
                    };
                    return function() {
                        var e = i.arrayLikeObjToArray(arguments),
                            r = e.pop();
                        return n.apply(null, e) ? t.apply(this, arguments) : (e.unshift(null), r.apply(null, e))
                    }
                }, t.exports = r
            }, {
                "./utilityFunctions": 47
            }
        ],
        41: [
            function(e, t, n) {
                function i(e) {
                    c = e
                }

                function r(e, t) {
                    t.length > 0 && "string" == typeof t[0] && (t[0] = d + t[0]), e.apply ? e.apply(console, Array.prototype.slice.call(t)) : e(Array.prototype.slice.call(t))
                }

                function a() {
                    4 > c || ("undefined" == typeof console.debug ? r(console.log, arguments) : (console.log(arguments), r(console.debug, arguments)))
                }

                function s() {
                    3 > c || r(console.log, arguments)
                }

                function o() {
                    2 > c || r(console.info, arguments)
                }

                function u() {
                    1 > c || r(console.warn, arguments)
                }

                function l() {
                    r(console.error, arguments)
                }
                var c = 0,
                    d = "[videojs-vast-vpaid] ",
                    h = {
                        setVerbosity: i,
                        debug: a,
                        log: s,
                        info: o,
                        warn: u,
                        error: l
                    };
                "undefined" != typeof console && console.log || (h.debug = function() {}, h.log = function() {}, h.info = function() {}, h.warn = function() {}, h.error = function() {}), t.exports = h
            }, {}
        ],
        42: [
            function(e, t, n) {
                "use strict";
                var i = e("./utilityFunctions"),
                    r = {};
                r.isVisible = function(e) {
                    var t = window.getComputedStyle(e);
                    return "hidden" !== t.visibility
                }, r.isHidden = function(e) {
                    var t = window.getComputedStyle(e);
                    return "none" === t.display
                }, r.isShown = function(e) {
                    return !r.isHidden(e)
                }, r.hide = function(e) {
                    e.__prev_style_display_ = e.style.display, e.style.display = "none"
                }, r.show = function(e) {
                    r.isHidden(e) && (e.style.display = e.__prev_style_display_), e.__prev_style_display_ = void 0
                }, r.hasClass = function(e, t) {
                    var n, r, a;
                    if (i.isNotEmptyString(t)) {
                        if (e.classList) return e.classList.contains(t);
                        for (n = i.isString(e.getAttribute("class")) ? e.getAttribute("class").split(/\s+/) : [], t = t || "", r = 0, a = n.length; a > r; r += 1)
                            if (n[r] === t) return !0
                    }
                    return !1
                }, r.addClass = function(e, t) {
                    var n;
                    if (i.isNotEmptyString(t)) {
                        if (e.classList) return e.classList.add(t);
                        n = i.isString(e.getAttribute("class")) ? e.getAttribute("class").split(/\s+/) : [], i.isString(t) && i.isNotEmptyString(t.replace(/\s+/, "")) && (n.push(t), e.setAttribute("class", n.join(" ")))
                    }
                }, r.removeClass = function(e, t) {
                    var n;
                    if (i.isNotEmptyString(t)) {
                        if (e.classList) return e.classList.remove(t);
                        n = i.isString(e.getAttribute("class")) ? e.getAttribute("class").split(/\s+/) : [];
                        var r, a, s = [];
                        if (i.isString(t) && i.isNotEmptyString(t.replace(/\s+/, ""))) {
                            for (r = 0, a = n.length; a > r; r += 1) t !== n[r] && s.push(n[r]);
                            e.setAttribute("class", s.join(" "))
                        }
                    }
                }, r.addEventListener = function(e, t, n) {
                    return i.isArray(e) ? void i.forEach(e, function(e) {
                        r.addEventListener(e, t, n)
                    }) : i.isArray(t) ? void i.forEach(t, function(t) {
                        r.addEventListener(e, t, n)
                    }) : void(e.addEventListener ? e.addEventListener(t, n, !1) : e.attachEvent && e.attachEvent("on" + t, n))
                }, r.removeEventListener = function(e, t, n) {
                    return i.isArray(e) ? void i.forEach(e, function(e) {
                        r.removeEventListener(e, t, n)
                    }) : i.isArray(t) ? void i.forEach(t, function(t) {
                        r.removeEventListener(e, t, n)
                    }) : void(e.removeEventListener ? e.removeEventListener(t, n, !1) : e.detachEvent ? e.detachEvent("on" + t, n) : e["on" + t] = null)
                }, r.dispatchEvent = function(e, t) {
                    e.dispatchEvent ? e.dispatchEvent(t) : e.fireEvent("on" + t.eventType, t)
                }, r.isDescendant = function(e, t) {
                    for (var n = t.parentNode; null !== n;) {
                        if (n === e) return !0;
                        n = n.parentNode
                    }
                    return !1
                }, r.getTextContent = function(e) {
                    return e.textContent || e.text
                }, r.prependChild = function(e, t) {
                    return t.parentNode && t.parentNode.removeChild(t), e.insertBefore(t, e.firstChild)
                }, r.remove = function(e) {
                    e && e.parentNode && e.parentNode.removeChild(e)
                }, r.isDomElement = function(e) {
                    return e instanceof Element
                }, r.click = function(e, t) {
                    r.addEventListener(e, "click", t)
                }, r.once = function(e, t, n) {
                    function i() {
                        n.apply(null, arguments), r.removeEventListener(e, t, i)
                    }
                    r.addEventListener(e, t, i)
                }, r.getDimension = function(e) {
                    var t;
                    return !i.isOldIE() && e.getBoundingClientRect ? (t = e.getBoundingClientRect(), {
                        width: t.width,
                        height: t.height
                    }) : {
                        width: e.offsetWidth,
                        height: e.offsetHeight
                    }
                }, t.exports = r
            }, {
                "./utilityFunctions": 47
            }
        ],
        43: [
            function(e, t, n) {
                "use strict";

                function i(e) {
                    this.message = "HttpRequest Error: " + (e || "")
                }

                function r(e) {
                    if (!o.isFunction(e)) throw new i("Missing XMLHttpRequest factory method");
                    this.createXhr = e
                }

                function a() {
                    var e = new XMLHttpRequest;
                    return "withCredentials" in e || (e = new XDomainRequest), e
                }
                var s = e("./urlUtils"),
                    o = e("./utilityFunctions");
                i.prototype = new Error, i.prototype.name = "HttpRequest Error", r.prototype.run = function(e, t, n, r) {
                    function a(e, t, n) {
                        if (!o.isString(e) || o.isEmptyString(e)) throw new i("Invalid url '" + e + "'");
                        if (!o.isFunction(t)) throw new i("Invalid handler '" + t + "' for the http request");
                        if (o.isDefined(n) && !o.isObject(n)) throw new i("Invalid options map '" + n + "'")
                    }

                    function u(e, t) {
                        o.forEach(t, function(t, n) {
                            o.isDefined(t) && e.setRequestHeader(n, t)
                        })
                    }

                    function l() {
                        n(-1, null, null, "")
                    }
                    a(t, n, r);
                    var c, d, h = this.createXhr();
                    r = r || {}, c = o.isNumber(r.timeout) ? r.timeout : 0, h.open(e, s.urlParts(t).href, !0), r.headers && u(h, r.headers), r.withCredentials && (h.withCredentials = !0), h.onload = function() {
                        var e, t, i;
                        h.getAllResponseHeaders || (h.getAllResponseHeaders = function() {
                            return null
                        }), h.status || (h.status = 200), o.isDefined(d) && (clearTimeout(d), d = void 0), e = h.statusText || "", t = "response" in h ? h.response : h.responseText, i = 1223 === h.status ? 204 : h.status, n(i, t, h.getAllResponseHeaders(), e)
                    }, h.onerror = l, h.onabort = l, h.send(), c > 0 && (d = setTimeout(function() {
                        h && h.abort()
                    }, c))
                }, r.prototype.get = function(e, t, n) {
                    function r(e, n, r, s) {
                        a(e) ? t(null, n, e, r, s) : t(new i(s), n, e, r, s)
                    }

                    function a(e) {
                        return e >= 200 && 300 > e
                    }
                    this.run("GET", e, r, n)
                };
                var u = new r(a);
                t.exports = {
                    http: u,
                    HttpRequest: r,
                    HttpRequestError: i,
                    createXhr: a
                }
            }, {
                "./urlUtils": 46,
                "./utilityFunctions": 47
            }
        ],
        44: [
            function(e, t, n) {
                "use strict";
                t.exports = {
                    html5: ["text/javascript", "text/javascript1.0", "text/javascript1.2", "text/javascript1.4", "text/jscript", "application/javascript", "application/x-javascript", "text/ecmascript", "text/ecmascript1.0", "text/ecmascript1.2", "text/ecmascript1.4", "text/livescript", "application/ecmascript", "application/x-ecmascript"],
                    flash: ["application/x-shockwave-flash"]
                }
            }, {}
        ],
        45: [
            function(e, t, n) {
                "use strict";
                var i = e("./dom"),
                    r = e("./utilityFunctions"),
                    a = {};
                a.getPlayerSnapshot = function(e) {
                    function t(e) {
                        var t = e.remoteTextTracks ? e.remoteTextTracks() : [];
                        t && r.isArray(t.tracks_) && (t = t.tracks_), r.isArray(t) || (t = []);
                        var n = [];
                        return t.forEach(function(e) {
                            n.push({
                                track: e,
                                mode: e.mode
                            }), e.mode = "disabled"
                        }), n
                    }
                    var n = e.el().querySelector(".vjs-tech"),
                        i = {
                            ended: e.ended(),
                            src: e.currentSrc(),
                            currentTime: e.currentTime(),
                            type: e.currentType(),
                            playing: !e.paused(),
                            suppressedTracks: t(e)
                        };
                    return n && (i.nativePoster = n.poster, i.style = n.getAttribute("style")), i
                }, a.restorePlayerSnapshot = function(e, t) {
                    function n() {
                        var t = setTimeout(function() {
                            e.trigger("canplay")
                        }, 1e3);
                        e.one("canplay", function() {
                            clearTimeout(t)
                        })
                    }

                    function i(e, t) {
                        return e.src() ? e.src() !== t.src : e.currentSrc() !== t.src
                    }

                    function r() {
                        var e = t.suppressedTracks;
                        e.forEach(function(e) {
                            e.track.mode = e.mode
                        })
                    }

                    function s() {
                        if (!a.isReadyToResume(e) && u--) setTimeout(s, 50);
                        else try {
                            e.currentTime() !== t.currentTime ? (t.playing && e.one("seeked", function() {
                                e.play()
                            }), e.currentTime(t.currentTime)) : t.playing && e.play()
                        } catch (n) {
                            videojs.log.warn("Failed to resume the content after an advertisement", n)
                        }
                    }
                    var o = e.el().querySelector(".vjs-tech"),
                        u = 20;
                    t.nativePoster && (o.poster = t.nativePoster), "style" in t && o.setAttribute("style", t.style || ""), i(e, t) ? (e.one("contentloadedmetadata", r), e.one("canplay", s), n(), e.src({
                        src: t.src,
                        type: t.type
                    }), e.load()) : (r(), t.playing && e.play())
                }, a.isReadyToResume = function(e) {
                    return e.readyState() > 1 ? !0 : void 0 === e.seekable() ? !0 : e.seekable().length > 0 ? !0 : !1
                }, a.prepareForAds = function(e) {
                    function t() {
                        var t = e.play;
                        e.play = function(i) {
                            function a() {
                                r.isIPhone() || (f = u(), e.muted(!0)), t.apply(l, arguments)
                            }

                            function s(i) {
                                n() && !i ? e.vast.adUnit.resumeAd() : t.apply(l, arguments)
                            }
                            var l = this;
                            return o() ? a() : s(i), this
                        };
                        var i = e.pause;
                        e.pause = function(t) {
                            return n() && !t ? e.vast.adUnit.pauseAd() : i.apply(this, arguments), this
                        };
                        var a = e.paused;
                        e.paused = function(t) {
                            return n() && !t ? e.vast.adUnit.isPaused() : a.apply(this, arguments)
                        }
                    }

                    function n() {
                        return e.vast && e.vast.adUnit
                    }

                    function a() {
                        o() && (g = !1, e.trigger("vast.firstPlay"))
                    }

                    function s() {
                        g = !0, m.show(), l()
                    }

                    function o() {
                        return g
                    }

                    function u() {
                        return {
                            muted: e.muted(),
                            volume: e.volume()
                        }
                    }

                    function l() {
                        f && (e.currentTime(0), c(f), f = null)
                    }

                    function c(t) {
                        r.isObject(t) && (e.volume(t.volume), e.muted(t.muted))
                    }

                    function d() {
                        i.hasClass(m.el(), "vjs-hidden") || m.hide()
                    }

                    function h() {
                        i.addClass(e.el(), "vjs-ad-playing")
                    }

                    function p() {
                        i.removeClass(e.el(), "vjs-ad-playing")
                    }
                    var f, m = e.addChild("blackPoster"),
                        g = !0;
                    t(), e.on("play", a), e.on("vast.reset", s), e.on("vast.firstPlay", l), e.on("error", d), e.on("vast.adStart", d), e.on("vast.adsCancel", d), e.on("vast.adError", d), e.on("vast.adStart", h), e.on("vast.adEnd", p), e.on("vast.adsCancel", p)
                }, a.removeNativePoster = function(e) {
                    var t = e.el().querySelector(".vjs-tech");
                    t && t.removeAttribute("poster")
                }, a.once = function(e, t, n) {
                    function i() {
                        n.apply(null, arguments), t.forEach(function(t) {
                            e.off(t, i)
                        })
                    }
                    t.forEach(function(t) {
                        e.on(t, i)
                    })
                }, t.exports = a
            }, {
                "./dom": 42,
                "./utilityFunctions": 47
            }
        ],
        46: [
            function(e, t, n) {
                "use strict";

                function i(e) {
                    var t = e;
                    return u && (o.setAttribute("href", t), t = o.href), o.setAttribute("href", t), {
                        href: o.href,
                        protocol: o.protocol ? o.protocol.replace(/:$/, "") : "",
                        host: o.host,
                        search: o.search ? o.search.replace(/^\?/, "") : "",
                        hash: o.hash ? o.hash.replace(/^#/, "") : "",
                        hostname: o.hostname,
                        port: s.isNotEmptyString(o.port) ? o.port : 80,
                        pathname: "/" === o.pathname.charAt(0) ? o.pathname : "/" + o.pathname
                    }
                }

                function r(e, t) {
                    var n, i;
                    return t = s.isFunction(t) ? t : function() {
                        return !0
                    }, e = e.trim().replace(/^\?/, ""), n = e.split("&"), i = {}, s.forEach(n, function(e) {
                        var n, r, a;
                        "" !== e && (n = e.split("="), r = n[0], a = n[1], t(r, a) && (i[r] = a))
                    }), i
                }

                function a(e) {
                    var t = [];
                    return s.forEach(e, function(e, n) {
                        t.push(n + "=" + e)
                    }), t.join("&")
                }
                var s = e("./utilityFunctions"),
                    o = document.createElement("a"),
                    u = document.documentMode;
                t.exports = {
                    urlParts: i,
                    queryStringToObj: r,
                    objToQueryString: a
                }
            }, {
                "./utilityFunctions": 47
            }
        ],
        47: [
            function(e, t, n) {
                function i() {}

                function r(e) {
                    return null === e
                }

                function a(e) {
                    return void 0 !== e
                }

                function s(e) {
                    return void 0 === e
                }

                function o(e) {
                    return "object" == typeof e
                }

                function u(e) {
                    return "function" == typeof e
                }

                function l(e) {
                    return "number" == typeof e
                }

                function c(e) {
                    return F.isObject(e) && e.window === e
                }

                function d(e) {
                    return "[object Array]" === Object.prototype.toString.call(e)
                }

                function h(e) {
                    if (null === e || F.isWindow(e) || F.isFunction(e) || F.isUndefined(e)) return !1;
                    var t = e.length;
                    return e.nodeType === R && t ? !0 : F.isString(e) || F.isArray(e) || 0 === t || "number" == typeof t && t > 0 && t - 1 in e
                }

                function p(e) {
                    return "string" == typeof e
                }

                function f(e) {
                    return F.isString(e) && 0 === e.length
                }

                function m(e) {
                    return F.isString(e) && 0 !== e.length
                }

                function g(e) {
                    return Array.prototype.slice.call(e)
                }

                function v(e, t, n) {
                    var i, r;
                    if (e)
                        if (u(e))
                            for (i in e) "prototype" === i || "length" === i || "name" === i || e.hasOwnProperty && !e.hasOwnProperty(i) || t.call(n, e[i], i, e);
                        else if (d(e)) {
                        var a = "object" != typeof e;
                        for (i = 0, r = e.length; r > i; i++)(a || i in e) && t.call(n, e[i], i, e)
                    } else if (e.forEach && e.forEach !== v) e.forEach(t, n, e);
                    else
                        for (i in e) e.hasOwnProperty(i) && t.call(n, e[i], i, e);
                    return e
                }

                function y(e, t) {
                    return t = t || "_", e.replace(j, function(e, n) {
                        return (n ? t : "") + e.toLowerCase()
                    })
                }

                function _(e) {
                    return F.isString(e) ? N.test(e.trim()) : !1
                }

                function b(e) {
                    var t, n, i;
                    for (n = 1; n < arguments.length; n++) {
                        t = arguments[n];
                        for (i in t) t.hasOwnProperty(i) && (o(e[i]) && !r(e[i]) && o(t[i]) ? e[i] = b({}, e[i], t[i]) : e[i] = t[i])
                    }
                    return e
                }

                function T(e) {
                    return e.charAt(0).toUpperCase() + e.slice(1)
                }

                function S(e) {
                    return e.charAt(0).toLowerCase() + e.slice(1)
                }

                function k(e, t) {
                    var n = [];
                    return e.forEach(function(e, i) {
                        var r = t(e, i);
                        F.isDefined(r) && n.push(r)
                    }), n
                }

                function w(e, t) {
                    var n = e + "";
                    if (t = F.isNumber(t) ? t : 0, e = F.isNumber(e) ? e : parseInt(e, 10), F.isNumber(e) && !isNaN(e)) {
                        for (n = e + ""; n.length < t;) n = "0" + n;
                        return n
                    }
                    return "NaN"
                }

                function C(e, t) {
                    var n = (new Date).getTime() - (t + 1);
                    return function() {
                        var i = (new Date).getTime();
                        i - n >= t && (n = i, e.apply(this, arguments))
                    }
                }

                function E(e, t) {
                    var n;
                    return function() {
                        n && clearTimeout(n), n = setTimeout(function() {
                            e.apply(this, arguments), n = void 0
                        }, t)
                    }
                }

                function A(e, t, n) {
                    for (var i = t(e), r = 0; r < i.length; r++) {
                        if (n(i[r])) return i[r];
                        var a = A(i[r], t, n);
                        if (a) return a
                    }
                }

                function L(e) {
                    return function() {
                        return e
                    }
                }

                function I(e) {
                    return F.isNumber(e) && (e += ""), F.isString(e) ? B.test(e.trim()) : !1
                }

                function P() {
                    var e = F.getInternetExplorerVersion(navigator);
                    return -1 === e ? !1 : 10 > e
                }

                function x(e) {
                    var t = -1;
                    if ("Microsoft Internet Explorer" == e.appName) {
                        var n = e.userAgent,
                            i = new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),
                            r = i.exec(n);
                        null !== r && (t = parseFloat(r[1]))
                    }
                    return t
                }

                function D() {
                    return /iP(hone|ad)/.test(F._UA)
                }

                function U() {
                    return /iP(hone|ad|od)|Android|Windows Phone/.test(F._UA)
                }

                function O() {
                    return /iP(hone|od)/.test(F._UA)
                }

                function M() {
                    return /Android/.test(F._UA)
                }
                var R = 1,
                    j = /[A-Z]/g,
                    N = /^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)+$/i,
                    B = /^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,
                    F = {
                        _UA: navigator.userAgent,
                        noop: i,
                        isNull: r,
                        isDefined: a,
                        isUndefined: s,
                        isObject: o,
                        isFunction: u,
                        isNumber: l,
                        isWindow: c,
                        isArray: d,
                        isArrayLike: h,
                        isString: p,
                        isEmptyString: f,
                        isNotEmptyString: m,
                        arrayLikeObjToArray: g,
                        forEach: v,
                        snake_case: y,
                        isValidEmail: _,
                        extend: b,
                        capitalize: T,
                        decapitalize: S,
                        transformArray: k,
                        toFixedDigits: w,
                        throttle: C,
                        debounce: E,
                        treeSearch: A,
                        echoFn: L,
                        isISO8601: I,
                        isOldIE: P,
                        getInternetExplorerVersion: x,
                        isIDevice: D,
                        isMobile: U,
                        isIPhone: O,
                        isAndroid: M
                    };
                t.exports = F
            }, {}
        ],
        48: [
            function(e, t, n) {
                "use strict";
                var i = e("./utilityFunctions"),
                    r = {};
                r.strToXMLDoc = function(e) {
                    function t(e) {
                        var t, r = new DOMParser;
                        try {
                            if (t = r.parseFromString(e, "application/xml"), n(t) || i.isEmptyString(e)) throw new Error
                        } catch (a) {
                            throw new Error("xml.strToXMLDOC: Error parsing the string: '" + e + "'")
                        }
                        return t
                    }

                    function n(e) {
                        try {
                            var t = new DOMParser,
                                n = t.parseFromString("INVALID", "text/xml"),
                                i = n.getElementsByTagName("parsererror")[0].namespaceURI;
                            return "http://www.w3.org/1999/xhtml" === i ? e.getElementsByTagName("parsererror").length > 0 : e.getElementsByTagNameNS(i, "parsererror").length > 0
                        } catch (r) {}
                    }
                    if ("undefined" == typeof window.DOMParser) {
                        var r = new ActiveXObject("Microsoft.XMLDOM");
                        return r.async = !1, r.loadXML(e), r
                    }
                    return t(e)
                }, r.parseText = function(e) {
                    return /^\s*$/.test(e) ? null : /^(?:true|false)$/i.test(e) ? "true" === e.toLowerCase() : isFinite(e) ? parseFloat(e) : i.isISO8601(e) ? new Date(e) : e.trim()
                }, r.JXONTree = function(e) {
                    var t = r.parseText;
                    if (e.documentElement) return new r.JXONTree(e.documentElement);
                    if (e.hasChildNodes()) {
                        for (var n, a, s, o = "", u = 0; u < e.childNodes.length; u++) n = e.childNodes.item(u), 3 === (n.nodeType - 1 | 1) ? o += 3 === n.nodeType ? n.nodeValue.trim() : n.nodeValue : 1 !== n.nodeType || n.prefix || (a = i.decapitalize(n.nodeName), s = new r.JXONTree(n), this.hasOwnProperty(a) ? (this[a].constructor !== Array && (this[a] = [this[a]]), this[a].push(s)) : this[a] = s);
                        o && (this.keyValue = t(o))
                    }
                    var l = "undefined" == typeof e.hasAttributes ? e.attributes.length > 0 : e.hasAttributes();
                    if (l)
                        for (var c, d = 0; d < e.attributes.length; d++) c = e.attributes.item(d), this["@" + i.decapitalize(c.name)] = t(c.value.trim())
                }, r.JXONTree.prototype.attr = function(e) {
                    return this["@" + i.decapitalize(e)]
                }, r.toJXONTree = function(e) {
                    var t = r.strToXMLDoc(e);
                    return new r.JXONTree(t)
                }, r.keyValue = function(e) {
                    return e ? e.keyValue : void 0
                }, r.attr = function(e, t) {
                    return e ? e["@" + i.decapitalize(t)] : void 0
                }, r.encode = function(e) {
                    return i.isString(e) ? e.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&apos;") : void 0
                }, r.decode = function(e) {
                    return i.isString(e) ? e.replace(/&apos;/g, "'").replace(/&quot;/g, '"').replace(/&gt;/g, ">").replace(/&lt;/g, "<").replace(/&amp;/g, "&") : void 0
                }, t.exports = r
            }, {
                "./utilityFunctions": 47
            }
        ],
        49: [
            function(e, t, n) {
                (function(t) {
                    "use strict";
                    e("./plugin/components/ads-label_5"), e("./plugin/components/black-poster_5");
                    var n = e("./plugin/videojs.vast.vpaid");
                    videojs.registerPlugin("vastClient", n)
                }).call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {})
            }, {
                "./plugin/components/ads-label_5": 36,
                "./plugin/components/black-poster_5": 38,
                "./plugin/videojs.vast.vpaid": 39
            }
        ]
    }, {}, [49])(49)
}),
function(e) {
    "function" == typeof define && define.amd ? define("agegate", ["videojs"], function(t) {
        e(t)
    }) : e(videojs)
}(function(e) {
    var t = function(e) {
        var t = {
                1: "一般觀眾皆可觀賞。",
                2: "未滿6歲之兒童不宜觀賞，6歲以上未滿12歲之兒童需父母、師長或成年親友陪伴觀賞。",
                3: "未滿12歲之兒童不宜觀賞。",
                4: "未滿15歲之人不宜觀賞。",
                5: "未滿18歲之人不宜觀賞。"
            },
            n = {
                1: "TW-ALL.png",
                2: "TW-6TO12.png",
                3: "TW-12TO15.png",
                4: "TW-15TO18.png",
                5: "TW-18UP.png"
            },
            i = this,
            r = document.createElement("div"),
            a = r.cloneNode(!1);
        if (a.className = "R18", 0 !== i.promote.length) {
            var o = r.cloneNode(!1);
            o.id = "promote-div", o.className = "promote", "" !== i.promote.url && (o.onclick = function() {
                window.open(i.promote.url)
            });
            var u = "";
            u += '<div class="promote-img">', u += '<img src="' + i.promote.cover + '">', u += "</div>", u += '<div class="promote-content">', u += "<p>[" + i.promote.publisher + "情報站]</p>", u += "<p>" + i.promote.content + "</p>", u += "</div>", o.innerHTML = u, a.appendChild(o)
        }
        var l = r.cloneNode(!1);
        if (l.className = "video-cover-ncc", u = '<div class="ncc-choosearea">', u += '<img src="https://i2.bahamut.com.tw/anime/' + n[e] + '">', u += '<div class="ncc-choosebar">', u += "<p>" + t[e] + "</p>", u += '<div class="ncc-choose-btn">', u += '<button class="choose-btn-agree" id="adult">同意</button><button class="choose-btn-disagree" id="not-adult">不同意</button>', u += "</div></div></div>", l.innerHTML = u, a.appendChild(l), i.sponsorText) {
            var c = r.cloneNode(!1);
            c.className = "sponsorship-text";
            var d = s.cloneNode(!1);
            d.innerHTML = i.sponsorText, c.appendChild(d), a.appendChild(c)
        }
        i.el().appendChild(a), document.getElementById("not-adult").onclick = function() {
            setTimeout(function() {
                window.location = "http://ani.gamer.com.tw/index.php"
            }, 500), i.dispose()
        }, 0 !== i.promote.length && setTimeout(function() {
            document.getElementById("promote-div").classList.add("promote-animate")
        }, 100)
    };
    e.registerPlugin("ageGate", t)
}),
function(e) {
    "function" == typeof define && define.amd ? define("breakpoint", ["videojs"], function(t) {
        e(window, document, t)
    }) : e(window, document, videojs)
}(function(e, t, n) {
    var i = function() {
            try {
                return e.localStorage.setItem("persistVolume", "persistVolume"), e.localStorage.removeItem("persistVolume"), !0
            } catch (t) {
                return !1
            }
        },
        r = function(t) {
            return i() ? e.localStorage.getItem(t) : null
        },
        a = function(t, n) {
            return i() ? e.localStorage.setItem(t, n) : null
        },
        s = function(t) {
            return i() ? e.localStorage.removeItem(t) : null
        },
        o = function() {
            var e = arguments;
            return e.length <= 0 ? !1 : void
            function t(n) {
                n >= e.length || "function" != typeof e[n] || setTimeout(function() {
                    e[n](), t(n + 1)
                }, 500 * n)
            }(0)
        },
        u = {
            namespace: "",
            del: !1
        },
        l = function(e) {
            var t = this,
                i = n.mergeOptions(u, e),
                l = i.namespace + "_BP";
            if (i.del) s(l);
            else {
                t.setInterval(function() {
                    if (this.currentTime() > 0 && this.el().classList.contains("vjs-playing")) {
                        var e = '{"sn":"' + animefun.videoSn + '","time":"' + this.currentTime() + '"}';
                        a(l, e)
                    }
                }, 5e3);
                var c = r(l);
                BPjson = JSON.parse(c), null !== c && animefun.videoSn == BPjson.sn && 5 <= Math.abs(t.duration() - parseInt(BPjson.time, 10)) ? o(function() {
                    t.pause()
                }, function() {
                    t.currentTime(BPjson.time)
                }, function() {
                    t.play()
                }, function() {
                    t.trigger("breakpoint")
                }) : t.trigger("breakpoint")
            }
        };
    n.registerPlugin("breakPoint", l)
}),
function(e) {
    "function" == typeof define && define.amd ? define("elapse", ["videojs"], function(t) {
        e(window, t, jQuery)
    }) : e(window, videojs, jQuery)
}(function(e, t, n) {
    var i = {
            sendElapse: function(e, t) {
                e.deviceID || (e.deviceID = t.getdeviceid(), t.setStorageItem("ANIME_deviceid", e.deviceID)), n.ajax({
                    url: "/ajax/elapse.php?sn=" + t.videoSn + "&device=" + e.deviceID,
                    success: function(n) {
                        if (obj = JSON.parse(n), "ok" == obj.state) obj.device && (e.deviceID = obj.device, t.setStorageItem("ANIME_deviceid", e.deviceID));
                        else switch (obj.state) {
                            case 1:
                                e.errPageCCL("尚未登入，請進行登入。");
                                break;
                            case 2:
                                e.error('錯誤代碼1，影片傳輸中斷，請參考<a href="http://ani.gamer.com.tw/anime403info.php">可能原因</a>');
                                break;
                            case 3:
                                e.errPageCCL("登入狀態異常(2)。");
                                break;
                            case 4:
                                e.errPageCCL("本服務同時間內僅提供播放一部影片！");
                                break;
                            case 5:
                                e.errPageCCL("登入狀態異常(3)。");
                                break;
                            case 6:
                                e.error("登入狀態異常(4)。");
                                break;
                            default:
                                e.errPageCCL("已偵測到新的裝置登入！<br>本服務同時間內僅允許一個裝置登入使用！")
                        }
                    }
                })
            },
            videoStateChanged: function(e, t) {
                n.ajax({
                    url: "/ajax/unlock.php?sn=" + e + "&ttl=" + parseInt(t, 10),
                    success: function() {}
                })
            }
        },
        r = function(t) {
            function n(e, t) {
                t.total >= 60 * (t.counter + 1) && (i.sendElapse(e, r), e.total_time = t.total, t.counter++);
                var n = e.currentTime();
                !e.seeking() && !e.paused() && Math.abs(n - t.end) < .6 ? t.end = n : (t.base = t.total, t.start = t.end = n);
                var a = t.end - t.start;
                t.total = t.base + a
            }
            var r = e.animefun,
                a = this,
                s = t.adenable,
                o = {
                    start: 0,
                    end: 0,
                    base: 0,
                    total: 0,
                    counter: 0
                };
            s ? a.one(["vast.adEnd", "vpaid.adEnd"], function() {
                a.on("timeupdate", function() {
                    n(a, o)
                })
            }) : a.on("timeupdate", function() {
                n(a, o)
            }), ["play", "pause", "ended"].forEach(function(e) {
                a.on(e, function() {
                    i.videoStateChanged(r.videoSn, o.total)
                })
            })
        };
    t.registerPlugin("elapse", r)
}),
function(e) {
    "function" == typeof define && define.amd ? define("danmu", ["videojs"], function(t) {
        e(window, t, jQuery)
    }) : e(window, videojs, jQuery)
}(function(e, t, n) {
    var i = function() {
        function i(i) {
            function r(e) {
                "string" == typeof e && (e = JSON.parse(e));
                var t = e;
                if (t.length) {
                    for (var n in t)
                        if ("object" == typeof t[n]) {
                            switch (t[n].size) {
                                case 0:
                                    t[n].size = 16;
                                    break;
                                case 1:
                                    t[n].size = 24;
                                    break;
                                case 2:
                                    t[n].size = 28
                            }
                            switch (t[n].position) {
                                case 0:
                                    t[n].mode = 1;
                                    break;
                                case 1:
                                    t[n].mode = 5;
                                    break;
                                case 2:
                                    t[n].mode = 4;
                                    break;
                                default:
                                    t[n].mode = 1
                            }
                            t[n].stime = 100 * t[n].time
                        }
                } else {
                    switch (t.size) {
                        case 0:
                            t.size = 16;
                            break;
                        case 1:
                            t.size = 24;
                            break;
                        case 2:
                            t.size = 28
                    }
                    switch (t.position) {
                        case 0:
                            t.mode = 1;
                            break;
                        case 1:
                            t.mode = 5;
                            break;
                        case 2:
                            t.mode = 4;
                            break;
                        default:
                            t.mode = 1
                    }
                    t.stime = 100 * t.time
                }
                return t
            }
            var a = this;
            if (danmuToggle = new t.DanmuToggle(i, {
                id: "danmuToggle",
                className: "vjs-danmu-button vjs-control vjs-hidden",
                ariaLive: "polite",
                tabindex: 0,
                role: "button"
            }), i.controlBar.danmuToggle = i.controlBar.addChild(danmuToggle), this.danmuDiv = document.createElement("div"), this.danmuDiv.className = "vjs-danmu", i.el().insertBefore(this.danmuDiv, i.el().getElementsByClassName("vjs-poster")[0]), i.on("timeupdate", function() {
                animefun.danmu_time = Math.floor(10 * i.currentTime().toFixed(1))
            }), "undefined" != typeof CommentManager) {
                this.cmManager = new CommentManager(this.danmuDiv), this.cmManager.display = !0, this.cmManager.isAD = !0, this.cmManager.init("canvas"), this.cmManager.clear();
                var s = i.el().children[0],
                    o = 0,
                    u = !0,
                    l = 2;
                s.addEventListener("progress", function() {
                    o == s.currentTime ? (s.hasStalled = !0, a.cmManager.stopTimer()) : o = s.currentTime
                }), s.addEventListener("timeupdate", function() {
                    if (a.cmManager.display !== !1 && a.cmManager.isAD !== !0) {
                        s.hasStalled && (a.cmManager.startTimer(), s.hasStalled = !1), a.cmManager.time(Math.floor(1e3 * s.currentTime));
                        var e = s.currentTime,
                            t = parseInt(e, 10),
                            n = t % l === 0 && 0 !== t;
                        n && u ? (animefun.checkdanmulist(animefun.danmu_status), u = !1) : u || setTimeout(function() {
                            u = !0
                        }, 1e3)
                    }
                }), ["pause", "waiting"].forEach(function(e) {
                    s.addEventListener(e, function() {
                        a.cmManager.stopTimer()
                    })
                }), ["play", "playing"].forEach(function(e) {
                    s.addEventListener(e, function() {
                        a.cmManager.startTimer()
                    })
                }), s.addEventListener("seeked", function() {
                    a.cmManager.clear()
                }), s.onresize = function() {
                    a.cmManager.setBounds()
                }, e && e.addEventListener("resize", function() {
                    a.cmManager.setBounds()
                }), this.load = function(e) {
                    null == e && (e = function() {});
                    var t = a.cmManager;
                    t.options.scroll.scale = 2.5;
                    var n = s;
                    animefun.danmu.length ? "Microsoft Internet Explorer" == navigator.appName ? (t.load(r(animefun.danmu)), t.seek(1e3 * n.currentTime), e(!0)) : (t.seek(1e3 * n.currentTime), t.load(r(animefun.danmu)), e(!0)) : e(!1), animefun.danmu_status = !0, animefun.danmuInsert = function(e) {
                        e = r(e), t.send(e), t.insert(e)
                    }, animefun.updatedanmu = function() {
                        var e = animefun.danmu.length ? r(animefun.danmu) : [];
                        t.init(), t.load(e), t.seek(1e3 * n.currentTime)
                    }
                };
                var c = i.controlBar.danmuToggle,
                    d = n("#danmuturn");
                [c, d].forEach(function(e) {
                    e.on("click", function() {
                        c.el().classList.contains("vjs-danmu-close") ? (i.danmu.cmManager.display = !0, $("#danmu-show").prop("checked", !0)) : (i.danmu.cmManager.display = !1, i.danmu.cmManager.clear(), $("#danmu-show").prop("checked", !1))
                    })
                });
                var h = i.controlBar.getChildById("theaterToggle"),
                    p = i.controlBar.getChildById("fullscreenToggle");
                [h, p].forEach(function(e) {
                    e.on("click", function() {
                        a.cmManager.setBounds()
                    })
                })
            }
            return this
        }
        var r = this,
            a = t.getComponent("MenuButton");
        t.DanmuToggle = videojs.extend(a, {
            constructor: function(e, t) {
                a.call(this, e, t);
                var n = this.el();
                n.id = t.id, n.className = t.className, n.setAttribute("role", t.role), n.setAttribute("aria-live", t.ariaLive), n.setAttribute("tabindex", t.tabindex), n.firstChild.remove(), n.firstChild.remove()
            }
        }), r.danmu = new i(r)
    };
    t.registerPlugin("danmuCCL", i)
}),
function(e) {
    "function" == typeof define && define.amd ? define("hotkeys", ["videojs"], function(t) {
        e(window, t)
    }) : e(window, videojs)
}(function(e, t) {
    var n = function(e) {
            var t, n, i;
            for (n = 1; n < arguments.length; n++) {
                t = arguments[n];
                for (i in t) t.hasOwnProperty(i) && (e[i] = t[i])
            }
            return e
        },
        i = function(e) {
            var t = this,
                i = t.controlBar,
                r = {
                    volumeStep: .1,
                    seekStep: 5,
                    enableMute: !0,
                    enableFullscreen: !0,
                    enableNumbers: !0,
                    enableJogStyle: !1,
                    alwaysCaptureHotkeys: !1
                };
            e = n({}, r, e || {});
            var a = e.volumeStep,
                s = e.seekStep,
                o = e.enableMute,
                u = e.enableFullscreen,
                l = e.enableNumbers,
                c = e.enableJogStyle,
                d = e.alwaysCaptureHotkeys;
            t.el().hasAttribute("tabIndex") || t.el().setAttribute("tabIndex", "-1"), d && t.one("play", function() {
                t.el().focus()
            }), t.on("play", function() {
                var e = t.el().querySelector(".iframeblocker");
                e && "" === e.style.display && (e.style.display = "block", e.style.bottom = "39px")
            });
            var h = function(e) {
                    var n, r = e.which;
                    if (t.controls()) {
                        var h = document.activeElement;
                        if (d || h == t.el() || h == t.el().querySelector(".vjs-tech") || h == t.el().querySelector(".vjs-control-bar") || h == t.el().querySelector(".iframeblocker")) switch (r) {
                            case 32:
                                e.preventDefault(), d && e.stopPropagation(), t.paused() ? t.play() : t.pause();
                                break;
                            case 37:
                                e.preventDefault(), n = t.currentTime() - s, t.currentTime() <= s && (n = 0), t.currentTime(n);
                                break;
                            case 39:
                                e.preventDefault(), t.currentTime(t.currentTime() + s);
                                break;
                            case 40:
                                e.preventDefault(), c ? (n = t.currentTime() - 1, t.currentTime() <= 1 && (n = 0), t.currentTime(n)) : t.volume(t.volume() - a);
                                break;
                            case 38:
                                e.preventDefault(), c ? t.currentTime(t.currentTime() + 1) : t.volume(t.volume() + a);
                                break;
                            case 77:
                                o && (t.muted() ? t.muted(!1) : t.muted(!0));
                                break;
                            case 84:
                                i.getChildById("theaterToggle").el().click();
                                break;
                            case 70:
                                u && (t.isFullscreen() ? t.exitFullscreen() : t.requestFullscreen());
                                break;
                            default:
                                if ((r > 47 && 59 > r || r > 95 && 106 > r) && l) {
                                    var p = 48;
                                    r > 95 && (p = 96);
                                    var f = r - p;
                                    e.preventDefault(), t.currentTime(t.duration() * f * .1)
                                }
                        }
                    }
                },
                p = function(e) {
                    if (t.controls()) {
                        var n = e.relatedTarget || e.toElement || document.activeElement;
                        (n == t.el() || n == t.el().querySelector(".vjs-tech") || n == t.el().querySelector(".iframeblocker")) && u && (t.isFullscreen() ? t.exitFullscreen() : t.requestFullscreen())
                    }
                };
            return t.on("keydown", h), t.on("dblclick", p), this
        };
    t.registerPlugin("hotkeys", i)
}),
function(e) {
    "function" == typeof define && define.amd ? define("overlay", ["videojs"], function(t) {
        e(window, t, jQuery)
    }) : e(window, videojs, jQuery)
}(function(e, t, n) {
    var i, r, a, s = {
            content: "TeeHee",
            overlays: [{
                start: "playing",
                end: "paused"
            }]
        },
        o = function(e, t) {
            return e.start - t.start
        },
        u = function(e, t) {
            return e.end - t.end
        };
    i = function(e, t, n) {
        var i = document.createElement("div"),
            r = n.content || t.content,
            a = t.align || n.align,
            s = t["class"] || n["class"],
            o = t.clickfunction || n.clickfunction;
        i.className = "vjs-overlay", n.el = i, o && (i.onclick = o), a && (i.className += " vjs-overlay-" + a), s && (i.className += " " + s), "string" == typeof r ? i.innerHTML = r : i.appendChild(r), e.el().appendChild(i)
    }, r = function(e, t, n) {
        n.el && (n.el.parentNode.removeChild(n.el), delete n.el)
    }, a = function(e) {
        var n, a, l = t.mergeOptions(s, e),
            c = this,
            d = {},
            h = [],
            p = [],
            f = function(e) {
                for (var t, n = d[e.type], r = n.length; r--;) t = n[r], t.el || i(c, l, t)
            },
            m = function(e) {
                for (var t, n = d[e.type], i = n.length; i--;) t = n[i], t.el && r(c, l, t)
            },
            g = function(e, t, n, i) {
                var r, a = 0,
                    s = 0;
                r = function() {
                    var r = e[s],
                        o = c.currentTime();
                    for (a > o && (s = 0, r = e[s]); r && i(r[t], o); r = e[++s]) n(c, l, r);
                    a = o
                }, c.on("timeupdate", r), c.overlay.eventListeners.push({
                    type: "timeupdate",
                    fn: r
                })
            };
        ! function() {
            var e, t;
            for (t in c.overlay.eventListeners) e = c.overlay.eventListeners[t], c.off(e.type, e.fn)
        }(), c.overlay.eventListeners = [];
        for (a in l.overlays) n = l.overlays[a], "string" == typeof n.start ? (d[n.start] || (d[n.start] = [], c.on(n.start, f), c.overlay.eventListeners.push({
            type: n.start,
            fn: f
        })), d[n.start].push(n)) : h.push(n), "string" == typeof n.end ? (d[n.end] || (d[n.end] = [], c.on(n.end, m), c.overlay.eventListeners.push({
            type: n.end,
            fn: m
        })), d[n.end].push(n)) : p.push(n);
        h.length && (h.sort(o), g(h, "start", i, function(e, t) {
            return t >= e
        }), g(h, "start", r, function(e, t) {
            return e > t
        })), p.length && (p.sort(u), g(p, "end", r, function(e, t) {
            return t >= e
        }))
    }, t.registerPlugin("overlay", a)
}),
function(e) {
    "function" == typeof define && define.amd ? define("peresistvolume", ["videojs"], function(t) {
        e(window, document, t)
    }) : e(window, document, videojs)
}(function(e, t, n) {
    var i = function() {
            try {
                return e.localStorage.setItem("teehee_volume", "teehee"), e.localStorage.removeItem("teehee_volume"), !0
            } catch (t) {
                return !1
            }
        },
        r = function(t) {
            return i() ? e.localStorage.getItem(t) : null
        },
        a = function(t, n) {
            return i() ? e.localStorage.setItem(t, n) : null
        },
        s = {
            namespace: ""
        },
        o = function(e) {
            var i = this,
                o = n.mergeOptions(s, e),
                u = o.namespace + "_volume",
                l = o.namespace + "_mute",
                c = i.controlBar.getChildById("muteToggle");
            i.on("volumechange", function() {
                ("facebook" !== i.adType || "facebook" === i.adType && !i.adIsPlaying) && (a(u, i.volume()), a(l, i.muted())), t.getElementById("ani_video").focus(), i.muted() ? c.el().title = "取消靜音" : c.el().title = "靜音"
            });
            var d = r(u);
            null !== d ? i.volume(d) : i.volume(1);
            var h = r(l);
            null !== h && i.muted("true" === h)
        };
    n.registerPlugin("persistvolume", o)
}),
function(e) {
    "function" == typeof define && define.amd ? define("peresistdanmu", ["videojs"], function(t) {
        e(window, document, t, jQuery)
    }) : e(window, document, videojs, jQuery)
}(function(e, t, n, i) {
    var r = function() {
            try {
                return e.localStorage.setItem("teehee_danmu", "teehee"), e.localStorage.removeItem("teehee_danmu"), !0
            } catch (t) {
                return !1
            }
        },
        a = function(t) {
            return r() ? e.localStorage.getItem(t) : null
        },
        s = function(t, n) {
            return r() ? e.localStorage.setItem(t, n) : null
        },
        o = {
            namespace: ""
        },
        u = function(e) {
            function r(e, t, n) {
                var r = l.namespace + "_danmu_opacity";
                0 != u.danmu.cmManager.options[n].opacity ? (u.danmu.cmManager.options[n].opacity = 0, i(e).removeClass("active"), i(t).removeClass("is-active")) : (u.danmu.cmManager.options[n].opacity = 1, i(e).addClass("active"), i(t).addClass("is-active")), m = u.danmu.cmManager.options.global.opacity + "," + u.danmu.cmManager.options.scroll.opacity + "," + u.danmu.cmManager.options.top.opacity + "," + u.danmu.cmManager.options.bottom.opacity, s(r, m)
            }
            var u = this,
                l = n.mergeOptions(o, e),
                c = l.namespace + "_danmu",
                d = u.controlBar.danmuToggle,
                h = i("#danmuturn"),
                p = a(c);
            d.el().title = "關閉彈幕", [d, h].forEach(function(e) {
                e.on("click", function() {
                    d.el().classList.contains("vjs-danmu-close") ? (d.el().classList.remove("vjs-danmu-close"), h.addClass("closed"), s(c, "on"), d.el().title = "關閉彈幕") : (d.el().classList.add("vjs-danmu-close"), h.removeClass("closed"), s(c, "off"), d.el().title = "開啟彈幕"), u.el().focus()
                })
            }), i("#danmu-show").click(function() {
                u.danmu.cmManager.display ? (u.danmu.cmManager.display = !1, u.danmu.cmManager.clear(), s(c, "off"), d.el().classList.add("vjs-danmu-close"), d.el().title = "開啟彈幕") : (u.danmu.cmManager.display = !0, s(c, "on"), d.el().classList.remove("vjs-danmu-close"), d.el().title = "關閉彈幕")
            }), p && "off" == p && (u.danmu.cmManager.display = !1, u.danmu.cmManager.clear(), $("#danmu-show").prop("checked", !1), d.el().classList.add("vjs-danmu-close"));
            var f = l.namespace + "_danmu_opacity",
                m = a(f);
            null != m && (m = m.split(","), null != m[0] && (u.danmu.cmManager.options.global.opacity = m[0]), null != m[1] && (u.danmu.cmManager.options.scroll.opacity = m[1]), null != m[2] && (u.danmu.cmManager.options.top.opacity = m[2]), null != m[3] && (u.danmu.cmManager.options.bottom.opacity = m[3]));
            var g = t.createElement("div");
            g.className = "vjs-menu", g.style = "right:-40px";
            var v = t.createElement("div");
            v.className = "vjs-menu-item vjs-danmu-position vjs-show-tip", v.onclick = function(e) {
                e.stopPropagation()
            }, v.innerHTML = "<h3>彈幕顯示</h3>";
            var y = t.createElement("button");
            y.className = "vjs-danmu-position-middle", y.innerHTML = "<i></i><span>滾動彈幕</span>", y.onclick = function(e) {
                r(this, $("#ani-danmu-position-middle"), "scroll"), e.stopPropagation()
            }, 1 == u.danmu.cmManager.options.scroll.opacity && i(y).addClass("active");
            var _ = t.createElement("button");
            _.className = "vjs-danmu-position-top", _.innerHTML = "<i></i><span>上方彈幕</span>", _.onclick = function(e) {
                r(this, $("#ani-danmu-position-top"), "top"), e.stopPropagation()
            }, 1 == u.danmu.cmManager.options.top.opacity && i(_).addClass("active");
            var b = t.createElement("button");
            b.className = "vjs-danmu-position-bottom", b.innerHTML = "<i></i><span>下方彈幕</span>", b.onclick = function(e) {
                r(this, $("#ani-danmu-position-bottom"), "bottom"), e.stopPropagation()
            }, 1 == u.danmu.cmManager.options.bottom.opacity && i(b).addClass("active");
            var T = t.createElement("div");
            T.className = "vjs-menu-item vjs-danmu-opacity", T.onclick = function(e) {
                e.stopPropagation()
            };
            var S = t.createElement("input");
            S.type = "range", S.className = "DanmuOpacityRange", S.max = 100, S.min = 0, S.step = 10, S.value = 100 * u.danmu.cmManager.options.global.opacity || 100, T.innerHTML = '<h3>彈幕透明<span class="DanmuOpacityNum">' + S.value + "%</span></h3>", S.onmousemove = function(e) {
                u.danmu.cmManager.options.global.opacity = this.value / 100, m = u.danmu.cmManager.options.global.opacity + "," + u.danmu.cmManager.options.scroll.opacity + "," + u.danmu.cmManager.options.top.opacity + "," + u.danmu.cmManager.options.bottom.opacity, s(f, m), i(".DanmuOpacityNum").html(this.value + "%"), i(".DanmuOpacityRange").val(this.value)
            }, S.onchange = function(e) {
                u.danmu.cmManager.options.global.opacity = this.value / 100, m = u.danmu.cmManager.options.global.opacity + "," + u.danmu.cmManager.options.scroll.opacity + "," + u.danmu.cmManager.options.top.opacity + "," + u.danmu.cmManager.options.bottom.opacity, s(f, m)
            }, S.onclick = function(e) {
                e.stopPropagation()
            };
            var k = t.createElement("input");
            k.type = "range", k.className = "DanmuOpacityRange", k.max = 100, k.min = 0, k.step = 10, k.value = 100 * u.danmu.cmManager.options.global.opacity || 100, $(".ani-setting-label__sub").html(k.value + "%"), k.onmousemove = function(e) {
                u.danmu.cmManager.options.global.opacity = this.value / 100, m = u.danmu.cmManager.options.global.opacity + "," + u.danmu.cmManager.options.scroll.opacity + "," + u.danmu.cmManager.options.top.opacity + "," + u.danmu.cmManager.options.bottom.opacity, s(f, m), $(".DanmuOpacityNum").html(this.value + "%"), $(".DanmuOpacityRange").val(this.value)
            }, k.onchange = function(e) {
                u.danmu.cmManager.options.global.opacity = this.value / 100, m = u.danmu.cmManager.options.global.opacity + "," + u.danmu.cmManager.options.scroll.opacity + "," + u.danmu.cmManager.options.top.opacity + "," + u.danmu.cmManager.options.bottom.opacity, s(f, m)
            }, k.onclick = function(e) {
                e.stopPropagation()
            };
            var w = t.createElement("a");
            w.href = "#", w.role = "button", w.className = "ani-danmu-position-btn", w.id = "ani-danmu-position-middle", w.innerHTML = '<i class="danmu-middle"></i><i class="material-icons">close</i><span>滾動彈幕</span>', w.onclick = function(e) {
                r($(".vjs-danmu-position-middle"), this, "scroll"), e.stopPropagation()
            }, 1 == u.danmu.cmManager.options.scroll.opacity && i(w).addClass("is-active");
            var C = t.createElement("a");
            C.href = "#", C.role = "button", C.className = "ani-danmu-position-btn", C.id = "ani-danmu-position-top", C.innerHTML = '<i class="danmu-top"></i><i class="material-icons">close</i><span>上方彈幕</span>', C.onclick = function(e) {
                r($(".vjs-danmu-position-top"), this, "top"), e.stopPropagation()
            }, 1 == u.danmu.cmManager.options.top.opacity && i(C).addClass("is-active");
            var E = t.createElement("a");
            E.href = "#", E.role = "button", E.className = "ani-danmu-position-btn", E.id = "ani-danmu-position-bottom", E.innerHTML = '<i class="danmu-bottom"></i><i class="material-icons">close</i><span>下方彈幕</span>', E.onclick = function(e) {
                r($(".vjs-danmu-position-bottom"), this, "bottom"), e.stopPropagation()
            }, 1 == u.danmu.cmManager.options.bottom.opacity && i(E).addClass("is-active"), T.appendChild(S), $(".ani-range").html(k), $("#setting-danmu-appear").append(w), $("#setting-danmu-appear").append(C), $("#setting-danmu-appear").append(E), v.appendChild(y), v.appendChild(_), v.appendChild(b), g.appendChild(T), g.appendChild(v), d.el().appendChild(g)
        };
    n.registerPlugin("persistdanmu", u)
}),
function(e) {
    "function" == typeof define && define.amd ? define("peresistdanmutoggle", ["videojs"], function(t) {
        e(window, document, t, jQuery)
    }) : e(window, document, videojs, jQuery)
}(function(e, t, n, i) {
    var r = function() {
            try {
                return e.localStorage.setItem("teehee_danmu", "teehee"), e.localStorage.removeItem("teehee_danmu"), !0
            } catch (t) {
                return !1
            }
        },
        a = function(t) {
            return r() ? e.localStorage.getItem(t) : null
        },
        s = {
            namespace: ""
        },
        o = function(e) {
            var i = this,
                r = t,
                o = n.mergeOptions(s, e),
                u = o.namespace + "_danmu",
                l = a(u);
            if (!l) {
                var c = r.createElement("div"),
                    d = '<div class="button pill disable"> 開啟/關閉彈幕請點 <i class="material-icons" style="vertical-align:middle">question_answer</i> 圖示</div>';
                c.className = "vjs-overlay vjs-overlay-bottom-right", c.innerHTML = d, i.el().appendChild(c), i.setTimeout(function() {
                    try {
                        i.el().removeChild(c)
                    } catch (e) {}
                }, 8e3)
            }
        };
    n.registerPlugin("persistdanmutoggle", o)
}),
function(e) {
    "function" == typeof define && define.amd ? define("peresistindent", ["videojs"], function(t) {
        e(window, document, t, jQuery)
    }) : e(window, document, videojs, jQuery)
}(function(e, t, n, i) {
    var r = function() {
            try {
                return e.localStorage.setItem("teehee_indent", "teehee"), e.localStorage.removeItem("teehee_indent"), !0
            } catch (t) {
                return !1
            }
        },
        a = function(t) {
            return r() ? e.localStorage.getItem(t) : null
        },
        s = function(t, n) {
            return r() ? e.localStorage.setItem(t, n) : null
        },
        o = function(e) {
            e.indent.el().classList.add("vjs-indent-enable"), e.indent.el().title = "一般模式", e.subtitle.classList.add("vjs-hidden"), e.videoframe.classList.add("vjs-fullwindow")
        },
        u = function(e) {
            e.indent.el().classList.remove("vjs-indent-enable"), e.indent.el().title = "劇院模式", e.subtitle.classList.remove("vjs-hidden"), e.videoframe.classList.remove("vjs-fullwindow"), e.video.style.paddingBottom = "56.25%"
        },
        l = {
            namespace: ""
        },
        c = function(e) {
            var i = this,
                r = i.controlBar,
                c = t,
                d = n.mergeOptions(l, e),
                h = d.namespace + "_indent",
                p = a(h),
                f = {
                    indent: r.getChildById("theaterToggle"),
                    subtitle: c.getElementsByClassName("subtitle")[0],
                    videoframe: c.getElementsByClassName("videoframe")[0],
                    video: c.getElementsByClassName("video")[0]
                };
            "on" == p ? o(f) : u(f), f.indent.on("click", function() {
                this.el().classList.contains("vjs-indent-enable") ? (u(f), s("ANIME_indent", "off")) : (o(f), s("ANIME_indent", "on")), i.el().focus(), i.danmu.cmManager.setBounds()
            })
        };
    n.registerPlugin("persistindent", c)
}),
function(e) {
    "function" == typeof define && define.amd ? define("peresistquality", ["videojs"], function(t) {
        e(window, document, t)
    }) : e(window, document, videojs)
}(function(e, t, n) {
    var i = function() {
            try {
                return e.localStorage.setItem("teehee_quality", "teehee"), e.localStorage.removeItem("teehee_quality"), !0
            } catch (t) {
                return !1
            }
        },
        r = function(t) {
            return i() ? e.localStorage.getItem(t) : null
        },
        a = function(t, n) {
            return i() ? e.localStorage.setItem(t, n) : null
        },
        s = {
            namespace: ""
        },
        o = function(e) {
            var t = this,
                i = n.mergeOptions(s, e),
                o = i.namespace + "_quality",
                u = r(o);
            if (t.on("changeRes", function() {
                a(o, t.currentRes)
            }), t.enablePQ && null !== u) try {
                t.changeRes(u)
            } catch (l) {}
        };
    n.registerPlugin("persistquality", o)
}),
function(e) {
    "function" == typeof define && define.amd ? define("peresistquizprompt", ["videojs"], function(t) {
        e(window, document, t, jQuery)
    }) : e(window, document, videojs, jQuery)
}(function(e, t, n, i) {
    var r = function() {
            try {
                return e.localStorage.setItem("teehee_quizprompt", "teehee"), e.localStorage.removeItem("teehee_quizprompt"), !0
            } catch (t) {
                return !1
            }
        },
        a = function(t) {
            return r() ? e.localStorage.getItem(t) : null
        },
        s = function(t, n) {
            return r() ? e.localStorage.setItem(t, n) : null
        },
        o = {
            namespace: ""
        },
        u = function(e) {
            var i = this,
                r = t,
                u = !0,
                l = n.mergeOptions(o, e),
                c = l.namespace + "_quizprompt",
                d = a(c);
            i.on("timeupdate", function() {
                if (u && !d && i.total_time >= 1320) {
                    var e = r.createElement("div"),
                        t = '<div class="button pill">影片最後有每天一次的動漫通抽獎喔！<a href="#">我知道了</a></div>';
                    e.className = "vjs-overlay vjs-overlay-bottom-right", e.innerHTML = t, e.onclick = function() {
                        i.el().removeChild(e), s(c, "true")
                    }, i.el().appendChild(e), i.setTimeout(function() {
                        try {
                            i.el().removeChild(e)
                        } catch (t) {}
                    }, 5e3), u = !1
                }
            })
        };
    n.registerPlugin("persistquizprompt", u)
}),
function(e) {
    "function" == typeof define && define.amd ? define("progresstip", ["videojs"], function(t) {
        e(t, jQuery)
    }) : e(videojs, jQuery)
}(function(e, t) {
    var n = function() {
            try {
                return window.localStorage.setItem("teehee_progress", "teehee"), window.localStorage.removeItem("teehee_progress"), !0
            } catch (e) {
                return !1
            }
        },
        i = function(e, t) {
            return n() ? window.localStorage.setItem(e, t) : null
        },
        r = function(e) {
            var n;
            n = function() {
                if (!this.flag) {
                    this.flag = !0;
                    var e = this;
                    i("ANIME_totalTime", e.duration()), t(".vjs-progress-control").after(t('<div id="vjs-tip" class="vjs-tip"><div id="vjs-tip-arrow" class="vjs-tip-arrow"></div><div id="vjs-tip-inner" class="vjs-tip-inner"></div></div><div id="vjs-menu-tip" class="vjs-tip"><div id="vjs-menu-tip-inner" class="vjs-tip-inner"></div></div>')), t(".vjs-progress-control").on("mousemove", function(n) {
                        var i, r, a;
                        r = e.controlBar.progressControl.seekBar;
                        var s = n.pageX - t(r.el()).offset().left;
                        s /= r.width(), s = Math.floor(1e3 * s) / 1e3, a = s * e.duration(), a >= e.duration() && (a -= .1), 0 >= a && (a = 0);
                        var o = parseInt(a, 10);
                        o = e.duration() > 3600 ? 60 * Math.floor(o / 60) : 10 * Math.floor(o / 10);
                        var u = ("0" + Math.floor(o / 3600)).slice(-2),
                            l = ("0" + Math.floor((o - 3600 * u) / 60)).slice(-2),
                            c = ("0" + o % 60).slice(-2),
                            d = "00" == u ? l + ":" + c : u + ":" + l + ":" + c;
                        t("#vjs-tip-inner").html(d), i = t(".vjs-control-bar").height(), t("#vjs-tip").css("top", n.pageY - t(this).offset().top - i - 20 + "px").css("left", n.pageX - t(this).offset().left - 30 + "px").css("visibility", "visible")
                    }), t(".vjs-show-tip").on("mousemove", function(e) {
                        var n = t(this).attr("title");
                        if (n) {
                            var i = t(this).parent().offset().left,
                                r = t(this).parent().width() - 50,
                                a = e.pageX - i;
                            a = a >= r ? r : a;
                            var s = t(this).width(),
                                o = a - s / 2;
                            return t("#vjs-menu-tip-inner").html(n), void t("#vjs-menu-tip").css("top", "-40px").css("left", o + "px").css("visibility", "visible")
                        }
                    }), t(".vjs-progress-control, .vjs-play-control, .vjs-show-tip").on("mouseout click", function() {
                        t("#vjs-tip").css("visibility", "hidden"), t("#vjs-menu-tip").css("visibility", "hidden")
                    })
                }
            }, this.on("canplay", n)
        };
    e.registerPlugin("progresstips", r)
}),
function(e) {
    "function" == typeof define && define.amd ? define("quality", ["videojs"], function(t) {
        e(t)
    }) : e(videojs)
}(function(e) {
    var t = {
            res_label: function(e) {
                return /^\d{5,}$/.test(e) ? this.humanRead(e, !0) : /^\d+$/.test(e) ? " " + e + "p" : " " + e
            },
            humanRead: function(e) {
                for (var t = 0; e > 1e3;) e /= 1e3, ++t;
                return " " + e.toFixed(0) + " " + ["bps", "kbps", "mbps"][t]
            },
            hasLocalStorage: function() {
                try {
                    return window.localStorage.setItem("teehee", "teehee"), window.localStorage.removeItem("teehee"), !0
                } catch (e) {
                    return !1
                }
            },
            getStorageItem: function(e) {
                return t.hasLocalStorage() ? window.localStorage.getItem(e) : null
            },
            setStorageItem: function(e, n) {
                return t.hasLocalStorage() ? window.localStorage.setItem(e, n) : null
            }
        },
        n = e.getComponent("MenuItem"),
        i = e.getComponent("MenuButton");
    e.ResolutionMenuItem = videojs.extend(n, {
        call_count: 0,
        constructor: function(i, r) {
            if (r.label = t.res_label(r.text), r.selectable = !0, i.localize("Auto") === r.res.toString()) {
                var a = this;
                i.on("changeRes", function() {
                    var e = a.el().firstChild;
                    i.tech_.hls.abr ? (e.innerHTML = i.localize("Auto") + " " + t.res_label(i.tech_.hls.playlists.media().attributes.RESOLUTION.height), document.getElementById("li_PQ").classList.remove("vjs-selected")) : e.innerHTML = i.localize("Auto")
                })
            }
            if (n.call(this, i, r), this.resolution = r.res, "固定畫質" !== r.res.toString()) this.on(["click", "tap"], this.onClick), this.storage_key = "ANIME_PQ", i.on("changeRes", e.bind(this, function() {
                i.getCurrentRes() == this.resolution ? (this.selected(!0), this.call_count = 1) : (this.selected(!1), this.call_count = 0), document.getElementById("ani_video").focus()
            }));
            else {
                this.on(["click", "tap"], this.onClickPQ), this.storage_key = "ANIME_PQ", this.el().id = "li_PQ";
                var s = t.getStorageItem(this.storage_key);
                i.enablePQ = !1, s && "on" == s ? (this.el().classList.add("vjs-selected"), i.enablePQ = !0) : (this.el().classList.remove("vjs-selected"), i.enablePQ = !1)
            }
        }
    }), e.ResolutionMenuItem.prototype.onClick = function() {
        if (!(this.call_count > 0)) {
            var e = this.player(),
                n = document;
            if (e.fakeFHD && "1080" == this.resolution) {
                var i = e.el().getElementsByClassName("video-login-wrapper")[0];
                document.getElementById("resList");
                return i.classList.remove("vjs-hidden"), e.paused() && i.classList.add("paused"), e.pause(), this.selected(!1), !1
            }
            var r = n.getElementsByClassName("vjs-switchRes-button")[0],
                a = (n.getElementById("resList"), n.getElementById("resButton")),
                s = e.currentTime(),
                o = e.el().classList.contains("vjs-playing") ? 1 : 0;
            a.classList.add("vjs-res-enable"), setTimeout(function() {
                a.classList.remove("vjs-res-enable")
            }, 3e3), e.changeRes(this.resolution), e.localize("Auto") != this.resolution && (e.currentTime(s - 10), e.pause(), r.classList.remove("vjs-hidden"), r.innerHTML = "畫質變更中，請稍候...", setTimeout(function() {
                e.currentTime(s), o && e.play(), r.classList.add("vjs-hidden")
            }, 3e3)), e.enablePQ || (jQuery("#li_PQ").addClass("vjs-selected"), e.enablePQ = !0, t.setStorageItem(this.storage_key, "on"))
        }
    }, e.ResolutionMenuItem.prototype.onClickPQ = function() {
        var e = this.player();
        e.enablePQ ? (this.el().classList.remove("vjs-selected"), e.enablePQ = !1, t.setStorageItem(this.storage_key, "off")) : (this.el().classList.add("vjs-selected"), e.enablePQ = !0, t.setStorageItem(this.storage_key, "on"))
    }, e.ResolutionSelector = videojs.extend(i, {
        constructor: function(e, t) {
            e.availableRes = t.available_res, i.call(this, e, t), this.el().id = t.id, this.el().classList.add(t.className), this.el().firstChild.firstChild.innerHTML = t.buttonText, this.el().firstChild.id = "resList"
        }
    }), e.ResolutionSelector.prototype.createItems = function() {
        var t, n = this.player(),
            i = [];
        for (t in n.availableRes) "length" != t && i.push(new e.ResolutionMenuItem(n, {
            res: t,
            text: n.availableRes[t]["data-text"]
        }));
        return i.sort(function(e, t) {
            return "undefined" == typeof e.resolution ? -1 : parseInt(t.resolution) - parseInt(e.resolution)
        }), i
    };
    var r = function(t) {
        var n = this,
            i = e.mergeOptions({
                default_res: "",
                force_types: !1
            }, t || {});
        i.default_res && "string" == typeof i.default_res ? i.default_res.split(",") : [];
        "function" != typeof n.localize && (n.localize = function(e) {
            return e
        }), n.getCurrentRes = function() {
            try {
                return n.currentRes
            } catch (e) {
                return
            }
        }, n.changeRes = function(e) {
            if (n.getCurrentRes() == e || !n.availableRes || !n.availableRes[e]) return !1;
            var t = n.qualityLevels();
            if (n.localize("Auto") === e) {
                for (var i = 0; i < t.length; i++) {
                    var r = t[i];
                    r.enabled = !0
                }
                n.tech_.hls.abr = !0
            } else {
                for (var i = 0; i < t.length; i++) {
                    var r = t[i];
                    r.height == e ? r.enabled = !0 : r.enabled = !1
                }
                n.tech_.hls.abr = !1
            }
            return n.currentRes = e, n.trigger("changeRes"), !0
        }, n.addResButton = function(t) {
            var i = document.createElement("div");
            i.className = "vjs-switchRes-button vjs-hidden", n.el().appendChild(i);
            var r, a, s = {
                    length: 0
                },
                o = n.localize("Auto"),
                u = "固定畫質",
                l = n.qualityLevels();
            n.tech_.hls.representations().forEach(function(e) {
                l.addQualityLevel(e)
            });
            for (var c = 0; c < l.length; c++) {
                var d = l[c];
                r = d.height ? d.height : d.width, "object" != typeof s[r] && (s[r] = [], s.length++), 1080 == r ? s[r]["data-text"] = r + 'p <span class="vipmark">vip</span>' : s[r]["data-text"] = r
            }
            if (s[o] = [], s[u] = [], s.length += 2, s[o]["data-text"] = o, s[u]["data-text"] = u, n.fakeFHD) {
                r = 1080, s[r] = [], s[r]["data-text"] = r + 'p <span class="vipmark">vip</span>', s.length++;
                var h = document,
                    p = h.createElement("a"),
                    c = h.createElement("i"),
                    f = h.createElement("h2"),
                    m = h.createElement("div"),
                    g = m.cloneNode(!1),
                    v = m.cloneNode(!1),
                    y = p.cloneNode(!1),
                    _ = c.cloneNode(!1),
                    b = f.cloneNode(!1),
                    T = p.cloneNode(!1);
                v.className = "video-login", b.innerHTML = "需成為VIP會員才能選擇此畫質喔！", T.className = "signUp-vip", T.href = "https://ani.gamer.com.tw/animePay.php", T.target = "_blank", T.innerHTML = "<p>成為VIP！</p>", y.className = "cancel", y.href = "#", _.className = "material-icons", _.innerHTML = "close", y.onclick = function() {
                    var e = n.el().getElementsByClassName("video-login-wrapper")[0];
                    e.classList.add("vjs-hidden"), e.classList.contains("paused") ? e.classList.remove("paused") : n.play()
                }, g.className = "video-login-wrapper vjs-hidden", v.appendChild(b), v.appendChild(T), y.appendChild(_), g.appendChild(y), g.appendChild(v), n.el().appendChild(g)
            }
            a = new e.ResolutionSelector(n, {
                id: "resButton",
                className: "vjs-res-button",
                buttonText: "",
                available_res: s
            }), n.controlBar.el().appendChild(a.el()), t();
            for (var S, k = n.textTracks(), c = 0; c < k.length; c++) "segment-metadata" === k[c].label && (S = k[c]);
            var w;
            "disabled" !== S.mode ? S.on("cuechange", function() {
                var e = S.activeCues[0];
                e && (w !== e.value.playlist && (this.resolution = e.value.resolution.height, void 0 == n.getCurrentRes() && (n.currentRes = this.resolution), n.trigger("changeRes")), w = e.value.playlist)
            }) : (this.resolution = n.tech_.hls.playlists.media().attributes.RESOLUTION.height, void 0 == n.getCurrentRes() && (n.currentRes = this.resolution), n.trigger("changeRes"))
        }
    };
    e.registerPlugin("resolutionselector", r)
}),
function(e) {
    "function" == typeof define && define.amd ? define("qualitysingle", ["videojs"], function(t) {
        e(t)
    }) : e(videojs)
}(function(e) {
    var t = {
            res_label: function(e) {
                return /^\d{5,}$/.test(e) ? this.humanRead(e, !0) : /^\d+$/.test(e) ? " " + e + "p" : " " + e
            },
            humanRead: function(e) {
                for (var t = 0; e > 1e3;) e /= 1e3, ++t;
                return " " + e.toFixed(0) + " " + ["bps", "kbps", "mbps"][t]
            }
        },
        n = e.getComponent("MenuItem"),
        i = e.getComponent("MenuButton");
    e.SingleMenuItem = videojs.extend(n, {
        constructor: function(e, i) {
            i.label = t.res_label(i.text), i.selectable = !0, n.call(this, e, i), this.resolution = i.res, this.on(["click", "tap"], this.onClick), "360" == this.resolution && this.selected(!0)
        }
    }), e.SingleMenuItem.prototype.onClick = function() {
        if ("360" != this.resolution) {
            var e = this.player(),
                t = e.el().getElementsByClassName("video-login-wrapper")[0];
            document.getElementById("resList");
            t.classList.remove("vjs-hidden"), e.paused() && t.classList.add("paused"), e.pause(), this.selected(!1)
        }
    }, e.SingleSelector = videojs.extend(i, {
        constructor: function(e, t) {
            e.availableRes = t.available_res, i.call(this, e, t), this.el().id = t.id, this.el().classList.add(t.className), this.el().firstChild.firstChild.innerHTML = t.buttonText, this.el().firstChild.id = "resList"
        }
    }), e.SingleSelector.prototype.createItems = function() {
        var t, n = this.player(),
            i = [];
        for (t in n.availableRes) "length" != t && i.push(new e.SingleMenuItem(n, {
            res: t,
            text: n.availableRes[t]["data-text"]
        }));
        return i.sort(function(e, t) {
            return "undefined" == typeof e.resolution ? -1 : parseInt(t.resolution) - parseInt(e.resolution)
        }), i
    };
    var r = function(t) {
        var n = this;
        n.changeRes = function() {
            return !1
        }, n.addResButton = function() {
            var t = document,
                i = t.createElement("a"),
                r = t.createElement("b"),
                a = t.createElement("i"),
                s = t.createElement("p"),
                o = t.createElement("h2"),
                u = t.createElement("h3"),
                l = t.createElement("div"),
                c = u.cloneNode(!1),
                d = s.cloneNode(!1),
                h = i.cloneNode(!1),
                p = u.cloneNode(!1),
                f = s.cloneNode(!1),
                m = r.cloneNode(!1),
                g = i.cloneNode(!1),
                v = o.cloneNode(!1),
                y = l.cloneNode(!1),
                _ = i.cloneNode(!1),
                b = a.cloneNode(!1),
                T = l.cloneNode(!1);
            c.innerHTML = "已有帳號", d.innerHTML = '<i class="material-icons">person</i></i>登入', h.href = "https://user.gamer.com.tw/login.php", p.innerHTML = "還沒有帳號？", f.innerHTML = '<i class="material-icons">person_add</i></i>註冊', m.innerHTML = "非常簡單！", g.className = "reg", g.href = "https://user.gamer.com.tw/regS1.php", v.innerHTML = "更改畫質需要先登入巴哈帳號喔！", y.className = "video-login", _.className = "cancel", _.href = "#", b.className = "material-icons", b.innerHTML = "close", _.onclick = function() {
                var e = n.el().getElementsByClassName("video-login-wrapper")[0];
                e.classList.add("vjs-hidden"), e.classList.contains("paused") ? e.classList.remove("paused") : n.play()
            }, T.className = "video-login-wrapper vjs-hidden", h.appendChild(c), h.appendChild(d), g.appendChild(p), g.appendChild(f), g.appendChild(m), y.appendChild(v), y.appendChild(h), y.appendChild(g), _.appendChild(b), T.appendChild(_), T.appendChild(y), n.el().appendChild(T);
            var S, k = {
                    length: 0
                },
                w = n.qualityLevels();
            n.tech_.hls.representations().forEach(function(e) {
                w.addQualityLevel(e)
            });
            for (var a = 0; a < w.length; a++) {
                var C = w[a];
                S = C.height ? C.height : C.width, "360" == S ? C.enabled = !0 : C.enabled = !1, "object" != typeof k[S] && (k[S] = [], k.length++), k[S]["data-text"] = S
            }
            "FHD" === animefun.quality && (S = 1080, k[S] = [], k[S]["data-text"] = S + 'p <span class="vipmark">vip</span>'), singleSelector = new e.SingleSelector(n, {
                id: "resButton",
                className: "vjs-res-button",
                buttonText: "",
                available_res: k
            }), n.controlBar.el().appendChild(singleSelector.el())
        }
    };
    e.registerPlugin("resolutionsingle", r)
}),
function(e) {
    "function" == typeof define && define.amd ? define("stopmask", ["videojs"], function(t) {
        e(window, t, jQuery)
    }) : e(window, videojs, jQuery)
}(function(e, t, n) {
    var i = {
        option: {},
        obj: {},
        el: {
            div: document.createElement("div"),
            a: document.createElement("a"),
            i: document.createElement("i"),
            p: document.createElement("p"),
            h1: document.createElement("h1"),
            h2: document.createElement("h2")
        },
        addMask: function(e, t) {
            var n = i.el.div.cloneNode(!1),
                r = i.el.h1.cloneNode(!1);
            r.innerHTML = t;
            var a = i.el.div.cloneNode(!1);
            a.className = "replay";
            var s = i.el.a.cloneNode(!1);
            s.href = "", s.onclick = function(t) {
                t.preventDefault(), n.classList.add("vjs-hidden"), e.currentTime(0), e.play()
            };
            var o = i.el.i.cloneNode(!1);
            o.className = "material-icons", o.innerHTML = "autorenew", o.style = "font-size: 48px";
            var u = i.el.p.cloneNode(!1);
            if (u.innerHTML = "重播", s.appendChild(o), s.appendChild(u), a.appendChild(s), i.option.nextsn) {
                var l = i.el.a.cloneNode(!1);
                l.href = "http://ani.gamer.com.tw/animeVideo.php?sn=" + i.option.nextsn;
                var c = i.el.i.cloneNode(!1);
                c.className = "material-icons", c.innerHTML = "skip_next", c.style = "font-size: 48px";
                var d = i.el.p.cloneNode(!1);
                d.innerHTML = "下一集", l.appendChild(c), l.appendChild(d), a.appendChild(l)
            }
            return n.appendChild(r), n.appendChild(a), n.className = "stop vjs-hidden", e.el().appendChild(n), n
        },
        initQuiz: function(e) {
            900 <= e.total_time && n.ajax({
                url: "/ajax/animeGetQuestion.php",
                data: "t=" + Date.now(),
                success: function(t) {
                    i.obj = JSON.parse(t), i.obj.error || i.addQuiz(e)
                },
                error: function() {
                    console.log("Error:: Can't get any question")
                }
            })
        },
        addQuiz: function(e) {
            var t = i.el.div.cloneNode(!1);
            t.className = "video-login-wrapper";
            var r = i.el.div.cloneNode(!1);
            r.className = "anime-quiz";
            var a = i.el.a.cloneNode(!1);
            a.href = "#", a.innerHTML = "<i class='material-icons'>close</i>", a.onclick = function(e) {
                e.preventDefault(), t.classList.add("vjs-hidden"), n.ajax({
                    type: "POST",
                    url: "/ajax/animeAnsQuestion.php",
                    data: "token=" + i.obj.token + "&ans=0"
                })
            };
            var s = i.el.p.cloneNode(!1);
            s.innerHTML = i.obj.question + " （作者：" + i.obj.userid + "）";
            var o = i.el.h2.cloneNode(!1);
            o.innerHTML = "動漫通<span>關連作品：" + i.obj.game + "</span>";
            var u = i.el.div.cloneNode(!1);
            u.className = "support", u.innerHTML = '<a href="https://www.facebook.com/animategamer/" target="_blank" ><i class="material-icons" style="vertical-align:middle">chevron_right</i> <span style="vertical-align:middle">粉絲團找答案</span></a>';
            var l = [];
            ["a1", "a2", "a3", "a4"].forEach(function(e, t) {
                l[e] = i.el.a.cloneNode(!1), l[e].innerHTML = i.obj[e], l[e].href = "#", l[e].dataset.value = ++t, l[e].onclick = i.checkAns
            }), o.appendChild(a), r.appendChild(o), r.appendChild(s), ["a1", "a2", "a3", "a4"].forEach(function(e) {
                r.appendChild(l[e])
            }), r.appendChild(u), t.appendChild(r), e.el().appendChild(t), i.el.anime_quiz = r, i.el.loginwrapper = t, ["seeked", "seeking", "playing"].forEach(function(n) {
                e.on(n, function() {
                    t.classList.add("vjs-hidden")
                })
            })
        },
        checkAns: function() {
            var e = this.dataset.value;
            n.ajax({
                type: "POST",
                url: "/ajax/animeAnsQuestion.php",
                data: "token=" + i.obj.token + "&ans=" + e + "&t=" + Date.now(),
                success: function(e) {
                    var t = JSON.parse(e),
                        n = i.el.a.cloneNode(!1);
                    n.href = "#", n.innerHTML = "結束動漫通", n.onclick = function(e) {
                        e.preventDefault(), i.el.loginwrapper.classList.add("vjs-hidden")
                    };
                    var r = i.el.a.cloneNode(!1);
                    if (r.href = "https://www.facebook.com/animategamer/", r.target = "_blank", r.innerHTML = "動畫瘋粉絲團", t.error) {
                        var a = "答題錯誤" === t.msg ? "很遺憾答錯囉！下次可以先上動畫瘋粉絲團找答案喔！" : t.msg;
                        i.el.anime_quiz.innerHTML = '<h2>動漫通</h2><p><i class="material-icons" style="vertical-align:middle;color:red">close</i><span style="vertical-align:middle;">' + a + "</span></p>", i.el.anime_quiz.appendChild(n), i.el.anime_quiz.appendChild(r)
                    } else {
                        i.el.anime_quiz.innerHTML = '<h2>動漫通</h2><div class="pic"><img src="https://i2.bahamut.com.tw/anime/award.png" alt=""></div><p class="get"><i class="material-icons" style="vertical-align:middle;color:lawngreen;">panorama_fish_eye</i><span style="vertical-align:middle">恭喜答對囉，抽個獎吧！</span><br></p>';
                        var s = i.el.a.cloneNode(!1);
                        s.innerHTML = "抽獎", s.href = "#", s.onclick = function(e) {
                            e.preventDefault(), i.el.anime_quiz.innerHTML = "<h2>動漫通</h2><p>" + t.gift + "<br>詳見站內信說明喔！</p>", i.el.anime_quiz.appendChild(n)
                        };
                        var o = document.getElementsByClassName("get")[0];
                        o.appendChild(s)
                    }
                },
                error: function() {
                    console.log("Error:: No response from quiz")
                }
            })
        }
    };
    stopmask = function(e, t) {
        i.option.nextsn = t, i.option.title = e;
        var n = this,
            r = i.addMask(n, e);
        ["seeked", "seeking", "playing"].forEach(function(e) {
            n.on(e, function() {
                r.classList.add("vjs-hidden")
            })
        }), n.on("ended", function() {
            this.bigPlayButton.hide(), r.classList.remove("vjs-hidden"), i.initQuiz(this)
        })
    }, t.registerPlugin("stopmask", stopmask)
}),
function(e) {
    if ("object" == typeof exports && "undefined" != typeof module) module.exports = e();
    else if ("function" == typeof define && define.amd) define("playbackrate", [], e);
    else {
        var t;
        t = "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : this, t.videojsPlaybackrateAdjuster = e()
    }
}(function() {
    return function e(t, n, i) {
        function r(s, o) {
            if (!n[s]) {
                if (!t[s]) {
                    var u = "function" == typeof require && require;
                    if (!o && u) return u(s, !0);
                    if (a) return a(s, !0);
                    var l = new Error("Cannot find module '" + s + "'");
                    throw l.code = "MODULE_NOT_FOUND", l
                }
                var c = n[s] = {
                    exports: {}
                };
                t[s][0].call(c.exports, function(e) {
                    var n = t[s][1][e];
                    return r(n ? n : e)
                }, c, c.exports, e, t, n, i)
            }
            return n[s].exports
        }
        for (var a = "function" == typeof require && require, s = 0; s < i.length; s++) r(i[s]);
        return r
    }({
        1: [
            function(e, t, n) {
                (function(e) {
                    "use strict";

                    function n(e) {
                        return e && "object" === ("undefined" == typeof e ? "undefined" : i(e)) && "default" in e ? e["default"] : e
                    }
                    var i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                            return typeof e
                        } : function(e) {
                            return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                        },
                        r = n("undefined" != typeof window ? window.videojs : "undefined" != typeof e ? e.videojs : null),
                        a = function(e, t) {
                            for (var n = [], i = 0; i < e.length; i++) n.push([e.start(i) / t, e.end(i) / t]);
                            return r.createTimeRange(n)
                        },
                        s = function(e) {
                            var t = void 0;
                            return e.on("ratechange", function() {
                                t.trigger("durationchange"), t.trigger("timeupdate")
                            }), {
                                setSource: function(e, t) {
                                    t(null, e)
                                },
                                setTech: function(e) {
                                    t = e
                                },
                                duration: function(t) {
                                    return t / e.playbackRate()
                                },
                                currentTime: function(t) {
                                    return t / e.playbackRate()
                                },
                                setCurrentTime: function(t) {
                                    return t * e.playbackRate()
                                },
                                buffered: function(t) {
                                    return a(t, e.playbackRate())
                                },
                                seekable: function(t) {
                                    return a(t, e.playbackRate())
                                },
                                played: function(t) {
                                    return a(t, e.playbackRate())
                                }
                            }
                        };
                    r.use("*", s), s.VERSION = "1.0.0", t.exports = s
                }).call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {});
            }, {}
        ]
    }, {}, [1])(1)
}),
function(e) {
    "function" == typeof define && define.amd ? define("err", ["videojs"], function(t) {
        e(window, t, jQuery)
    }) : e(window, videojs, jQuery)
}(function(e, t, n) {
    var i = function(e) {
        var t = this;
        t.dispose();
        var n = document.createElement("div"),
            i = n.cloneNode(!1),
            r = n.cloneNode(!1),
            a = n.cloneNode(!1),
            s = document.getElementsByClassName("video")[0];
        i.innerHTML = e, r.appendChild(i), r.className = "vjs-error-display", a.appendChild(r), a.className = "vjs-error", s.appendChild(a)
    };
    t.registerPlugin("errPageCCL", i)
}), define("app", [], function() {
    return {
        initialize: function() {
            function e(t) {
                var n = function() {
                    var e = document.getElementById("resButton");
                    if (t) {
                        var n = h.createElement("hr");
                        n.style.marginBottom = 0, n.style.marginTop = 0;
                        var i = e.querySelector("ul");
                        i.insertBefore(n, i.lastChild), d.enablePQ || d.changeRes("自動")
                    }
                    d.persistquality({
                        namespace: "ANIME"
                    })
                };
                try {
                    d.addResButton(n)
                } catch (i) {
                    console.log(i), d && d.addattempt && setTimeout(e, 3e3)
                }
            }

            function t(e) {
                var t = h.createElement("textarea");
                return t.innerHTML = e, t.value
            }

            function n(e) {
                d.danmu.cmManager.setBounds(), d.isFullscreen() ? (e.indent.hide(), e.fullscreen.el().title = "離開全螢幕", e.subtitle.classList.add("vjs-hidden")) : (e.indent.show(), e.fullscreen.el().title = "進入全螢幕", e.indent.el().classList.contains("vjs-indent-enable") || e.subtitle.classList.remove("vjs-hidden")), d.el().focus()
            }

            function i() {
                var e = "true",
                    t = setInterval(function() {
                        e || clearInterval(t)
                    }, 5e3)
            }

            function r(e) {
                if (d) {
                    d.dispose();
                    var t = "//ani.gamer.com.tw/anime403info.php",
                        n = h.createElement("div"),
                        i = n.cloneNode(!1),
                        r = n.cloneNode(!1),
                        a = n.cloneNode(!1),
                        s = h.getElementsByClassName("video")[0];
                    switch (e) {
                        case 1:
                        case 2:
                            i.innerHTML = "錯誤代碼1，影片傳輸中斷，請參考<a href='" + t + "'>可能原因</a>";
                            break;
                        case 3:
                            i.innerHTML = "網路中斷，請確認連線狀態！或嘗試重新整理 <br />";
                            break;
                        default:
                            i.innerHTML = "錯誤代碼2，無法取得影片，請參考<a href='" + t + "'>可能原因</a>"
                    }
                    r.appendChild(i), r.className = "vjs-error-display", a.appendChild(r), a.className = "vjs-error", s.appendChild(a), jQuery.ajax({
                        url: "/ajax/anime403.php?case=0&sn=" + animefun.videoSn + "&hash=" + animefun.uuid,
                        success: function() {}
                    })
                }
            }

            function a() {
                var e = d.currentTime();
                Math.abs(e - d.endPointer) > 5 ? (d.currentTime(1), d.endPointer = 1) : d.endPointer = d.currentTime()
            }

            function s() {
                d.danmu.cmManager.isAD = !0, d.adIsPlaying = !0, d.on("timeupdate", a);
                var e = h.createElement("a"),
                    t = '<a href="#" target="_blank" class="button pill"> 處理中，請稍後...</a>';
                e.className = "vjs-overlay vjs-overlay-bottom-left", e.innerHTML = t;
                var n = d.setTimeout(function() {
                        this.el().appendChild(e)
                    }, 5e3),
                    i = d.setTimeout(function() {
                        r()
                    }, 3e4);
                ["loadeddata", "timeupdate"].forEach(function(t) {
                    d.one(t, function() {
                        clearTimeout(n), clearTimeout(i);
                        try {
                            this.el().removeChild(e)
                        } catch (t) {}
                    })
                })
            }

            function o() {
                d.danmu.cmManager.isAD = !1, d.adIsPlaying = !1, d.off("timeupdate", a), d.setTimeout(function() {
                    this.overlay({
                        overlays: [{
                            start: "waiting",
                            end: "timeupdate",
                            align: "bottom-left",
                            content: '<div class="button pill" id="reportBtn">播放不順嗎? 點我回報</div>',
                            clickfunction: function() {
                                var e = document,
                                    t = e.getElementsByClassName("vjs-overlay");
                                this.firstChild.className = "button pill disable", this.firstChild.innerHTML = "感謝提供資訊，我們會努力改善，謝謝！", setTimeout(function() {
                                        t[0].style.display = "none"
                                    }, 2e3),
                                    function() {
                                        var e, t;
                                        for (t in d.overlay.eventListeners) e = d.overlay.eventListeners[t], d.off(e.type, e.fn)
                                    }();
                                var n = d.tech_.hls;
                                jQuery.ajax({
                                    type: "POST",
                                    url: "/ajax/laglog.php",
                                    data: "s={sn:" + animefun.videoSn + ",quality:" + n.playlists.media().attributes.RESOLUTION.height + ",bandwidth:" + playlists.media().attributes.BANDWIDTH + ",abr:" + n.abr + "}",
                                    success: function() {},
                                    dataType: "application/x-www-form-urlencoded"
                                })
                            }
                        }]
                    })
                }, 1e4), f.danmu.show(), d.danmu.load(), d.persistdanmutoggle({
                    namespace: "ANIME"
                }), animefun.checkdanmulist(animefun.danmu_status), d.one("playing", function() {
                    setTimeout(function() {
                        e(d.login)
                    }, 2e3), setTimeout(i, 1e4), this.breakPoint({
                        namespace: "ANIME"
                    });
                    var t = [{
                        sn: animefun.preSn,
                        el: f.pre
                    }, {
                        sn: animefun.nextSn,
                        el: f.next
                    }];
                    t.forEach(function(e) {
                        e.sn && (e.el.show(), e.el.on("click", function() {
                            window.location = "//ani.gamer.com.tw/animeVideo.php?sn=" + e.sn
                        }))
                    })
                }), d.one("timeupdate", function() {
                    jQuery.ajax({
                        url: "/ajax/videoStart.php?sn=" + animefun.videoSn,
                        success: function() {
                            d.logoImg && $(d.el()).append('<a href="' + d.logoURL + '" target="_blank" class="sponsorship-img" title="' + d.sponsorText + '"><img src="' + d.logoImg + '" alt="">')
                        }
                    }), n(f)
                }), d.one("breakpoint", function() {
                    var e = this;
                    this.on("pause", function() {
                        e.ended() || e.seeking() || e.bigPlayButton.show(), e.el().focus()
                    }), this.stopmask(t(animefun.title), animefun.nextSn)
                }), d.on("contextmenu", function(e) {
                    e.preventDefault()
                })
            }

            function u(e) {
                var t = jQuery.parseJSON(e);
                t.src && (d.adenable ? ($(".R18").show(), d.src({
                    src: t.src,
                    type: "application/x-mpegURL"
                }), setTimeout(function() {
                    $(".R18").remove(), d.play()
                }, 1e3)) : d.src({
                    src: t.src,
                    type: "application/x-mpegURL"
                }), l()), t.error && d.error(Number(t.error))
            }

            function l() {
                d.on("loadedmetadata", function() {
                    d.login ? d.resolutionselector() : d.resolutionsingle()
                }), d.addattempt = 2, d.hotkeys({
                    volumeStep: .1,
                    seekStep: 5,
                    enableMute: !0,
                    enableFullscreen: !0,
                    enableNumbers: !0,
                    alwaysCaptureHotkeys: !0
                }), d.login && d.persistquizprompt({
                    namespace: "ANIME"
                }), d.progresstips(), d.controlBar.playbackRateMenuButton.el().style.display = "block"
            }
            var c = function() {
                    function e() {
                        r.adTagXML = i(), d.vastClient(r), videojs.browser.IS_ANY_SAFARI && d.play(), d.controlBar.playbackRateMenuButton.el().style.display = "none", d.play(), $(".R18").hide(), $(".sponsorship-text").remove()
                    }

                    function t() {
                        n(getMinorAd()), e()
                    }

                    function n(e) {
                        d.adID = e[0], d.adURL = e[1], d.adSID = e[2], d.adType = e[3]
                    }

                    function i() {
                        function e(e) {
                            setTimeout(function() {
                                e(null, t)
                            }, 0)
                        }
                        var t = "" != typeof r.xml ? r.xml : "";
                        if ("" == t) {
                            var n = "https://gamer-cds.cdn.hinet.net/vod_gamer/_definst_/smil:gamer_ad/" + d.adID + "/hls-s-ae-2s.smil/playlist.m3u8";
                            t = '<VAST xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.0" xsi:noNamespaceSchemaLocation="vast.xsd"><Ad id="270"><InLine><AdSystem version="2.0"></AdSystem><AdTitle></AdTitle><Description></Description><Creatives><Creative sequence="1" AdID="270"><Linear skipoffset="00:00:30"><Duration>00:00:05</Duration><VideoClicks><ClickThrough><![CDATA[' + d.adURL + ']]></ClickThrough></VideoClicks><MediaFiles><MediaFile delivery="streaming" type="application/x-mpegURL" bitrate="400" width="640" height=""><![CDATA[' + n + "]]></MediaFile></MediaFiles></Linear></Creative></Creatives></InLine></Ad></VAST>"
                        }
                        return e
                    }
                    var r = {
                        adCancelTimeout: 1e4,
                        xml: ""
                    };
                    $(".video-cover-ncc").remove(), "facebook" === d.adType ? $.ajax({
                        url: "https://an.facebook.com/v1/instream/vast.xml",
                        method: "get",
                        xhrFields: {
                            withCredentials: !0
                        },
                        data: {
                            placementid: "999209800138733_1534512216608486",
                            pageurl: "https://ani.gamer.com.tw/animeVideo.php?sn=" + animefun.videoSn
                        },
                        dataType: "text"
                    }).done(function(n) {
                        var i = $.parseXML(n),
                            a = $(i),
                            s = a.find("Ad");
                        if ("" !== s.text()) {
                            var o = n,
                                u = a.find("AdParameters"),
                                l = $.parseJSON(u.text());
                            $.ajax({
                                url: l.video.videoURL
                            }).done(function() {
                                r.xml = o, d.userVolume = d.volume(), e()
                            }).fail(t)
                        } else t()
                    }).fail(t) : e()
                },
                d = this;
            d.endPointer = 0, d.danmuCCL(), d.persistvolume({
                namespace: "ANIME"
            }), d.persistdanmu({
                namespace: "ANIME"
            });
            var h = document,
                p = d.controlBar,
                f = {
                    subtitle: h.getElementsByClassName("subtitle")[0],
                    pre: p.getChildById("preEpisode"),
                    next: p.getChildById("nextEpisode"),
                    indent: p.getChildById("theaterToggle"),
                    fullscreen: p.getChildById("fullscreenToggle"),
                    danmu: p.getChildById("danmuToggle"),
                    playbackRate: p.getChildById("playbackRateMenuButton")
                };
            d.persistvolume({
                namespace: "ANIME"
            }), d.persistindent({
                namespace: "ANIME"
            }), animefun.checkdanmulist(animefun.danmu_status);
            var m = animefun.renderSublist();
            if (jQuery("#sub_list").scroll(m), d.loadingSpinner.hide(), d.r18)
                if (d.ageGate(d.r18), d.adenable) $("#adult").click(c);
                else {
                    var g = document.getElementsByClassName("R18")[0];
                    $("#adult").click(function() {
                        d.el().removeChild(g), $(".sponsorship-text").remove(), d.play()
                    })
                }
            d.adenable ? (d.elapse({
                adenable: !0
            }), d.on(["vast.adError", "vpaid.AdError"], function() {}), d.one(["vast.adStart", "vpaid.adStart"], function() {
                "facebook" === d.adType && (d.volume(.3), $(".vjs-control-bar").css("visibility", "visible"), $(".vjs-control-bar").css("opacity", "0.75")), s(), jQuery.ajax({
                    url: "/ajax/videoCastcishu.php?s=" + d.adSID + "&sn=" + animefun.videoSn,
                    success: function() {}
                })
            }), d.one("vast.adEnd", function() {
                o(), jQuery.ajax({
                    url: "/ajax/videoCastcishu.php?s=" + d.adSID + "&sn=" + animefun.videoSn + "&ad=end",
                    success: function() {
                        jQuery.ajax({
                            url: "/ajax/m3u8.php?sn=" + animefun.videoSn + "&device=" + animefun.getdeviceid(),
                            success: u
                        })
                    }
                })
            }), d.one("vast.contentStart", function() {
                "facebook" === d.adType && d.volume(d.userVolume), $(".vjs-control-bar").css("visibility", ""), $(".vjs-control-bar").css("opacity", "")
            })) : (d.elapse({
                adenable: !1
            }), d.one("play", function() {
                s(), o()
            }), jQuery.ajax({
                url: "/ajax/m3u8.php?sn=" + animefun.videoSn + "&device=" + animefun.getdeviceid(),
                success: u
            })), d.one("play", function() {
                jQuery.ajax({
                    url: "/ajax/checklock.php?device=" + animefun.getdeviceid() + "&sn=" + animefun.videoSn,
                    success: function() {}
                })
            }), d.on("fullscreenchange", function() {
                n(f)
            }), d.on("play", function() {
                this.bigPlayButton.hide(), this.el().focus()
            }), d.on("error", function(e) {
                var t = this.error().message;
                setTimeout(function() {
                    d.errPageCCL(d.localize(t))
                }, 500)
            }), d.on("useractive", function(e) {
                d.pageY < jQuery("video").offset().top + jQuery("video").height() - 60 && 1 != d.pageTouch && d.userActive(!1)
            }), d.on("touchstart", function(e) {
                d.pageTouch = !0
            }), d.on("mousemove", function(e) {
                d.pageY = e.pageY, clearTimeout(d.hidemouse), jQuery("#ani_video").css("cursor", "default"), d.hidemouse = setTimeout(function() {
                    jQuery("#ani_video").css("cursor", "")
                }, 2e3)
            })
        }
    }
}), define("init", ["videojs", "app"], function(e, t) {
    function n() {
        var e = (new Date).getTime();
        window.performance && "function" == typeof window.performance.now && (e += performance.now());
        var t = "xxxxxxxxxxxx".replace(/[x]/g, function(t) {
            var n = (e + 16 * Math.random()) % 16 | 0;
            return e = Math.floor(e / 16), ("x" == t ? n : 3 & n | 8).toString(16)
        });
        return t
    }

    function i(e) {
        var t = document.createElement("video-js");
        if (t.className = "video-js vjs-default-skin", t.id = "ani_video", e) {
            var n = document.createElement("source");
            n.src = "//gamer-cds.cdn.hinet.net/vod_gamer/_definst_/smil:gamer_ad/41920/hls-s-ae-2s.smil/playlist.m3u8", n.type = "application/x-mpegURL", t.appendChild(n)
        }! function() {
            try {
                var e = document.getElementById("video-container");
                e.appendChild(t)
            } catch (n) {}
        }()
    }

    function r() {
        function n(e) {
            var t = e.getChildById("fullscreenToggle"),
                n = e.getChildById("muteToggle"),
                i = e.getChildById("nextEpisode"),
                r = e.getChildById("preEpisode"),
                a = e.getChildById("theaterToggle");
            t.el().title = "進入全螢幕", t.el().classList.add("vjs-show-tip"), n.el().classList.add("vjs-show-tip"), i.el().title = "下一集", i.el().className = "vjs-next-button vjs-control vjs-show-tip vjs-hidden", r.el().title = "上一集", r.el().className = "vjs-pre-button vjs-control vjs-show-tip vjs-hidden", a.el().className = "vjs-indent-button vjs-control vjs-show-tip"
        }

        function r() {
            var e = this,
                i = e.controlBar;
            if (n(i), e.bigPlayButton.hide(), e.login = 1 != o.login ? !1 : !0, e.r18 = o.r18 ? o.r18 : void 0, e.promote = void 0 !== o.promote ? o.promote : [], o.vip || "FHD" !== animefun.quality ? e.fakeFHD = !1 : e.fakeFHD = !0, !o.vip) {
                var r = "";
                u = getSponsorVideoAd(o.animeSn), u && (l = u[0], c = u[1], d = u[2], h = u[3], r = u[4]);
                var a = getSponsorLogoAd(o.animeSn);
                a && (e.logoImg = a[4], e.logoURL = a[1], !r && a[5] && (r = a[5])), e.sponsorText = r
            }
            e.adID = l, e.adSID = d, e.adURL = c, e.adType = h, e.adIsPlaying = !1, 1 != o.time ? e.adenable = !0 : e.adenable = !1, t.initialize.apply(e)
        }

        function p() {
            var e = this;
            9 == f ? (e.dispose(), a(e)) : 14 == f ? (e.dispose(), s(e)) : e.error(f)
        }
        if (e.addLanguage("zh", {
            Play: "播放",
            Pause: "暫停",
            "Current Time": "目前時間",
            "Duration Time": "總共時間",
            "Remaining Time": "剩餘時間",
            "Stream Type": "串流類型",
            LIVE: "直播",
            Loaded: "載入完畢",
            Progress: "進度",
            Fullscreen: "全螢幕",
            "Non-Fullscreen": "退出全螢幕",
            Mute: "靜音",
            Unmuted: "取消靜音",
            "Playback Rate": " 播放速率",
            Subtitles: "字幕",
            "subtitles off": "關閉字幕",
            Captions: "內嵌字幕",
            "You aborted the video playback": "影片播放已終止",
            "A network error caused the video download to fail part-way.": "網路錯誤導致影片下載失敗。",
            "The media could not be loaded, either because the server or network failed or because the format is not supported.": "影片因格式不支援或者伺服器或網路的問題無法載入。",
            "The media playback was aborted due to a corruption problem or because the media used features your browser did not support.": "影片由於一些問題或使用的瀏覽器不支持的功能而播放中止。",
            "The media is encrypted and we do not have the keys to decrypt it.": "影片已加密，無法解密。",
            "Video doesn't exist.": "錯誤的影片位置！",
            "Unauthorized devices.": "錯誤代碼1，影片傳輸中斷，請參考<a href='//ani.gamer.com.tw/anime403info.php'>可能原因</a>",
            "Duplicate login.": "重複登入，本服務僅限一台裝置使用，請暫停其他裝置播放！",
            "To access the video, please login": "<a href='//user.gamer.com.tw/login.php'>請先登入</a>",
            "The video playback was aborted due to a corruption problem.": "網路異常，無法取得影片！請嘗試重新整理頁面",
            "Our Services are available in Taiwan.": "本服務授權範圍僅限台灣地區，如果您為外國用戶或使用變更IP的插件或軟體，將無法正常使用本服務。",
            "Oops, something went wrong.": "播放器未正確載入，可能原因如下： <br />1.網路異常，請嘗試重新整理頁面 <br />2.受瀏覽器的擋廣告插件或是防毒軟體影響，請將 gamer.com.tw 加入白名單或是關閉插件。",
            "Sorry, you need to register for three months to use the service.": "很抱歉！使用本服務須註冊滿三個月。",
            "Paid Member only.": "本動畫僅供付費會員觀看喔！。"
        }), o.error) {
            i(!1);
            var f = Number(o.error),
                m = e("ani_video", {
                    language: "zh"
                }, p);
            m.ready(p)
        } else {
            if (i(!0), e.browser.IS_ANY_SAFARI || e.browser.IS_EDGE) var g = {
                nativeAudioTracks: !1,
                nativeVideoTracks: !1,
                hls: {
                    overrideNative: !0,
                    withCredentials: !1
                }
            };
            else var g = {
                hls: {
                    withCredentials: !1
                }
            };
            var m = e("ani_video", {
                resizeManager: !1,
                preload: "auto",
                techOrder: ["html5"],
                controlBar: {
                    children: [{
                        name: "playToggle",
                        id: "playToggle"
                    }, {
                        name: "progressControl",
                        id: "progressControl"
                    }, {
                        name: "button",
                        id: "preEpisode"
                    }, {
                        name: "button",
                        id: "nextEpisode"
                    }, {
                        name: "playbackRateMenuButton",
                        id: "playbackRateMenuButton"
                    }, {
                        name: "currentTimeDisplay",
                        id: "currentTimeDisplay"
                    }, {
                        name: "timeDivider",
                        id: "timeDivider"
                    }, {
                        name: "durationDisplay",
                        id: "durationDisplay"
                    }, {
                        name: "muteToggle",
                        id: "muteToggle"
                    }, {
                        name: "volumeControl",
                        id: "volumeControl"
                    }, {
                        name: "button",
                        id: "theaterToggle"
                    }, {
                        name: "fullscreenToggle",
                        id: "fullscreenToggle"
                    }]
                },
                controls: !0,
                language: "zh",
                playbackRates: [1, 1.5, 2],
                html5: g
            });
            m.ready(r), m.bigPlayButton.hide(), delete e.players.ani_video
        }
    }

    function a(e) {
        var t = document,
            n = t.createElement("div"),
            i = t.createElement("a"),
            r = t.createElement("div"),
            a = t.getElementsByClassName("video")[0];
        n.className = "login", n.innerHTML = '<span class="material-icons">person</span><br> 請先登入', i.href = "//user.gamer.com.tw/login.php", r.className = "stop", i.appendChild(n), r.appendChild(i), a.appendChild(r)
    }

    function s(e) {
        var t = document,
            n = t.createElement("div"),
            i = t.createElement("div"),
            r = t.getElementsByClassName("video")[0];
        n.className = "R18", i.className = "video-charge-check", i.innerHTML = '<h2> 本動畫僅供付費會員觀看喔！</h2><a href="//ani.gamer.com.tw/animePay.php" target="_blank">參考付費方案</a>', n.appendChild(i), r.appendChild(n)
    }
    var o = {};
    try {
        var u = getMajorAd(),
            l = u[0],
            c = u[1],
            d = u[2],
            h = u[3];
        l || "facebook" === h || (o.error = 12)
    } catch (p) {
        o.error = 12, Object.freeze(o)
    }
    return {
        initialize: function() {
            o.uuid = n(), animefun.uuid = o.uuid, jQuery.ajax({
                url: "/ajax/token.php?adID=" + l + "&sn=" + animefun.videoSn + "&device=" + animefun.getdeviceid() + "&hash=" + o.uuid,
                success: function(e) {
                    var t = jQuery.parseJSON(e);
                    if (!Object.isFrozen(o))
                        for (var n in t) o[n] = t[n];
                    r()
                },
                error: function() {
                    Object.isFrozen(o) || (o.error = 10), r()
                }
            })
        }
    }
}), requirejs.config({
    baseUrl: "//i2.bahamut.com.tw",
    waitSeconds: 0,
    paths: {
        order: "js/order",
        videojs: "js/videojs/video",
        hls: "js/videojs/videojs-http-streaming",
        qualitylevel: "js/videojs/videojs-contrib-quality-levels",
        vastvpaid: "js/videojs/videojs_5.vast.vpaid",
        peresistvolume: "js/videojs/videojs_persistvolume",
        peresistdanmu: "js/videojs/videojs_persistdanmu",
        peresistdanmutoggle: "js/videojs/videojs_persistdanmutoggle",
        peresistindent: "js/videojs/videojs_persistindent",
        peresistquality: "js/videojs/videojs_persistquality",
        peresistquizprompt: "js/videojs/videojs_persistquizprompt",
        danmu: "js/videojs/videojs_danmu",
        hotkeys: "js/videojs/videojs_hotkeys",
        quality: "js/videojs/videojs_quality_selector",
        qualitysingle: "js/videojs/videojs_quality_single",
        elapse: "js/videojs/videojs_elapse",
        agegate: "js/videojs/videojs_agegate",
        stopmask: "js/videojs/videojs_stopmask",
        overlay: "js/videojs/videojs_overlay",
        progresstip: "js/videojs/videojs_progresstip",
        breakpoint: "js/videojs/videojs_breakpoint",
        playbackrate: "js/videojs/videojs-playbackrate-adjuster",
        err: "js/videojs/videojs_errpage",
        init: "js/videojs/anime_init",
        app: "js/videojs/anime_app"
    },
    shim: {
        hls: {
            deps: ["videojs", "qualitylevel"]
        },
        qualitylevel: {
            deps: ["videojs"]
        },
        vastvpaid: {
            deps: ["videojs"]
        },
        playbackrate: {
            deps: ["videojs"]
        }
    },
    map: {
        "*": {
            "video.js": "videojs"
        }
    }
}), requirejs(["order!videojs", "order!hls", "order!qualitylevel", "order!vastvpaid", "order!agegate", "order!breakpoint", "order!elapse", "order!danmu", "order!hotkeys", "order!overlay", "order!peresistvolume", "order!peresistdanmu", "order!peresistdanmutoggle", "order!peresistindent", "order!peresistquality", "order!peresistquizprompt", "order!progresstip", "order!quality", "order!qualitysingle", "order!stopmask", "order!playbackrate", "order!err", "order!init", "order!app"], function(e, t, n, i, r, a, s, o, u, l, c, d, h, p, f, m, g, v, y, _, b, T, S, k) {
    S.initialize(), delete e.players.ani_video
}), define("js/videojs/anime_main", function() {});